<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ä¸ªäººå›¾åºŠ</title>
      <link href="/2023/03/15/drawing-bed/"/>
      <url>/2023/03/15/drawing-bed/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯å›¾åºŠ"><a href="#ä»€ä¹ˆæ˜¯å›¾åºŠ" class="headerlink" title="ä»€ä¹ˆæ˜¯å›¾åºŠ"></a>ä»€ä¹ˆæ˜¯å›¾åºŠ</h3><p>å›¾åºŠä¸€èˆ¬æ˜¯æŒ‡å‚¨å­˜å›¾ç‰‡çš„æœåŠ¡å™¨ï¼Œæœ‰å›½å†…å’Œå›½å¤–ä¹‹åˆ†ã€‚å›½å¤–çš„å›¾åºŠç”±äºæœ‰ç©ºé—´è·ç¦»ç­‰å› ç´ å†³å®šè®¿é—®é€Ÿåº¦å¾ˆæ…¢å½±å“å›¾ç‰‡æ˜¾ç¤ºé€Ÿåº¦ã€‚å›½å†…ä¹Ÿåˆ†ä¸ºå•çº¿ç©ºé—´ã€å¤šçº¿ç©ºé—´å’ŒcdnåŠ é€Ÿä¸‰ç§ã€‚</p><p>ä¸ªäººå›¾åºŠå…¶å®æ˜¯äº’è”ç½‘ä¸­å­˜å‚¨å›¾ç‰‡çš„ç©ºé—´ï¼Œä½œä¸ºä¸€ä¸ªäººçš„äº‘ç«¯å›¾ç‰‡é“¾æ¥</p><h3 id="ä¸ºä»€ä¹ˆè¦å›¾åºŠ"><a href="#ä¸ºä»€ä¹ˆè¦å›¾åºŠ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å›¾åºŠ"></a>ä¸ºä»€ä¹ˆè¦å›¾åºŠ</h3><p> å¤§éƒ¨åˆ†äººå†™åšå®¢éƒ½ç”¨<code>markdown</code>ï¼Œè€Œ<code>markdown</code>çš„å›¾ç‰‡æ˜¯é€šè¿‡é“¾æ¥çš„æ–¹å¼è¿›è¡Œä¼ è¾“çš„çš„ï¼Œå› æ­¤ï¼Œå¦‚æœæ˜¯åœ¨æœ¬ç”µè„‘ä¸Šç›´æ¥åµŒå…¥çš„æ–‡ä»¶æ²¡åŠæ³•åœ¨ç½‘ç»œä¸Šè®¿é—®ï¼ˆé™¤éä½ æŠŠç”µè„‘é•¿æ—¶é—´å¼€æœºå¹¶ä¸”å¼€æ”¾~æå…¶å±é™©ï¼‰ã€‚</p><p> å› æ­¤ä¸€ä¸ªäº‘å›¾ç‰‡é“¾æ¥å°±å¾ˆæœ‰å¿…è¦äº†ï¼Œè€Œç½‘ä¸Šç›´æ¥æ‰¾åˆ°çš„é“¾æ¥ä¸å…·æœ‰å¯é æ€§ï¼Œå¯èƒ½å“ªå¤©å°±æŒ‚äº†ï¼ˆè‡ªå·±æ­å›¾åºŠä¹Ÿä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™æŒ‚ï¼‰ï¼Œå› æ­¤æ­å»ºè‡ªå·±çš„å›¾åºŠè¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚</p><h3 id="å›¾åºŠç§ç±»"><a href="#å›¾åºŠç§ç±»" class="headerlink" title="å›¾åºŠç§ç±»"></a>å›¾åºŠç§ç±»</h3><h4 id="å›¾åºŠåˆ†ç±»"><a href="#å›¾åºŠåˆ†ç±»" class="headerlink" title="å›¾åºŠåˆ†ç±»"></a>å›¾åºŠåˆ†ç±»</h4><ul><li>å…¬å…±å›¾åºŠ</li><li>è‡ªå»ºå›¾åºŠ:äº‘æœåŠ¡(å¦‚ï¼šä¸ƒç‰›äº‘ã€é˜¿é‡Œäº‘ossã€è…¾è®¯äº‘cosç­‰)</li><li>è‡ªå»ºå›¾åºŠ:å¼€æºæ–¹æ¡ˆï¼ˆå¦‚ï¼šLycheeã€æ ‘æ´å¤–é“¾ï¼‰</li></ul><p>ç›®å‰å›¾åºŠå¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼Œå³å…¬å…±å›¾åºŠå’Œè‡ªå»ºå›¾åºŠ</p><p>å…¬å…±å›¾åºŠä¹Ÿå°±æ˜¯åˆ©ç”¨å…¬å…±æœåŠ¡çš„å›¾ç‰‡ä¸Šä¼ æ¥å£ï¼Œæ¥æä¾›å›¾ç‰‡å¤–é“¾çš„æœåŠ¡ï¼Œå¦‚å¾®åšå›¾åºŠç­‰</p><p>è‡ªå»ºå›¾åºŠï¼Œä¹Ÿå°±æ˜¯åˆ©ç”¨å„å¤§äº‘æœåŠ¡å•†æä¾›çš„å­˜å‚¨ç©ºé—´æˆ–è€…è‡ªå·±åœ¨ VPS ä¸Šä½¿ç”¨å¼€æºè½¯ä»¶æ¥æ­å»ºå›¾åºŠï¼Œå­˜å‚¨å›¾ç‰‡ï¼Œç”Ÿæˆå¤–é“¾æä¾›è®¿é—®ï¼Œæ¯”å¦‚ä¸ƒç‰›äº‘ã€Lychee å¼€æºè‡ªå»ºå›¾åºŠæ–¹æ¡ˆã€‚</p><p>ç›®å‰è‡ªå»ºå›¾åºŠæ–¹æ¡ˆæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯åˆ©ç”¨äº‘æœåŠ¡å•†æä¾›çš„å­˜å‚¨æœåŠ¡æ¥ä½œä¸ºå›¾åºŠï¼Œé€šè¿‡ API æ¥ç®¡ç†å›¾ç‰‡ï¼Œå¦ä¸€ç§æ˜¯åœ¨ VPS ä¸Šå®‰è£…å¼€æºçš„å›¾ç‰‡æˆ–æ–‡ä»¶ç®¡ç†ç¨‹åºï¼Œåªè¦èƒ½æä¾›å¤–é“¾ï¼ŒåŸºæœ¬éƒ½å¯ä»¥ä½œä¸ºå›¾åºŠæ¥ç”¨ã€‚</p><h4 id="å›¾åºŠå·¥å…·"><a href="#å›¾åºŠå·¥å…·" class="headerlink" title="å›¾åºŠå·¥å…·"></a>å›¾åºŠå·¥å…·</h4><p>è™½ç„¶å›¾åºŠé€‰æ‹©å¥½ï¼Œä½†æ˜¯å¯¹æ™®é€šç”¨æˆ·æ¥è¯´ï¼Œç›´æ¥ä½¿ç”¨å›¾åºŠ API å¾ˆéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©ä¸€äº›å·¥å…·æ–¹ä¾¿çš„ä¸Šä¼ å›¾ç‰‡ï¼Œä¸‹é¢å°±æ ¹æ® macOSã€Windowsã€Web åˆ†åˆ«æ¨èå‡ æ¬¾å·¥å…·ã€‚</p><p>macOSï¼š</p><ul><li><a href="https://link.juejin.cn/?target=https://itunes.apple.com/cn/app/id1101244278?ls=1&mt=12">iPic - Markdown å›¾åºŠã€æ–‡ä»¶ä¸Šä¼ å·¥å…·</a></li><li><a href="https://link.juejin.cn/?target=https://zh.mweb.im/">MWeb</a>ï¼ˆMarkdown å†™ä½œå·¥å…·ï¼Œä¹Ÿæ”¯æŒä¸Šä¼ å›¾ç‰‡ï¼‰</li></ul><p>Windowsï¼š</p><ul><li><a href="https://link.juejin.cn/?target=http://mpic.lzhaofu.cn/">MPic-å›¾åºŠç¥å™¨</a></li></ul><p>Webï¼š</p><ul><li>æ¯”å¦‚ã€Œæç®€å›¾åºŠã€æ’ä»¶ã€ã€Œå¾®åšå›¾åºŠã€ç­‰ç­‰</li></ul><h3 id="ä¸ƒç‰›äº‘å›¾åºŠ"><a href="#ä¸ƒç‰›äº‘å›¾åºŠ" class="headerlink" title="ä¸ƒç‰›äº‘å›¾åºŠ"></a>ä¸ƒç‰›äº‘å›¾åºŠ</h3><p>å…³äºä¸ƒç‰›äº‘çš„ä»‹ç»ï¼šä¸ƒç‰›æ˜¯ä¸€ä¸ªäº‘å­˜å‚¨æœåŠ¡å•†ï¼Œæ³¨å†Œå¹¶å®åè®¤è¯ä¹‹åï¼Œä½ å°†å…è´¹äº«æœ‰ 10GB å­˜å‚¨ç©ºé—´ï¼Œæ¯æœˆ 10GB ä¸‹è½½æµé‡ã€100 ä¸‡æ¬¡ GET è¯·æ±‚ã€ 10 ä¸‡æ¬¡ PUT/DELETE è¯·æ±‚ã€‚ä¸ƒç‰›çš„å®šä½ä¸æ˜¯åƒç™¾åº¦äº‘ä¸€æ ·çš„ç½‘ç›˜ ï¼Œä¹Ÿä¸æ˜¯åŒåšæœäº‘ä¸€èˆ¬çš„åŒæ­¥äº‘ ï¼Œè€Œæ˜¯ CDNï¼Œè®©ä½ åœ¨æµè§ˆç½‘é¡µçš„æ—¶å€™æœ€å¿«çš„æ¥æ”¶åˆ°é¡µé¢ä¸­çš„å›¾ç‰‡ã€éŸ³é¢‘ç­‰æ–‡ä»¶ï¼Œæ‰€ä»¥éå¸¸é€‚åˆä¸ªäººã€ä¼ä¸šç”¨æˆ·ç”¨æ¥å‚¨å­˜ç«™ç‚¹èµ„æºã€‚å¯¹äºä¸ªäººåšä¸»æ¥è¯´ï¼Œä½ å¯ä»¥æŠŠåšå®¢ä¸­çš„å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰åª’ä½“ä¸Šä¼ åˆ°ä¸ƒç‰›ï¼Œåœ¨åšå®¢ä¸­å¼•ç”¨ï¼›ä¹Ÿå¯ä»¥å°†ç«™ç‚¹éœ€è¦åŠ è½½çš„ CSSã€JS ç­‰æ–‡ä»¶ä¸Šä¼ åˆ°ä¸ƒç‰›ï¼Œä»¥åŠ é€Ÿç½‘ç«™ã€‚</p><ul><li><p>æ³¨å†Œä¸ƒç‰›äº‘å¹¶å®åè®¤è¯</p></li><li><p>æ³¨å†Œå®Œæˆåæ‰“å¼€æ§åˆ¶ç®¡ç†å°&gt;å¯¹è±¡å­˜å‚¨</p></li><li><p>æ–°å»ºä¸€ä¸ªå…¬å¼€çš„ç©ºé—´</p><p><img src="https://ox.zhongyuan.space/hexo/articleIllustrations/drawing-bed/3.jpg" alt="æ–°å»ºç©ºé—´"></p></li><li><p>å›½å†…å¸¸ç”¨å­˜å‚¨åŒºåŸŸå¯¹åº”çš„ç¼–ç ï¼š</p><ul><li>åä¸œï¼šz0</li><li>ååŒ—ï¼šz1</li><li>åå—ï¼šz2</li></ul></li><li><p>ç§˜é’¥é…ç½®</p><p>é¼ æ ‡ç§»å…¥ æ§åˆ¶å°çš„å¤´åƒ æ˜¾ç¤ºä¸‹æ‹‰åˆ—è¡¨ æ‰¾åˆ° ç§˜é’¥ç®¡ç†</p><p><img src="https://ox.zhongyuan.space/hexo/articleIllustrations/drawing-bed/4.jpg" alt="å¯†é’¥é…ç½®"></p></li></ul><p>â€‹        æ³¨æ„è¿™é‡Œçš„<code>accessKey</code> å’Œ <code>secretKey</code></p><ul><li><p>å­˜å‚¨ç©ºé—´åŸŸåï¼Œè¿™é‡Œä¸ƒç‰›äº‘æä¾›äº†<code>30å¤©</code>çš„æµ‹è¯•åŸŸåï¼Œä½¿ç”¨æµ‹è¯•åŸŸåéœ€æ³¨æ„æ—¶é—´</p><p><img src="https://ox.zhongyuan.space/hexo/articleIllustrations/drawing-bed/6.jpg" alt="å­˜å‚¨ç©ºé—´åŸŸå"></p></li></ul><p>å¦‚æœæœ‰è‡ªå·±çš„åŸŸåï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå·±çš„ï¼Œæ–‡ç« æœ«å°¾æœ‰ä½¿ç”¨ä¸ªäººåŸŸåçš„ç›¸å…³é…ç½®æ–¹æ³•</p><h3 id="Typora"><a href="#Typora" class="headerlink" title="Typora"></a>Typora</h3><ul><li><p>ä¸‹è½½Typoraï¼Œä½¿ç”¨<strong>PicGo-Core</strong></p></li><li><p>ç‚¹å‡»å›¾åƒè®¾ç½®ï¼Œè¿›è¡Œä¸€äº›ç®€å•çš„é…ç½®ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><p><img src="https://ox.zhongyuan.space/hexo/articleIllustrations/drawing-bed/1.jpg" alt="typoraé…ç½®"></p></li><li><p>ç‚¹å‡»ä¸‹è½½<strong>PicGo-Core</strong></p><p><img src="https://ox.zhongyuan.space/hexo/articleIllustrations/drawing-bed/2.jpg" alt="ä¸‹è½½picgo-core"></p></li><li><p>ç„¶åæ‰“å¼€é…ç½®æ–‡ä»¶</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;picBed&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;uploader&quot;</span><span class="punctuation">:</span> <span class="string">&quot;qiniu&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;qiniu&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;accessKey&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;secretKey&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;bucket&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;area&quot;</span><span class="punctuation">:</span>  <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;options&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;picgoPlugins&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>é…ç½®ï¼š</p><ul><li><strong>accessKey</strong> ç§˜é’¥</li><li><strong>secretKey</strong> ç§˜é’¥</li><li><strong>bucket</strong> å­˜å‚¨ç©ºé—´åç§°</li><li><strong>url</strong> å­˜å‚¨ç©ºé—´åœ°å€</li><li><strong>area</strong> å­˜å‚¨åŒºåŸŸç¼–å·</li><li><strong>options</strong> ç½‘ç«™åç¼€ï¼ˆé€‰å¡«ï¼‰</li><li><strong>path</strong> è‡ªå®šä¹‰å­˜å‚¨è·¯å¾„ï¼ˆé€‰å¡«ï¼‰</li></ul></li></ul><p>ç„¶åä½¿ç”¨<strong>CV</strong>å¤§æ³•ï¼Œå°†å¯¹åº”é…ç½®å¡«å…¥</p><ul><li><p>æµ‹è¯•ä¸Šä¼ </p><ul><li><p>å›åˆ°åå¥½è®¾ç½®</p><p><img src="https://ox.zhongyuan.space/hexo/articleIllustrations/drawing-bed/7.jpg" alt="éªŒè¯ä¸Šä¼ ">  </p></li><li><p>æµ‹è¯•æˆåŠŸå¦‚ä¸‹ï¼Œå¦‚æœæ²¡æœ‰ï¼Œè¯·æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦ä¿å­˜ï¼Œæˆ–è€…å“ªä¸ªæ­¥éª¤é—æ¼äº†</p><p><img src="https://ox.zhongyuan.space/hexo/articleIllustrations/drawing-bed/8.jpg" alt="æµ‹è¯•æˆåŠŸ"></p></li></ul></li></ul><h3 id="ä¸ºä¸ƒç‰›äº‘é…ç½®ä¸ªäººåŸŸå"><a href="#ä¸ºä¸ƒç‰›äº‘é…ç½®ä¸ªäººåŸŸå" class="headerlink" title="ä¸ºä¸ƒç‰›äº‘é…ç½®ä¸ªäººåŸŸå"></a>ä¸ºä¸ƒç‰›äº‘é…ç½®ä¸ªäººåŸŸå</h3><p>è¿™é‡Œä»¥è…¾è®¯äº‘ä¸ºä¾‹</p><ul><li><p>é¦–å…ˆå°†æ³¨å†Œçš„åŸŸåè¿›è¡Œå¤‡æ¡ˆï¼ˆéœ€æäº¤èµ„æ–™åˆ°ç›¸å…³éƒ¨é—¨å®¡æ ¸ï¼Œæ­¤è¿‡ç¨‹è€—æ—¶è¾ƒé•¿ï¼Œå…·ä½“ä»¥ç®¡å±€å®¡æ ¸ä¸ºå‡†ï¼‰æˆ‘çš„å·²ç»é€šè¿‡å¤‡æ¡ˆäº†ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯äºŒçº§åŸŸå</p></li><li><p>æ‰¾åˆ°ä¸ƒç‰›äº‘<a href="https://portal.qiniu.com/cdn/domain">åŸŸåç®¡ç†</a>&gt;æ·»åŠ åŸŸå</p><p><img src="https://ox.zhongyuan.space/hexo/articleIllustrations/drawing-bed/10.jpg" alt="æ·»åŠ åŸŸå"></p><p>è¿™é‡Œæ²¡æœ‰sslè¯ä¹¦å¯ä»¥é€‰æ‹©httpï¼ˆåˆ›å»ºå®Œæˆååœ¨HTTPS<code>é…ç½®ä¸­å¼€å¯</code>HTTPS`ï¼‰ï¼Œç„¶åé€‰æ‹©åˆ›å»º</p></li><li><p>åˆ›å»ºå®Œæˆå¤åˆ¶<code>CNAME</code>ï¼Œä½¿ç”¨cdnåŠ é€ŸæœåŠ¡</p><p><img src="https://ox.zhongyuan.space/hexo/articleIllustrations/drawing-bed/11.jpg" alt="åˆ›å»ºå®Œæˆ"></p></li><li><p>ç„¶åè¿”å›è…¾è®¯äº‘å¯¹åŸŸåè¿›è¡Œè§£æ</p><p><img src="https://ox.zhongyuan.space/hexo/articleIllustrations/drawing-bed/9.jpg" alt="åŸŸåè§£æ"></p></li><li><p>å†è¿”å›ä¸ƒç‰›äº‘å¯¹è±¡å­˜å‚¨ &gt; ç©ºé—´ç®¡ç† &gt; ç‚¹å‡»åˆ›å»ºçš„ç©ºé—´ &gt; æ–‡ä»¶ç®¡ç† &gt; å¤–é“¾åŸŸåé€‰æ‹©è‡ªå·±åˆ›å»ºçš„åŸŸåã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>éŸ³é¢‘å¯è§†åŒ–</title>
      <link href="/2023/02/27/canvas2/"/>
      <url>/2023/02/27/canvas2/</url>
      
        <content type="html"><![CDATA[<p>å‰å‡ å¤©ä½¿ç”¨canvaså®Œæˆäº†åŸºç¡€ç»˜å›¾ï¼Œä»Šå¤©æ¥æ•´ç‚¹æ´»</p><h3 id="æœ€ç»ˆè¦å®ç°çš„æ•ˆæœ"><a href="#æœ€ç»ˆè¦å®ç°çš„æ•ˆæœ" class="headerlink" title="æœ€ç»ˆè¦å®ç°çš„æ•ˆæœ"></a>æœ€ç»ˆè¦å®ç°çš„æ•ˆæœ</h3><p><img src="https://ox.zhongyuan.space/hexo/articleIllustrations/canvas/%E9%9F%B3%E9%A2%91%E5%8F%AF%E8%A7%86%E5%8C%96%E6%95%88%E6%9E%9C%E5%9B%BE.jpg" alt="éŸ³é¢‘å¯è§†åŒ–æ•ˆæœå›¾"></p><h3 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h3><ul><li>canvas ç”ŸæˆæŸ±çŠ¶å›¾</li><li>æŸ±çŠ¶å›¾ä¸æ–­é‡æ–°æ¸²æŸ“</li></ul><p>ç®€å•æ¥è¯´åªæœ‰è¿™ä¸¤ç‚¹éœ€æ±‚ï¼Œå¥½åƒå¾ˆç®€å•å˜›</p><p>æ¥ä¸‹æ¥å®æ“ï¼š</p><pre><code>// è¿˜æ˜¯ä»è·å– domå…ƒç´ ï¼Œç”Ÿæˆ canvas ä¸Šä¸‹æ–‡å¼€å§‹const audioEle = document.querySelector(&#39;audio&#39;)const cvs = document.querySelector(&#39;canvas&#39;)const ctx = cvs.getContext(&#39;2d&#39;)// åˆå§‹åŒ– canvas å°ºå¯¸ function initCvs() &#123;    cvs.width = window.innerWidth * devicePixelRatio    cvs.height = (window.innerHeight / 1.5) * devicePixelRatio&#125;initCvs()</code></pre><p>ç„¶åå°±æ˜¯éŸ³é¢‘</p><ul><li>è·å–éŸ³é¢‘ï¼ˆè¿™é‡Œç›´æ¥å¼•å…¥ä¸€ä¸ªæœ¬åœ°éŸ³é¢‘ï¼‰</li><li>åˆ›å»ºéŸ³é¢‘ä¸Šä¸‹æ–‡</li><li>åˆ›å»ºéŸ³é¢‘æºèŠ‚ç‚¹</li><li>åˆ›å»ºåˆ†æå™¨èŠ‚ç‚¹</li><li>åˆ›å»ºæ•°ç»„æ¥å—åˆ†æå™¨èŠ‚ç‚¹çš„åˆ†ææ•°æ®</li><li>è¿æ¥éŸ³é¢‘æºèŠ‚ç‚¹ä¸åˆ†æå™¨èŠ‚ç‚¹</li><li>åˆ†æå™¨èŠ‚ç‚¹è¿æ¥åˆ°è¾“å‡ºè®¾å¤‡</li><li>ç»˜åˆ¶ canvas ç”»å¸ƒ</li></ul><pre><code>let isInit = false   let dataArray, analyseraudioEle.onplay = function () &#123;    //åˆ¤æ–­éŸ³é¢‘çŠ¶æ€    if (isInit) &#123;        return    &#125;    // åˆå§‹åŒ–    // åˆ›å»ºéŸ³é¢‘ä¸Šä¸‹æ–‡    const audCtx = new AudioContext()    // åˆ›å»ºéŸ³é¢‘æºèŠ‚ç‚¹    const source = audCtx.createMediaElementSource(audioEle)    // åˆ›å»ºåˆ†æå™¨èŠ‚ç‚¹    analyser = audCtx.createAnalyser()    // æ ·æœ¬çš„çª—å£å¤§å° analyser.fftSize é»˜è®¤å€¼ï¼š2048,è¯¥æ•°å€¼åªèƒ½ä¸º2çš„næ¬¡å¹‚    analyser.fftSize = 512    // åˆ›å»ºæ•°ç»„ï¼Œç”¨äºæ¥æ”¶åˆ†æå™¨èŠ‚ç‚¹çš„åˆ†ææ•°æ®    // Uint8Array ç±»å‹åŒ–æ•°ç»„    dataArray = new Uint8Array(analyser.frequencyBinCount)    // è¿æ¥éŸ³é¢‘æºèŠ‚ç‚¹ä¸åˆ†æå™¨èŠ‚ç‚¹    source.connect(analyser)    // åˆ†æå™¨èŠ‚ç‚¹è¿æ¥åˆ°è¾“å‡ºè®¾å¤‡    analyser.connect(audCtx.destination)    isInit = true&#125;// æŠŠåˆ†æå‡ºçš„æ³¢å½¢ä¸æ–­çš„ç»˜åˆ¶åˆ°canvasä¸Šfunction draw() &#123;    requestAnimationFrame(draw)    // æ¸…ç©ºç”»å¸ƒ    const &#123; width, height &#125; = cvs    ctx.clearRect(0, 0, width, height)    // åˆ¤æ–­éŸ³é¢‘æ˜¯å¦åˆå§‹åŒ–    if (!isInit) &#123;        return    &#125;    // è®©åˆ†æå™¨èŠ‚ç‚¹åˆ†æå‡ºæ•°æ®åˆ°æ•°ç»„ä¸­    analyser.getByteFrequencyData(dataArray)    // console.log(dataArray);    // è·å–åˆ°æ•°ç»„é•¿åº¦   /2.5æ”¾å¤§å‰åŠéƒ¨åˆ†å›¾å½¢    const len = dataArray.length / 2.5    // è®¾ç½®æŸ±çŠ¶æ¡å®½åº¦  /2è·å¾—å¯¹ç§°å›¾å½¢å®½åº¦    const barWidth = width / len / 2    ctx.fillStyle = &#39;#e15252&#39;    // å¾ªç¯æ•°æ®è¿›è¡Œç»˜åˆ¶    for (let i = 0; i &lt; len; i++) &#123;        const data = dataArray[i];  // &lt;256        // è®¾ç½®æŸ±çŠ¶æ¡é«˜åº¦        const barHeight = data / 255 * height        // const x = i * barWidth        // è®¡ç®—æ¨ªåæ ‡        const x1 = i * barWidth + width / 2        const x2 = width / 2 - (i + 1) * barWidth        // è®¡ç®—çºµåæ ‡        const y = height - barHeight        // ç»˜åˆ¶å›¾å½¢ å®½åº¦-2 æ‹‰å¼€æŸ±çŠ¶æ¡é—´è·        ctx.fillRect(x1, y, barWidth - 2, barHeight)        ctx.fillRect(x2, y, barWidth - 2, barHeight)    &#125;&#125;draw()</code></pre><p>æ¥çœ‹ä¸‹æœ€ç»ˆæ•ˆæœå›¾</p><p><img src="https://ox.zhongyuan.space/hexo/articleIllustrations/canvas/%E9%9F%B3%E9%A2%91%E6%9C%80%E7%BB%88%E6%95%88%E6%9E%9C%E5%9B%BE.jpg" alt="æœ€ç»ˆæ•ˆæœå›¾"></p><p>å› ä¸ºéŸ³é¢‘ä¸»è¦é¢‘ç‡éƒ½åœ¨å‰åŠæ®µï¼Œæ‰€ä»¥æˆªå–å‰åŠæ®µå¹¶æ ¹æ®yè½´é•œåƒç”Ÿæˆå¦ä¸€åŠcanvaså›¾</p><p>å› ä¸ºæˆ‘è§‰å¾—ç”Ÿæˆxè½´çš„é•œåƒå›¾å¤ªä¸‘äº†ğŸ˜‚ï¼Œæ²¡æœ‰ç”Ÿæˆxè½´çš„é•œåƒå›¾ï¼Œéœ€è¦çš„å¯ä»¥è‡ªè¡Œæ·»åŠ ï¼Œæœ‰ç–‘é—®å¯ä»¥è”ç³»æˆ‘ğŸ˜‹</p>]]></content>
      
      
      <categories>
          
          <category> canvas </category>
          
      </categories>
      
      
        <tags>
            
            <tag> canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>canvas</title>
      <link href="/2023/02/16/canvas1/"/>
      <url>/2023/02/16/canvas1/</url>
      
        <content type="html"><![CDATA[<p>ä¹‹å‰çš„åšå®¢ä¸­æœ‰ä¸ªå¾ˆæœ‰æ„æ€çš„ç”»é¢ï¼Œå¦‚ä¸‹å›¾</p><p><img src="https://ox.zhongyuan.space/hexo/articleIllustrations/canvas/0.jpg" alt="åšå®¢å›¾ç‰‡"></p><p>ä¹‹å‰æ˜¯ç”¨ç»„ä»¶å®ç°çš„ï¼Œå¹¶æ²¡æœ‰æ·±å…¥ç ”ç©¶ï¼Œæœ€è¿‘ä¹Ÿæ²¡ä»€ä¹ˆäº‹æƒ…ï¼Œä¸Šæ‰‹æ“ä½œä¸€ä¸‹ã€‚</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Glossary/API">canvas mdn ä¸­æ–‡æ–‡æ¡£</a></p><p>è‹±æ–‡èƒ½åŠ›å¤Ÿå¥½çš„è¯ï¼Œå»ºè®®å»çœ‹è‹±æ–‡æ–‡æ¡£ï¼Œæ¯•ç«ŸåŸæ–‡æ¡£æ˜¯å†™çš„æœ€å‡†ç¡®çš„ã€‚ä¸­æ–‡ç‰ˆéš¾å…ä¼šå‡ºç°ç‰ˆæœ¬æ»åæˆ–è€…æ˜¯ç¿»è¯‘é”™è¯¯çš„æƒ…å†µã€‚ä½†æ˜¯ä¸ç®¡æ€ä¹ˆæ ·ï¼Œè‚¯å®šæ˜¯æ¯”å¹³æ—¶çœ‹çš„åšå®¢ä¸“ä¸šåº¦ä»€ä¹ˆçš„è¦é«˜å¾—å¤šï¼Œæ¯•ç«Ÿåˆ«äººçš„ä¸œè¥¿ä¸ä¸€å®šç¬¦åˆä½ çš„ä¸šåŠ¡éœ€æ±‚ã€‚å®˜æ–¹æ–‡æ¡£æ‰æ˜¯æœ€å‡†ç¡®çš„çŸ¥è¯†ï¼</p><p><a href="https://developer.mozilla.org/en-US/docs/Glossary/API">mdn è‹±æ–‡æ–‡æ¡£</a></p><p>è¦å®ç° canvas åŸºæœ¬ç»˜å›¾</p><p>é¦–å…ˆè¦è·å–ç»˜åˆ¶ä¸Šä¸‹æ–‡</p><p><code> const cvs = document.querySelector(&#39;canvas&#39;)</code></p><p><code>const ctx = cvs.getContext(&#39;2d&#39;)</code></p><p>æ‰€æœ‰çš„ç»˜å›¾éƒ½å¿…é¡»åœ¨ä¸Šä¸‹æ–‡ä¸­å®Œæˆ</p><p>åŒä¸€ä¸ª canvas åªèƒ½äº§ç”Ÿå”¯ä¸€çš„ä¸Šä¸‹æ–‡</p><p>ä¸Šä¸‹æ–‡ç±»å‹å¯ä»¥æ˜¯ 2d ã€ bitmaprenderer ã€webgl ã€ webgl2ã€</p><p>ä¸€èˆ¬æ¥è¯´è¦å…ˆåˆå§‹åŒ–è®¾ç½® canvas çš„å®½é«˜</p><p><code>cvs.width = window.innerWidth - 50</code></p><p><code>cvs.height = window.innerHeight - 50</code></p><p>è¿™é‡Œè®¾ç½®åé¡µé¢å‘ˆç°å‡ºä¸€ä¸ªçŸ©å½¢ canvas åŒºåŸŸ</p><p>canvas å¸¸ç”¨çš„ api æ–¹æ³•ï¼Œä¸ªäººç†è§£ï¼Œéƒ¨åˆ†ç†è§£ä¸ä¸€è‡´ï¼Œè¯¦æƒ…è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ <a href="https://developer.mozilla.org/en-US/docs/Glossary/API">mdn è‹±æ–‡æ–‡æ¡£</a></p><ul><li>ç”»ç›´çº¿ ï¼šlineTo</li><li>ç”»å¼§çº¿ ï¼šarc</li><li>æ¸…ç©ºè·¯å¾„ ï¼š beginPath</li><li>å…³é—­è·¯å¾„ ï¼š closePath</li><li>å¡«å…… ï¼š fill</li><li>æè¾¹ ï¼š stroke</li></ul><p>æ ¹æ®éœ€æ±‚è‡ªç”±ç»„åˆï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦ç”Ÿæˆå‡ ä¸ªç‚¹å¹¶è¿æ¥ç”ŸæˆåŸºç¡€å›¾å½¢</p><p>å†™ä¸€ä¸ªè·å–éšæœºæ•°çš„å‡½æ•°ï¼Œè¿™é‡Œæœ€å¤§æ•°å’Œæœ€å°æ•°æŒ‰éœ€æ±‚æ¥å†™</p><pre><code>function getRandom(min, max) &#123;    return Math.floor(Math.random() * (max + 1 - min) + min)&#125;</code></pre><p>å°è£… canvas å‡½æ•°</p><pre><code>class Point &#123;        constructor() &#123;            this.r = 6   //è®¾ç½®å¼§å½¢åŠå¾„            this.x = getRandom(0, cvs.width - this.r / 2)  //è®¾ç½®æ¨ªåæ ‡            this.y = getRandom(0, cvs.height - this.r / 2) //è®¾ç½®çºµåæ ‡        &#125;        draw() &#123;            ctx.beginPath()            ctx.arc(this.x, this.y, this.r, 0, 2 * Math.PI)  // ç»˜åˆ¶åœ†å¼§è·¯å¾„            ctx.fillStyle = &#39;#fff&#39;// è®¾ç½®å¡«å……æ ·å¼            ctx.fill()        &#125;    &#125;</code></pre><p>å°è£…å›¾å½¢æ„é€ å‡½æ•°</p><pre><code> class Graph &#123;        constructor(pointNumber = 30, maxDis = 300) &#123;  //è®¾ç½®ç”Ÿæˆæ•°é‡å’Œæœ€å¤§ç›´çº¿è·ç¦»            this.points = new Array(pointNumber).fill(0).map(() =&gt; new Point())            this.maxDis = maxDis        &#125;        draw() &#123;            for (let i = 0; i &lt; this.points.length; i++) &#123;                const p1 = this.points[i]                p1.draw()                for (let j = i + 1; j &lt; this.points.length; j++) &#123;                    const p2 = this.points[j]                    const d = Math.sqrt((p1.x - p2.x) ** 2 + (p1.y - p2.y) **   2)  //å¼€æ ¹å·èµ‹å€¼ä¸¤ç‚¹ä¹‹é—´çš„ç›´çº¿è·ç¦»                    if (d &gt; this.maxDis) &#123;  //åˆ¤æ–­ä¸¤ç‚¹ä¹‹é—´ç›´çº¿è·ç¦»æ˜¯å¦è¶…è¿‡è®¾ç½®å€¼                        continue                    &#125;                    ctx.beginPath()                    ctx.moveTo(p1.x, p1.y)                    ctx.lineTo(p2.x, p2.y)                    ctx.closePath()                    ctx.strokeStyle = `rgba(200,200,200,$&#123;1 - d / this.maxDis&#125;)`                    ctx.stroke()                &#125;            &#125;        &#125;    &#125;    const g = new Graph()    g.draw()</code></pre><p>è¿™é‡Œæœ‰äº†é™æ€ canvas å›¾å½¢ï¼Œç„¶ååŠ ä¸Šéƒ¨åˆ†åŠ¨ç”»æ•ˆæœ</p><pre><code>this.xSpeed = getRandom(-50, 50)    // è®¾ç½®æ¨ªå‘é€Ÿåº¦(éšæœº)this.ySpeed = getRandom(-50, 50)    // è®¾ç½®çºµå‘é€Ÿåº¦(éšæœº)this.lastDrawTime = null    // è®°å½•ä¸Šæ¬¡ä½œç”»çš„æ—¶é—´// æ›´æ–°åæ ‡if (this.lastDrawTime) &#123;// è®¡ç®—æ–°çš„åæ ‡const duration = (Date.now() - this.lastDrawTime) / 1000// è·å–åæ ‡è·ç¦»const xDis = this.xSpeed * durationconst yDis = this.ySpeed * duration// è®¡ç®—æ–°çš„æ¨ªçºµåæ ‡let x = this.x + xDislet y = this.y + yDisif (x &gt; cvs.width - this.r / 2) &#123;x = cvs.width - this.r / 2    this.xSpeed = - this.xSpeed&#125;else if (x &lt; 0) &#123;    x = 0this.xSpeed = - this.xSpeed&#125;if (y &gt; cvs.height - this.r / 2) &#123;    y = cvs.height - this.r / 2    this.ySpeed = - this.ySpeed&#125;else if (y &lt; 0) &#123;    y = 0    this.ySpeed = - this.ySpeed&#125;    this.x = x    this.y = y&#125;</code></pre><p><code>å¹¶è®°å½•ä½œç”»æ—¶é—´  this.lastDrawTime = Date.now()  // è®°å½•ä½œç”»æ—¶é—´</code></p><p>æˆ‘ä»¬éœ€è¦é‡å¤æ¸²æŸ“å¾ˆå¤šæ¬¡ï¼Œæ¯æ¬¡æ¸²æŸ“éœ€è¦é‡æ–°æ‰§è¡Œ<code>deaw()</code>æ–¹æ³•</p><pre><code>requestAnimationFrame(() =&gt; &#123;  // æ¯æ¬¡æ¸²æŸ“é‡æ–°æ‰§è¡Œdraw()æ–¹æ³•    this.draw()&#125;)ctx.clearRect(0, 0, cvs.width, cvs.height)  // æ¸…ç©ºç”»å¸ƒ</code></pre><p><img src="https://ox.zhongyuan.space/hexo/articleIllustrations/canvas/1.jpg" alt="æœ€ç»ˆç»“æœå›¾"></p>]]></content>
      
      
      <categories>
          
          <category> canvas </category>
          
      </categories>
      
      
        <tags>
            
            <tag> canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueå“åº”å¼åŸç†</title>
      <link href="/2023/02/01/article32/"/>
      <url>/2023/02/01/article32/</url>
      
        <content type="html"><![CDATA[<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/4/24/162f71d7977c8a3f~tplv-t2oaga2asx-zoom-in-crop-mark:1304:0:0:0.awebp"></p><p>çœ‹è¿‡Vueå®˜æ–¹æ–‡æ¡£çš„åŒå­¦ï¼Œå¯¹è¿™å¼ å›¾åº”è¯¥å·²ç„¶ç›¸å½“ç†Ÿæ‚‰äº†ã€‚</p><p>vueçš„å“åº”å¼æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</p><p>å¬è¿‡å¤ªå¤šå›ç­”ï¼Œé€šè¿‡<code>Object.defineProperty</code>ï¼Œå¯æ˜¯å†è¯¦ç»†çš„é—®æ—¶ï¼Œå¯¹æ–¹æµ‘ç„¶ä¸çŸ¥ã€‚</p><p>æ¥çœ‹ä¸‹é¢è¿™æ®µä»£ç </p><pre><code>const Observer = function(data) &#123;  // å¾ªç¯ä¿®æ”¹ä¸ºæ¯ä¸ªå±æ€§æ·»åŠ get set  for (let key in data) &#123;    defineReactive(data, key);  &#125;&#125;const defineReactive = function(obj, key) &#123;  // å±€éƒ¨å˜é‡depï¼Œç”¨äºget setå†…éƒ¨è°ƒç”¨  const dep = new Dep();  // è·å–å½“å‰å€¼  let val = obj[key];  Object.defineProperty(obj, key, &#123;    // è®¾ç½®å½“å‰æè¿°å±æ€§ä¸ºå¯è¢«å¾ªç¯    enumerable: true,    // è®¾ç½®å½“å‰æè¿°å±æ€§å¯è¢«ä¿®æ”¹    configurable: true,    get() &#123;      console.log(&#39;in get&#39;);      // è°ƒç”¨ä¾èµ–æ”¶é›†å™¨ä¸­çš„addSubï¼Œç”¨äºæ”¶é›†å½“å‰å±æ€§ä¸Watcherä¸­çš„ä¾èµ–å…³ç³»      dep.depend();      return val;    &#125;,    set(newVal) &#123;      if (newVal === val) &#123;        return;      &#125;      val = newVal;      // å½“å€¼å‘ç”Ÿå˜æ›´æ—¶ï¼Œé€šçŸ¥ä¾èµ–æ”¶é›†å™¨ï¼Œæ›´æ–°æ¯ä¸ªéœ€è¦æ›´æ–°çš„Watcherï¼Œ      // è¿™é‡Œæ¯ä¸ªéœ€è¦æ›´æ–°é€šè¿‡ä»€ä¹ˆæ–­å®šï¼Ÿdep.subs      dep.notify();    &#125;  &#125;);&#125;const observe = function(data) &#123;  return new Observer(data);&#125;const Vue = function(options) &#123;  const self = this;  // å°†dataèµ‹å€¼ç»™this._dataï¼Œæºç è¿™éƒ¨åˆ†ç”¨çš„Proxyæ‰€ä»¥æˆ‘ä»¬ç”¨æœ€ç®€å•çš„æ–¹å¼ä¸´æ—¶å®ç°  if (options &amp;&amp; typeof options.data === &#39;function&#39;) &#123;    this._data = options.data.apply(this);  &#125;  // æŒ‚è½½å‡½æ•°  this.mount = function() &#123;    new Watcher(self, self.render);  &#125;  // æ¸²æŸ“å‡½æ•°  this.render = function() &#123;    with(self) &#123;      _data.text;    &#125;  &#125;  // ç›‘å¬this._data  observe(this._data);  &#125;const Watcher = function(vm, fn) &#123;  const self = this;  this.vm = vm;  // å°†å½“å‰Dep.targetæŒ‡å‘è‡ªå·±  Dep.target = this;  // å‘Depæ–¹æ³•æ·»åŠ å½“å‰Wathcer  this.addDep = function(dep) &#123;    dep.addSub(self);  &#125;  // æ›´æ–°æ–¹æ³•ï¼Œç”¨äºè§¦å‘vm._render  this.update = function() &#123;    console.log(&#39;in watcher update&#39;);    fn();  &#125;  // è¿™é‡Œä¼šé¦–æ¬¡è°ƒç”¨vm._renderï¼Œä»è€Œè§¦å‘textçš„get  // ä»è€Œå°†å½“å‰çš„Wathcerä¸Depå…³è”èµ·æ¥  this.value = fn();  // è¿™é‡Œæ¸…ç©ºäº†Dep.targetï¼Œä¸ºäº†é˜²æ­¢notifyè§¦å‘æ—¶ï¼Œä¸åœçš„ç»‘å®šWatcherä¸Depï¼Œ  // é€ æˆä»£ç æ­»å¾ªç¯  Dep.target = null;&#125;const Dep = function() &#123;  const self = this;  // æ”¶é›†ç›®æ ‡  this.target = null;  // å­˜å‚¨æ”¶é›†å™¨ä¸­éœ€è¦é€šçŸ¥çš„Watcher  this.subs = [];  // å½“æœ‰ç›®æ ‡æ—¶ï¼Œç»‘å®šDepä¸Wathcerçš„å…³ç³»  this.depend = function() &#123;    if (Dep.target) &#123;      // è¿™é‡Œå…¶å®å¯ä»¥ç›´æ¥å†™self.addSub(Dep.target)ï¼Œ      // æ²¡æœ‰è¿™ä¹ˆå†™å› ä¸ºæƒ³è¿˜åŸæºç çš„è¿‡ç¨‹ã€‚      Dep.target.addDep(self);    &#125;  &#125;  // ä¸ºå½“å‰æ”¶é›†å™¨æ·»åŠ Watcher  this.addSub = function(watcher) &#123;    self.subs.push(watcher);  &#125;  // é€šçŸ¥æ”¶é›†å™¨ä¸­æ‰€çš„æ‰€æœ‰Wathcerï¼Œè°ƒç”¨å…¶updateæ–¹æ³•  this.notify = function() &#123;    for (let i = 0; i &lt; self.subs.length; i += 1) &#123;      self.subs[i].update();    &#125;  &#125;&#125;const vue = new Vue(&#123;  data() &#123;    return &#123;      text: &#39;hello world&#39;    &#125;;  &#125;&#125;)vue.mount(); // in getvue._data.text = &#39;123&#39;; // in watcher update /n in get</code></pre><p>è¿™é‡Œç”¨ä¸åˆ°100è¡Œçš„ä»£ç ï¼Œå®ç°äº†ä¸€ä¸ªç®€æ˜“çš„vueå“åº”å¼ã€‚å½“ç„¶ï¼Œè¿™é‡Œå¦‚æœä¸è€ƒè™‘æœŸé—´çš„è¿‡ç¨‹ï¼Œæˆ‘ç›¸ä¿¡ï¼Œ40è¡Œä»£ç ä¹‹å†…å¯ä»¥æå®šã€‚ä½†æ˜¯æˆ‘è¿™é‡Œä¸æƒ³çœç•¥ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿæˆ‘æ€•ä½ æŠŠå…¶ä¸­çš„è¿‡ç¨‹è‡ªåŠ¨å¿½ç•¥æ‰ï¼Œæ€•åˆ«äººé—®ä½ ç›¸å…³ä¸œè¥¿çš„æ—¶å€™ï¼Œæ˜æ˜è‡ªå·±çœ‹è¿‡äº†ï¼Œå´è¢«æ€¼çš„å“‘å£æ— è¨€ã€‚æ€»ä¹‹ï¼Œæˆ‘æ˜¯ä¸ºäº†ä½ å¥½ï¼Œå¤šå–çƒ­æ°´ã€‚</p><h4 id="Depçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Depçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Depçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Depçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p> <code>ä¾èµ–æ”¶é›†å™¨ï¼Œè¿™ä¸æ˜¯å®˜æ–¹çš„åå­—è›¤ï¼Œæˆ‘è‡ªå·±èµ·çš„ï¼Œä¸ºäº†å¥½è®°ã€‚ </code></p><p>ç”¨ä¸¤ä¸ªä¾‹å­æ¥çœ‹çœ‹ä¾èµ–æ”¶é›†å™¨çš„ä½œç”¨å§ã€‚</p><ul><li><p>ä¾‹å­1ï¼Œæ¯«æ— æ„ä¹‰çš„æ¸²æŸ“æ˜¯ä¸æ˜¯æ²¡å¿…è¦ï¼Ÿ</p><pre><code>  const vm = new Vue(&#123;      data() &#123;          return &#123;              text: &#39;hello world&#39;,              text2: &#39;hey&#39;,          &#125;      &#125;  &#125;)</code></pre><p>  å½“<code>vm.text2</code>çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šå†æ¬¡è°ƒç”¨<code>render</code>ï¼Œè€Œ<code>template</code>ä¸­å´æ²¡æœ‰ä½¿ç”¨<code>text2</code>ï¼Œæ‰€ä»¥è¿™é‡Œå¤„ç†<code>render</code>æ˜¯ä¸æ˜¯æ¯«æ— æ„ä¹‰ï¼Ÿ</p><p>  é’ˆå¯¹è¿™ä¸ªä¾‹å­è¿˜è®°å¾—æˆ‘ä»¬ä¸Šé¢æ¨¡æ‹Ÿå®ç°çš„æ²¡ï¼Œåœ¨<code>Vue</code>çš„<code>render</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨äº†æœ¬æ¬¡æ¸²æŸ“ç›¸å…³çš„å€¼ï¼Œæ‰€ä»¥ï¼Œä¸æ¸²æŸ“æ— å…³çš„å€¼ï¼Œå¹¶ä¸ä¼šè§¦å‘<code>get</code>ï¼Œä¹Ÿå°±ä¸ä¼šåœ¨ä¾èµ–æ”¶é›†å™¨ä¸­æ·»åŠ åˆ°ç›‘å¬(<code>addSub</code>æ–¹æ³•ä¸ä¼šè§¦å‘)ï¼Œå³ä½¿è°ƒç”¨<code>set</code>èµ‹å€¼ï¼Œ<code>notify</code>ä¸­çš„<code>subs</code>ä¹Ÿæ˜¯ç©ºçš„ã€‚OKï¼Œç»§ç»­å›å½’demoï¼Œæ¥ä¸€å°æ³¢æµ‹è¯•å»å°è¯ä¸‹æˆ‘è¯´çš„å§ã€‚</p><pre><code>  const vue = new Vue(&#123;    data() &#123;      return &#123;        text: &#39;hello world&#39;,        text2: &#39;hey&#39;      &#125;;    &#125;  &#125;)    vue.mount(); // in get  vue._data.text = &#39;456&#39;; // in watcher update /n in get  vue._data.text2 = &#39;123&#39;; // nothing</code></pre></li><li><p>ä¾‹å­2ï¼Œå¤šä¸ªVueå®ä¾‹å¼•ç”¨åŒä¸€ä¸ªdataæ—¶ï¼Œé€šçŸ¥è°ï¼Ÿæ˜¯ä¸æ˜¯åº”è¯¥ä¿©éƒ½é€šçŸ¥ï¼Ÿ </p><pre><code>  let commonData = &#123;    text: &#39;hello world&#39;  &#125;;    const vm1 = new Vue(&#123;    data() &#123;      return commonData;    &#125;  &#125;)    const vm2 = new Vue(&#123;    data() &#123;      return commonData;    &#125;  &#125;)    vm1.mount(); // in get  vm2.mount(); // in get  commonData.text = &#39;hey&#39; // è¾“å‡ºäº†ä¸¤æ¬¡ in watcher update /n in get</code></pre></li></ul><p>å¸Œæœ›é€šè¿‡è¿™ä¸¤ä¸ªä¾‹å­ï¼Œä½ å·²ç»å¤§æ¦‚æ¸…æ¥šäº†<code>Dep</code>çš„ä½œç”¨ï¼Œæœ‰æ²¡æœ‰åŸæ¥å°±é‚£ä¹ˆå›äº‹çš„æ„Ÿè§‰ï¼Ÿæœ‰å°±å¯¹äº†ã€‚æ€»ç»“ä¸€ä¸‹å§(ä»¥ä¸‹ä¾èµ–æ”¶é›†å™¨å®ä¸º<code>Dep</code>)ï¼š</p><ul><li><code>vue</code>å°†<code>data</code>åˆå§‹åŒ–ä¸ºä¸€ä¸ª<code>Observer</code>å¹¶å¯¹å¯¹è±¡ä¸­çš„æ¯ä¸ªå€¼ï¼Œé‡å†™äº†å…¶ä¸­çš„<code>get</code>ã€<code>set</code>ï¼Œ<code>data</code>ä¸­çš„æ¯ä¸ª<code>key</code>ï¼Œéƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ä¾èµ–æ”¶é›†å™¨ã€‚</li><li>åœ¨<code>get</code>ä¸­ï¼Œå‘ä¾èµ–æ”¶é›†å™¨æ·»åŠ äº†ç›‘å¬</li><li>åœ¨mountæ—¶ï¼Œå®ä¾‹äº†ä¸€ä¸ª<code>Watcher</code>ï¼Œå°†æ”¶é›†å™¨çš„ç›®æ ‡æŒ‡å‘äº†å½“å‰<code>Watcher</code></li><li>åœ¨<code>data</code>å€¼å‘ç”Ÿå˜æ›´æ—¶ï¼Œè§¦å‘<code>set</code>ï¼Œè§¦å‘äº†ä¾èµ–æ”¶é›†å™¨ä¸­çš„æ‰€æœ‰ç›‘å¬çš„æ›´æ–°ï¼Œæ¥è§¦å‘<code>Watcher.update</code></li></ul>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>keep-alive</title>
      <link href="/2023/01/18/article31/"/>
      <url>/2023/01/18/article31/</url>
      
        <content type="html"><![CDATA[<h2 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h2><p>å¯èƒ½å¤§å®¶åœ¨å¹³æ—¶çš„å¼€å‘ä¸­ä¼šç»å¸¸é‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼šæœ‰ä¸€ä¸ªå¯ä»¥è¿›è¡Œç­›é€‰çš„åˆ—è¡¨é¡µ<code>List.vue</code>ï¼Œç‚¹å‡»æŸä¸€é¡¹æ—¶è¿›å…¥ç›¸åº”çš„è¯¦æƒ…é¡µé¢ï¼Œç­‰åˆ°ä½ ä»è¯¦æƒ…é¡µè¿”å›<code>List.vue</code>æ—¶ï¼Œå‘ç°åˆ—è¡¨é¡µå±…ç„¶åˆ·æ–°äº†ï¼åˆšåˆšçš„ç­›é€‰æ¡ä»¶éƒ½æ²¡äº†ï¼ï¼ï¼</p><h2 id="keep-alive"><a href="#keep-alive" class="headerlink" title="keep-alive"></a>keep-alive</h2><h3 id="æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="æ˜¯ä»€ä¹ˆï¼Ÿ"></a>æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ul><li><code>keep-alive</code>æ˜¯ä¸€ä¸ª<code>Vueå…¨å±€ç»„ä»¶</code></li><li><code>keep-alive</code>æœ¬èº«ä¸ä¼šæ¸²æŸ“å‡ºæ¥ï¼Œä¹Ÿä¸ä¼šå‡ºç°åœ¨çˆ¶ç»„ä»¶é“¾ä¸­</li><li><code>keep-alive</code>åŒ…è£¹åŠ¨æ€ç»„ä»¶æ—¶ï¼Œä¼šç¼“å­˜ä¸æ´»åŠ¨çš„ç»„ä»¶ï¼Œè€Œä¸æ˜¯é”€æ¯å®ƒä»¬</li></ul><h3 id="æ€ä¹ˆç”¨ï¼Ÿ"><a href="#æ€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="æ€ä¹ˆç”¨ï¼Ÿ"></a>æ€ä¹ˆç”¨ï¼Ÿ</h3><p><code>keep-alive</code>æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š</p><ul><li><code>include</code>ï¼šå¯ä¼ <code>å­—ç¬¦ä¸²ã€æ­£åˆ™è¡¨è¾¾å¼ã€æ•°ç»„</code>ï¼Œåç§°åŒ¹é…æˆåŠŸçš„ç»„ä»¶ä¼šè¢«ç¼“å­˜</li><li><code>exclude</code>ï¼šå¯ä¼ <code>å­—ç¬¦ä¸²ã€æ­£åˆ™è¡¨è¾¾å¼ã€æ•°ç»„</code>ï¼Œåç§°åŒ¹é…æˆåŠŸçš„ç»„ä»¶ä¸ä¼šè¢«ç¼“å­˜</li><li><code>max</code>ï¼šå¯ä¼ <code>æ•°å­—</code>ï¼Œé™åˆ¶ç¼“å­˜ç»„ä»¶çš„æœ€å¤§æ•°é‡</li></ul><p><code>include</code>å’Œ<code>exclude</code>ï¼Œä¼ <code>æ•°ç»„</code>æƒ…å†µå±…å¤š</p><h4 id="åŠ¨æ€ç»„ä»¶"><a href="#åŠ¨æ€ç»„ä»¶" class="headerlink" title="åŠ¨æ€ç»„ä»¶"></a>åŠ¨æ€ç»„ä»¶</h4><pre><code>&lt;keep-alive :include=&quot;allowList&quot; :exclude=&quot;noAllowList&quot; :max=&quot;amount&quot;&gt;     &lt;component :is=&quot;currentComponent&quot;&gt;&lt;/component&gt; &lt;/keep-alive&gt;</code></pre><h4 id="è·¯ç”±ç»„ä»¶"><a href="#è·¯ç”±ç»„ä»¶" class="headerlink" title="è·¯ç”±ç»„ä»¶"></a>è·¯ç”±ç»„ä»¶</h4><pre><code>&lt;keep-alive :include=&quot;allowList&quot; :exclude=&quot;noAllowList&quot; :max=&quot;amount&quot;&gt;    &lt;router-view&gt;&lt;/router-view&gt;&lt;/keep-alive&gt;</code></pre><h2 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h2><h3 id="ç»„ä»¶åŸºç¡€"><a href="#ç»„ä»¶åŸºç¡€" class="headerlink" title="ç»„ä»¶åŸºç¡€"></a>ç»„ä»¶åŸºç¡€</h3><p>å‰é¢è¯´äº†ï¼Œ<code>keep-alive</code>æ˜¯ä¸€ä¸ª<code>Vueå…¨å±€ç»„ä»¶</code>ï¼Œä»–æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š</p><ul><li><code>include</code>ï¼šå¯ä¼ <code>å­—ç¬¦ä¸²ã€æ­£åˆ™è¡¨è¾¾å¼ã€æ•°ç»„</code>ï¼Œåç§°åŒ¹é…æˆåŠŸçš„ç»„ä»¶ä¼šè¢«ç¼“å­˜</li><li><code>exclude</code>ï¼šå¯ä¼ <code>å­—ç¬¦ä¸²ã€æ­£åˆ™è¡¨è¾¾å¼ã€æ•°ç»„</code>ï¼Œåç§°åŒ¹é…æˆåŠŸçš„ç»„ä»¶ä¸ä¼šè¢«ç¼“å­˜</li><li><code>max</code>ï¼šå¯ä¼ <code>æ•°å­—</code>ï¼Œé™åˆ¶ç¼“å­˜ç»„ä»¶çš„æœ€å¤§æ•°é‡ï¼Œè¶…è¿‡<code>max</code>åˆ™æŒ‰ç…§<code>LRUç®—æ³•</code>è¿›è¡Œç½®æ¢</li></ul><p>é¡ºä¾¿è¯´è¯´<code>keep-alive</code>åœ¨å„ä¸ªç”Ÿå‘½å‘¨æœŸé‡Œéƒ½åšäº†å•¥å§ï¼š</p><ul><li><code>created</code>ï¼šåˆå§‹åŒ–ä¸€ä¸ª<code>cacheã€keys</code>ï¼Œå‰è€…ç”¨æ¥å­˜ç¼“å­˜ç»„ä»¶çš„è™šæ‹Ÿdomé›†åˆï¼Œåè€…ç”¨æ¥å­˜ç¼“å­˜ç»„ä»¶çš„keyé›†åˆ</li><li><code>mounted</code>ï¼šå®æ—¶ç›‘å¬<code>includeã€exclude</code>è¿™ä¸¤ä¸ªçš„å˜åŒ–ï¼Œå¹¶æ‰§è¡Œç›¸åº”æ“ä½œ</li><li><code>destroyed</code>ï¼šåˆ é™¤æ‰æ‰€æœ‰ç¼“å­˜ç›¸å…³çš„ä¸œè¥¿</li></ul><p>ä¹‹å‰è¯´äº†ï¼Œ<code>keep-alive</code>ä¸ä¼šè¢«æ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼Œæ‰€ä»¥<code>abstract</code>è¿™ä¸ªå±æ€§è‡³å…³é‡è¦ï¼</p><pre><code>// src/core/components/keep-alive.jsexport default &#123;  name: &#39;keep-alive&#39;,  abstract: true, // åˆ¤æ–­æ­¤ç»„ä»¶æ˜¯å¦éœ€è¦åœ¨æ¸²æŸ“æˆçœŸå®DOM  props: &#123;    include: patternTypes,    exclude: patternTypes,    max: [String, Number]  &#125;,  created() &#123;    this.cache = Object.create(null) // åˆ›å»ºå¯¹è±¡æ¥å­˜å‚¨  ç¼“å­˜è™šæ‹Ÿdom    this.keys = [] // åˆ›å»ºæ•°ç»„æ¥å­˜å‚¨  ç¼“å­˜key  &#125;,  mounted() &#123;    // å®æ—¶ç›‘å¬includeã€excludeçš„å˜åŠ¨    this.$watch(&#39;include&#39;, val =&gt; &#123;      pruneCache(this, name =&gt; matches(val, name))    &#125;)    this.$watch(&#39;exclude&#39;, val =&gt; &#123;      pruneCache(this, name =&gt; !matches(val, name))    &#125;)  &#125;,  destroyed() &#123;    for (const key in this.cache) &#123; // åˆ é™¤æ‰€æœ‰çš„ç¼“å­˜      pruneCacheEntry(this.cache, key, this.keys)    &#125;  &#125;,  render() &#123;      // ä¸‹é¢è®²  &#125;&#125;</code></pre><h3 id="pruneCacheEntryå‡½æ•°"><a href="#pruneCacheEntryå‡½æ•°" class="headerlink" title="pruneCacheEntryå‡½æ•°"></a>pruneCacheEntryå‡½æ•°</h3><p>å’±ä»¬ä¸Šé¢å®ç°çš„ç”Ÿå‘½å‘¨æœŸ<code>destroyed</code>ä¸­ï¼Œæ‰§è¡Œäº†<code>åˆ é™¤æ‰€æœ‰ç¼“å­˜</code>è¿™ä¸ªæ“ä½œï¼Œè€Œè¿™ä¸ªæ“ä½œæ˜¯é€šè¿‡è°ƒç”¨<code>pruneCacheEntry</code>æ¥å®ç°çš„ï¼Œé‚£å’±ä»¬æ¥è¯´è¯´<code>pruneCacheEntry</code>é‡Œåšäº†å•¥å§ </p><pre><code>// src/core/components/keep-alive.jsfunction pruneCacheEntry (  cache: VNodeCache,  key: string,  keys: Array&lt;string&gt;,  current?: VNode) &#123;  const cached = cache[key]  if (cached &amp;&amp; (!current || cached.tag !== current.tag)) &#123;    cached.componentInstance.$destroy() // æ‰§è¡Œç»„ä»¶çš„destoryé’©å­å‡½æ•°  &#125;  cache[key] = null  // è®¾ä¸ºnull  remove(keys, key) // åˆ é™¤å¯¹åº”çš„å…ƒç´ &#125;</code></pre><p>æ€»ç»“ä¸€ä¸‹å°±æ˜¯åšäº†ä¸‰ä»¶äº‹ï¼š</p><ul><li>1ã€éå†é›†åˆï¼Œæ‰§è¡Œæ‰€æœ‰ç¼“å­˜ç»„ä»¶çš„<code>$destroy</code>æ–¹æ³•</li><li>2ã€å°†<code>cache</code>å¯¹åº”<code>key</code>çš„å†…å®¹è®¾ç½®ä¸º<code>null</code></li><li>3ã€åˆ é™¤<code>keys</code>ä¸­å¯¹åº”çš„å…ƒç´ </li></ul><h3 id="renderå‡½æ•°"><a href="#renderå‡½æ•°" class="headerlink" title="renderå‡½æ•°"></a>renderå‡½æ•°</h3><p>ä»¥ä¸‹ç§°<code>include</code>ä¸ºç™½åå•ï¼Œ<code>exclude</code>ä¸ºé»‘åå• </p><p><code>render</code>å‡½æ•°é‡Œä¸»è¦åšäº†è¿™äº›äº‹ï¼š</p><ul><li><p>ç¬¬ä¸€æ­¥ï¼šè·å–åˆ°<code>keep-alive</code>åŒ…è£¹çš„ç¬¬ä¸€ä¸ªç»„ä»¶ä»¥åŠå®ƒçš„<code>ç»„ä»¶åç§°</code></p></li><li><p>ç¬¬äºŒæ­¥ï¼šåˆ¤æ–­æ­¤<code>ç»„ä»¶åç§°</code>æ˜¯å¦èƒ½è¢«<code>ç™½åå•ã€é»‘åå•</code>åŒ¹é…ï¼Œå¦‚æœ<code>ä¸èƒ½è¢«ç™½åå•åŒ¹é… || èƒ½è¢«é»‘åå•åŒ¹é…</code>ï¼Œåˆ™ç›´æ¥è¿”å›<code>VNode</code>ï¼Œä¸å¾€ä¸‹æ‰§è¡Œï¼Œå¦‚æœä¸ç¬¦åˆï¼Œåˆ™å¾€ä¸‹æ‰§è¡Œ<code>ç¬¬ä¸‰æ­¥</code></p></li><li><p>ç¬¬ä¸‰æ­¥ï¼šæ ¹æ®<code>ç»„ä»¶IDã€tag</code>ç”Ÿæˆ<code>ç¼“å­˜key</code>ï¼Œå¹¶åœ¨ç¼“å­˜é›†åˆä¸­æŸ¥æ‰¾æ˜¯å¦å·²ç¼“å­˜è¿‡æ­¤ç»„ä»¶ã€‚å¦‚æœå·²ç¼“å­˜è¿‡ï¼Œç›´æ¥å–å‡ºç¼“å­˜ç»„ä»¶ï¼Œå¹¶æ›´æ–°<code>ç¼“å­˜key</code>åœ¨<code>keys</code>ä¸­çš„ä½ç½®ï¼ˆè¿™æ˜¯<code>LRUç®—æ³•</code>çš„å…³é”®ï¼‰ï¼Œå¦‚æœæ²¡ç¼“å­˜è¿‡ï¼Œåˆ™ç»§ç»­<code>ç¬¬å››æ­¥</code></p></li><li><p>ç¬¬å››æ­¥ï¼šåˆ†åˆ«åœ¨<code>cacheã€keys</code>ä¸­ä¿å­˜<code>æ­¤ç»„ä»¶</code>ä»¥åŠä»–çš„<code>ç¼“å­˜key</code>ï¼Œå¹¶æ£€æŸ¥æ•°é‡æ˜¯å¦è¶…è¿‡<code>max</code>ï¼Œè¶…è¿‡åˆ™æ ¹æ®<code>LRUç®—æ³•</code>è¿›è¡Œåˆ é™¤</p></li><li><p>ç¬¬äº”æ­¥ï¼šå°†æ­¤ç»„ä»¶å®ä¾‹çš„<code>keepAlive</code>å±æ€§è®¾ç½®ä¸ºtrueï¼Œè¿™å¾ˆé‡è¦å“¦ï¼Œä¸‹é¢ä¼šè®²åˆ°çš„ï¼</p><pre><code>  // src/core/components/keep-alive.js  render() &#123;    const slot = this.$slots.default    const vnode: VNode = getFirstComponentChild(slot) // æ‰¾åˆ°ç¬¬ä¸€ä¸ªå­ç»„ä»¶å¯¹è±¡    const componentOptions: ?VNodeComponentOptions = vnode &amp;&amp; vnode.componentOptions    if (componentOptions) &#123; // å­˜åœ¨ç»„ä»¶å‚æ•°      // check pattern      const name: ?string = getComponentName(componentOptions) // ç»„ä»¶å      const &#123; include, exclude &#125; = this      if ( // æ¡ä»¶åŒ¹é…        // not included        (include &amp;&amp; (!name || !matches(include, name))) ||        // excluded        (exclude &amp;&amp; name &amp;&amp; matches(exclude, name))      ) &#123;        return vnode      &#125;      const &#123; cache, keys &#125; = this      const key: ?string = vnode.key == null // å®šä¹‰ç»„ä»¶çš„ç¼“å­˜key        // same constructor may get registered as different local components        // so cid alone is not enough (#3269)        ? componentOptions.Ctor.cid + (componentOptions.tag ? `::$&#123;componentOptions.tag&#125;` : &#39;&#39;)        : vnode.key      if (cache[key]) &#123; // å·²ç»ç¼“å­˜è¿‡è¯¥ç»„ä»¶        vnode.componentInstance = cache[key].componentInstance        // make current key freshest        remove(keys, key)        keys.push(key) // è°ƒæ•´keyæ’åº      &#125; else &#123;        cache[key] = vnode // ç¼“å­˜ç»„ä»¶å¯¹è±¡        keys.push(key)        // prune oldest entry        if (this.max &amp;&amp; keys.length &gt; parseInt(this.max)) &#123; // è¶…è¿‡ç¼“å­˜æ•°é™åˆ¶ï¼Œå°†ç¬¬ä¸€ä¸ªåˆ é™¤          pruneCacheEntry(cache, keys[0], keys, this._vnode)        &#125;      &#125;      vnode.data.keepAlive = true // æ¸²æŸ“å’Œæ‰§è¡Œè¢«åŒ…è£¹ç»„ä»¶çš„é’©å­å‡½æ•°éœ€è¦ç”¨åˆ°    &#125;    return vnode || (slot &amp;&amp; slot[0])  &#125;</code></pre></li></ul><h3 id="æ¸²æŸ“"><a href="#æ¸²æŸ“" class="headerlink" title="æ¸²æŸ“"></a>æ¸²æŸ“</h3><p>å’±ä»¬å…ˆæ¥çœ‹çœ‹Vueä¸€ä¸ªç»„ä»¶æ˜¯æ€ä¹ˆæ¸²æŸ“çš„ï¼Œå’±ä»¬ä»<code>render</code>å¼€å§‹è¯´ï¼š</p><ul><li><code>render</code>ï¼šæ­¤å‡½æ•°ä¼šå°†ç»„ä»¶è½¬æˆ<code>VNode</code></li><li><code>patch</code>ï¼šæ­¤å‡½æ•°åœ¨åˆæ¬¡æ¸²æŸ“æ—¶ä¼šç›´æ¥æ¸²æŸ“æ ¹æ®æ‹¿åˆ°çš„<code>VNode</code>ç›´æ¥æ¸²æŸ“æˆ<code>çœŸå®DOM</code>ï¼Œç¬¬äºŒæ¬¡æ¸²æŸ“å¼€å§‹å°±ä¼šæ‹¿<code>VNode</code>ä¼šè·Ÿ<code>æ—§VNode</code>å¯¹æ¯”ï¼Œæ‰“è¡¥ä¸ï¼ˆdiffç®—æ³•å¯¹æ¯”å‘ç”Ÿåœ¨æ­¤é˜¶æ®µï¼‰ï¼Œç„¶åæ¸²æŸ“æˆ<code>çœŸå®DOM</code></li></ul><h4 id="keep-aliveæœ¬èº«æ¸²æŸ“"><a href="#keep-aliveæœ¬èº«æ¸²æŸ“" class="headerlink" title="keep-aliveæœ¬èº«æ¸²æŸ“"></a>keep-aliveæœ¬èº«æ¸²æŸ“</h4><p>åˆšåˆšè¯´äº†ï¼Œ<code>keep-alive</code>è‡ªèº«ç»„ä»¶ä¸ä¼šè¢«æ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼Œé‚£æ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿå…¶å®å°±æ˜¯é€šè¿‡åˆ¤æ–­ç»„ä»¶å®ä¾‹ä¸Šçš„<code>abstract</code>çš„å±æ€§å€¼ï¼Œå¦‚æœæ˜¯<code>true</code>çš„è¯ï¼Œå°±è·³è¿‡è¯¥å®ä¾‹ï¼Œè¯¥å®ä¾‹ä¹Ÿä¸ä¼šå‡ºç°åœ¨çˆ¶çº§é“¾ä¸Š</p><pre><code>// src/core/instance/lifecycle.jsexport function initLifecycle (vm: Component) &#123;  const options = vm.$options  // æ‰¾åˆ°ç¬¬ä¸€ä¸ªéabstractçš„çˆ¶ç»„ä»¶å®ä¾‹  let parent = options.parent  if (parent &amp;&amp; !options.abstract) &#123;    while (parent.$options.abstract &amp;&amp; parent.$parent) &#123;      parent = parent.$parent    &#125;    parent.$children.push(vm)  &#125;  vm.$parent = parent  // ...&#125;</code></pre><h4 id="åŒ…è£¹ç»„ä»¶æ¸²æŸ“"><a href="#åŒ…è£¹ç»„ä»¶æ¸²æŸ“" class="headerlink" title="åŒ…è£¹ç»„ä»¶æ¸²æŸ“"></a>åŒ…è£¹ç»„ä»¶æ¸²æŸ“</h4><p>å’±ä»¬å†æ¥è¯´è¯´è¢«<code>keep-alive</code>åŒ…è£¹ç€çš„ç»„ä»¶æ˜¯å¦‚ä½•ä½¿ç”¨ç¼“å­˜çš„å§ã€‚åˆšåˆšè¯´äº†<code>VNode -&gt; çœŸå®DOM</code>æ˜¯å‘ç”Ÿåœ¨<code>patch</code>çš„é˜¶æ®µï¼Œè€Œå…¶å®è¿™ä¹Ÿæ˜¯è¦ç»†åˆ†çš„ï¼š<code>VNode -&gt; å®ä¾‹åŒ– -&gt; _update -&gt; çœŸå®DOM</code>ï¼Œè€Œç»„ä»¶ä½¿ç”¨ç¼“å­˜çš„åˆ¤æ–­å°±å‘ç”Ÿåœ¨<code>å®ä¾‹åŒ–</code>è¿™ä¸ªé˜¶æ®µï¼Œè€Œè¿™ä¸ªé˜¶æ®µè°ƒç”¨çš„æ˜¯<code>createComponent</code>å‡½æ•°ï¼Œé‚£æˆ‘ä»¬å°±æ¥è¯´è¯´è¿™ä¸ªå‡½æ•°å§ï¼š</p><pre><code>// src/core/vdom/patch.jsfunction createComponent (vnode, insertedVnodeQueue, parentElm, refElm) &#123;  let i = vnode.data  if (isDef(i)) &#123;    const isReactivated = isDef(vnode.componentInstance) &amp;&amp; i.keepAlive    if (isDef(i = i.hook) &amp;&amp; isDef(i = i.init)) &#123;      i(vnode, false /* hydrating */)    &#125;    if (isDef(vnode.componentInstance)) &#123;      initComponent(vnode, insertedVnodeQueue)      insert(parentElm, vnode.elm, refElm) // å°†ç¼“å­˜çš„DOMï¼ˆvnode.elmï¼‰æ’å…¥çˆ¶å…ƒç´ ä¸­      if (isTrue(isReactivated)) &#123;        reactivateComponent(vnode, insertedVnodeQueue, parentElm, refElm)      &#125;      return true    &#125;  &#125;&#125;</code></pre><p>åœ¨ç¬¬ä¸€æ¬¡åŠ è½½è¢«åŒ…è£¹ç»„ä»¶æ—¶ï¼Œå› ä¸º<code>keep-alive</code>çš„<code>render</code>å…ˆäºåŒ…è£¹ç»„ä»¶åŠ è½½ä¹‹å‰æ‰§è¡Œï¼Œæ‰€ä»¥æ­¤æ—¶<code>vnode.componentInstance</code>çš„å€¼æ˜¯<code>undefined</code>ï¼Œè€Œ<code>keepAlive</code>æ˜¯<code>true</code>ï¼Œåˆ™ä»£ç èµ°åˆ°<code>i(vnode, false /* hydrating */)</code>å°±ä¸å¾€ä¸‹èµ°äº†</p><p>å†æ¬¡è®¿é—®åŒ…è£¹ç»„ä»¶æ—¶ï¼Œ<code>vnode.componentInstance</code>çš„å€¼å°±æ˜¯å·²ç»ç¼“å­˜çš„ç»„ä»¶å®ä¾‹ï¼Œé‚£ä¹ˆä¼šæ‰§è¡Œ<code>insert(parentElm, vnode.elm, refElm)</code>é€»è¾‘ï¼Œè¿™æ ·å°±ç›´æ¥æŠŠä¸Šä¸€æ¬¡çš„DOMæ’å…¥åˆ°äº†çˆ¶å…ƒç´ ä¸­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºES6ï¼Œä½ çŸ¥é“å¤šå°‘</title>
      <link href="/2023/01/06/article30/"/>
      <url>/2023/01/06/article30/</url>
      
        <content type="html"><![CDATA[<p>å…³äº ES6 è¯­æ³•ï¼Œè¿™é‡Œå°† ES5 ä¹‹åçš„è¯­æ³•ç»Ÿç§°ä¸º ES6.<br>æ‰€ä»¥å…³äºæ ‡é¢˜ï¼Œå¤§å®¶ä¸å¿…çº ç»“</p><p>ä»¥ä¸‹å®ä¾‹å‡å·²ç»è¿‡æœ¬äººå®é™…æµ‹è¯•ï¼Œç¡®è®¤å¯ç”¨ï¼Œå½“ç„¶ä»…ä»£è¡¨ä¸ªäººç†è§£ï¼</p><h3 id="1ã€let-å’Œ-const"><a href="#1ã€let-å’Œ-const" class="headerlink" title="1ã€let å’Œ const"></a>1ã€let å’Œ const</h3><p>ä¸ var çš„åŒºåˆ«ï¼š</p><ul><li>var æœ‰å˜é‡æå‡ï¼Œæœ‰åˆå§‹åŒ–æå‡ï¼Œå€¼å¯å˜</li><li>let æœ‰å˜é‡æå‡ï¼Œæ²¡æœ‰åˆå§‹åŒ–æå‡ï¼Œå€¼å¯å˜</li><li>const æœ‰å˜é‡æå‡ï¼Œæ²¡æœ‰åˆå§‹åŒ–æå‡ï¼Œå€¼ä¸å¯å˜ï¼Œä½†å¦‚æœè®¢å•ä¸€å¯¹è±¡ï¼Œåˆ™å±æ€§å¯å˜</li></ul><p><code>æš‚æ—¶æ€§æ­»åŒº</code> é—®é¢˜è¯´æ˜:å…¶å®<code>letå’Œconst</code>æ˜¯ç”±å˜é‡æå‡çš„ï¼Œä½†æ˜¯æ²¡æœ‰åˆå§‹åŒ–æå‡ï¼š</p><pre><code>var name = &quot;ä¸€èµ·æ¥çœ‹çœ‹å§&quot;function fn()&#123;    console.log(name)    let name = &quot;æ³¨æ„çœ‹&quot;&#125;fn()// Cannot access &#39;name&#39; before initialization</code></pre><p>å—çº§ä½œç”¨åŸŸè§£å†³é—®é¢˜ï¼š</p><pre><code>for(var i = 0; i &lt; 5 ; i++)&#123;    setTimeout(()=&gt;&#123;        console.log(i)    &#125;)&#125;//5 5 5 5 5for(let i = 0 ; i &lt; 5 ; i++)&#123;    setTimeout(()=&gt;&#123;        console.log(i)    &#125;)&#125;// 0 1 2 3 4</code></pre><h3 id="2ã€é»˜è®¤å‚æ•°"><a href="#2ã€é»˜è®¤å‚æ•°" class="headerlink" title="2ã€é»˜è®¤å‚æ•°"></a>2ã€é»˜è®¤å‚æ•°</h3><p>å¼€å‘ä¸­ä½ æ›¾é‡åˆ°è¿‡è¿™æ ·çš„é—®é¢˜ï¼Œå¦‚æœå‚æ•°ä¸ä¼ è¿›æ¥ï¼Œä½ å°±è®¾ç½®é»˜è®¤å‚æ•°</p><pre><code>function fn (name, age) &#123;  var name = name || &#39;å°å¤©&#39;  var age = age || 18  console.log(name, age)&#125;fn()// å°å¤© 18</code></pre><p>ES6 é»˜è®¤å‚æ•°å†™æ³•</p><pre><code>function fn (name = &#39;å°å¤©&#39;, age = 18) &#123;  console.log(name, age)&#125;fn()// å°å¤© 18fn(&#39;å°å¤©&#39;, 22)// å°å¤© 22</code></pre><h3 id="3ã€æ‰©å±•è¿ç®—ç¬¦"><a href="#3ã€æ‰©å±•è¿ç®—ç¬¦" class="headerlink" title="3ã€æ‰©å±•è¿ç®—ç¬¦"></a>3ã€æ‰©å±•è¿ç®—ç¬¦</h3><p>æåˆ°æ‹¼æ¥æ•°ç»„ï¼Œæˆ–è®¸å¾ˆå¤šäººæƒ³åˆ°çš„éƒ½æ˜¯ï¼š</p><pre><code>const arr1 = [1, 2, 4]const arr2 = [4, 5, 7]const arr3 = [7, 8, 9]const arr = arr1.concat(arr2).concat(arr3)[ 1, 2, 4, 4, 5, 7, 7, 8, 9]</code></pre><p>ä½†æ˜¯ ES6 æä¾›äº†æ›´ä¸ºä¼˜é›…åœ°æ‹¼æ¥æ–¹æ³•</p><pre><code>const arr1 = [1, 2, 4]const arr2 = [4, 5, 7]const arr3 = [7, 8, 9]const arr = [...arr1, ...arr2, ...arr3][ 1, 2, 4, 4, 5, 7, 7, 8, 9]</code></pre><h3 id="4ã€å‰©ä½™å‚æ•°"><a href="#4ã€å‰©ä½™å‚æ•°" class="headerlink" title="4ã€å‰©ä½™å‚æ•°"></a>4ã€å‰©ä½™å‚æ•°</h3><p>ä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥å‚æ•°çš„ä¸ªæ•°æ˜¯ä¸ç¡®å®šçš„ï¼Œè¿™å°±å¯ä»¥ç”¨ ES6 çš„å‰©ä½™å‚æ•°</p><pre><code>function fn (name, ...params) &#123;   console.log(name)   console.log(params)&#125;fn (&#39;å°å¤©&#39;, 1, 2)// å°å¤© [ 1, 2 ]fn (&#39;å°å¤©&#39;, 1, 2, 3, 4, 5)// å°å¤© [ 1, 2, 3, 4, 5 ]</code></pre><h3 id="5ã€æ¨¡æ¿å­—ç¬¦ä¸²"><a href="#5ã€æ¨¡æ¿å­—ç¬¦ä¸²" class="headerlink" title="5ã€æ¨¡æ¿å­—ç¬¦ä¸²"></a>5ã€æ¨¡æ¿å­—ç¬¦ä¸²</h3><p>ä»¥å‰æ‹¼æ¥å­—ç¬¦ä¸²</p><pre><code>const name = &#39;å°å¤©&#39;const age = &#39;22&#39;console.log(name + &#39;ä»Šå¹´&#39; + age + &#39;å²å•¦&#39;)//å°å¤©ä»Šå¹´22å²å•¦</code></pre><p>ES6 æ‹¼æ¥å­—ç¬¦ä¸²</p><pre><code>const name = &#39;å°å¤©&#39;const age = &#39;22&#39;console.log(`$&#123;name&#125;ä»Šå¹´$&#123;age&#125;å²å•¦`)//å°å¤©ä»Šå¹´22å²å•¦</code></pre><h3 id="6ã€Object-keys"><a href="#6ã€Object-keys" class="headerlink" title="6ã€Object.keys"></a>6ã€Object.keys</h3><p>å¯ä»¥ç”¨æ¥è·å–å¯¹è±¡çš„ key çš„é›†åˆï¼Œè¿›è€Œå¯ä»¥è·å¾—å¯¹åº” key çš„ value</p><pre><code>const obj = &#123;  name: &#39;å°å¤©&#39;,  age: 22,  gender: &#39;ç”·&#39;&#125;const keys = Object.keys(obj)console.log(keys)// [ &#39;name&#39;, &#39;age&#39;, &#39;gender&#39; ]</code></pre><h3 id="7ã€ç®­å¤´å‡½æ•°"><a href="#7ã€ç®­å¤´å‡½æ•°" class="headerlink" title="7ã€ç®­å¤´å‡½æ•°"></a>7ã€ç®­å¤´å‡½æ•°</h3><p>ä»¥å‰æˆ‘ä»¬ä½¿ç”¨æ™®é€šå‡½æ•°</p><pre><code>function fn () &#123;&#125;const fn = function () &#123;&#125;</code></pre><p>ES6 æ–°åŠ äº†<code>ç®­å¤´å‡½æ•°</code></p><pre><code>const fn = () =&gt; &#123;&#125;// å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥çœç•¥æ‹¬å·const fn = name =&gt; &#123;&#125;// å¦‚æœå‡½æ•°ä½“é‡Œåªæœ‰ä¸€å¥returnconst fn = name =&gt; &#123;    return 2 * name&#125;// å¯ç®€å†™ä¸ºconst fn = name =&gt; 2 * name// å¦‚æœè¿”å›çš„æ˜¯å¯¹è±¡const fn = name =&gt; (&#123; name: name &#125;)</code></pre><p>æ™®é€šå‡½æ•°å’Œç®­å¤´å‡½æ•°çš„åŒºåˆ«ï¼š</p><ul><li>1ã€ç®­å¤´å‡½æ•°ä¸å¯ä½œä¸ºæ„é€ å‡½æ•°ï¼Œä¸èƒ½ä½¿ç”¨ new</li><li>2ã€ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ this</li><li>3ã€ç®­å¤´å‡½æ•°æ²¡æœ‰ arguments å¯¹è±¡</li><li>4ã€ç®­å¤´å‡½æ•°æ²¡æœ‰åŸå‹å¯¹è±¡</li></ul><h3 id="8ã€Array-prototype-forEach"><a href="#8ã€Array-prototype-forEach" class="headerlink" title="8ã€Array.prototype.forEach"></a>8ã€Array.prototype.forEach</h3><p>ES6 æ–°åŠ çš„æ•°ç»„éå†æ–¹æ³•</p><pre><code>const eachArr = [1, 2, 3, 4, 5]// ä¸‰ä¸ªå‚æ•°ï¼šéå†é¡¹ ç´¢å¼• æ•°ç»„æœ¬èº«// é…åˆç®­å¤´å‡½æ•°eachArr.forEach((item, index, arr) =&gt; &#123;  console.log(item, index, arr)&#125;)1 0 [ 1, 2, 3, 4, 5 ]2 1 [ 1, 2, 3, 4, 5 ]3 2 [ 1, 2, 3, 4, 5 ]4 3 [ 1, 2, 3, 4, 5 ]5 4 [ 1, 2, 3, 4, 5 ]</code></pre><h3 id="9ã€Array-prototype-map"><a href="#9ã€Array-prototype-map" class="headerlink" title="9ã€Array.prototype.map"></a>9ã€Array.prototype.map</h3><p>å¸¸ç”¨äºè¿”å›ä¸€ä¸ªå¤„ç†è¿‡åçš„æ–°æ•°ç»„</p><pre><code>const mapArr = [1, 2, 3, 4, 5]// ä¸‰ä¸ªå‚æ•°ï¼šéå†é¡¹ ç´¢å¼• æ•°ç»„æœ¬èº«// é…åˆç®­å¤´å‡½æ•°ï¼Œå¯¹æ¯ä¸€ä¸ªå…ƒç´ è¿›è¡Œç¿»å€const mapArr2 = mapArr.map((num, index, arr) =&gt; 2 * num)console.log(mapArr2)[ 2, 4, 6, 8, 10 ]</code></pre><h3 id="10ã€Array-prototype-filter"><a href="#10ã€Array-prototype-filter" class="headerlink" title="10ã€Array.prototype.filter"></a>10ã€Array.prototype.filter</h3><p>é¡¾åæ€ä¹‰ï¼Œç”¨æ¥è¿‡æ»¤çš„æ–¹æ³•</p><pre><code>const filterArr = [1, 2, 3, 4, 5]// ä¸‰ä¸ªå‚æ•°ï¼šéå†é¡¹ ç´¢å¼• æ•°ç»„æœ¬èº«// é…åˆç®­å¤´å‡½æ•°ï¼Œè¿”å›å¤§äº3çš„é›†åˆconst filterArr2 = filterArr.filter((num, index, arr) =&gt; num &gt; 3)console.log(filterArr2)[ 4, 5 ]</code></pre><h3 id="11ã€Array-prototype-some"><a href="#11ã€Array-prototype-some" class="headerlink" title="11ã€Array.prototype.some"></a>11ã€Array.prototype.some</h3><p>someï¼Œæ„æ€å°±æ˜¯åªè¦æœ‰ä¸€ä¸ªæ˜¯çœŸï¼Œé‚£å°±è¿”å›çœŸ</p><pre><code>const someArr = [false, true, false, true, false]// ä¸‰ä¸ªå‚æ•°ï¼šéå†é¡¹ ç´¢å¼• æ•°ç»„æœ¬èº«// é…åˆç®­å¤´å‡½æ•°ï¼Œåªè¦æœ‰ä¸€ä¸ªä¸ºtrueï¼Œå°±è¿”å›trueï¼Œä¸€ä¸ªéƒ½trueéƒ½æ²¡æœ‰ï¼Œå°±è¿”å›falseconst someArr2 = someArr.some((bol, index, arr) =&gt; bol)console.log(someArr2)true</code></pre><h3 id="12ã€Array-prototype-every"><a href="#12ã€Array-prototype-every" class="headerlink" title="12ã€Array.prototype.every"></a>12ã€Array.prototype.every</h3><p>every è·Ÿ some æ˜¯ç›¸åçš„ï¼Œsome æ˜¯åªè¦æœ‰ä¸€ä¸ªå°±è¡Œï¼Œevery æ˜¯è¦æ‰€æœ‰ä¸ºçœŸæ‰è¿”å›çœŸ</p><pre><code>const everyArr = [false, true, false, true, false]// ä¸‰ä¸ªå‚æ•°ï¼šéå†é¡¹ ç´¢å¼• æ•°ç»„æœ¬èº«// é…åˆç®­å¤´å‡½æ•°ï¼Œéœ€è¦æ‰€æœ‰ä¸ºtrueï¼Œæ‰è¿”å›trueï¼Œå¦åˆ™è¿”å›falseconst everyArr2 = everyArr.every((bol, index, arr) =&gt; bol)console.log(everyArr2)</code></pre><h3 id="13ã€Array-prototype-reduce"><a href="#13ã€Array-prototype-reduce" class="headerlink" title="13ã€Array.prototype.reduce"></a>13ã€Array.prototype.reduce</h3><ul><li>ç¬¬ä¸€ä¸ªå‚æ•° callback å‡½æ•°ï¼š pre ä¸ºä¸Šæ¬¡ return çš„å€¼ï¼Œnext ä¸ºæ•°ç»„çš„æœ¬æ¬¡éå†çš„é¡¹</li><li>ç¬¬äºŒä¸ªå‚æ•°ä¸ºåˆå§‹å€¼ï¼Œä¹Ÿæ˜¯ç¬¬ä¸€ä¸ª pre</li></ul><p>ä¸¾ä¸¤ä¸ªä¾‹å­ï¼š</p><pre><code>// è®¡ç®— 1 + 2 + 3 + 4 + 5const reduceArr = [1, 2, 3, 4, 5]const sum = reduceArr.reduce((pre, next) =&gt; &#123;  return pre + next&#125;, 0)console.log(sum)// 15// ç»Ÿè®¡å…ƒç´ å‡ºç°ä¸ªæ•°const nameArr = [&#39;å°å¤©&#39;, &#39;xiaotian&#39;, &#39;å°å¤©&#39;, &#39;å°å¤©&#39;, &#39;ç§‘æ¯”&#39;]const totalObj = nameArr.reduce((pre, next) =&gt; &#123;  if (pre[next]) &#123;    pre[next]++  &#125; else &#123;    pre[next] = 1  &#125;  return pre&#125;, &#123;&#125;)console.log(totalObj)// &#123; &#39;å°å¤©&#39;: 3, xiaotian: 1, &#39;ç§‘æ¯”&#39;: 1 &#125;</code></pre><h3 id="14ã€å¯¹è±¡å±æ€§åŒåç®€å†™"><a href="#14ã€å¯¹è±¡å±æ€§åŒåç®€å†™" class="headerlink" title="14ã€å¯¹è±¡å±æ€§åŒåç®€å†™"></a>14ã€å¯¹è±¡å±æ€§åŒåç®€å†™</h3><p>ä»¥å‰åŒåå±æ€§éœ€è¦è¿™ä¹ˆå†™</p><pre><code>const name = &#39;å°å¤©&#39;const age = &#39;22&#39;const obj = &#123;  name: name,  age: age&#125;console.log(obj)// &#123; name: &#39;å°å¤©&#39;, age: &#39;22&#39; &#125;</code></pre><p>ES6 æ–°å¢è¯­æ³•ï¼Œåªéœ€è¿™ä¹ˆå†™</p><pre><code>const name = &#39;å°å¤©&#39;const age = &#39;22&#39;// å±æ€§åŒåå¯ç®€å†™const obj = &#123;  name,  age&#125;console.log(obj)// &#123; name: &#39;å°å¤©&#39;, age: &#39;22&#39; &#125;</code></pre><h3 id="15ã€Promise"><a href="#15ã€Promise" class="headerlink" title="15ã€Promise"></a>15ã€Promise</h3><p><code>Promise</code>ï¼Œä¸­æ–‡åä¸º<code>æ‰¿è¯º</code>ï¼Œæ‰¿è¯ºåœ¨å“ªå‘¢ï¼Ÿæ‰¿è¯ºåœ¨ï¼Œä¸€æ—¦ä»–çš„çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†æ”¹ã€‚</p><p>çœ‹çœ‹åŸºæœ¬ä½¿ç”¨</p><ul><li><p>æˆåŠŸçŠ¶æ€</p><pre><code>  function requestData () &#123;    // æ¨¡æ‹Ÿè¯·æ±‚    return new Promise((resolve, reject) =&gt; &#123;      setTimeout(() =&gt; &#123;        resolve(&#39;å°å¤©&#39;)      &#125;, 1000)    &#125;)  &#125;  requestData().then(res =&gt; &#123;    console.log(res)    // ä¸€ç§’é’Ÿåè¾“å‡º &#39;å°å¤©&#39;  &#125;, err =&gt; &#123;    console.log(err)  &#125;)</code></pre></li><li><p>å¤±è´¥çŠ¶æ€</p><pre><code>  function requestData () &#123;    // æ¨¡æ‹Ÿè¯·æ±‚    return new Promise((resolve, reject) =&gt; &#123;      setTimeout(() =&gt; &#123;        reject(&#39;é”™è¯¯å•¦&#39;)      &#125;, 1000)    &#125;)  &#125;  requestData().then(res =&gt; &#123;    console.log(res)  &#125;, err =&gt; &#123;    console.log(err)    // ä¸€ç§’é’Ÿåè¾“å‡º &#39;é”™è¯¯å•¦&#39;  &#125;)</code></pre></li><li><p><code>all</code>æ–¹æ³•</p><p>æ¥æ”¶ä¸€ä¸ª Promise æ•°ç»„ï¼Œæ•°ç»„ä¸­å¦‚æœ‰é Promise é¡¹ï¼Œåˆ™æ­¤é¡¹å½“åšæˆåŠŸ<br>å¦‚æœæ‰€æœ‰ Promise éƒ½æˆåŠŸï¼Œåˆ™è¿”å›æˆåŠŸç»“æœæ•°ç»„<br>å¦‚æœæœ‰ä¸€ä¸ª Promise å¤±è´¥ï¼Œåˆ™è¿”å›è¿™ä¸ªå¤±è´¥ç»“æœ</p><pre><code>  // å¦‚æœå…¨éƒ½ä¸ºæˆåŠŸ  function fn(time) &#123;   return new Promise((resolve, reject) =&gt; &#123;     console.log(88)     setTimeout(() =&gt; &#123;       resolve(`$&#123;time&#125;æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼`)     &#125;, time)   &#125;)  &#125;  Promise.all([fn(2000), fn(3000), fn(1000)]).then(res =&gt; &#123;    // 3ç§’åè¾“å‡º [ &#39;2000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼&#39;, &#39;3000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼&#39;,    &#39;1000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼&#39; ]    console.log(res)  &#125;, err =&gt; &#123;    console.log(err)  &#125;)  // å¦‚æœæœ‰ä¸€ä¸ªå¤±è´¥  function fn(time, isResolve) &#123;    return new Promise((resolve, reject) =&gt; &#123;      setTimeout(() =&gt; &#123;        isResolve ? resolve(`$&#123;time&#125;æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼`) : reject(`$        &#123;time&#125;æ¯«ç§’åæˆ‘å¤±è´¥å•¦ï¼ï¼ï¼`)      &#125;, time)    &#125;)  &#125;  Promise.all([fn(2000, true), fn(3000), fn(1000, true)]).then(res =&gt; &#123;    console.log(res)  &#125;, err =&gt; &#123;    console.log(err)    // 3ç§’åè¾“å‡º &#39;3000æ¯«ç§’åæˆ‘å¤±è´¥å•¦ï¼ï¼ï¼&#39;  &#125;)</code></pre></li><li><p><code>race</code>æ–¹æ³•</p><p>æ¥æ”¶ä¸€ä¸ª Promise æ•°ç»„ï¼Œæ•°ç»„ä¸­å¦‚æœ‰é Promise é¡¹ï¼Œåˆ™æ­¤é¡¹å½“åšæˆåŠŸ<br>å“ªä¸ª Promise æœ€å¿«å¾—åˆ°ç»“æœï¼Œå°±è¿”å›é‚£ä¸ªç»“æœï¼Œæ— è®ºæˆåŠŸå¤±è´¥</p><pre><code>  function fn(time, isResolve) &#123;    return new Promise((resolve, reject) =&gt; &#123;      setTimeout(() =&gt; &#123;        isResolve ? resolve(`$&#123;time&#125;æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼`) : reject(`$    &#123;time&#125;æ¯«ç§’åæˆ‘å¤±è´¥å•¦ï¼ï¼ï¼`)      &#125;, time)    &#125;)  &#125;  Promise.race([fn(2000, true), fn(3000), fn(1000)]).then(res =&gt; &#123;    console.log(res)  &#125;, err =&gt; &#123;    console.log(err)    // 1ç§’åè¾“å‡º  &#125;)</code></pre></li></ul><h3 id="16ã€class"><a href="#16ã€class" class="headerlink" title="16ã€class"></a>16ã€class</h3><p>ä»¥å‰ä½¿ç”¨æ„é€ å‡½æ•°ç”Ÿæˆå¯¹è±¡ï¼Œè¿™ä¹ˆåš</p><pre><code>function Person(name) &#123;  this.name = name&#125;Person.prototype.sayName = function () &#123;  console.log(this.name)&#125;const kobe = new Person(&#39;ç§‘æ¯”&#39;)kobe.sayName()// ç§‘æ¯”</code></pre><p>è€Œæœ‰äº† ES6 çš„<code>class</code>å¯ä»¥è¿™ä¹ˆåš</p><pre><code>class Person &#123;  constructor(name) &#123;    // æ„é€ å™¨    this.name = name  &#125;  sayName() &#123;    console.log(this.name)  &#125;&#125;const kobe = new Person(&#39;ç§‘æ¯”&#39;)kobe.sayName()// ç§‘æ¯”</code></pre><p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œ<code>class</code>æœ¬è´¨ä¹Ÿæ˜¯<code>function</code>ï¼Œ<code>class</code>æ˜¯<code>function</code>çš„<code>è¯­æ³•ç³–</code></p><pre><code>class Person &#123;&#125;console.log(typeof Person)// function</code></pre><p>é™¤äº†ä»¥ä¸Šï¼Œè¿˜éœ€è¦çŸ¥é“ class çš„ä»¥ä¸‹çŸ¥è¯†ç‚¹</p><p>é™æ€å±æ€§å’Œé™æ€æ–¹æ³•ï¼Œä½¿ç”¨<code>static</code>å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•åªèƒ½ class è‡ªå·±ç”¨ï¼Œå®ä¾‹ç”¨ä¸äº†</p><pre><code>class Person &#123;  constructor(name) &#123;    this.name = name  &#125;  static age = 22  static fn() &#123;    console.log(&#39;å“ˆå“ˆ&#39;)  &#125;&#125;console.log(Person.age)// 22Person.fn()// å“ˆå“ˆconst sunshine_lin = new Person(&#39;å°å¤©&#39;)console.log(sunshine_lin.age)// undefinedsunshine_lin.fn()// fn is not a function</code></pre><p><code>extend</code>ç»§æ‰¿</p><pre><code>class Animal &#123;  constructor(name, age) &#123;    this.name = name    this.age = age  &#125;&#125;class Cat extends Animal &#123;  say() &#123;    console.log(this.name, this.age)  &#125;&#125;const cat = new Cat(&#39;ketty&#39;, 5)// ç»§æ‰¿äº†Animalçš„æ„é€ å™¨cat.say()// ketty 5</code></pre><h3 id="17ã€è§£æ„èµ‹å€¼"><a href="#17ã€è§£æ„èµ‹å€¼" class="headerlink" title="17ã€è§£æ„èµ‹å€¼"></a>17ã€è§£æ„èµ‹å€¼</h3><p>ä»¥å‰æƒ³æå–å¯¹è±¡é‡Œçš„å±æ€§éœ€è¦è¿™ä¹ˆåš</p><pre><code>const obj = &#123;  name: &#39;å°å¤©&#39;,  age: 22,  gender: &#39;ç”·&#39;&#125;const name = obj.nameconst age = obj.ageconst gender = obj.genderconsole.log(name, age, gender)// å°å¤© 22 ç”·</code></pre><p>ES6 æ–°å¢äº†è§£æ„èµ‹å€¼çš„è¯­æ³•</p><pre><code>const obj = &#123;  name: &#39;å°å¤©&#39;,  age: 22,  gender: &#39;ç”·&#39;,  doing: &#123;    morning: &#39;æ‘¸é±¼&#39;,    afternoon: &#39;æ‘¸é±¼&#39;,    evening: &#39;sleep&#39;  &#125;&#125;const &#123; name, age, gender &#125; = objconsole.log(name, age, gender)// å°å¤© 22 ç”·// è§£æ„é‡åconst &#123; name: myname &#125; = objconsole.log(myname)// å°å¤©// åµŒå¥—è§£æ„const &#123; doing: &#123; evening &#125; &#125; = objconsole.log(evening)// sleep</code></pre><p>ä¹Ÿå¯ä»¥è¿›è¡Œæ•°ç»„çš„è§£æ„</p><pre><code>const arr = [1, 2, 3]const [a, b, c] = arrconsole.log(a, b, c)// 1 2 3// é»˜è®¤èµ‹å€¼const [a, b, c, d = 5] = arrconsole.log(a, b, c, d)// 1 2 3 5// ä¹±åºè§£æ„const &#123; 1: a, 0: b, 2: c &#125; = arrconsole.log(a, b, c) // 2 1 3</code></pre><h3 id="18ã€find-å’Œ-findIndex"><a href="#18ã€find-å’Œ-findIndex" class="headerlink" title="18ã€find å’Œ findIndex"></a>18ã€find å’Œ findIndex</h3><ul><li><p>findï¼šæ‰¾åˆ°è¿”å›è¢«æ‰¾å…ƒç´ ï¼Œæ‰¾ä¸åˆ°è¿”å› undefined</p></li><li><p>findIndexï¼šæ‰¾åˆ°è¿”å›è¢«æ‰¾å…ƒç´ ç´¢å¼•ï¼Œæ‰¾ä¸åˆ°è¿”å›-1</p><pre><code>  const findArr = [    &#123; name: &#39;ç§‘æ¯”&#39;, no: &#39;24&#39; &#125;,    &#123; name: &#39;ç½—æ–¯&#39;, no: &#39;1&#39; &#125;,    &#123; name: &#39;åˆ©æ‹‰å¾·&#39;, no: &#39;0&#39; &#125;  ]  const kobe = findArr.find((&#123; name &#125;) =&gt; name === &#39;ç§‘æ¯”&#39;)  const kobeIndex = findArr.findIndex((&#123; name &#125;) =&gt; name === &#39;ç§‘æ¯”&#39;)  console.log(kobe)  // &#123; name: &#39;ç§‘æ¯”&#39;, no: &#39;24&#39; &#125;  console.log(kobeIndex)  // 0</code></pre></li></ul><h3 id="19ã€for-of-å’Œ-for-in"><a href="#19ã€for-of-å’Œ-for-in" class="headerlink" title="19ã€for of å’Œ for in"></a>19ã€for of å’Œ for in</h3><ul><li>for in ï¼šéå†æ–¹æ³•ï¼Œå¯éå†å¯¹è±¡å’Œæ•°ç»„</li><li>for of ï¼šéå†æ–¹æ³•ï¼Œåªèƒ½éå†æ•°ç»„ï¼Œä¸èƒ½éå†é iterable å¯¹è±¡</li></ul><p>å…ˆçœ‹ for inï¼š</p><pre><code>const obj = &#123; name: &#39;å°å¤©&#39;, age: 22, gender: &#39;ç”·&#39; &#125;const arr = [1, 2, 3, 4, 5]for(let key in obj) &#123;  console.log(key)&#125;nameagegenderfor(let index in arr) &#123;  console.log(index)&#125;0 1 2 3 4</code></pre><p>å†çœ‹ for ofï¼š</p><pre><code>for(let item of arr) &#123;  console.log(item)&#125;1 2 3 4 5</code></pre><h3 id="20ã€Set-å’Œ-Map"><a href="#20ã€Set-å’Œ-Map" class="headerlink" title="20ã€Set å’Œ Map"></a>20ã€Set å’Œ Map</h3><ul><li>Set</li></ul><p>å…ˆè¯´è¯´<code>Set</code>çš„åŸºæœ¬ç”¨æ³•</p><pre><code>// å¯ä¸ä¼ æ•°ç»„const set1 = new Set()set1.add(1)set1.add(2)console.log(set1)// Set(2) &#123; 1, 2 &#125;// ä¹Ÿå¯ä¼ æ•°ç»„const set2 = new Set([1, 2, 3])// å¢åŠ å…ƒç´  ä½¿ç”¨ addset2.add(4)set2.add(&#39;å°å¤©&#39;)console.log(set2)// Set(5) &#123; 1, 2, 3, 4, &#39;å°å¤©&#39; &#125;// æ˜¯å¦å«æœ‰æŸä¸ªå…ƒç´  ä½¿ç”¨ hasconsole.log(set2.has(2))// true// æŸ¥çœ‹é•¿åº¦ ä½¿ç”¨ sizeconsole.log(set2.size)// 5// åˆ é™¤å…ƒç´  ä½¿ç”¨ deleteset2.delete(2)console.log(set2)// Set(4) &#123; 1, 3, 4, &#39;å°å¤©&#39; &#125;</code></pre><p>å†è¯´è¯´<code>Set</code>çš„ä¸é‡å¤æ€§</p><pre><code>// å¢åŠ ä¸€ä¸ªå·²æœ‰å…ƒç´ ï¼Œåˆ™å¢åŠ æ— æ•ˆï¼Œä¼šè¢«è‡ªåŠ¨å»é‡const set1 = new Set([1])set1.add(1)console.log(set1)// Set(1) &#123; 1 &#125;// ä¼ å…¥çš„æ•°ç»„ä¸­æœ‰é‡å¤é¡¹ï¼Œä¼šè‡ªåŠ¨å»é‡const set2 = new Set([1, 2, &#39;å°å¤©&#39;, 3, 3, &#39;å°å¤©&#39;])console.log(set2)// Set(4) &#123; 1, 2, &#39;å°å¤©&#39;, 3 &#125;</code></pre><p><code>Set</code>çš„ä¸é‡å¤æ€§ä¸­ï¼Œè¦æ³¨æ„<code>å¼•ç”¨æ•°æ®ç±»å‹å’ŒNaN</code></p><pre><code>// ä¸¤ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸åŒçš„æŒ‡é’ˆï¼Œæ‰€ä»¥æ²¡æ³•å»é‡const set1 = new Set([1, &#123;name: &#39;å°å¤©&#39;&#125;, 2, &#123;name: &#39;å°å¤©&#39;&#125;])console.log(set1)// Set(4) &#123; 1, &#123; name: &#39;å°å¤©&#39; &#125;, 2, &#123; name: &#39;å°å¤©&#39; &#125; &#125;// å¦‚æœæ˜¯ä¸¤ä¸ªå¯¹è±¡æ˜¯åŒä¸€æŒ‡é’ˆï¼Œåˆ™èƒ½å»é‡const obj = &#123;name: &#39;å°å¤©&#39;&#125;const set2 = new Set([1, obj, 2, obj])console.log(set2)// Set(3) &#123; 1, &#123; name: &#39;å°å¤©&#39; &#125;, 2 &#125;</code></pre><p>å’±ä»¬éƒ½çŸ¥é“ NaN !== NaNï¼ŒNaN æ˜¯è‡ªèº«ä¸ç­‰äºè‡ªèº«çš„ï¼Œä½†æ˜¯åœ¨ Set ä¸­ä»–è¿˜æ˜¯ä¼šè¢«å»é‡</p><pre><code>const set = new Set([1, NaN, 1, NaN])console.log(set)// Set(2) &#123; 1, NaN &#125;</code></pre><p>åˆ©ç”¨ Set çš„ä¸é‡å¤æ€§ï¼Œå¯ä»¥å®ç°æ•°ç»„å»é‡</p><pre><code>const arr = [1, 2, 3, 4, 4, 5, 5, 66, 9, 1]// Setå¯åˆ©ç”¨æ‰©å±•è¿ç®—ç¬¦è½¬ä¸ºæ•°ç»„å“¦const quchongArr = [...new Set(arr)]console.log(quchongArr)// [1,  2, 3, 4, 5, 66, 9]</code></pre><ul><li>Map</li></ul><p><code>Map</code>å¯¹æ¯”<code>object</code>æœ€å¤§çš„å¥½å¤„å°±æ˜¯ï¼Œkey ä¸å—<code>ç±»å‹é™åˆ¶</code></p><pre><code>// å®šä¹‰mapconst map1 = new Map()// æ–°å¢é”®å€¼å¯¹ ä½¿ç”¨ set(key, value)map1.set(true, 1)map1.set(1, 2)map1.set(&#39;å“ˆå“ˆ&#39;, &#39;å˜»å˜»å˜»&#39;)console.log(map1)// Map(3) &#123; true =&gt; 1, 1 =&gt; 2, &#39;å“ˆå“ˆ&#39; =&gt; &#39;å˜»å˜»å˜»&#39; &#125;// åˆ¤æ–­mapæ˜¯å¦å«æœ‰æŸä¸ªkey ä½¿ç”¨ has(key)console.log(map1.has(&#39;å“ˆå“ˆ&#39;))// true// è·å–mapä¸­æŸä¸ªkeyå¯¹åº”çš„value ä½¿ç”¨ get(key)console.log(map1.get(true))// 2// åˆ é™¤mapä¸­æŸä¸ªé”®å€¼å¯¹ ä½¿ç”¨ delete(key)map1.delete(&#39;å“ˆå“ˆ&#39;)console.log(map1)// Map(2) &#123; true =&gt; 1, 1 =&gt; 2 &#125;// å®šä¹‰mapï¼Œä¹Ÿå¯ä¼ å…¥é”®å€¼å¯¹æ•°ç»„é›†åˆconst map2 = new Map([[true, 1], [1, 2], [&#39;å“ˆå“ˆ&#39;, &#39;å˜»å˜»å˜»&#39;]])console.log(map2)// Map(3) &#123; true =&gt; 1, 1 =&gt; 2, &#39;å“ˆå“ˆ&#39; =&gt; &#39;å˜»å˜»å˜»&#39; &#125;</code></pre><h3 id="21ã€includes"><a href="#21ã€includes" class="headerlink" title="21ã€includes"></a>21ã€includes</h3><p>ä¼ å…¥å…ƒç´ ï¼Œå¦‚æœæ•°ç»„ä¸­èƒ½æ‰¾åˆ°æ­¤å…ƒç´ ï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false</p><pre><code>const includeArr = [1, 2 , 3, &#39;å°å¤©&#39;, &#39;ç§‘æ¯”&#39;]const isKobe = includeArr.includes(&#39;ç§‘æ¯”&#39;)console.log(isKobe) // true</code></pre><p>è·Ÿ indexOf å¾ˆåƒï¼Œä½†è¿˜æ˜¯æœ‰åŒºåˆ«çš„</p><pre><code>const arr = [1, 2, NaN]console.log(arr.indexOf(NaN)) // -1  indexOfæ‰¾ä¸åˆ°NaNconsole.log(arr.includes(NaN)) // true includesèƒ½æ‰¾åˆ°NaN</code></pre><h3 id="22ã€æ±‚å¹‚è¿ç®—ç¬¦"><a href="#22ã€æ±‚å¹‚è¿ç®—ç¬¦" class="headerlink" title="22ã€æ±‚å¹‚è¿ç®—ç¬¦"></a>22ã€æ±‚å¹‚è¿ç®—ç¬¦</h3><p>ä»¥å‰æ±‚å¹‚ï¼Œéœ€è¦è¿™ä¹ˆå†™</p><pre><code>const num = Math.pow(3, 2) // 9</code></pre><p>ES7 æä¾›äº†æ±‚å¹‚è¿ç®—ç¬¦ï¼š<code>**</code></p><pre><code>const num = 3 ** 2 // 9</code></pre><h3 id="23ã€Object-values"><a href="#23ã€Object-values" class="headerlink" title="23ã€Object.values"></a>23ã€Object.values</h3><p>å¯ä»¥ç”¨æ¥è·å–å¯¹è±¡çš„ value çš„é›†åˆ</p><pre><code>const obj = &#123;  name: &#39;å°å¤©&#39;,  age: 22,  gender: &#39;ç”·&#39;&#125;const values = Object.values(obj)console.log(values)// [ &#39;å°å¤©&#39;, 22, &#39;ç”·&#39; ]</code></pre><h3 id="24ã€Object-entries"><a href="#24ã€Object-entries" class="headerlink" title="24ã€Object.entries"></a>24ã€Object.entries</h3><p>å¯ä»¥ç”¨æ¥è·å–å¯¹è±¡çš„é”®å€¼å¯¹é›†åˆ</p><pre><code>const obj = &#123;  name: &#39;å°å¤©&#39;,  age: 22,  gender: &#39;ç”·&#39;&#125;const entries = Object.entries(obj)console.log(entries)// [ [ &#39;name&#39;, &#39;å°å¤©&#39; ], [ &#39;age&#39;, 22 ], [ &#39;gender&#39;, &#39;ç”·&#39; ] ]</code></pre><h3 id="25ã€async-await"><a href="#25ã€async-await" class="headerlink" title="25ã€async/await"></a>25ã€async/await</h3><p>è¿™ä¸ªæ˜¯å¾ˆå¸¸ç”¨çš„è¯­æ³•äº†ï¼Œæˆ‘çš„ç†è§£å°±æ˜¯ï¼š<strong>ä»¥åŒæ­¥æ–¹å¼æ‰§è¡Œå¼‚æ­¥æ“ä½œ</strong></p><p>æˆ‘ä»¬å¹³æ—¶å¯èƒ½ä¼šé‡åˆ°è¿™ç§åœºæ™¯ï¼Œæ¥å£ä¸€ï¼Œè¯·æ±‚åˆ°æ•°æ®ä¸€ï¼Œè€Œæ•°æ®ä¸€è¢«å½“åšè¯·æ±‚äºŒçš„å‚æ•°å»è¯·æ±‚æ•°æ®äºŒï¼Œæˆ‘ä»¬ä¼šç”¨ Promise è¿™ä¹ˆåš</p><pre><code>function fn() &#123;  // æ¨¡æ‹Ÿç¬¬ä¸€æ¬¡è¯·æ±‚  return new Promise((resolve, reject) =&gt; &#123;    setTimeout(() =&gt; &#123;      resolve(5)    &#125;, 1000)  &#125;).then(res =&gt; &#123;    // æ¨¡æ‹Ÿç¬¬äºŒæ¬¡è¯·æ±‚    new Promise((resolve, reject) =&gt; &#123;      setTimeout(() =&gt; &#123;        // æ‹¿ç¬¬ä¸€æ¬¡è¯·æ±‚çš„æ•°æ®å»ä¹˜10ï¼Œå½“åšç¬¬äºŒæ¬¡è¯·æ±‚çš„æ•°æ®        resolve(res * 10)      &#125;, 2000)    &#125;).then(sres =&gt; &#123;      console.log(sres)    &#125;)  &#125;)&#125;fn()// 1 + 2 = 3 3ç§’åè¾“å‡º 50</code></pre><p>è¿™æ ·çš„åµŒå¥—æ˜¯ä¸ç¾è§‚çš„ï¼Œå¦‚æœæœ‰å¾ˆå¤šä¸ªæ¥å£ï¼Œé‚£å°±ä¼šåµŒå¥—å¾ˆå¤šå±‚ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ async/await æ¥ä»¥åŒæ­¥æ–¹å¼æ‰§è¡Œå¼‚æ­¥ï¼Œæ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li><p>await åªèƒ½åœ¨ async å‡½æ•°é‡Œä½¿ç”¨</p></li><li><p>await åé¢æœ€å¥½æ¥ Promiseï¼Œå¦‚æœåé¢æ¥çš„æ˜¯æ™®é€šå‡½æ•°åˆ™ä¼šç›´æ¥æ‰§è¡Œ</p></li><li><p>async å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª Promise</p><pre><code>  function fn1 () &#123;    return new Promise((resolve, reject) =&gt; &#123;      setTimeout(() =&gt; &#123;        resolve(5)      &#125;, 1000)    &#125;)  &#125;  function fn2 (data) &#123;    return new Promise((resolve, reject) =&gt; &#123;      setTimeout(() =&gt; &#123;        resolve(data * 10)      &#125;, 2000)    &#125;)  &#125;  async function req () &#123;    // åŒæ­¥æ–¹å¼æ‰§è¡Œå¼‚æ­¥ï¼Œåƒæ’é˜Ÿä¸€æ ·    const data1 = await fn1()    // ç­‰å¾…1ç§’åè¿”å›æ•°æ®å†å¾€ä¸‹æ‰§è¡Œ    const data2 = await fn2(data1)    // æ‹¿data1å»è¯·æ±‚2ç§’åï¼Œå¾€ä¸‹èµ°    console.log(data2)    // æ€»å…±3ç§’å è¾“å‡º 50  &#125;  req()</code></pre></li></ul><h3 id="26ã€for-await-of"><a href="#26ã€for-await-of" class="headerlink" title="26ã€for await of"></a>26ã€for await of</h3><p>æˆ‘ä»¬æ¥çœ‹ä»¥ä¸‹åœºæ™¯å“ˆ</p><pre><code>function fn (time) &#123;  return new Promise((resolve, reject) =&gt; &#123;    setTimeout(() =&gt; &#123;      resolve(`$&#123;time&#125;æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼`)    &#125;, time)  &#125;)&#125;fn(3000).then(res =&gt; console.log(res))fn(1000).then(res =&gt; console.log(res))fn(2000).then(res =&gt; console.log(res))ç»“æœæ˜¯1000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼2000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼3000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼</code></pre><p>ä½†æ˜¯æˆ‘æƒ³è¦è¿™ä¸ªç»“æœ</p><pre><code>3000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼1000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼2000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼</code></pre><p>ç¬¬ä¸€æ—¶é—´æˆ‘ä»¬è‚¯å®šæƒ³åˆ°çš„æ˜¯<code>async/await</code></p><pre><code>function fn (time) &#123;  return new Promise((resolve, reject) =&gt; &#123;    setTimeout(() =&gt; &#123;      resolve(`$&#123;time&#125;æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼`)    &#125;, time)  &#125;)&#125;async function asyncFn () &#123;  // æ’é˜Ÿ  const data1 = await fn(3000)  console.log(data1)  // 3ç§’å 3000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼  const data2 = await fn(1000)  console.log(data2)  // å†è¿‡1ç§’ 1000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼  const data3 = await fn(2000)  console.log(data3)  // å†è¿‡2ç§’ 2000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼&#125;</code></pre><p>ä½†æ˜¯ä¸Šé¢ä»£ç ä¹Ÿæ˜¯æœ‰ç¼ºç‚¹çš„ï¼Œå¦‚æœæœ‰å‡ åä¸ªï¼Œé‚£ä¸æ˜¯å¾—å†™å‡ åä¸ª awaitï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥é€šè¿‡å¾ªç¯æ¥è¾“å‡ºå‘¢ï¼Ÿ</p><pre><code>function fn (time) &#123;  return new Promise((resolve, reject) =&gt; &#123;    setTimeout(() =&gt; &#123;      resolve(`$&#123;time&#125;æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼`)    &#125;, time)  &#125;)&#125;async function asyncFn () &#123;  const arr = [fn(3000), fn(1000), fn(1000), fn(2000), fn(500)]  for await (let x of arr) &#123;    console.log(x)  &#125;&#125;asyncFn()3000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼1000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼1000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼2000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼500æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼</code></pre><h3 id="27ã€Promise-finally"><a href="#27ã€Promise-finally" class="headerlink" title="27ã€Promise.finally"></a>27ã€Promise.finally</h3><p>æ–°å¢çš„ Promise æ–¹æ³•ï¼Œæ— è®ºå¤±è´¥æˆ–è€…æˆåŠŸçŠ¶æ€ï¼Œéƒ½ä¼šæ‰§è¡Œè¿™ä¸ªå‡½æ•°</p><pre><code>// æˆåŠŸnew Promise((resolve, reject) =&gt; &#123;  resolve(&#39;æˆåŠŸå–½&#39;)&#125;).then(  res =&gt; &#123; console.log(res) &#125;,  err =&gt; &#123; console.log(err) &#125;).finally(() =&gt; &#123; console.log(&#39;æˆ‘æ˜¯finally&#39;) &#125;)// å¤±è´¥å–½new Promise((resolve, reject) =&gt; &#123;  reject(&#39;å¤±è´¥å–½&#39;)&#125;).then(  res =&gt; &#123; console.log(res) &#125;,  err =&gt; &#123; console.log(err) &#125;).finally(() =&gt; &#123; console.log(&#39;æˆ‘æ˜¯finally&#39;) &#125;)</code></pre><h3 id="28ã€Array-flat"><a href="#28ã€Array-flat" class="headerlink" title="28ã€Array.flat"></a>28ã€Array.flat</h3><p>æœ‰ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œæˆ‘æƒ³è®©ä»–å˜æˆä¸€ç»´æ•°ç»„ï¼š</p><pre><code>const arr = [1, 2, 3, [4, 5, 6]]console.log(arr.flat())// [ 1, 2, 3, 4, 5, 6 ]</code></pre><p>è¿˜å¯ä»¥ä¼ å‚æ•°ï¼Œå‚æ•°ä¸ºé™ç»´çš„æ¬¡æ•°</p><pre><code>const arr = [1, 2, 3, [4, 5, 6, [7, 8, 9]]]console.log(arr.flat(2))[ 1, 2, 3, 4, 5, 6, 7, 8, 9]</code></pre><p>å¦‚æœä¼ çš„æ˜¯ä¸€ä¸ªæ— é™å¤§çš„æ•°å­—ï¼Œé‚£ä¹ˆå°±å®ç°äº†å¤šç»´æ•°ç»„(æ— è®ºå‡ ç»´)é™ä¸ºä¸€ç»´æ•°ç»„</p><pre><code>const arr = [1, 2, 3, [4, 5, 6, [7, 8, 9, [10, 11, 12]]]]console.log(arr.flat(Infinity))[   1,  2, 3, 4,  5,   6,  7, 8, 9, 10,   11, 12]</code></pre><h3 id="29ã€Array-flatMap"><a href="#29ã€Array-flatMap" class="headerlink" title="29ã€Array.flatMap"></a>29ã€Array.flatMap</h3><p>ç°åœ¨ç»™ä½ ä¸€ä¸ªéœ€æ±‚</p><pre><code>let arr = [&quot;ç§‘æ¯” è©¹å§†æ–¯ å®‰ä¸œå°¼&quot;, &quot;åˆ©æ‹‰å¾· ç½—æ–¯ éº¦ç§‘å‹’å§†&quot;];</code></pre><p>å°†ä¸Šé¢æ•°ç»„è½¬ä¸º</p><pre><code>[ &#39;ç§‘æ¯”&#39;, &#39;è©¹å§†æ–¯&#39;, &#39;å®‰ä¸œå°¼&#39;, &#39;åˆ©æ‹‰å¾·&#39;, &#39;ç½—æ–¯&#39;, &#39;éº¦ç§‘å‹’å§†&#39; ]</code></pre><p>ç¬¬ä¸€æ—¶é—´æƒ³åˆ°<code>map + flat</code></p><pre><code>console.log(arr.map(x =&gt; x.split(&quot; &quot;)).flat());// [ &#39;ç§‘æ¯”&#39;, &#39;è©¹å§†æ–¯&#39;, &#39;å®‰ä¸œå°¼&#39;, &#39;åˆ©æ‹‰å¾·&#39;, &#39;ç½—æ–¯&#39;, &#39;éº¦ç§‘å‹’å§†&#39; ]</code></pre><p><code>flatMap</code>å°±æ˜¯<code>flat + map</code></p><pre><code>console.log(arr.flatMap(x =&gt; x.split(&quot; &quot;)));// [ &#39;ç§‘æ¯”&#39;, &#39;è©¹å§†æ–¯&#39;, &#39;å®‰ä¸œå°¼&#39;, &#39;åˆ©æ‹‰å¾·&#39;, &#39;ç½—æ–¯&#39;, &#39;éº¦ç§‘å‹’å§†&#39; ]</code></pre><h3 id="30ã€Promise-allSettled"><a href="#30ã€Promise-allSettled" class="headerlink" title="30ã€Promise.allSettled"></a>30ã€Promise.allSettled</h3><p>ES11 æ–°å¢çš„ Promise çš„æ–¹æ³•</p><ul><li><p>æ¥æ”¶ä¸€ä¸ª Promise æ•°ç»„ï¼Œæ•°ç»„ä¸­å¦‚æœ‰é Promise é¡¹ï¼Œåˆ™æ­¤é¡¹å½“åšæˆåŠŸ</p></li><li><p>æŠŠæ¯ä¸€ä¸ª Promise çš„ç»“æœï¼Œé›†åˆæˆæ•°ç»„ï¼Œè¿”å›</p><pre><code>  function fn(time, isResolve) &#123;    return new Promise((resolve, reject) =&gt; &#123;      setTimeout(() =&gt; &#123;        isResolve ? resolve(`$&#123;time&#125;æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼`) : reject(`$&#123;time&#125;æ¯«ç§’åæˆ‘å¤±è´¥å•¦ï¼ï¼ï¼`)      &#125;, time)    &#125;)  &#125;  Promise.allSettled([fn(2000, true), fn(3000), fn(1000)]).then(res =&gt; &#123;    console.log(res)    // 3ç§’åè¾“å‡º    [    &#123; status: &#39;fulfilled&#39;, value: &#39;2000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼&#39; &#125;,    &#123; status: &#39;rejected&#39;, reason: &#39;3000æ¯«ç§’åæˆ‘å¤±è´¥å•¦ï¼ï¼ï¼&#39; &#125;,    &#123; status: &#39;rejected&#39;, reason: &#39;1000æ¯«ç§’åæˆ‘å¤±è´¥å•¦ï¼ï¼ï¼&#39; &#125;  ]  &#125;)</code></pre></li></ul>]]></content>
      
      
      <categories>
          
          <category> ES6 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> ES6 </tag>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é˜²æ­¢æ•°æ®é‡å¤æäº¤çš„6ç§æ–¹æ³•</title>
      <link href="/2022/11/30/article28/"/>
      <url>/2022/11/30/article28/</url>
      
        <content type="html"><![CDATA[<h2 id="æ¨¡æ‹Ÿç”¨æˆ·åœºæ™¯"><a href="#æ¨¡æ‹Ÿç”¨æˆ·åœºæ™¯" class="headerlink" title="æ¨¡æ‹Ÿç”¨æˆ·åœºæ™¯"></a>æ¨¡æ‹Ÿç”¨æˆ·åœºæ™¯</h2><p>å¤§è‡´çš„åœºæ™¯æ˜¯è¿™æ ·çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3106d1c474bc4dd7abbad7d478a14811~tplv-k3u1fbpfcp-watermark.awebp"></p><p>ç®€åŒ–çš„æ¨¡æ‹Ÿä»£ç å¦‚ä¸‹ï¼ˆåŸºäº Spring Bootï¼‰ï¼š</p><pre><code>import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;@RequestMapping(&quot;/user&quot;)@RestControllerpublic class UserController &#123;   /**     * è¢«é‡å¤è¯·æ±‚çš„æ–¹æ³•     */    @RequestMapping(&quot;/add&quot;)    public String addUser(String id) &#123;        // ä¸šåŠ¡ä»£ç ...        System.out.println(&quot;æ·»åŠ ç”¨æˆ·ID:&quot; + id);        return &quot;æ‰§è¡ŒæˆåŠŸï¼&quot;;    &#125;&#125;</code></pre><h2 id="å‰ç«¯æ‹¦æˆª"><a href="#å‰ç«¯æ‹¦æˆª" class="headerlink" title="å‰ç«¯æ‹¦æˆª"></a>å‰ç«¯æ‹¦æˆª</h2><p>å‰ç«¯æ‹¦æˆªæ˜¯æŒ‡é€šè¿‡ HTML é¡µé¢æ¥æ‹¦æˆªé‡å¤è¯·æ±‚ï¼Œæ¯”å¦‚åœ¨ç”¨æˆ·ç‚¹å‡»å®Œâ€œæäº¤â€æŒ‰é’®åï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæŒ‰é’®è®¾ç½®ä¸ºä¸å¯ç”¨æˆ–è€…éšè—çŠ¶æ€ã€‚</p><p>æ‰§è¡Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/41abe74140434045874f902a113b5b08~tplv-k3u1fbpfcp-watermark.awebp"></p><p>å‰ç«¯æ‹¦æˆªçš„å®ç°ä»£ç ï¼š</p><pre><code>&lt;html&gt;&lt;script&gt;    function subCli()&#123;        // æŒ‰é’®è®¾ç½®ä¸ºä¸å¯ç”¨        document.getElementById(&quot;btn_sub&quot;).disabled=&quot;disabled&quot;;        document.getElementById(&quot;dv1&quot;).innerText = &quot;æŒ‰é’®è¢«ç‚¹å‡»äº†~&quot;;    &#125;&lt;/script&gt;&lt;body style=&quot;margin-top: 100px;margin-left: 100px;&quot;&gt;    &lt;input id=&quot;btn_sub&quot; type=&quot;button&quot;  value=&quot; æ äº¤ &quot;  onclick=&quot;subCli()&quot;&gt;    &lt;div id=&quot;dv1&quot; style=&quot;margin-top: 80px;&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><p>ä½†å‰ç«¯æ‹¦æˆªæœ‰ä¸€ä¸ªè‡´å‘½çš„é—®é¢˜ï¼Œå¦‚æœæ˜¯æ‡‚è¡Œçš„ç¨‹åºå‘˜æˆ–éæ³•ç”¨æˆ·å¯ä»¥ç›´æ¥ç»•è¿‡å‰ç«¯é¡µé¢ï¼Œé€šè¿‡æ¨¡æ‹Ÿè¯·æ±‚æ¥é‡å¤æäº¤è¯·æ±‚ï¼Œæ¯”å¦‚å……å€¼äº† 100 å…ƒï¼Œé‡å¤æäº¤äº† 10 æ¬¡å˜æˆäº† 1000 å…ƒï¼ˆç¬é—´å‘ç°äº†ä¸€ä¸ªè‡´å¯Œçš„å¥½åŠæ³•ï¼‰ã€‚</p><p>æ‰€ä»¥é™¤äº†å‰ç«¯æ‹¦æˆªä¸€éƒ¨åˆ†æ­£å¸¸çš„è¯¯æ“ä½œä¹‹å¤–ï¼Œåç«¯çš„æ‹¦æˆªä¹Ÿæ˜¯å¿…ä¸å¯å°‘ã€‚</p><h2 id="åç«¯æ‹¦æˆª"><a href="#åç«¯æ‹¦æˆª" class="headerlink" title="åç«¯æ‹¦æˆª"></a>åç«¯æ‹¦æˆª</h2><p>åç«¯æ‹¦æˆªçš„å®ç°æ€è·¯æ˜¯åœ¨æ–¹æ³•æ‰§è¡Œä¹‹å‰ï¼Œå…ˆåˆ¤æ–­æ­¤ä¸šåŠ¡æ˜¯å¦å·²ç»æ‰§è¡Œè¿‡ï¼Œå¦‚æœæ‰§è¡Œè¿‡åˆ™ä¸å†æ‰§è¡Œï¼Œå¦åˆ™å°±æ­£å¸¸æ‰§è¡Œã€‚</p><p>æˆ‘ä»¬å°†è¯·æ±‚çš„ä¸šåŠ¡ ID å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå¹¶ä¸”é€šè¿‡æ·»åŠ äº’æ–¥é”æ¥ä¿è¯å¤šçº¿ç¨‹ä¸‹çš„ç¨‹åºæ‰§è¡Œå®‰å…¨ï¼Œå¤§ä½“å®ç°æ€è·¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cfb589c81df64f0abee57cda25219ef0~tplv-k3u1fbpfcp-watermark.awebp"></p><p>ç„¶è€Œï¼Œå°†æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨ <code>HashMap</code> å­˜å‚¨ï¼Œæˆ–è€…æ˜¯ä½¿ç”¨ Guava Cache ä¹Ÿæ˜¯åŒæ ·çš„æ•ˆæœï¼Œä½†å¾ˆæ˜¾ç„¶ <code>HashMap</code> å¯ä»¥æ›´å¿«çš„å®ç°åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆæ¥å®ç°ä¸€ä¸ª <code>HashMap</code> çš„é˜²é‡ï¼ˆé˜²æ­¢é‡å¤ï¼‰ç‰ˆæœ¬ã€‚</p><h3 id="1-åŸºç¡€ç‰ˆâ€”â€”HashMap"><a href="#1-åŸºç¡€ç‰ˆâ€”â€”HashMap" class="headerlink" title="1.åŸºç¡€ç‰ˆâ€”â€”HashMap"></a>1.åŸºç¡€ç‰ˆâ€”â€”HashMap</h3><pre><code>import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;import java.util.HashMap;import java.util.Map;/\*\*- æ™®é€š Map ç‰ˆæœ¬\*/@RequestMapping(&quot;/user&quot;)@RestControllerpublic class UserController3 &#123;  // ç¼“å­˜ ID é›†åˆ  private Map&lt;String, Integer&gt; reqCache = new HashMap&lt;&gt;();  @RequestMapping(&quot;/add&quot;)      public String addUser(String id) &#123;          // éç©ºåˆ¤æ–­(å¿½ç•¥)...          synchronized (this.getClass()) &#123;              // é‡å¤è¯·æ±‚åˆ¤æ–­              if (reqCache.containsKey(id)) &#123;                  // é‡å¤è¯·æ±‚                  System.out.println(&quot;è¯·å‹¿é‡å¤æäº¤ï¼ï¼ï¼&quot; + id);                  return &quot;æ‰§è¡Œå¤±è´¥&quot;;              &#125;              // å­˜å‚¨è¯·æ±‚ ID              reqCache.put(id, 1);          &#125;          // ä¸šåŠ¡ä»£ç ...          System.out.println(&quot;æ·»åŠ ç”¨æˆ·ID:&quot; + id);          return &quot;æ‰§è¡ŒæˆåŠŸï¼&quot;;      &#125;&#125;</code></pre><p>å®ç°æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f2c073fd03734f448715d215875c19cf~tplv-k3u1fbpfcp-watermark.awebp"></p><p><strong>å­˜åœ¨çš„é—®é¢˜</strong>ï¼šæ­¤å®ç°æ–¹å¼æœ‰ä¸€ä¸ªè‡´å‘½çš„é—®é¢˜ï¼Œå› ä¸º <code>HashMap</code> æ˜¯æ— é™å¢é•¿çš„ï¼Œå› æ­¤å®ƒä¼šå ç”¨è¶Šæ¥è¶Šå¤šçš„å†…å­˜ï¼Œå¹¶ä¸”éšç€ <code>HashMap</code> æ•°é‡çš„å¢åŠ æŸ¥æ‰¾çš„é€Ÿåº¦ä¹Ÿä¼šé™ä½ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªå¯ä»¥è‡ªåŠ¨â€œæ¸…é™¤â€è¿‡æœŸæ•°æ®çš„å®ç°æ–¹æ¡ˆã€‚</p><h3 id="2-ä¼˜åŒ–ç‰ˆâ€”â€”å›ºå®šå¤§å°çš„æ•°ç»„"><a href="#2-ä¼˜åŒ–ç‰ˆâ€”â€”å›ºå®šå¤§å°çš„æ•°ç»„" class="headerlink" title="2.ä¼˜åŒ–ç‰ˆâ€”â€”å›ºå®šå¤§å°çš„æ•°ç»„"></a>2.ä¼˜åŒ–ç‰ˆâ€”â€”å›ºå®šå¤§å°çš„æ•°ç»„</h3><p>æ­¤ç‰ˆæœ¬è§£å†³äº† <code>HashMap</code> æ— é™å¢é•¿çš„é—®é¢˜ï¼Œå®ƒä½¿ç”¨æ•°ç»„åŠ ä¸‹æ ‡è®¡æ•°å™¨ï¼ˆreqCacheCounterï¼‰çš„æ–¹å¼ï¼Œå®ç°äº†å›ºå®šæ•°ç»„çš„å¾ªç¯å­˜å‚¨ã€‚</p><p>å½“æ•°ç»„å­˜å‚¨åˆ°æœ€åä¸€ä½æ—¶ï¼Œå°†æ•°ç»„çš„å­˜å‚¨ä¸‹æ ‡è®¾ç½® 0ï¼Œå†ä»å¤´å¼€å§‹å­˜å‚¨æ•°æ®ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;import java.util.Arrays;@RequestMapping(&quot;/user&quot;)@RestControllerpublic class UserController &#123;    private static String[] reqCache = new String[100]; // è¯·æ±‚ ID å­˜å‚¨é›†åˆ    private static Integer reqCacheCounter = 0; // è¯·æ±‚è®¡æ•°å™¨ï¼ˆæŒ‡ç¤º ID å­˜å‚¨çš„ä½ç½®ï¼‰    @RequestMapping(&quot;/add&quot;)    public String addUser(String id) &#123;        // éç©ºåˆ¤æ–­(å¿½ç•¥)...        synchronized (this.getClass()) &#123;            // é‡å¤è¯·æ±‚åˆ¤æ–­            if (Arrays.asList(reqCache).contains(id)) &#123;                // é‡å¤è¯·æ±‚                System.out.println(&quot;è¯·å‹¿é‡å¤æäº¤ï¼ï¼ï¼&quot; + id);                return &quot;æ‰§è¡Œå¤±è´¥&quot;;            &#125;            // è®°å½•è¯·æ±‚ ID            if (reqCacheCounter &gt;= reqCache.length) reqCacheCounter = 0; // é‡ç½®è®¡æ•°å™¨            reqCache[reqCacheCounter] = id; // å°† ID ä¿å­˜åˆ°ç¼“å­˜            reqCacheCounter++; // ä¸‹æ ‡å¾€åç§»ä¸€ä½        &#125;        // ä¸šåŠ¡ä»£ç ...        System.out.println(&quot;æ·»åŠ ç”¨æˆ·ID:&quot; + id);        return &quot;æ‰§è¡ŒæˆåŠŸï¼&quot;;    &#125;&#125;</code></pre><h3 id="3-æ‰©å±•ç‰ˆâ€”â€”åŒé‡æ£€æµ‹é”-DCL"><a href="#3-æ‰©å±•ç‰ˆâ€”â€”åŒé‡æ£€æµ‹é”-DCL" class="headerlink" title="3.æ‰©å±•ç‰ˆâ€”â€”åŒé‡æ£€æµ‹é”(DCL)"></a>3.æ‰©å±•ç‰ˆâ€”â€”åŒé‡æ£€æµ‹é”(DCL)</h3><p>ä¸Šä¸€ç§å®ç°æ–¹æ³•å°†åˆ¤æ–­å’Œæ·»åŠ ä¸šåŠ¡ï¼Œéƒ½æ”¾å…¥ <code>synchronized</code> ä¸­è¿›è¡ŒåŠ é”æ“ä½œï¼Œè¿™æ ·æ˜¾ç„¶æ€§èƒ½ä¸æ˜¯å¾ˆé«˜ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å•ä¾‹ä¸­è‘—åçš„ DCLï¼ˆDouble Checked Lockingï¼ŒåŒé‡æ£€æµ‹é”ï¼‰æ¥ä¼˜åŒ–ä»£ç çš„æ‰§è¡Œæ•ˆç‡ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;import java.util.Arrays;@RequestMapping(&quot;/user&quot;)@RestControllerpublic class UserController &#123;    private static String[] reqCache = new String[100]; // è¯·æ±‚ ID å­˜å‚¨é›†åˆ    private static Integer reqCacheCounter = 0; // è¯·æ±‚è®¡æ•°å™¨ï¼ˆæŒ‡ç¤º ID å­˜å‚¨çš„ä½ç½®ï¼‰    @RequestMapping(&quot;/add&quot;)    public String addUser(String id) &#123;        // éç©ºåˆ¤æ–­(å¿½ç•¥)...        // é‡å¤è¯·æ±‚åˆ¤æ–­        if (Arrays.asList(reqCache).contains(id)) &#123;            // é‡å¤è¯·æ±‚            System.out.println(&quot;è¯·å‹¿é‡å¤æäº¤ï¼ï¼ï¼&quot; + id);            return &quot;æ‰§è¡Œå¤±è´¥&quot;;        &#125;        synchronized (this.getClass()) &#123;            // åŒé‡æ£€æŸ¥é”ï¼ˆDCL,double checked lockingï¼‰æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡            if (Arrays.asList(reqCache).contains(id)) &#123;                // é‡å¤è¯·æ±‚                System.out.println(&quot;è¯·å‹¿é‡å¤æäº¤ï¼ï¼ï¼&quot; + id);                return &quot;æ‰§è¡Œå¤±è´¥&quot;;            &#125;            // è®°å½•è¯·æ±‚ ID            if (reqCacheCounter &gt;= reqCache.length) reqCacheCounter = 0; // é‡ç½®è®¡æ•°å™¨            reqCache[reqCacheCounter] = id; // å°† ID ä¿å­˜åˆ°ç¼“å­˜            reqCacheCounter++; // ä¸‹æ ‡å¾€åç§»ä¸€ä½        &#125;        // ä¸šåŠ¡ä»£ç ...        System.out.println(&quot;æ·»åŠ ç”¨æˆ·ID:&quot; + id);        return &quot;æ‰§è¡ŒæˆåŠŸï¼&quot;;    &#125;&#125;</code></pre><p><code>æ³¨æ„ï¼šDCL é€‚ç”¨äºé‡å¤æäº¤é¢‘ç¹æ¯”è¾ƒé«˜çš„ä¸šåŠ¡åœºæ™¯ï¼Œå¯¹äºç›¸åçš„ä¸šåŠ¡åœºæ™¯ä¸‹ DCL å¹¶ä¸é€‚ç”¨ã€‚</code></p><h3 id="4-å®Œå–„ç‰ˆâ€”â€”LRUMap"><a href="#4-å®Œå–„ç‰ˆâ€”â€”LRUMap" class="headerlink" title="4.å®Œå–„ç‰ˆâ€”â€”LRUMap"></a>4.å®Œå–„ç‰ˆâ€”â€”LRUMap</h3><p>ä¸Šé¢çš„ä»£ç åŸºæœ¬å·²ç»å®ç°äº†é‡å¤æ•°æ®çš„æ‹¦æˆªï¼Œä½†æ˜¾ç„¶ä¸å¤Ÿç®€æ´å’Œä¼˜é›…ï¼Œæ¯”å¦‚ä¸‹æ ‡è®¡æ•°å™¨çš„å£°æ˜å’Œä¸šåŠ¡å¤„ç†ç­‰ï¼Œä½†å€¼å¾—åº†å¹¸çš„æ˜¯ Apache ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ª commons-collections çš„æ¡†æ¶ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªéå¸¸å¥½ç”¨çš„æ•°æ®ç»“æ„ <code>LRUMap</code> å¯ä»¥ä¿å­˜æŒ‡å®šæ•°é‡çš„å›ºå®šçš„æ•°æ®ï¼Œå¹¶ä¸”å®ƒä¼šæŒ‰ç…§ LRU ç®—æ³•ï¼Œå¸®ä½ æ¸…é™¤æœ€ä¸å¸¸ç”¨çš„æ•°æ®ã€‚</p><blockquote><p>å°è´´å£«ï¼šLRU æ˜¯ Least Recently Used çš„ç¼©å†™ï¼Œå³æœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼Œæ˜¯ä¸€ç§å¸¸ç”¨çš„æ•°æ®æ·˜æ±°ç®—æ³•ï¼Œé€‰æ‹©æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„æ•°æ®äºˆä»¥æ·˜æ±°ã€‚</p></blockquote><p>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ¥æ·»åŠ  Apache commons collections çš„å¼•ç”¨ï¼š</p><pre><code>&lt;!-- é›†åˆå·¥å…·ç±» apache commons collections --&gt;&lt;!-- https://mvnrepository.com/artifact/org.apache.commons/commons-collections4 --&gt;&lt;dependency&gt;  &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;  &lt;artifactId&gt;commons-collections4&lt;/artifactId&gt;  &lt;version&gt;4.4&lt;/version&gt;&lt;/dependency&gt;</code></pre><p>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>import org.apache.commons.collections4.map.LRUMap;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;@RequestMapping(&quot;/user&quot;)@RestControllerpublic class UserController &#123;    // æœ€å¤§å®¹é‡ 100 ä¸ªï¼Œæ ¹æ® LRU ç®—æ³•æ·˜æ±°æ•°æ®çš„ Map é›†åˆ    private LRUMap&lt;String, Integer&gt; reqCache = new LRUMap&lt;&gt;(100);    @RequestMapping(&quot;/add&quot;)    public String addUser(String id) &#123;        // éç©ºåˆ¤æ–­(å¿½ç•¥)...        synchronized (this.getClass()) &#123;            // é‡å¤è¯·æ±‚åˆ¤æ–­            if (reqCache.containsKey(id)) &#123;                // é‡å¤è¯·æ±‚                System.out.println(&quot;è¯·å‹¿é‡å¤æäº¤ï¼ï¼ï¼&quot; + id);                return &quot;æ‰§è¡Œå¤±è´¥&quot;;            &#125;            // å­˜å‚¨è¯·æ±‚ ID            reqCache.put(id, 1);        &#125;        // ä¸šåŠ¡ä»£ç ...        System.out.println(&quot;æ·»åŠ ç”¨æˆ·ID:&quot; + id);        return &quot;æ‰§è¡ŒæˆåŠŸï¼&quot;;    &#125;&#125;</code></pre><p>ä½¿ç”¨äº† <code>LRUMap</code> ä¹‹åï¼Œä»£ç æ˜¾ç„¶ç®€æ´äº†å¾ˆå¤šã€‚</p><h3 id="5-æœ€ç»ˆç‰ˆâ€”â€”å°è£…"><a href="#5-æœ€ç»ˆç‰ˆâ€”â€”å°è£…" class="headerlink" title="5.æœ€ç»ˆç‰ˆâ€”â€”å°è£…"></a>5.æœ€ç»ˆç‰ˆâ€”â€”å°è£…</h3><p>ä»¥ä¸Šéƒ½æ˜¯æ–¹æ³•çº§åˆ«çš„å®ç°æ–¹æ¡ˆï¼Œç„¶è€Œåœ¨å®é™…çš„ä¸šåŠ¡ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½æœ‰å¾ˆå¤šçš„æ–¹æ³•éƒ½éœ€è¦é˜²é‡ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥å°è£…ä¸€ä¸ªå…¬å…±çš„æ–¹æ³•ï¼Œä»¥ä¾›æ‰€æœ‰ç±»ä½¿ç”¨ï¼š</p><pre><code>import org.apache.commons.collections4.map.LRUMap;/** * å¹‚ç­‰æ€§åˆ¤æ–­ */public class IdempotentUtils &#123;    // æ ¹æ® LRU(Least Recently Usedï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨)ç®—æ³•æ·˜æ±°æ•°æ®çš„ Map é›†åˆï¼Œæœ€å¤§å®¹é‡ 100 ä¸ª    private static LRUMap&lt;String, Integer&gt; reqCache = new LRUMap&lt;&gt;(100);    /**     * å¹‚ç­‰æ€§åˆ¤æ–­     * @return     */    public static boolean judge(String id, Object lockClass) &#123;        synchronized (lockClass) &#123;            // é‡å¤è¯·æ±‚åˆ¤æ–­            if (reqCache.containsKey(id)) &#123;                // é‡å¤è¯·æ±‚                System.out.println(&quot;è¯·å‹¿é‡å¤æäº¤ï¼ï¼ï¼&quot; + id);                return false;            &#125;            // éé‡å¤è¯·æ±‚ï¼Œå­˜å‚¨è¯·æ±‚ ID            reqCache.put(id, 1);        &#125;        return true;    &#125;&#125;</code></pre><p>è°ƒç”¨ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>import com.example.idempote.util.IdempotentUtils;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;@RequestMapping(&quot;/user&quot;)@RestControllerpublic class UserController4 &#123;@RequestMapping(&quot;/add&quot;)public String addUser(String id) &#123;// éç©ºåˆ¤æ–­(å¿½ç•¥)...// -------------- å¹‚ç­‰æ€§è°ƒç”¨ï¼ˆå¼€å§‹ï¼‰ --------------if (!IdempotentUtils.judge(id, this.getClass())) &#123;return &quot;æ‰§è¡Œå¤±è´¥&quot;;&#125;// -------------- å¹‚ç­‰æ€§è°ƒç”¨ï¼ˆç»“æŸï¼‰ --------------// ä¸šåŠ¡ä»£ç ...System.out.println(&quot;æ·»åŠ ç”¨æˆ· ID:&quot; + id);return &quot;æ‰§è¡ŒæˆåŠŸï¼&quot;;&#125;&#125;</code></pre><p>å°è´´å£«ï¼šä¸€èˆ¬æƒ…å†µä¸‹ä»£ç å†™åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œä½†æƒ³è¦æ›´ç®€æ´ä¹Ÿæ˜¯å¯ä»¥å®ç°çš„ï¼Œä½ å¯ä»¥é€šè¿‡è‡ªå®šä¹‰æ³¨è§£ï¼Œå°†ä¸šåŠ¡ä»£ç å†™åˆ°æ³¨è§£ä¸­ï¼Œéœ€è¦è°ƒç”¨çš„æ–¹æ³•åªéœ€è¦å†™ä¸€è¡Œæ³¨è§£å°±å¯ä»¥é˜²æ­¢æ•°æ®é‡å¤æäº¤äº†ï¼Œå¯ä»¥è‡ªè¡Œå°è¯•ä¸€ä¸‹ï¼‰ã€‚</p><h2 id="æ‰©å±•çŸ¥è¯†â€”â€”LRUMap-å®ç°åŸç†åˆ†æ"><a href="#æ‰©å±•çŸ¥è¯†â€”â€”LRUMap-å®ç°åŸç†åˆ†æ" class="headerlink" title="æ‰©å±•çŸ¥è¯†â€”â€”LRUMap å®ç°åŸç†åˆ†æ"></a>æ‰©å±•çŸ¥è¯†â€”â€”LRUMap å®ç°åŸç†åˆ†æ</h2><p>æ—¢ç„¶ <code>LRUMap</code> å¦‚æ­¤å¼ºå¤§ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å®ç°çš„ã€‚</p><p><code>LRUMap</code> çš„æœ¬è´¨æ˜¯æŒæœ‰å¤´ç»“ç‚¹çš„ç¯å›åŒé“¾è¡¨ç»“æ„ï¼Œå®ƒçš„å­˜å‚¨ç»“æ„å¦‚ä¸‹ï¼š</p><p><code>AbstractLinkedMap.LinkEntry entry;</code></p><p>å½“è°ƒç”¨æŸ¥è¯¢æ–¹æ³•æ—¶ï¼Œä¼šå°†ä½¿ç”¨çš„å…ƒç´ æ”¾åœ¨åŒé“¾è¡¨ header çš„å‰ä¸€ä¸ªä½ç½®ï¼Œæºç å¦‚ä¸‹ï¼š</p><pre><code>public V get(Object key, boolean updateToMRU) &#123;LinkEntry&lt;K, V&gt; entry = this.getEntry(key);if (entry == null) &#123;return null;&#125; else &#123;if (updateToMRU) &#123;this.moveToMRU(entry);&#125;        return entry.getValue();    &#125;&#125;protected void moveToMRU(LinkEntry&lt;K, V&gt; entry) &#123;if (entry.after != this.header) &#123;++this.modCount;if (entry.before == null) &#123;throw new IllegalStateException(&quot;Entry.before is null. This should not occur if your keys are immutable, and you have used synchronization properly.&quot;);&#125;        entry.before.after = entry.after;        entry.after.before = entry.before;        entry.after = this.header;        entry.before = this.header.before;        this.header.before.after = entry;        this.header.before = entry;    &#125; else if (entry == this.header) &#123;        throw new IllegalStateException(&quot;Can&#39;t move header to MRU This should not occur if your keys are immutable, and you have used synchronization properly.&quot;);    &#125;&#125;</code></pre><p>å¦‚æœæ–°å¢å…ƒç´ æ—¶ï¼Œå®¹é‡æ»¡äº†å°±ä¼šç§»é™¤ header çš„åä¸€ä¸ªå…ƒç´ ï¼Œæ·»åŠ æºç å¦‚ä¸‹ï¼š</p><pre><code>protected void addMapping(int hashIndex, int hashCode, K key, V value) &#123;    // åˆ¤æ–­å®¹å™¨æ˜¯å¦å·²æ»¡    if (this.isFull()) &#123;        LinkEntry&lt;K, V&gt; reuse = this.header.after;        boolean removeLRUEntry = false;        if (!this.scanUntilRemovable) &#123;            removeLRUEntry = this.removeLRU(reuse);        &#125; else &#123;            while(reuse != this.header &amp;&amp; reuse != null) &#123;                if (this.removeLRU(reuse)) &#123;                    removeLRUEntry = true;                    break;                &#125;                reuse = reuse.after;            &#125;            if (reuse == null) &#123;                throw new IllegalStateException(&quot;Entry.after=null, header.after=&quot; + this.header.after + &quot; header.before=&quot; + this.header.before + &quot; key=&quot; + key + &quot; value=&quot; + value + &quot; size=&quot; + this.size + &quot; maxSize=&quot; + this.maxSize + &quot; This should not occur if your keys are immutable, and you have used synchronization properly.&quot;);            &#125;        &#125;        if (removeLRUEntry) &#123;            if (reuse == null) &#123;                throw new IllegalStateException(&quot;reuse=null, header.after=&quot; + this.header.after + &quot; header.before=&quot; + this.header.before + &quot; key=&quot; + key + &quot; value=&quot; + value + &quot; size=&quot; + this.size + &quot; maxSize=&quot; + this.maxSize + &quot; This should not occur if your keys are immutable, and you have used synchronization properly.&quot;);            &#125;            this.reuseMapping(reuse, hashIndex, hashCode, key, value);        &#125; else &#123;            super.addMapping(hashIndex, hashCode, key, value);        &#125;    &#125; else &#123;        super.addMapping(hashIndex, hashCode, key, value);    &#125;&#125;</code></pre><p>åˆ¤æ–­å®¹é‡çš„æºç ï¼š</p><pre><code>public boolean isFull() &#123;  return size &gt;= maxSize;&#125;</code></pre><p>å®¹é‡æœªæ»¡å°±ç›´æ¥æ·»åŠ æ•°æ®ï¼š<br><code>super.addMapping(hashIndex, hashCode, key, value);</code></p><p>å¦‚æœå®¹é‡æ»¡äº†ï¼Œå°±è°ƒç”¨ <code>reuseMapping</code> æ–¹æ³•ä½¿ç”¨ LRU ç®—æ³•å¯¹æ•°æ®è¿›è¡Œæ¸…é™¤ã€‚</p><p>ç»¼åˆæ¥è¯´ï¼š**<code>LRUMap</code> çš„æœ¬è´¨æ˜¯æŒæœ‰å¤´ç»“ç‚¹çš„ç¯å›åŒé“¾è¡¨ç»“æ„ï¼Œå½“ä½¿ç”¨å…ƒç´ æ—¶ï¼Œå°±å°†è¯¥å…ƒç´ æ”¾åœ¨åŒé“¾è¡¨ <code>header</code> çš„å‰ä¸€ä¸ªä½ç½®ï¼Œåœ¨æ–°å¢å…ƒç´ æ—¶ï¼Œå¦‚æœå®¹é‡æ»¡äº†å°±ä¼šç§»é™¤ <code>header</code> çš„åä¸€ä¸ªå…ƒç´ **ã€‚</p><p>ç¨€åœŸæ˜é‡‘â€”â€”<a href="https://juejin.cn/post/7033231706270367775">ç å†œå‡ºå‡» 666</a></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>upload</title>
      <link href="/2022/11/10/article27/"/>
      <url>/2022/11/10/article27/</url>
      
        <content type="html"><![CDATA[<h2 id="æ•´ä½“æ€è·¯"><a href="#æ•´ä½“æ€è·¯" class="headerlink" title="æ•´ä½“æ€è·¯"></a>æ•´ä½“æ€è·¯</h2><h3 id="å‰ç«¯"><a href="#å‰ç«¯" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h3><p>åˆ©ç”¨ <code>Blob.prototype.slice</code> æ–¹æ³•ï¼Œå’Œæ•°ç»„çš„ <code>slice</code> æ–¹æ³•ç›¸ä¼¼ï¼Œè°ƒç”¨çš„ <code>slice</code> æ–¹æ³•å¯ä»¥è¿”å›åŸæ–‡ä»¶çš„æŸä¸ªåˆ‡ç‰‡</p><p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ ¹æ®é¢„å…ˆè®¾ç½®å¥½çš„åˆ‡ç‰‡æœ€å¤§æ•°é‡å°†æ–‡ä»¶åˆ‡åˆ†ä¸ºä¸€ä¸ªä¸ªåˆ‡ç‰‡ï¼Œç„¶åå€ŸåŠ© http çš„å¯å¹¶å‘æ€§ï¼ŒåŒæ—¶ä¸Šä¼ å¤šä¸ªåˆ‡ç‰‡ï¼Œè¿™æ ·ä»åŸæœ¬ä¼ ä¸€ä¸ªå¤§æ–‡ä»¶ï¼Œå˜æˆäº†<code>åŒæ—¶</code>ä¼ å¤šä¸ªå°çš„æ–‡ä»¶åˆ‡ç‰‡ï¼Œå¯ä»¥å¤§å¤§å‡å°‘ä¸Šä¼ æ—¶é—´</p><p>å¦å¤–ç”±äºæ˜¯å¹¶å‘ï¼Œä¼ è¾“åˆ°æœåŠ¡ç«¯çš„é¡ºåºå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦ç»™æ¯ä¸ªåˆ‡ç‰‡è®°å½•é¡ºåº</p><h3 id="æœåŠ¡ç«¯"><a href="#æœåŠ¡ç«¯" class="headerlink" title="æœåŠ¡ç«¯"></a>æœåŠ¡ç«¯</h3><p>æœåŠ¡ç«¯éœ€è¦è´Ÿè´£æ¥å—è¿™äº›åˆ‡ç‰‡ï¼Œå¹¶åœ¨æ¥æ”¶åˆ°æ‰€æœ‰åˆ‡ç‰‡å<code>åˆå¹¶</code>åˆ‡ç‰‡</p><p>è¿™é‡Œåˆå¼•ä¼¸å‡ºä¸¤ä¸ªé—®é¢˜</p><ol><li>ä½•æ—¶åˆå¹¶åˆ‡ç‰‡ï¼Œå³åˆ‡ç‰‡ä»€ä¹ˆæ—¶å€™ä¼ è¾“å®Œæˆ</li><li>å¦‚ä½•åˆå¹¶åˆ‡ç‰‡</li></ol><p>ç¬¬ä¸€ä¸ªé—®é¢˜éœ€è¦å‰ç«¯è¿›è¡Œé…åˆï¼Œå‰ç«¯åœ¨æ¯ä¸ªåˆ‡ç‰‡ä¸­éƒ½æºå¸¦åˆ‡ç‰‡æœ€å¤§æ•°é‡çš„ä¿¡æ¯ï¼Œå½“æœåŠ¡ç«¯æ¥å—åˆ°è¿™ä¸ªæ•°é‡çš„åˆ‡ç‰‡æ—¶è‡ªåŠ¨åˆå¹¶ï¼Œä¹Ÿå¯ä»¥é¢å¤–å‘ä¸€ä¸ªè¯·æ±‚ä¸»åŠ¨é€šçŸ¥æœåŠ¡ç«¯è¿›è¡Œåˆ‡ç‰‡çš„åˆå¹¶</p><p>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œå…·ä½“å¦‚ä½•åˆå¹¶åˆ‡ç‰‡å‘¢ï¼Ÿè¿™é‡Œå¯ä»¥ä½¿ç”¨ nodejs çš„ è¯»å†™æµï¼ˆreadStream/writeStreamï¼‰ï¼Œå°†æ‰€æœ‰åˆ‡ç‰‡çš„æµä¼ è¾“åˆ°æœ€ç»ˆæ–‡ä»¶çš„æµé‡Œ</p><p><code>talk is cheap,show me the code</code>ï¼Œæ¥ç€æˆ‘ä»¬ç”¨ä»£ç å®ç°ä¸Šé¢çš„æ€è·¯</p><h2 id="å‰ç«¯éƒ¨åˆ†"><a href="#å‰ç«¯éƒ¨åˆ†" class="headerlink" title="å‰ç«¯éƒ¨åˆ†"></a>å‰ç«¯éƒ¨åˆ†</h2><p>ä»¥ Vue ä½œä¸ºå¼€å‘æ¡†æ¶ï¼Œå¯¹ç•Œé¢æ²¡æœ‰å¤ªå¤§è¦æ±‚ï¼ŒåŸç”Ÿä¹Ÿå¯ä»¥ï¼Œè€ƒè™‘åˆ°ç¾è§‚ä½¿ç”¨ element-ui ä½œä¸º UI æ¡†æ¶</p><h3 id="ä¸Šä¼ æ§ä»¶"><a href="#ä¸Šä¼ æ§ä»¶" class="headerlink" title="ä¸Šä¼ æ§ä»¶"></a>ä¸Šä¼ æ§ä»¶</h3><p>é¦–å…ˆåˆ›å»ºé€‰æ‹©æ–‡ä»¶çš„æ§ä»¶ï¼Œç›‘å¬ change äº‹ä»¶ä»¥åŠä¸Šä¼ æŒ‰é’®</p><pre><code>&lt;template&gt;   &lt;div&gt;    &lt;input type=&quot;file&quot; @change=&quot;handleFileChange&quot; /&gt;    &lt;el-button @click=&quot;handleUpload&quot;&gt;ä¸Šä¼ &lt;/el-button&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123;  data: () =&gt; (&#123;    container: &#123;      file: null    &#125;  &#125;),  methods: &#123;     handleFileChange(e) &#123;      const [file] = e.target.files;      if (!file) return;      Object.assign(this.$data, this.$options.data());      this.container.file = file;    &#125;,    async handleUpload() &#123;&#125;  &#125;&#125;;&lt;/script&gt;</code></pre><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/7/16f7ff98adb6bcdd~tplv-t2oaga2asx-watermark.awebp"></p><h3 id="è¯·æ±‚é€»è¾‘"><a href="#è¯·æ±‚é€»è¾‘" class="headerlink" title="è¯·æ±‚é€»è¾‘"></a>è¯·æ±‚é€»è¾‘</h3><p>è€ƒè™‘åˆ°é€šç”¨æ€§ï¼Œè¿™é‡Œæ²¡æœ‰ç”¨ç¬¬ä¸‰æ–¹çš„è¯·æ±‚åº“ï¼Œè€Œæ˜¯ç”¨åŸç”Ÿ XMLHttpRequest åšä¸€å±‚ç®€å•çš„å°è£…æ¥å‘è¯·æ±‚</p><pre><code>request(&#123;      url,      method = &quot;post&quot;,      data,      headers = &#123;&#125;,      requestList    &#125;) &#123;      return new Promise(resolve =&gt; &#123;        const xhr = new XMLHttpRequest();        xhr.open(method, url);        Object.keys(headers).forEach(key =&gt;          xhr.setRequestHeader(key, headers[key])        );        xhr.send(data);        xhr.onload = e =&gt; &#123;          resolve(&#123;            data: e.target.response          &#125;);        &#125;;      &#125;);    &#125;</code></pre><h3 id="ä¸Šä¼ åˆ‡ç‰‡"><a href="#ä¸Šä¼ åˆ‡ç‰‡" class="headerlink" title="ä¸Šä¼ åˆ‡ç‰‡"></a>ä¸Šä¼ åˆ‡ç‰‡</h3><p>æ¥ç€å®ç°æ¯”è¾ƒé‡è¦çš„ä¸Šä¼ åŠŸèƒ½ï¼Œä¸Šä¼ éœ€è¦åšä¸¤ä»¶äº‹</p><ul><li><p>å¯¹æ–‡ä»¶è¿›è¡Œåˆ‡ç‰‡</p></li><li><p>å°†åˆ‡ç‰‡ä¼ è¾“ç»™æœåŠ¡ç«¯</p>  <template>    <div>      <input type="file" @change="handleFileChange" />      <el-button @click="handleUpload">ä¸Šä¼ </el-button>    </div>  </template>    <script>   const SIZE = 10 * 1024 * 1024; // åˆ‡ç‰‡å¤§å°   export default {    data: () => ({      container: {        file: null      }ï¼Œ     data: []    }),    methods: {      request() {},      handleFileChange() {},      // ç”Ÿæˆæ–‡ä»¶åˆ‡ç‰‡      createFileChunk(file, size = SIZE) {       const fileChunkList = [];        let cur = 0;        while (cur < file.size) {          fileChunkList.push({ file: file.slice(cur, cur + size) });          cur += size;        }        return fileChunkList;      },     // ä¸Šä¼ åˆ‡ç‰‡      async uploadChunks() {        const requestList = this.data          .map(({ chunkï¼Œhash }) => {            const formData = new FormData();            formData.append("chunk", chunk);            formData.append("hash", hash);            formData.append("filename", this.container.file.name);            return { formData };          })          .map(async ({ formData }) =>            this.request({              url: "http://localhost:3000",              data: formData            })          );        await Promise.all(requestList); // å¹¶å‘åˆ‡ç‰‡      },      async handleUpload() {        if (!this.container.file) return;        const fileChunkList = this.createFileChunk(this.container.file);        this.data = fileChunkList.map(({ file }ï¼Œindex) => ({          chunk: file,          hash: this.container.file.name + "-" + index // æ–‡ä»¶å + æ•°ç»„ä¸‹æ ‡        }));        await this.uploadChunks();      }    }  };  </script><p>  å½“ç‚¹å‡»ä¸Šä¼ æŒ‰é’®æ—¶ï¼Œè°ƒç”¨ <code>createFileChunk</code> å°†æ–‡ä»¶åˆ‡ç‰‡ï¼Œåˆ‡ç‰‡æ•°é‡é€šè¿‡æ–‡ä»¶å¤§å°æ§åˆ¶ï¼Œè¿™é‡Œè®¾ç½® 10MBï¼Œä¹Ÿå°±æ˜¯è¯´ 100 MB çš„æ–‡ä»¶ä¼šè¢«åˆ†æˆ 10 ä¸ªåˆ‡ç‰‡</p><p>  createFileChunk å†…ä½¿ç”¨ while å¾ªç¯å’Œ slice æ–¹æ³•å°†åˆ‡ç‰‡æ”¾å…¥ <code>fileChunkList</code> æ•°ç»„ä¸­è¿”å›</p><p>  åœ¨ç”Ÿæˆæ–‡ä»¶åˆ‡ç‰‡æ—¶ï¼Œéœ€è¦ç»™æ¯ä¸ªåˆ‡ç‰‡ä¸€ä¸ªæ ‡è¯†ä½œä¸º hashï¼Œè¿™é‡Œæš‚æ—¶ä½¿ç”¨<code>æ–‡ä»¶å + ä¸‹æ ‡</code>ï¼Œè¿™æ ·åç«¯å¯ä»¥çŸ¥é“å½“å‰åˆ‡ç‰‡æ˜¯ç¬¬å‡ ä¸ªåˆ‡ç‰‡ï¼Œç”¨äºä¹‹åçš„åˆå¹¶åˆ‡ç‰‡</p><p>  éšåè°ƒç”¨ <code>uploadChunks</code> ä¸Šä¼ æ‰€æœ‰çš„æ–‡ä»¶åˆ‡ç‰‡ï¼Œå°†æ–‡ä»¶åˆ‡ç‰‡ï¼Œåˆ‡ç‰‡ hashï¼Œä»¥åŠæ–‡ä»¶åæ”¾å…¥ FormData ä¸­ï¼Œå†è°ƒç”¨ä¸Šä¸€æ­¥çš„ <code>request</code> å‡½æ•°è¿”å›ä¸€ä¸ª proimiseï¼Œæœ€åè°ƒç”¨ Promise.all å¹¶å‘ä¸Šä¼ æ‰€æœ‰çš„åˆ‡ç‰‡</p><h3 id="å‘é€åˆå¹¶è¯·æ±‚"><a href="#å‘é€åˆå¹¶è¯·æ±‚" class="headerlink" title="å‘é€åˆå¹¶è¯·æ±‚"></a>å‘é€åˆå¹¶è¯·æ±‚</h3><p>  è¿™é‡Œä½¿ç”¨æ•´ä½“æ€è·¯ä¸­æåˆ°çš„ç¬¬äºŒç§åˆå¹¶åˆ‡ç‰‡çš„æ–¹å¼ï¼Œå³å‰ç«¯ä¸»åŠ¨é€šçŸ¥æœåŠ¡ç«¯è¿›è¡Œåˆå¹¶ï¼Œæ‰€ä»¥å‰ç«¯è¿˜éœ€è¦é¢å¤–å‘è¯·æ±‚ï¼ŒæœåŠ¡ç«¯æ¥å—åˆ°è¿™ä¸ªè¯·æ±‚æ—¶ä¸»åŠ¨åˆå¹¶åˆ‡ç‰‡</p>  <template>    <div>      <input type="file" @change="handleFileChange" />      <el-button @click="handleUpload">ä¸Šä¼ </el-button>    </div>  </template>    <script>  export default {    data: () => ({      container: {        file: null      },      data: []    }),    methods: {      request() {},      handleFileChange() {},      createFileChunk() {},      // ä¸Šä¼ åˆ‡ç‰‡ï¼ŒåŒæ—¶è¿‡æ»¤å·²ä¸Šä¼ çš„åˆ‡ç‰‡      async uploadChunks() {        const requestList = this.data          .map(({ chunkï¼Œhash }) => {            const formData = new FormData();            formData.append("chunk", chunk);            formData.append("hash", hash);            formData.append("filename", this.container.file.name);            return { formData };          })          .map(async ({ formData }) =>            this.request({              url: "http://localhost:3000",              data: formData            })          );        await Promise.all(requestList);        // åˆå¹¶åˆ‡ç‰‡       await this.mergeRequest();     },      async mergeRequest() {        await this.request({          url: "http://localhost:3000/merge",          headers: {            "content-type": "application/json"          },          data: JSON.stringify({            filename: this.container.file.name          })        });      },          async handleUpload() {}    }  };  </script></li></ul><h2 id="æœåŠ¡ç«¯éƒ¨åˆ†"><a href="#æœåŠ¡ç«¯éƒ¨åˆ†" class="headerlink" title="æœåŠ¡ç«¯éƒ¨åˆ†"></a>æœåŠ¡ç«¯éƒ¨åˆ†</h2><p>ç®€å•ä½¿ç”¨ http æ¨¡å—æ­å»ºæœåŠ¡ç«¯</p><pre><code>const http = require(&quot;http&quot;);const server = http.createServer();server.on(&quot;request&quot;, async (req, res) =&gt; &#123;  res.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);  res.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;*&quot;);  if (req.method === &quot;OPTIONS&quot;) &#123;    res.status = 200;    res.end();    return;  &#125;&#125;);server.listen(3000, () =&gt; console.log(&quot;æ­£åœ¨ç›‘å¬ 3000 ç«¯å£&quot;));</code></pre><h3 id="æ¥å—åˆ‡ç‰‡"><a href="#æ¥å—åˆ‡ç‰‡" class="headerlink" title="æ¥å—åˆ‡ç‰‡"></a>æ¥å—åˆ‡ç‰‡</h3><p>ä½¿ç”¨ <code>multiparty</code> åŒ…å¤„ç†å‰ç«¯ä¼ æ¥çš„ FormData</p><p>åœ¨ multiparty.parse çš„å›è°ƒä¸­ï¼Œfiles å‚æ•°ä¿å­˜äº† FormData ä¸­æ–‡ä»¶ï¼Œfields å‚æ•°ä¿å­˜äº† FormData ä¸­éæ–‡ä»¶çš„å­—æ®µ</p><pre><code>const http = require(&quot;http&quot;);const path = require(&quot;path&quot;);const fse = require(&quot;fs-extra&quot;);const multiparty = require(&quot;multiparty&quot;);const server = http.createServer(); const UPLOAD_DIR = path.resolve(__dirname, &quot;..&quot;, &quot;target&quot;); // å¤§æ–‡ä»¶å­˜å‚¨ç›®å½•server.on(&quot;request&quot;, async (req, res) =&gt; &#123;  res.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);  res.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;*&quot;);  if (req.method === &quot;OPTIONS&quot;) &#123;    res.status = 200;    res.end();    return;  &#125;  const multipart = new multiparty.Form();  multipart.parse(req, async (err, fields, files) =&gt; &#123;    if (err) &#123;      return;    &#125;    const [chunk] = files.chunk;    const [hash] = fields.hash;    const [filename] = fields.filename;    const chunkDir = path.resolve(UPLOAD_DIR, filename);   // åˆ‡ç‰‡ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ›å»ºåˆ‡ç‰‡ç›®å½•    if (!fse.existsSync(chunkDir)) &#123;      await fse.mkdirs(chunkDir);    &#125;      // fs-extra ä¸“ç”¨æ–¹æ³•ï¼Œç±»ä¼¼ fs.rename å¹¶ä¸”è·¨å¹³å°      // fs-extra çš„ rename æ–¹æ³• windows å¹³å°ä¼šæœ‰æƒé™é—®é¢˜      // https://github.com/meteor/meteor/issues/7852#issuecomment-255767835      await fse.move(chunk.path, `$&#123;chunkDir&#125;/$&#123;hash&#125;`);    res.end(&quot;received file chunk&quot;);  &#125;);&#125;);server.listen(3000, () =&gt; console.log(&quot;æ­£åœ¨ç›‘å¬ 3000 ç«¯å£&quot;));</code></pre><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/11/16f905fb6a626f47~tplv-t2oaga2asx-watermark.awebp"></p><p>æŸ¥çœ‹ multiparty å¤„ç†åçš„ chunk å¯¹è±¡ï¼Œpath æ˜¯å­˜å‚¨ä¸´æ—¶æ–‡ä»¶çš„è·¯å¾„ï¼Œsize æ˜¯ä¸´æ—¶æ–‡ä»¶å¤§å°ï¼Œåœ¨ multiparty æ–‡æ¡£ä¸­æåˆ°å¯ä»¥ä½¿ç”¨ fs.rename(ç”±äºæˆ‘ç”¨çš„æ˜¯ fs-extraï¼Œå®ƒçš„ rename æ–¹æ³• windows å¹³å°æƒé™é—®é¢˜ï¼Œæ‰€ä»¥æ¢æˆäº† fse.move) ç§»åŠ¨ä¸´æ—¶æ–‡ä»¶ï¼Œå³ç§»åŠ¨æ–‡ä»¶åˆ‡ç‰‡</p><p>åœ¨æ¥å—æ–‡ä»¶åˆ‡ç‰‡æ—¶ï¼Œéœ€è¦å…ˆåˆ›å»ºå­˜å‚¨åˆ‡ç‰‡çš„æ–‡ä»¶å¤¹ï¼Œç”±äºå‰ç«¯åœ¨å‘é€æ¯ä¸ªåˆ‡ç‰‡æ—¶é¢å¤–æºå¸¦äº†å”¯ä¸€å€¼ hashï¼Œæ‰€ä»¥ä»¥ hash ä½œä¸ºæ–‡ä»¶åï¼Œå°†åˆ‡ç‰‡ä»ä¸´æ—¶è·¯å¾„ç§»åŠ¨åˆ‡ç‰‡æ–‡ä»¶å¤¹ä¸­ï¼Œæœ€åçš„ç»“æœå¦‚ä¸‹</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/8/16f83c3caac8eb65~tplv-t2oaga2asx-watermark.awebp"></p><h3 id="åˆå¹¶åˆ‡ç‰‡"><a href="#åˆå¹¶åˆ‡ç‰‡" class="headerlink" title="åˆå¹¶åˆ‡ç‰‡"></a>åˆå¹¶åˆ‡ç‰‡</h3><p>åœ¨æ¥æ”¶åˆ°å‰ç«¯å‘é€çš„åˆå¹¶è¯·æ±‚åï¼ŒæœåŠ¡ç«¯å°†æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰åˆ‡ç‰‡è¿›è¡Œåˆå¹¶</p><pre><code>const http = require(&quot;http&quot;);const path = require(&quot;path&quot;);const fse = require(&quot;fs-extra&quot;);const server = http.createServer();const UPLOAD_DIR = path.resolve(__dirname, &quot;..&quot;, &quot;target&quot;); // å¤§æ–‡ä»¶å­˜å‚¨ç›®å½• const resolvePost = req =&gt;   new Promise(resolve =&gt; &#123;     let chunk = &quot;&quot;;     req.on(&quot;data&quot;, data =&gt; &#123;       chunk += data;     &#125;);     req.on(&quot;end&quot;, () =&gt; &#123;       resolve(JSON.parse(chunk));     &#125;);   &#125;); const pipeStream = (path, writeStream) =&gt;  new Promise(resolve =&gt; &#123;    const readStream = fse.createReadStream(path);    readStream.on(&quot;end&quot;, () =&gt; &#123;      fse.unlinkSync(path);      resolve();    &#125;);    readStream.pipe(writeStream);  &#125;);// åˆå¹¶åˆ‡ç‰‡ const mergeFileChunk = async (filePath, filename, size) =&gt; &#123;  const chunkDir = path.resolve(UPLOAD_DIR, filename);  const chunkPaths = await fse.readdir(chunkDir);  // æ ¹æ®åˆ‡ç‰‡ä¸‹æ ‡è¿›è¡Œæ’åº  // å¦åˆ™ç›´æ¥è¯»å–ç›®å½•çš„è·å¾—çš„é¡ºåºå¯èƒ½ä¼šé”™ä¹±  chunkPaths.sort((a, b) =&gt; a.split(&quot;-&quot;)[1] - b.split(&quot;-&quot;)[1]);  await Promise.all(    chunkPaths.map((chunkPath, index) =&gt;      pipeStream(        path.resolve(chunkDir, chunkPath),        // æŒ‡å®šä½ç½®åˆ›å»ºå¯å†™æµ        fse.createWriteStream(filePath, &#123;          start: index * size,          end: (index + 1) * size        &#125;)      )    )  );  fse.rmdirSync(chunkDir); // åˆå¹¶ååˆ é™¤ä¿å­˜åˆ‡ç‰‡çš„ç›®å½•&#125;;server.on(&quot;request&quot;, async (req, res) =&gt; &#123;  res.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);  res.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;*&quot;);  if (req.method === &quot;OPTIONS&quot;) &#123;    res.status = 200;    res.end();    return;  &#125;   if (req.url === &quot;/merge&quot;) &#123;     const data = await resolvePost(req);     const &#123; filename,size &#125; = data;     const filePath = path.resolve(UPLOAD_DIR, `$&#123;filename&#125;`);     await mergeFileChunk(filePath, filename);     res.end(       JSON.stringify(&#123;         code: 0,         message: &quot;file merged success&quot;       &#125;)     );   &#125;&#125;);server.listen(3000, () =&gt; console.log(&quot;æ­£åœ¨ç›‘å¬ 3000 ç«¯å£&quot;));</code></pre><p>ç”±äºå‰ç«¯åœ¨å‘é€åˆå¹¶è¯·æ±‚æ—¶ä¼šæºå¸¦æ–‡ä»¶åï¼ŒæœåŠ¡ç«¯æ ¹æ®æ–‡ä»¶åå¯ä»¥æ‰¾åˆ°ä¸Šä¸€æ­¥åˆ›å»ºçš„åˆ‡ç‰‡æ–‡ä»¶å¤¹</p><p>æ¥ç€ä½¿ç”¨ fs.createWriteStream åˆ›å»ºä¸€ä¸ªå¯å†™æµï¼Œå¯å†™æµæ–‡ä»¶åå°±æ˜¯<strong>åˆ‡ç‰‡æ–‡ä»¶å¤¹å + åç¼€å</strong>ç»„åˆè€Œæˆ</p><p>éšåéå†æ•´ä¸ªåˆ‡ç‰‡æ–‡ä»¶å¤¹ï¼Œå°†åˆ‡ç‰‡é€šè¿‡ fs.createReadStream åˆ›å»ºå¯è¯»æµï¼Œä¼ è¾“åˆå¹¶åˆ°ç›®æ ‡æ–‡ä»¶ä¸­</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯æ¯æ¬¡å¯è¯»æµéƒ½ä¼šä¼ è¾“åˆ°å¯å†™æµçš„æŒ‡å®šä½ç½®ï¼Œè¿™æ˜¯é€šè¿‡ createWriteStream çš„ç¬¬äºŒä¸ªå‚æ•° start/end æ§åˆ¶çš„ï¼Œç›®çš„æ˜¯èƒ½å¤Ÿå¹¶å‘åˆå¹¶å¤šä¸ªå¯è¯»æµåˆ°å¯å†™æµä¸­ï¼Œè¿™æ ·å³ä½¿æµçš„é¡ºåºä¸åŒä¹Ÿèƒ½ä¼ è¾“åˆ°æ­£ç¡®çš„ä½ç½®ï¼Œæ‰€ä»¥è¿™é‡Œè¿˜éœ€è¦è®©å‰ç«¯åœ¨è¯·æ±‚çš„æ—¶å€™å¤šæä¾›ä¸€ä¸ª size å‚æ•°</p><pre><code>async mergeRequest() &#123;  await this.request(&#123;    url: &quot;http://localhost:3000/merge&quot;,    headers: &#123;      &quot;content-type&quot;: &quot;application/json&quot;    &#125;,    data: JSON.stringify(&#123;     size: SIZE,      filename: this.container.file.name    &#125;)  &#125;);&#125;,</code></pre><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/22/16fccc5d950c2275~tplv-t2oaga2asx-watermark.awebp"></p><p>å…¶å®ä¹Ÿå¯ä»¥ç­‰ä¸Šä¸€ä¸ªåˆ‡ç‰‡åˆå¹¶å®Œåå†åˆå¹¶ä¸‹ä¸ªåˆ‡ç‰‡ï¼Œè¿™æ ·å°±ä¸éœ€è¦æŒ‡å®šä½ç½®ï¼Œä½†ä¼ è¾“é€Ÿåº¦ä¼šé™ä½ï¼Œæ‰€ä»¥ä½¿ç”¨äº†å¹¶å‘åˆå¹¶çš„æ‰‹æ®µï¼Œæ¥ç€åªè¦ä¿è¯æ¯æ¬¡åˆå¹¶å®Œæˆååˆ é™¤è¿™ä¸ªåˆ‡ç‰‡ï¼Œç­‰æ‰€æœ‰åˆ‡ç‰‡éƒ½åˆå¹¶å®Œæ¯•åæœ€ååˆ é™¤åˆ‡ç‰‡æ–‡ä»¶å¤¹å³å¯</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/8/16f8414c7fae1c1f~tplv-t2oaga2asx-watermark.awebp"></p><p>è‡³æ­¤ä¸€ä¸ªç®€å•çš„å¤§æ–‡ä»¶ä¸Šä¼ å°±å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†æ­¤åŸºç¡€ä¸Šæ‰©å±•ä¸€äº›é¢å¤–çš„åŠŸèƒ½</p><h2 id="æ˜¾ç¤ºä¸Šä¼ è¿›åº¦æ¡"><a href="#æ˜¾ç¤ºä¸Šä¼ è¿›åº¦æ¡" class="headerlink" title="æ˜¾ç¤ºä¸Šä¼ è¿›åº¦æ¡"></a>æ˜¾ç¤ºä¸Šä¼ è¿›åº¦æ¡</h2><p>ä¸Šä¼ è¿›åº¦åˆ†ä¸¤ç§ï¼Œä¸€ä¸ªæ˜¯æ¯ä¸ªåˆ‡ç‰‡çš„ä¸Šä¼ è¿›åº¦ï¼Œå¦ä¸€ä¸ªæ˜¯æ•´ä¸ªæ–‡ä»¶çš„ä¸Šä¼ è¿›åº¦ï¼Œè€Œæ•´ä¸ªæ–‡ä»¶çš„ä¸Šä¼ è¿›åº¦æ˜¯åŸºäºæ¯ä¸ªåˆ‡ç‰‡ä¸Šä¼ è¿›åº¦è®¡ç®—è€Œæ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆå®ç°åˆ‡ç‰‡çš„ä¸Šä¼ è¿›åº¦</p><h3 id="åˆ‡ç‰‡è¿›åº¦æ¡"><a href="#åˆ‡ç‰‡è¿›åº¦æ¡" class="headerlink" title="åˆ‡ç‰‡è¿›åº¦æ¡"></a>åˆ‡ç‰‡è¿›åº¦æ¡</h3><p>XMLHttpRequest åŸç”Ÿæ”¯æŒä¸Šä¼ è¿›åº¦çš„ç›‘å¬ï¼Œåªéœ€è¦ç›‘å¬ upload.onprogress å³å¯ï¼Œæˆ‘ä»¬åœ¨åŸæ¥çš„ request åŸºç¡€ä¸Šä¼ å…¥ onProgress å‚æ•°ï¼Œç»™ XMLHttpRequest æ³¨å†Œç›‘å¬äº‹ä»¶</p><pre><code>// xhrrequest(&#123;  url,  method = &quot;post&quot;,  data,  headers = &#123;&#125;,  onProgress = e =&gt; e,  requestList&#125;) &#123;  return new Promise(resolve =&gt; &#123;    const xhr = new XMLHttpRequest();   xhr.upload.onprogress = onProgress;    xhr.open(method, url);    Object.keys(headers).forEach(key =&gt;      xhr.setRequestHeader(key, headers[key])    );    xhr.send(data);    xhr.onload = e =&gt; &#123;      resolve(&#123;        data: e.target.response      &#125;);    &#125;;  &#125;);&#125;</code></pre><p>ç”±äºæ¯ä¸ªåˆ‡ç‰‡éƒ½éœ€è¦è§¦å‘ç‹¬ç«‹çš„ç›‘å¬äº‹ä»¶ï¼Œæ‰€ä»¥è¿˜éœ€è¦ä¸€ä¸ªå·¥å‚å‡½æ•°ï¼Œæ ¹æ®ä¼ å…¥çš„åˆ‡ç‰‡è¿”å›ä¸åŒçš„ç›‘å¬å‡½æ•°<br>åœ¨åŸå…ˆçš„å‰ç«¯ä¸Šä¼ é€»è¾‘ä¸­æ–°å¢ç›‘å¬å‡½æ•°éƒ¨åˆ†</p><pre><code>// ä¸Šä¼ åˆ‡ç‰‡ï¼ŒåŒæ—¶è¿‡æ»¤å·²ä¸Šä¼ çš„åˆ‡ç‰‡async uploadChunks(uploadedList = []) &#123;  const requestList = this.data   .map((&#123; chunk,hash,index &#125;) =&gt; &#123;      const formData = new FormData();      formData.append(&quot;chunk&quot;, chunk);      formData.append(&quot;hash&quot;, hash);      formData.append(&quot;filename&quot;, this.container.file.name);     return &#123; formData,index &#125;;    &#125;)   .map(async (&#123; formData,index &#125;) =&gt;      this.request(&#123;        url: &quot;http://localhost:3000&quot;,        data: formDataï¼Œ       onProgress: this.createProgressHandler(this.data[index]),      &#125;)    );  await Promise.all(requestList);   // åˆå¹¶åˆ‡ç‰‡  await this.mergeRequest();&#125;,async handleUpload() &#123;  if (!this.container.file) return;  const fileChunkList = this.createFileChunk(this.container.file);  this.data = fileChunkList.map((&#123; file &#125;ï¼Œindex) =&gt; (&#123;    chunk: file,   index,    hash: this.container.file.name + &quot;-&quot; + index   percentage:0  &#125;));  await this.uploadChunks();&#125;createProgressHandler(item) &#123;  return e =&gt; &#123;    item.percentage = parseInt(String((e.loaded / e.total) * 100));  &#125;;&#125;</code></pre><p>æ¯ä¸ªåˆ‡ç‰‡åœ¨ä¸Šä¼ æ—¶éƒ½ä¼šé€šè¿‡ç›‘å¬å‡½æ•°æ›´æ–° data æ•°ç»„å¯¹åº”å…ƒç´ çš„ percentage å±æ€§ï¼Œä¹‹åæŠŠå°† data æ•°ç»„æ”¾åˆ°è§†å›¾ä¸­å±•ç¤ºå³å¯</p><h3 id="æ–‡ä»¶è¿›åº¦æ¡"><a href="#æ–‡ä»¶è¿›åº¦æ¡" class="headerlink" title="æ–‡ä»¶è¿›åº¦æ¡"></a>æ–‡ä»¶è¿›åº¦æ¡</h3><p>å°†æ¯ä¸ªåˆ‡ç‰‡å·²ä¸Šä¼ çš„éƒ¨åˆ†ç´¯åŠ ï¼Œé™¤ä»¥æ•´ä¸ªæ–‡ä»¶çš„å¤§å°ï¼Œå°±èƒ½å¾—å‡ºå½“å‰æ–‡ä»¶çš„ä¸Šä¼ è¿›åº¦ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨ Vue è®¡ç®—å±æ€§</p><pre><code>computed: &#123;   uploadPercentage() &#123;      if (!this.container.file || !this.data.length) return 0;      const loaded = this.data        .map(item =&gt; item.size * item.percentage)        .reduce((acc, cur) =&gt; acc + cur);      return parseInt((loaded / this.container.file.size).toFixed(2));    &#125;&#125;</code></pre><p>æœ€ç»ˆè§†å›¾å¦‚ä¸‹</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/8/16f84ad6b4848423~tplv-t2oaga2asx-watermark.awebp"></p><h1 id="æ–­ç‚¹ç»­ä¼ "><a href="#æ–­ç‚¹ç»­ä¼ " class="headerlink" title="æ–­ç‚¹ç»­ä¼ "></a>æ–­ç‚¹ç»­ä¼ </h1><p>æ–­ç‚¹ç»­ä¼ çš„åŸç†åœ¨äºå‰ç«¯/æœåŠ¡ç«¯éœ€è¦<code>è®°ä½</code>å·²ä¸Šä¼ çš„åˆ‡ç‰‡ï¼Œè¿™æ ·ä¸‹æ¬¡ä¸Šä¼ å°±å¯ä»¥è·³è¿‡ä¹‹å‰å·²ä¸Šä¼ çš„éƒ¨åˆ†ï¼Œæœ‰ä¸¤ç§æ–¹æ¡ˆå®ç°è®°å¿†çš„åŠŸèƒ½</p><ul><li>å‰ç«¯ä½¿ç”¨ localStorage è®°å½•å·²ä¸Šä¼ çš„åˆ‡ç‰‡ hash</li><li>æœåŠ¡ç«¯ä¿å­˜å·²ä¸Šä¼ çš„åˆ‡ç‰‡ hashï¼Œå‰ç«¯æ¯æ¬¡ä¸Šä¼ å‰å‘æœåŠ¡ç«¯è·å–å·²ä¸Šä¼ çš„åˆ‡ç‰‡</li></ul><p>ç¬¬ä¸€ç§æ˜¯å‰ç«¯çš„è§£å†³æ–¹æ¡ˆï¼Œç¬¬äºŒç§æ˜¯æœåŠ¡ç«¯ï¼Œè€Œå‰ç«¯æ–¹æ¡ˆæœ‰ä¸€ä¸ªç¼ºé™·ï¼Œå¦‚æœæ¢äº†ä¸ªæµè§ˆå™¨å°±å¤±å»äº†è®°å¿†çš„æ•ˆæœï¼Œæ‰€ä»¥è¿™é‡Œé€‰å–åè€…</p><h2 id="ç”Ÿæˆ-hash"><a href="#ç”Ÿæˆ-hash" class="headerlink" title="ç”Ÿæˆ hash"></a>ç”Ÿæˆ hash</h2><p>æ— è®ºæ˜¯å‰ç«¯è¿˜æ˜¯æœåŠ¡ç«¯ï¼Œéƒ½å¿…é¡»è¦ç”Ÿæˆæ–‡ä»¶å’Œåˆ‡ç‰‡çš„ hashï¼Œ<code>ä¹‹å‰æˆ‘ä»¬ä½¿ç”¨æ–‡ä»¶å + åˆ‡ç‰‡ä¸‹æ ‡ä½œä¸ºåˆ‡ç‰‡ hash</code>ï¼Œè¿™æ ·åšæ–‡ä»¶åä¸€æ—¦ä¿®æ”¹å°±å¤±å»äº†æ•ˆæœï¼Œè€Œäº‹å®ä¸Šåªè¦æ–‡ä»¶å†…å®¹ä¸å˜ï¼Œhash å°±ä¸åº”è¯¥å˜åŒ–ï¼Œæ‰€ä»¥æ­£ç¡®çš„åšæ³•æ˜¯<code>æ ¹æ®æ–‡ä»¶å†…å®¹ç”Ÿæˆ hash</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ hash çš„ç”Ÿæˆè§„åˆ™</p><p>è¿™é‡Œç”¨åˆ°å¦ä¸€ä¸ªåº“ <code>spark-md5</code>ï¼Œå®ƒå¯ä»¥æ ¹æ®æ–‡ä»¶å†…å®¹è®¡ç®—å‡ºæ–‡ä»¶çš„ hash å€¼ï¼Œå¦å¤–è€ƒè™‘åˆ°å¦‚æœä¸Šä¼ ä¸€ä¸ªè¶…å¤§æ–‡ä»¶ï¼Œè¯»å–æ–‡ä»¶å†…å®¹è®¡ç®— hash æ˜¯éå¸¸è€—è´¹æ—¶é—´çš„ï¼Œå¹¶ä¸”ä¼š<code>å¼•èµ· UI çš„é˜»å¡</code>ï¼Œå¯¼è‡´é¡µé¢å‡æ­»çŠ¶æ€ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ web-worker åœ¨ worker çº¿ç¨‹è®¡ç®— hashï¼Œè¿™æ ·ç”¨æˆ·ä»å¯ä»¥åœ¨ä¸»ç•Œé¢æ­£å¸¸çš„äº¤äº’</p><p>ç”±äºå®ä¾‹åŒ– web-worker æ—¶ï¼Œå‚æ•°æ˜¯ä¸€ä¸ª js æ–‡ä»¶è·¯å¾„ä¸”ä¸èƒ½è·¨åŸŸï¼Œæ‰€ä»¥æˆ‘ä»¬å•ç‹¬åˆ›å»ºä¸€ä¸ª hash.js æ–‡ä»¶æ”¾åœ¨ public ç›®å½•ä¸‹ï¼Œå¦å¤–åœ¨ worker ä¸­ä¹Ÿæ˜¯ä¸å…è®¸è®¿é—® dom çš„ï¼Œä½†å®ƒæä¾›äº†<code>importScripts</code> å‡½æ•°ç”¨äºå¯¼å…¥å¤–éƒ¨è„šæœ¬ï¼Œé€šè¿‡å®ƒå¯¼å…¥ spark-md5</p><pre><code>// /public/hash.jsself.importScripts(&quot;/spark-md5.min.js&quot;); // å¯¼å…¥è„šæœ¬// ç”Ÿæˆæ–‡ä»¶ hashself.onmessage = e =&gt; &#123;  const &#123; fileChunkList &#125; = e.data;  const spark = new self.SparkMD5.ArrayBuffer();  let percentage = 0;  let count = 0;  const loadNext = index =&gt; &#123;    const reader = new FileReader();    reader.readAsArrayBuffer(fileChunkList[index].file);    reader.onload = e =&gt; &#123;      count++;      spark.append(e.target.result);      if (count === fileChunkList.length) &#123;        self.postMessage(&#123;          percentage: 100,          hash: spark.end()        &#125;);        self.close();      &#125; else &#123;        percentage += 100 / fileChunkList.length;        self.postMessage(&#123;          percentage        &#125;);        // é€’å½’è®¡ç®—ä¸‹ä¸€ä¸ªåˆ‡ç‰‡        loadNext(count);      &#125;    &#125;;  &#125;;  loadNext(0);&#125;;</code></pre><p>åœ¨ worker çº¿ç¨‹ä¸­ï¼Œæ¥å—æ–‡ä»¶åˆ‡ç‰‡ fileChunkListï¼Œåˆ©ç”¨ FileReader è¯»å–æ¯ä¸ªåˆ‡ç‰‡çš„ ArrayBuffer å¹¶ä¸æ–­ä¼ å…¥ spark-md5 ä¸­ï¼Œæ¯è®¡ç®—å®Œä¸€ä¸ªåˆ‡ç‰‡é€šè¿‡ postMessage å‘ä¸»çº¿ç¨‹å‘é€ä¸€ä¸ªè¿›åº¦äº‹ä»¶ï¼Œå…¨éƒ¨å®Œæˆåå°†æœ€ç»ˆçš„ hash å‘é€ç»™ä¸»çº¿ç¨‹</p><p><code>spark-md5 éœ€è¦æ ¹æ®æ‰€æœ‰åˆ‡ç‰‡æ‰èƒ½ç®—å‡ºä¸€ä¸ª hash å€¼ï¼Œä¸èƒ½ç›´æ¥å°†æ•´ä¸ªæ–‡ä»¶æ”¾å…¥è®¡ç®—ï¼Œå¦åˆ™å³ä½¿ä¸åŒæ–‡ä»¶ä¹Ÿä¼šæœ‰ç›¸åŒçš„ hashï¼Œå…·ä½“å¯ä»¥çœ‹å®˜æ–¹æ–‡æ¡£</code></p><p><a href="https://link.juejin.cn/?target=https://www.npmjs.com/package/spark-md5">spark-md5</a></p><p>æ¥ç€ç¼–å†™ä¸»çº¿ç¨‹ä¸ worker çº¿ç¨‹é€šè®¯çš„é€»è¾‘</p><pre><code>   // ç”Ÿæˆæ–‡ä»¶ hashï¼ˆweb-workerï¼‰calculateHash(fileChunkList) &#123;  return new Promise(resolve =&gt; &#123;   // æ·»åŠ  worker å±æ€§    this.container.worker = new Worker(&quot;/hash.js&quot;);    this.container.worker.postMessage(&#123; fileChunkList &#125;);    this.container.worker.onmessage = e =&gt; &#123;      const &#123; percentage, hash &#125; = e.data;      this.hashPercentage = percentage;      if (hash) &#123;        resolve(hash);      &#125;    &#125;;  &#125;);&#125;,async handleUpload() &#123;  if (!this.container.file) return;  const fileChunkList = this.createFileChunk(this.container.file); this.container.hash = await this.calculateHash(fileChunkList);  this.data = fileChunkList.map((&#123; file &#125;ï¼Œindex) =&gt; (&#123;   fileHash: this.container.hash,    chunk: file,    hash: this.container.file.name + &quot;-&quot; + index, // æ–‡ä»¶å + æ•°ç»„ä¸‹æ ‡    percentage:0  &#125;));  await this.uploadChunks();&#125;</code></pre><p>ä¸»çº¿ç¨‹ä½¿ç”¨ <code>postMessage</code> ç»™ worker çº¿ç¨‹ä¼ å…¥æ‰€æœ‰åˆ‡ç‰‡ fileChunkListï¼Œå¹¶ç›‘å¬ worker çº¿ç¨‹å‘å‡ºçš„ postMessage äº‹ä»¶æ‹¿åˆ°æ–‡ä»¶ hash</p><p>åŠ ä¸Šæ˜¾ç¤ºè®¡ç®— hash çš„è¿›åº¦æ¡ï¼Œçœ‹èµ·æ¥åƒè¿™æ ·</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/8/16f84ae4f233e891~tplv-t2oaga2asx-watermark.awebp"></p><p>è‡³æ­¤å‰ç«¯éœ€è¦å°†ä¹‹å‰ç”¨æ–‡ä»¶åä½œä¸º hash çš„åœ°æ–¹æ”¹å†™ä¸º workder è¿”å›çš„è¿™ä¸ª hash</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/8/16f84b3bba953304~tplv-t2oaga2asx-watermark.awebp"></p><p>æœåŠ¡ç«¯åˆ™ä½¿ç”¨ hash ä½œä¸ºåˆ‡ç‰‡æ–‡ä»¶å¤¹åï¼Œhash + ä¸‹æ ‡ä½œä¸ºåˆ‡ç‰‡åï¼Œhash + æ‰©å±•åä½œä¸ºæ–‡ä»¶åï¼Œæ²¡æœ‰æ–°å¢çš„é€»è¾‘</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/8/16f84b50117e4db2~tplv-t2oaga2asx-watermark.awebp"></p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/8/16f84b33bbceaa48~tplv-t2oaga2asx-watermark.awebp"></p><h2 id="æ–‡ä»¶ç§’ä¼ "><a href="#æ–‡ä»¶ç§’ä¼ " class="headerlink" title="æ–‡ä»¶ç§’ä¼ "></a>æ–‡ä»¶ç§’ä¼ </h2><p>åœ¨å®ç°æ–­ç‚¹ç»­ä¼ å‰å…ˆç®€å•ä»‹ç»ä¸€ä¸‹æ–‡ä»¶ç§’ä¼ </p><p>æ‰€è°“çš„æ–‡ä»¶ç§’ä¼ ï¼Œå³åœ¨æœåŠ¡ç«¯å·²ç»å­˜åœ¨äº†ä¸Šä¼ çš„èµ„æºï¼Œæ‰€ä»¥å½“ç”¨æˆ·<code>å†æ¬¡ä¸Šä¼ </code>æ—¶ä¼šç›´æ¥æç¤ºä¸Šä¼ æˆåŠŸ</p><p>æ–‡ä»¶ç§’ä¼ éœ€è¦ä¾èµ–ä¸Šä¸€æ­¥ç”Ÿæˆçš„ hashï¼Œå³åœ¨<code>ä¸Šä¼ å‰</code>ï¼Œå…ˆè®¡ç®—å‡ºæ–‡ä»¶ hashï¼Œå¹¶æŠŠ hash å‘é€ç»™æœåŠ¡ç«¯è¿›è¡ŒéªŒè¯ï¼Œç”±äº hash çš„å”¯ä¸€æ€§ï¼Œæ‰€ä»¥ä¸€æ—¦æœåŠ¡ç«¯èƒ½æ‰¾åˆ° hash ç›¸åŒçš„æ–‡ä»¶ï¼Œåˆ™ç›´æ¥è¿”å›ä¸Šä¼ æˆåŠŸçš„ä¿¡æ¯å³å¯</p><pre><code>async verifyUpload(filename, fileHash) &#123;   const &#123; data &#125; = await this.request(&#123;     url: &quot;http://localhost:3000/verify&quot;,     headers: &#123;       &quot;content-type&quot;: &quot;application/json&quot;     &#125;,     data: JSON.stringify(&#123;       filename,       fileHash     &#125;)   &#125;);   return JSON.parse(data); &#125;,async handleUpload() &#123;  if (!this.container.file) return;  const fileChunkList = this.createFileChunk(this.container.file);  this.container.hash = await this.calculateHash(fileChunkList); const &#123; shouldUpload &#125; = await this.verifyUpload(   this.container.file.name,   this.container.hash ); if (!shouldUpload) &#123;   this.$message.success(&quot;ç§’ä¼ ï¼šä¸Šä¼ æˆåŠŸ&quot;);   return;&#125; this.data = fileChunkList.map((&#123; file &#125;, index) =&gt; (&#123;    fileHash: this.container.hash,    index,    hash: this.container.hash + &quot;-&quot; + index,    chunk: file,    percentage: 0  &#125;));  await this.uploadChunks();&#125;</code></pre><p>ç§’ä¼ å…¶å®å°±æ˜¯ç»™ç”¨æˆ·çœ‹çš„éšœçœ¼æ³•ï¼Œå®è´¨ä¸Šæ ¹æœ¬æ²¡æœ‰ä¸Šä¼ </p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/9/16f890e5967106c6~tplv-t2oaga2asx-watermark.awebp"></p><p>æœåŠ¡ç«¯çš„é€»è¾‘éå¸¸ç®€å•ï¼Œæ–°å¢ä¸€ä¸ªéªŒè¯æ¥å£ï¼ŒéªŒè¯æ–‡ä»¶æ˜¯å¦å­˜åœ¨å³å¯</p><pre><code>const extractExt = filename =&gt;filename.slice(filename.lastIndexOf(&quot;.&quot;), filename.length); // æå–åç¼€åconst UPLOAD_DIR = path.resolve(__dirname, &quot;..&quot;, &quot;target&quot;); // å¤§æ–‡ä»¶å­˜å‚¨ç›®å½•const resolvePost = req =&gt;  new Promise(resolve =&gt; &#123;    let chunk = &quot;&quot;;    req.on(&quot;data&quot;, data =&gt; &#123;      chunk += data;    &#125;);    req.on(&quot;end&quot;, () =&gt; &#123;      resolve(JSON.parse(chunk));    &#125;);  &#125;);server.on(&quot;request&quot;, async (req, res) =&gt; &#123;  if (req.url === &quot;/verify&quot;) &#123;    const data = await resolvePost(req);    const &#123; fileHash, filename &#125; = data;    const ext = extractExt(filename);    const filePath = path.resolve(UPLOAD_DIR, `$&#123;fileHash&#125;$&#123;ext&#125;`);    if (fse.existsSync(filePath)) &#123;      res.end(        JSON.stringify(&#123;          shouldUpload: false        &#125;)      );    &#125; else &#123;      res.end(        JSON.stringify(&#123;          shouldUpload: true        &#125;)      );    &#125;  &#125;&#125;);server.listen(3000, () =&gt; console.log(&quot;æ­£åœ¨ç›‘å¬ 3000 ç«¯å£&quot;));</code></pre><h2 id="æš‚åœä¸Šä¼ "><a href="#æš‚åœä¸Šä¼ " class="headerlink" title="æš‚åœä¸Šä¼ "></a>æš‚åœä¸Šä¼ </h2><p>è®²å®Œäº†ç”Ÿæˆ hash å’Œæ–‡ä»¶ç§’ä¼ ï¼Œå›åˆ°æ–­ç‚¹ç»­ä¼ </p><p>æ–­ç‚¹ç»­ä¼ é¡¾åæ€ä¹‰å³æ–­ç‚¹ + ç»­ä¼ ï¼Œæ‰€ä»¥æˆ‘ä»¬ç¬¬ä¸€æ­¥å…ˆå®ç°â€œæ–­ç‚¹â€ï¼Œä¹Ÿå°±æ˜¯æš‚åœä¸Šä¼ </p><p>åŸç†æ˜¯ä½¿ç”¨ XMLHttpRequest çš„ <code>abort</code> æ–¹æ³•ï¼Œå¯ä»¥å–æ¶ˆä¸€ä¸ª xhr è¯·æ±‚çš„å‘é€ï¼Œä¸ºæ­¤æˆ‘ä»¬éœ€è¦å°†ä¸Šä¼ æ¯ä¸ªåˆ‡ç‰‡çš„ xhr å¯¹è±¡ä¿å­˜èµ·æ¥ï¼Œæˆ‘ä»¬å†æ”¹é€ ä¸€ä¸‹ request æ–¹æ³•</p><pre><code>request(&#123;  url,  method = &quot;post&quot;,  data,  headers = &#123;&#125;,  onProgress = e =&gt; e, requestList&#125;) &#123;  return new Promise(resolve =&gt; &#123;    const xhr = new XMLHttpRequest();    xhr.upload.onprogress = onProgress;    xhr.open(method, url);    Object.keys(headers).forEach(key =&gt;      xhr.setRequestHeader(key, headers[key])    );    xhr.send(data);    xhr.onload = e =&gt; &#123;      // å°†è¯·æ±‚æˆåŠŸçš„ xhr ä»åˆ—è¡¨ä¸­åˆ é™¤      if (requestList) &#123;        const xhrIndex = requestList.findIndex(item =&gt; item === xhr);        requestList.splice(xhrIndex, 1);      &#125;      resolve(&#123;        data: e.target.response      &#125;);    &#125;;    // æš´éœ²å½“å‰ xhr ç»™å¤–éƒ¨    requestList?.push(xhr);  &#125;);&#125;,</code></pre><p>è¿™æ ·åœ¨ä¸Šä¼ åˆ‡ç‰‡æ—¶ä¼ å…¥ requestList æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œrequest æ–¹æ³•å°±ä¼šå°†æ‰€æœ‰çš„ xhr ä¿å­˜åœ¨æ•°ç»„ä¸­äº†</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/8/16f8563491ea7793~tplv-t2oaga2asx-watermark.awebp"></p><p>æ¯å½“ä¸€ä¸ªåˆ‡ç‰‡ä¸Šä¼ æˆåŠŸæ—¶ï¼Œå°†å¯¹åº”çš„ xhr ä» requestList ä¸­åˆ é™¤ï¼Œæ‰€ä»¥ requestList ä¸­åªä¿å­˜<code>æ­£åœ¨ä¸Šä¼ åˆ‡ç‰‡çš„ xhr</code></p><p>ä¹‹åæ–°å»ºä¸€ä¸ªæš‚åœæŒ‰é’®ï¼Œå½“ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œè°ƒç”¨ä¿å­˜åœ¨ requestList ä¸­ xhr çš„ abort æ–¹æ³•ï¼Œå³å–æ¶ˆå¹¶æ¸…ç©ºæ‰€æœ‰æ­£åœ¨ä¸Šä¼ çš„åˆ‡ç‰‡</p><pre><code>handlePause() &#123;    this.requestList.forEach(xhr =&gt; xhr?.abort());    this.requestList = [];&#125;</code></pre><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/9/16f890e598dd6afb~tplv-t2oaga2asx-watermark.awebp"></p><p>ç‚¹å‡»æš‚åœæŒ‰é’®å¯ä»¥çœ‹åˆ° xhr éƒ½è¢«å–æ¶ˆäº†</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/8/16f85644dc27459e~tplv-t2oaga2asx-watermark.awebp"></p><h2 id="æ¢å¤ä¸Šä¼ "><a href="#æ¢å¤ä¸Šä¼ " class="headerlink" title="æ¢å¤ä¸Šä¼ "></a>æ¢å¤ä¸Šä¼ </h2><p>ä¹‹å‰åœ¨ä»‹ç»æ–­ç‚¹ç»­ä¼ çš„æ—¶æåˆ°ä½¿ç”¨ç¬¬äºŒç§æœåŠ¡ç«¯å­˜å‚¨çš„æ–¹å¼å®ç°ç»­ä¼ </p><p>ç”±äºå½“æ–‡ä»¶åˆ‡ç‰‡ä¸Šä¼ åï¼ŒæœåŠ¡ç«¯ä¼šå»ºç«‹ä¸€ä¸ªæ–‡ä»¶å¤¹å­˜å‚¨æ‰€æœ‰ä¸Šä¼ çš„åˆ‡ç‰‡ï¼Œæ‰€ä»¥æ¯æ¬¡å‰ç«¯ä¸Šä¼ å‰å¯ä»¥è°ƒç”¨ä¸€ä¸ªæ¥å£ï¼ŒæœåŠ¡ç«¯å°†å·²ä¸Šä¼ çš„åˆ‡ç‰‡çš„åˆ‡ç‰‡åè¿”å›ï¼Œå‰ç«¯å†è·³è¿‡è¿™äº›å·²ç»ä¸Šä¼ åˆ‡ç‰‡ï¼Œè¿™æ ·å°±å®ç°äº†â€œç»­ä¼ â€çš„æ•ˆæœ</p><p>è€Œè¿™ä¸ªæ¥å£å¯ä»¥å’Œä¹‹å‰ç§’ä¼ çš„éªŒè¯æ¥å£åˆå¹¶ï¼Œå‰ç«¯æ¯æ¬¡ä¸Šä¼ å‰å‘é€ä¸€ä¸ªéªŒè¯çš„è¯·æ±‚ï¼Œè¿”å›ä¸¤ç§ç»“æœ</p><ul><li>æœåŠ¡ç«¯å·²å­˜åœ¨è¯¥æ–‡ä»¶ï¼Œä¸éœ€è¦å†æ¬¡ä¸Šä¼ </li><li>æœåŠ¡ç«¯ä¸å­˜åœ¨è¯¥æ–‡ä»¶æˆ–è€…å·²ä¸Šä¼ éƒ¨åˆ†æ–‡ä»¶åˆ‡ç‰‡ï¼Œé€šçŸ¥å‰ç«¯è¿›è¡Œä¸Šä¼ ï¼Œå¹¶æŠŠ<strong>å·²ä¸Šä¼ </strong>çš„æ–‡ä»¶åˆ‡ç‰‡è¿”å›ç»™å‰ç«¯</li></ul><p>æ‰€ä»¥æˆ‘ä»¬æ”¹é€ ä¸€ä¸‹ä¹‹å‰æ–‡ä»¶ç§’ä¼ çš„æœåŠ¡ç«¯éªŒè¯æ¥å£</p><pre><code>const extractExt = filename =&gt;  filename.slice(filename.lastIndexOf(&quot;.&quot;), filename.length); // æå–åç¼€åconst UPLOAD_DIR = path.resolve(__dirname, &quot;..&quot;, &quot;target&quot;); // å¤§æ–‡ä»¶å­˜å‚¨ç›®å½•const resolvePost = req =&gt;  new Promise(resolve =&gt; &#123;    let chunk = &quot;&quot;;    req.on(&quot;data&quot;, data =&gt; &#123;      chunk += data;    &#125;);    req.on(&quot;end&quot;, () =&gt; &#123;      resolve(JSON.parse(chunk));    &#125;);  &#125;);  // è¿”å›å·²ç»ä¸Šä¼ åˆ‡ç‰‡ååˆ—è¡¨ const createUploadedList = async fileHash =&gt;   fse.existsSync(path.resolve(UPLOAD_DIR, fileHash))    ? await fse.readdir(path.resolve(UPLOAD_DIR, fileHash))    : [];server.on(&quot;request&quot;, async (req, res) =&gt; &#123;  if (req.url === &quot;/verify&quot;) &#123;    const data = await resolvePost(req);    const &#123; fileHash, filename &#125; = data;    const ext = extractExt(filename);    const filePath = path.resolve(UPLOAD_DIR, `$&#123;fileHash&#125;$&#123;ext&#125;`);    if (fse.existsSync(filePath)) &#123;      res.end(        JSON.stringify(&#123;          shouldUpload: false        &#125;)      );    &#125; else &#123;      res.end(        JSON.stringify(&#123;          shouldUpload: trueï¼Œ         uploadedList: await createUploadedList(fileHash)        &#125;)      );    &#125;  &#125;&#125;);server.listen(3000, () =&gt; console.log(&quot;æ­£åœ¨ç›‘å¬ 3000 ç«¯å£&quot;));</code></pre><p>æ¥ç€å›åˆ°å‰ç«¯ï¼Œå‰ç«¯æœ‰ä¸¤ä¸ªåœ°æ–¹éœ€è¦è°ƒç”¨éªŒè¯çš„æ¥å£</p><ul><li>ç‚¹å‡»ä¸Šä¼ æ—¶ï¼Œæ£€æŸ¥æ˜¯å¦éœ€è¦ä¸Šä¼ å’Œå·²ä¸Šä¼ çš„åˆ‡ç‰‡</li><li>ç‚¹å‡»æš‚åœåçš„æ¢å¤ä¸Šä¼ ï¼Œè¿”å›å·²ä¸Šä¼ çš„åˆ‡ç‰‡</li></ul><p>æ–°å¢æ¢å¤æŒ‰é’®å¹¶æ”¹é€ åŸæ¥ä¸Šä¼ åˆ‡ç‰‡çš„é€»è¾‘</p><pre><code>&lt;template&gt;  &lt;div id=&quot;app&quot;&gt;      &lt;input        type=&quot;file&quot;        @change=&quot;handleFileChange&quot;      /&gt;       &lt;el-button @click=&quot;handleUpload&quot;&gt;ä¸Šä¼ &lt;/el-button&gt;       &lt;el-button @click=&quot;handlePause&quot; v-if=&quot;isPaused&quot;&gt;æš‚åœ&lt;/el-button&gt;      &lt;el-button @click=&quot;handleResume&quot; v-else&gt;æ¢å¤&lt;/el-button&gt;      //...    &lt;/div&gt;&lt;/template&gt;async handleResume() &#123;  const &#123; uploadedList &#125; = await this.verifyUpload(    this.container.file.name,    this.container.hash  );  await this.uploadChunks(uploadedList);&#125;,async handleUpload() &#123;  if (!this.container.file) return;  const fileChunkList = this.createFileChunk(this.container.file);  this.container.hash = await this.calculateHash(fileChunkList); const &#123; shouldUpload, uploadedList &#125; = await this.verifyUpload(    this.container.file.name,    this.container.hash  );  if (!shouldUpload) &#123;    this.$message.success(&quot;ç§’ä¼ ï¼šä¸Šä¼ æˆåŠŸ&quot;);    return;  &#125;  this.data = fileChunkList.map((&#123; file &#125;, index) =&gt; (&#123;    fileHash: this.container.hash,    index,    hash: this.container.hash + &quot;-&quot; + index,    chunk: fileï¼Œ    percentage: 0  &#125;));  await this.uploadChunks(uploadedList);&#125;,// ä¸Šä¼ åˆ‡ç‰‡ï¼ŒåŒæ—¶è¿‡æ»¤å·²ä¸Šä¼ çš„åˆ‡ç‰‡async uploadChunks(uploadedList = []) &#123;  const requestList = this.data    .filter((&#123; hash &#125;) =&gt; !uploadedList.includes(hash))    .map((&#123; chunk, hash, index &#125;) =&gt; &#123;      const formData = new FormData();      formData.append(&quot;chunk&quot;, chunk);      formData.append(&quot;hash&quot;, hash);      formData.append(&quot;filename&quot;, this.container.file.name);      formData.append(&quot;fileHash&quot;, this.container.hash);      return &#123; formData, index &#125;;    &#125;)    .map(async (&#123; formData, index &#125;) =&gt;      this.request(&#123;        url: &quot;http://localhost:3000&quot;,        data: formData,        onProgress: this.createProgressHandler(this.data[index]),        requestList: this.requestList      &#125;)    );  await Promise.all(requestList);  // ä¹‹å‰ä¸Šä¼ çš„åˆ‡ç‰‡æ•°é‡ + æœ¬æ¬¡ä¸Šä¼ çš„åˆ‡ç‰‡æ•°é‡ = æ‰€æœ‰åˆ‡ç‰‡æ•°é‡æ—¶  // åˆå¹¶åˆ‡ç‰‡  if (uploadedList.length + requestList.length === this.data.length) &#123;     await this.mergeRequest();  &#125;&#125;</code></pre><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/9/16f890e598de0946~tplv-t2oaga2asx-watermark.awebp"></p><p>è¿™é‡Œç»™åŸæ¥ä¸Šä¼ åˆ‡ç‰‡çš„å‡½æ•°æ–°å¢ uploadedList å‚æ•°ï¼Œå³ä¸Šå›¾ä¸­æœåŠ¡ç«¯è¿”å›çš„åˆ‡ç‰‡ååˆ—è¡¨ï¼Œé€šè¿‡ filter è¿‡æ»¤æ‰å·²ä¸Šä¼ çš„åˆ‡ç‰‡ï¼Œå¹¶ä¸”ç”±äºæ–°å¢äº†å·²ä¸Šä¼ çš„éƒ¨åˆ†ï¼Œæ‰€ä»¥ä¹‹å‰åˆå¹¶æ¥å£çš„è§¦å‘æ¡ä»¶åšäº†ä¸€äº›æ”¹åŠ¨</p><p>åˆ°è¿™é‡Œæ–­ç‚¹ç»­ä¼ çš„åŠŸèƒ½åŸºæœ¬å®Œæˆäº†</p><h2 id="è¿›åº¦æ¡æ”¹è¿›"><a href="#è¿›åº¦æ¡æ”¹è¿›" class="headerlink" title="è¿›åº¦æ¡æ”¹è¿›"></a>è¿›åº¦æ¡æ”¹è¿›</h2><p>è™½ç„¶å®ç°äº†æ–­ç‚¹ç»­ä¼ ï¼Œä½†è¿˜éœ€è¦ä¿®æ”¹ä¸€ä¸‹è¿›åº¦æ¡çš„æ˜¾ç¤ºè§„åˆ™ï¼Œå¦åˆ™åœ¨æš‚åœä¸Šä¼ /æ¥æ”¶åˆ°å·²ä¸Šä¼ åˆ‡ç‰‡æ—¶çš„è¿›åº¦æ¡ä¼šå‡ºç°åå·®</p><h3 id="åˆ‡ç‰‡è¿›åº¦æ¡-1"><a href="#åˆ‡ç‰‡è¿›åº¦æ¡-1" class="headerlink" title="åˆ‡ç‰‡è¿›åº¦æ¡"></a>åˆ‡ç‰‡è¿›åº¦æ¡</h3><p>ç”±äºåœ¨ç‚¹å‡»ä¸Šä¼ /æ¢å¤ä¸Šä¼ æ—¶ï¼Œä¼šè°ƒç”¨éªŒè¯æ¥å£è¿”å›å·²ä¸Šä¼ çš„åˆ‡ç‰‡ï¼Œæ‰€ä»¥éœ€è¦å°†å·²ä¸Šä¼ åˆ‡ç‰‡çš„è¿›åº¦å˜æˆ 100%</p><pre><code>async handleUpload() &#123;  if (!this.container.file) return;  const fileChunkList = this.createFileChunk(this.container.file);  this.container.hash = await this.calculateHash(fileChunkList);  const &#123; shouldUpload, uploadedList &#125; = await this.verifyUpload(    this.container.file.name,    this.container.hash  );  if (!shouldUpload) &#123;    this.$message.success(&quot;ç§’ä¼ ï¼šä¸Šä¼ æˆåŠŸ&quot;);    return;  &#125;  this.data = fileChunkList.map((&#123; file &#125;, index) =&gt; (&#123;    fileHash: this.container.hash,    index,    hash: this.container.hash + &quot;-&quot; + index,    chunk: file,   percentage: uploadedList.includes(index) ? 100 : 0  &#125;));  await this.uploadChunks(uploadedList);&#125;,</code></pre><p>uploadedList ä¼šè¿”å›å·²ä¸Šä¼ çš„åˆ‡ç‰‡ï¼Œåœ¨éå†æ‰€æœ‰åˆ‡ç‰‡æ—¶åˆ¤æ–­å½“å‰åˆ‡ç‰‡æ˜¯å¦åœ¨å·²ä¸Šä¼ åˆ—è¡¨é‡Œå³å¯</p><h3 id="æ–‡ä»¶è¿›åº¦æ¡-1"><a href="#æ–‡ä»¶è¿›åº¦æ¡-1" class="headerlink" title="æ–‡ä»¶è¿›åº¦æ¡"></a>æ–‡ä»¶è¿›åº¦æ¡</h3><p>ä¹‹å‰è¯´åˆ°æ–‡ä»¶è¿›åº¦æ¡æ˜¯ä¸€ä¸ªè®¡ç®—å±æ€§ï¼Œæ ¹æ®æ‰€æœ‰åˆ‡ç‰‡çš„ä¸Šä¼ è¿›åº¦è®¡ç®—è€Œæ¥ï¼Œè¿™å°±é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/9/16f8845dcca1427c~tplv-t2oaga2asx-watermark.awebp"></p><p>ç‚¹å‡»æš‚åœä¼šå–æ¶ˆå¹¶æ¸…ç©ºåˆ‡ç‰‡çš„ xhr è¯·æ±‚ï¼Œæ­¤æ—¶å¦‚æœå·²ç»ä¸Šä¼ äº†ä¸€éƒ¨åˆ†ï¼Œå°±ä¼šå‘ç°æ–‡ä»¶è¿›åº¦æ¡æœ‰<code>å€’é€€</code>çš„ç°è±¡</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/9/16f884633f3acfd9~tplv-t2oaga2asx-watermark.awebp"></p><p>å½“ç‚¹å‡»æ¢å¤æ—¶ï¼Œç”±äºé‡æ–°åˆ›å»ºäº† xhr å¯¼è‡´åˆ‡ç‰‡è¿›åº¦æ¸…é›¶ï¼Œæ‰€ä»¥æ€»è¿›åº¦æ¡å°±ä¼šå€’é€€</p><p>è§£å†³æ–¹æ¡ˆæ˜¯åˆ›å»ºä¸€ä¸ªâ€œå‡â€çš„è¿›åº¦æ¡ï¼Œè¿™ä¸ªå‡è¿›åº¦æ¡åŸºäºæ–‡ä»¶è¿›åº¦æ¡ï¼Œä½†åªä¼šåœæ­¢å’Œå¢åŠ ï¼Œç„¶åç»™ç”¨æˆ·å±•ç¤ºè¿™ä¸ªå‡çš„è¿›åº¦æ¡</p><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ Vue çš„ç›‘å¬å±æ€§</p><pre><code>data: () =&gt; (&#123;  fakeUploadPercentage: 0&#125;),computed: &#123;  uploadPercentage() &#123;    if (!this.container.file || !this.data.length) return 0;    const loaded = this.data      .map(item =&gt; item.size * item.percentage)      .reduce((acc, cur) =&gt; acc + cur);    return parseInt((loaded / this.container.file.size).toFixed(2));  &#125;&#125;,watch: &#123;  uploadPercentage(now) &#123;    if (now &gt; this.fakeUploadPercentage) &#123;      this.fakeUploadPercentage = now;    &#125;  &#125;&#125;,</code></pre><p>å½“ uploadPercentage å³çœŸçš„æ–‡ä»¶è¿›åº¦æ¡å¢åŠ æ—¶ï¼ŒfakeUploadPercentage ä¹Ÿå¢åŠ ï¼Œä¸€æ—¦æ–‡ä»¶è¿›åº¦æ¡åé€€ï¼Œå‡çš„è¿›åº¦æ¡åªéœ€åœæ­¢å³å¯</p><p>è‡³æ­¤ä¸€ä¸ªå¤§æ–‡ä»¶ä¸Šä¼  + æ–­ç‚¹ç»­ä¼ çš„è§£å†³æ–¹æ¡ˆå°±å®Œæˆäº†</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å¤§æ–‡ä»¶ä¸Šä¼ </p><ul><li>å‰ç«¯ä¸Šä¼ å¤§æ–‡ä»¶æ—¶ä½¿ç”¨ Blob.prototype.slice å°†æ–‡ä»¶åˆ‡ç‰‡ï¼Œå¹¶å‘ä¸Šä¼ å¤šä¸ªåˆ‡ç‰‡ï¼Œæœ€åå‘é€ä¸€ä¸ªåˆå¹¶çš„è¯·æ±‚é€šçŸ¥æœåŠ¡ç«¯åˆå¹¶åˆ‡ç‰‡</li><li>æœåŠ¡ç«¯æ¥æ”¶åˆ‡ç‰‡å¹¶å­˜å‚¨ï¼Œæ”¶åˆ°åˆå¹¶è¯·æ±‚åä½¿ç”¨æµå°†åˆ‡ç‰‡åˆå¹¶åˆ°æœ€ç»ˆæ–‡ä»¶</li><li>åŸç”Ÿ XMLHttpRequest çš„ upload.onprogress å¯¹åˆ‡ç‰‡ä¸Šä¼ è¿›åº¦çš„ç›‘å¬</li><li>ä½¿ç”¨ Vue è®¡ç®—å±æ€§æ ¹æ®æ¯ä¸ªåˆ‡ç‰‡çš„è¿›åº¦ç®—å‡ºæ•´ä¸ªæ–‡ä»¶çš„ä¸Šä¼ è¿›åº¦</li></ul><p>æ–­ç‚¹ç»­ä¼ </p><ul><li>ä½¿ç”¨ spark-md5 æ ¹æ®æ–‡ä»¶å†…å®¹ç®—å‡ºæ–‡ä»¶ hash</li><li>é€šè¿‡ hash å¯ä»¥åˆ¤æ–­æœåŠ¡ç«¯æ˜¯å¦å·²ç»ä¸Šä¼ è¯¥æ–‡ä»¶ï¼Œä»è€Œç›´æ¥æç¤ºç”¨æˆ·ä¸Šä¼ æˆåŠŸï¼ˆç§’ä¼ ï¼‰</li><li>é€šè¿‡ XMLHttpRequest çš„ abort æ–¹æ³•æš‚åœåˆ‡ç‰‡çš„ä¸Šä¼ </li><li>ä¸Šä¼ å‰æœåŠ¡ç«¯è¿”å›å·²ç»ä¸Šä¼ çš„åˆ‡ç‰‡åï¼Œå‰ç«¯è·³è¿‡è¿™äº›åˆ‡ç‰‡çš„ä¸Šä¼ </li></ul><h1 id="åé¦ˆçš„é—®é¢˜"><a href="#åé¦ˆçš„é—®é¢˜" class="headerlink" title="åé¦ˆçš„é—®é¢˜"></a>åé¦ˆçš„é—®é¢˜</h1><p>éƒ¨åˆ†åŠŸèƒ½ç”±äºä¸æ–¹ä¾¿æµ‹è¯•ï¼Œè¿™é‡Œåˆ—å‡ºè¯„è®ºåŒºæ”¶é›†åˆ°çš„ä¸€äº›é—®é¢˜ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥æå‡ºä½ çš„æƒ³æ³•/å†™ä¸ª demo è¿›ä¸€æ­¥äº¤æµ</p><ul><li>æ²¡æœ‰åšåˆ‡ç‰‡ä¸Šä¼ å¤±è´¥çš„å¤„ç†</li><li>ä½¿ç”¨ web socket ç”±æœåŠ¡ç«¯å‘é€è¿›åº¦ä¿¡æ¯</li><li>æ‰“å¼€é¡µé¢æ²¡æœ‰è‡ªåŠ¨è·å–ä¸Šä¼ åˆ‡ç‰‡ï¼Œè€Œéœ€è¦ä¸»åŠ¨å†æ¬¡ä¸Šä¼ ä¸€æ¬¡åæ‰æ˜¾ç¤º</li></ul><h1 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h1><p>æºä»£ç å¢åŠ äº†ä¸€äº›æŒ‰é’®çš„çŠ¶æ€ï¼Œäº¤äº’æ›´åŠ å‹å¥½ï¼Œæ–‡ç« è¡¨è¾¾æ¯”è¾ƒæ™¦æ¶©çš„åœ°æ–¹å¯ä»¥è·³è½¬åˆ°æºä»£ç æŸ¥çœ‹</p><p><a href="https://link.juejin.cn/?target=https://github.com/yeyan1996/file-upload">file-upload</a></p>]]></content>
      
      
      <categories>
          
          <category> Node </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> Node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vite</title>
      <link href="/2022/09/30/article25/"/>
      <url>/2022/09/30/article25/</url>
      
        <content type="html"><![CDATA[<h2 id="Vite-çš„å®šä¹‰"><a href="#Vite-çš„å®šä¹‰" class="headerlink" title="Vite çš„å®šä¹‰"></a>Vite çš„å®šä¹‰</h2><p>é¢å‘ç°ä»£æµè§ˆå™¨çš„ä¸€ä¸ªæ›´è½»ã€æ›´å¿«çš„ Web åº”ç”¨å¼€å‘å·¥å…·ï¼ŒåŸºäº ECMAScript æ ‡å‡†åŸç”Ÿæ¨¡å—ç³»ç»Ÿï¼ˆES Modulesï¼‰å®ç°ã€‚</p><h2 id="Vite-çš„ç‰¹ç‚¹"><a href="#Vite-çš„ç‰¹ç‚¹" class="headerlink" title="Vite çš„ç‰¹ç‚¹"></a>Vite çš„ç‰¹ç‚¹</h2><ul><li>é—ªç”µèˆ¬å¿«é€Ÿçš„å†·æœåŠ¡å™¨å¯åŠ¨</li><li>å³æ—¶çƒ­æ¨¡å—æ›´æ¢ï¼ˆHMRï¼‰</li><li>çœŸæ­£çš„æŒ‰éœ€ç¼–è¯‘</li></ul><p>å®é™…ä¸Šï¼Œåˆšæ¥è§¦è¿™ä¸ªè¿™ä¸ªæ¡†æ¶ç»™äººæœ€ç›´è§‚çš„æ„Ÿå—å°±æ˜¯è½»å·§ã€åˆ©è½ï¼Œå†·å¯åŠ¨é€Ÿåº¦å¯ä»¥è¯´æ˜¯ç§’å¼€ï¼Œå¼€å‘ä½“éªŒæåº¦èˆ’é€‚ï¼ŒçœŸåº”äº†å°¤å¤§å‘è¡¨çš„æ„Ÿè¨€è®©äººå†ä¹Ÿä¸æƒ³ç”¨ webpackã€‚</p><h2 id="ä¸ºä»€ä¹ˆ-Vite-å¯åŠ¨é€Ÿåº¦å¿«ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆ-Vite-å¯åŠ¨é€Ÿåº¦å¿«ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆ Vite å¯åŠ¨é€Ÿåº¦å¿«ï¼Ÿ"></a>ä¸ºä»€ä¹ˆ Vite å¯åŠ¨é€Ÿåº¦å¿«ï¼Ÿ</h2><p>vite åˆ©ç”¨ç°ä»£æµè§ˆå™¨åŸç”Ÿæ”¯æŒ ESM ç‰¹æ€§ï¼Œçœç•¥äº†å¯¹æ¨¡å—çš„æ‰“åŒ…ï¼Œåªæœ‰å…·ä½“å»è¯·æ±‚æŸä¸ªæ–‡ä»¶æ—¶æ‰ä¼šæŒ‰éœ€ç¼–è¯‘ï¼Œvite ä¼šæ ¹æ® import å¯¼å…¥æ›¿æ¢è·¯å¾„åœ¨å‰é¢åŠ ä¸Š@modulesï¼Œç„¶åå» node_modules å¯»æ‰¾ç›¸å…³ä¾èµ–ï¼Œå†åˆ†åˆ«å¯¹ templateã€scriptã€style è¿›è¡Œå¤„ç†ï¼›è€Œ webpack ä¼šæå‰æŠŠæ‰€æœ‰æ¨¡å—è¿›è¡Œç¼–è¯‘ï¼Œæ‰€ä»¥éšç€é¡¹ç›®è¶Šæ¥è¶Šå¤§ï¼Œå¯åŠ¨é€Ÿåº¦ä¹Ÿå°±è¶Šæ…¢ã€‚ä¸‹é¢è¿›å…¥å›¾è§£ç¯èŠ‚ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f8ac94ecc23449d9b2928f5123767d85~tplv-k3u1fbpfcp-watermark.awebp"></p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cbc4e55ef0824e8d9c44329a6ba2d770~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p><h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><p><code>npm init vite-app demo</code></p><p>åœ¨å‘½ä»¤çª—å£é‡Œè¾“å…¥è¿™å¥å‘½ä»¤å³å¯åˆ›å»ºä¸€ä¸ª vite çš„é¡¹ç›®ï¼Œè€Œä¸”è¿˜éå¸¸è´´å¿ƒçš„æç¤ºäº†åç»­æ“ä½œï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œå°±ä¸å¤šè¯´äº†ï¼ŒæŒ‰ç…§å‘½ä»¤çª—å£çš„æç¤ºå®‰è£…ä¾èµ–å°±å¥½ã€‚</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/82663442c8e94716b4d4e5c054bfd055~tplv-k3u1fbpfcp-watermark.awebp"></p><p>ç›®å½•ç»“æ„è¿˜æ˜¯å’Œä»¥å‰ä¸€æ ·ï¼Œä¸šåŠ¡éƒ½å†™åœ¨ src é‡Œ</p><p>ç„¶åæ‰§è¡Œ<code>npm run dev</code> å¯åŠ¨é¡¹ç›®</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/520f439a7d894d7dbc7cc97a2eb68a50~tplv-k3u1fbpfcp-watermark.awebp"></p><p>é¡¹ç›®å¯åŠ¨åä½ ä¼šçœ‹åˆ°ä¸€ä¸ªè¿™æ ·çš„é¡µé¢ï¼Œå’Œä»¥å¾€çš„ hello vue ä¸åŒï¼Œè¿™é‡Œç®€å•çš„å®ç°äº†ä¸€ä¸ªè®¡æ•°å™¨åŠŸèƒ½</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6c022c5b11fe40e98e5c89172b5ba7ad~tplv-k3u1fbpfcp-watermark.awebp"></p><p>è¿™é‡Œè¿˜æ˜¯ä»¥ vue2 çš„æ–¹å¼å®ç°çš„å°åŠŸèƒ½ï¼Œå®é™…ä¸Šè¿™é‡Œå¯ä»¥ç”¨ vue3 çš„ Composition API å…¥å£ setup å®ç°ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯åœ¨ setup é‡Œæ˜¯æ²¡æœ‰å®ä¾‹å¯¹è±¡ this çš„ï¼Œå£°æ˜çš„å˜é‡å¿…é¡»åœ¨å‡½æ•°åº•éƒ¨ç»Ÿä¸€è¿”å›æ‰èƒ½ä½¿ç”¨ï¼Œå¹¶ä¸”ä»–çš„æ‰§è¡Œæ˜¯åœ¨æ—§ç”Ÿå‘½å‡½æ•°é‡Œé¢çš„ beforeCreate å’Œ created ä¹‹é—´ã€‚</p><h2 id="Vite-ä¸-TypeScript"><a href="#Vite-ä¸-TypeScript" class="headerlink" title="Vite ä¸ TypeScript"></a>Vite ä¸ TypeScript</h2><p>å‰ç«¯åº”ç”¨çš„å¤æ‚åº¦ä¸æ–­é£™å‡ï¼Œè¿™å¸¦æ¥çš„é—®é¢˜å°±æ˜¯ç»´æŠ¤æ€§ä»¥åŠæ‰©å±•æ€§ä¼šå˜å·®ï¼Œä½¿ç”¨ ts ç¼–å†™ä»£ç ä¼šå¤§å¤§é™ä½è°ƒè¯• bug çš„æ—¶é—´ï¼Œå®‰è£… ts ä¾èµ–åï¼Œåœ¨ vue3 é‡Œä½ åªéœ€è¦åœ¨ script æ ‡ç­¾ä¸ŠåŠ ä¸€ä¸ª<code>lang=&#39;ts&#39;</code>å°±å¯ä»¥å¼•å…¥ ts æ„‰å¿«çš„ç¼–ç äº†ã€‚</p><p>åœ¨ vite é¡¹ç›®é‡Œä½¿ç”¨ ts æ˜¯å†åˆé€‚ä¸è¿‡äº†ï¼Œvite ç›®å‰å°±åªé€‚ç”¨äº vue3 çš„ç‰ˆæœ¬ï¼ˆè¿™é‡Œä¸è€ƒè™‘å…¶ä½™æ¡†æ¶ï¼‰ï¼Œè€Œ vue3 å°±æ˜¯ç”¨ ts å†™çš„ï¼Œæ‰€ä»¥å¯¹ ts å¼€å‘è€…éå¸¸å‹å¥½ï¼Œå¦‚æœæ²¡æœ‰ç”¨è¿‡ ts ä¹Ÿæ²¡å…³ç³»ï¼Œvue3 åªæ˜¯å¯¹ ts ä½¿ç”¨è€…æ›´å‹å¥½ï¼Œè€Œä¸æ˜¯åªèƒ½ç”¨ tsï¼ˆå½“ç„¶è¿™é‡Œè¿˜æ˜¯æ¨èå¤§å®¶ç”¨ tsï¼‰ã€‚</p><h2 id="Vite-æ‰“åŒ…"><a href="#Vite-æ‰“åŒ…" class="headerlink" title="Vite æ‰“åŒ…"></a>Vite æ‰“åŒ…</h2><p>vite æ‰“åŒ…å†…éƒ¨é‡‡ç”¨çš„æ˜¯ Rollup å®Œæˆçš„åº”ç”¨æ‰“åŒ…ï¼Œå› ä¸º vite é«˜åº¦ä¾èµ– ES Modules ç‰¹æ€§æ‰€ä»¥åªæ”¯æŒç°ä»£æµè§ˆå™¨ï¼ŒæŠ›å¼ƒ IE å¸‚åœºï¼Œå¦‚æœä½ éœ€è¦å…¼å®¹ IE éœ€è¦å¦åšå¤„ç†ï¼Œè¯¦æƒ…å¯ä»¥å‚è€ƒ<a href="https://link.juejin.cn/?target=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Modules">è¿™é‡Œã€‚</a></p><p>ä½ åªéœ€è¦åœ¨ç»ˆç«¯æ‰§è¡Œ <code>npm run build</code> æ‰“åŒ…è¿‡ç¨‹è½»æ¾åˆæ„‰å¿«ï¼Œå…ˆä¸è¦é«˜å…´çš„å¤ªæ—©ï¼Œè¿™æ—¶å€™å¦‚æœä½ æ‰“å¼€ dist æ–‡ä»¶ä¸‹çš„æ‰“åŒ…æ–‡ä»¶ä¼šå‘ç°é¡µé¢æ˜¾ç¤ºä¸å‡ºæ¥ï¼Œä¸€æ‹è„‘é—¨æƒ³èµ·æ¥åœ¨<code>vue.config.js</code>é‡Œé¢é…ç½®ä¸€ä¸‹<code>publicPath: &#39;./&#39;</code>ï¼Œä¸è¿‡å½“ä½ åšå®Œè¿™ä¸€åˆ‡ä¹‹åå‘ç°å¹¶æ²¡æœ‰è§£å†³é—®é¢˜ï¼Œwhyï¼Ÿåœ¨è¿™é‡Œå…ˆä¸è¦æ…Œï¼Œåªéœ€è¦ç»§ç»­å‘ä¸‹çœ‹ã€‚</p><p>è§£å†³åŠæ³•ï¼š</p><p>è¿™æ˜¯å› ä¸º vue æ‰“åŒ…åçš„è·¯å¾„é»˜è®¤æ˜¯æ ¹è·¯å¾„ï¼Œè€Œåœ¨ vite é‡Œé¢çš„é…ç½®æ–‡ä»¶æ˜¯<code>vite.config.js</code>ï¼Œæ‰€ä»¥åŒç†ï¼Œä½ åªéœ€è¦åœ¨é…ç½®é‡Œå†™ä¸Š<code>base: &#39;./&#39;</code>å³å¯è½»æ¾è§£å†³ã€‚</p><h2 id="é…ç½®è·¯ç”±å’ŒçŠ¶æ€ç®¡ç†"><a href="#é…ç½®è·¯ç”±å’ŒçŠ¶æ€ç®¡ç†" class="headerlink" title="é…ç½®è·¯ç”±å’ŒçŠ¶æ€ç®¡ç†"></a>é…ç½®è·¯ç”±å’ŒçŠ¶æ€ç®¡ç†</h2><p>è·¯ç”±é…ç½®</p><pre><code>// router/indeximport &#123; createRouter, createWebHistory, RouteRecordRaw &#125; from &#39;vue-router&#39;const routes: Array&lt;RouteRecordRaw&gt; =[ &#123;    path: &#39;/&#39;,    name: &#39;Home&#39;,    component: import(&#39;/@views/Home&#39;) &#125;, &#123;    path: &#39;/user&#39;,    name: &#39;User&#39;,    component: () =&gt; import(&#39;/@views/User&#39;) &#125;]const router = createRouter(&#123;    history: createWebHistory(process.env.BASE_URL),    routes&#125;)export default router</code></pre><p>vuex é…ç½®</p><pre><code>// store/indeximport &#123; createStore &#125; from &#39;vuex&#39;export default createStore(&#123;    state: &#123;&#125;,    mutations: &#123;&#125;,    actions: &#123;&#125;,    modules: &#123;&#125;&#125;)</code></pre><p>æ›´è½»é‡çš„ä¾èµ–æ³¨å…¥å·¥å…· provideã€inject å‡½æ•°å¯ä»¥æ›¿ä»£ vuexï¼Œä¸¤è€…å¯æ ¹æ®ä¸ªäººä¹ æƒ¯äºŒé€‰ä¸€ã€‚</p><pre><code>import &#123; provide, inject &#125; from &#39;vue&#39;const Ancestor = &#123;  setup() &#123;    provide(&quot;name&quot;, &quot;æˆ‘æ˜¯çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’çš„å€¼&quot;);  &#125;&#125;const Descendent = &#123;  setup() &#123;    const name = inject(&quot;name&quot;)    return &#123;      name    &#125;  &#125;&#125;</code></pre><h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>ç»è¿‡ä»‹ç»å¤§å®¶åº”è¯¥å¯¹ vite æœ‰ä¸€ä¸ªåˆæ­¥çš„ç†è§£äº†ï¼Œå€¼å¾—ä¸€è¯´çš„æ˜¯ vite å¼€å‘ä½“éªŒçœŸçš„èˆ’é€‚ï¼Œå¿«ä¸€ç§’ä¹Ÿæ˜¯å¿«å•Šï¼Œæ›´ä½•å†µä¸æ­¢å¿«ä¸€ç§’å‘¢ï¼Œæœ‰æ—¶å€™ä¸å°±å·®é‚£å‡ ç§’ ğŸ˜Š</p>]]></content>
      
      
      <categories>
          
          <category> Vite </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vite </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç‚«é…·çš„ CSS æ–‡å­—ç‰¹æ•ˆ</title>
      <link href="/2022/09/01/article24/"/>
      <url>/2022/09/01/article24/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€å®ç°çº¿æ€§æ¸å˜çš„æ–‡å­—"><a href="#ä¸€ã€å®ç°çº¿æ€§æ¸å˜çš„æ–‡å­—" class="headerlink" title="ä¸€ã€å®ç°çº¿æ€§æ¸å˜çš„æ–‡å­—"></a>ä¸€ã€å®ç°çº¿æ€§æ¸å˜çš„æ–‡å­—</h2><p>å®ä¾‹æè¿°ï¼šåœ¨ç½‘é¡µåˆ¶ä½œæ—¶ï¼Œå¯ä»¥é€šè¿‡å¯¹æ–‡å­—é¢œè‰²çš„è®¾ç½®æ¥å®ç°ç½‘é¡µçš„ç‰¹æ®Šæ•ˆæœã€‚æœ¬å®ä¾‹å°†ä½¿ç”¨ CSS3 å®ç°æ–‡å­—çº¿æ€§æ¸å˜çš„æ•ˆæœã€‚è¿è¡Œå®ä¾‹ï¼Œåœ¨é¡µé¢ä¸­ä¼šè¾“å‡ºä¸€ä¸²çº¿æ€§æ¸å˜çš„æ–‡å­— <code>äººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ç”¨Python</code>ï¼Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://img2020.cnblogs.com/blog/2423513/202108/2423513-20210813124246315-655954642.png"></p><p>æŠ€æœ¯è¦ç‚¹ï¼šæœ¬å®ä¾‹ä¸»è¦ä½¿ç”¨äº† CSS3 ä¸­çš„ linear-gradient() å‡½æ•°ï¼Œè¯¥å‡½æ•°ç”¨äºåˆ›å»ºä¸€ä¸ªçº¿æ€§æ¸å˜çš„å›¾åƒã€‚è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><pre><code>background:linear-gradient(direction, color-stop1, color-stop2, â€¦)/*å‚æ•°è¯´æ˜ï¼š\1. directionï¼šè®¾ç½®æ¸å˜çš„æ–¹å‘ï¼Œå¯ä»¥ä½¿ç”¨è§’åº¦å€¼ã€‚\2. color-stop1, color-stop2, â€¦ï¼šæŒ‡å®šæ¸å˜çš„èµ·æ­¢é¢œè‰²ã€‚*/</code></pre><h2 id="äºŒã€åˆ¶ä½œæ–‡å­—é˜´å½±æ•ˆæœ"><a href="#äºŒã€åˆ¶ä½œæ–‡å­—é˜´å½±æ•ˆæœ" class="headerlink" title="äºŒã€åˆ¶ä½œæ–‡å­—é˜´å½±æ•ˆæœ"></a>äºŒã€åˆ¶ä½œæ–‡å­—é˜´å½±æ•ˆæœ</h2><p><img src="https://img2020.cnblogs.com/blog/2423513/202108/2423513-20210813124438144-2087509045.png"></p><p>æŠ€æœ¯è¦ç‚¹ï¼šæœ¬å®ä¾‹ä¸»è¦ä½¿ç”¨äº† CSS3 ä¸­çš„ text-shadow å±æ€§ï¼Œè¯¥å±æ€§ç”¨äºå‘æ–‡æœ¬è®¾ç½®é˜´å½±ã€‚è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><pre><code>text-shadow: h-shadow v-shadow blur color;/*å‚æ•°è¯´æ˜ï¼šh-shadowï¼šå¿…é€‰å‚æ•°ï¼Œç”¨äºè®¾ç½®æ°´å¹³é˜´å½±çš„ä½ç½®ï¼Œå¯ä»¥ä¸ºè´Ÿå€¼ã€‚v-shadowï¼šå¿…é€‰å‚æ•°ï¼Œç”¨äºè®¾ç½®å‚ç›´é˜´å½±çš„ä½ç½®ï¼Œå¯ä»¥ä¸ºè´Ÿå€¼ã€‚blurï¼šå¯é€‰å‚æ•°ï¼Œç”¨äºè®¾ç½®æ¨¡ç³Šçš„è·ç¦»ã€‚colorï¼šå¯é€‰å‚æ•°ï¼Œç”¨äºè®¾ç½®é˜´å½±çš„é¢œè‰²ã€‚*/</code></pre><h2 id="ä¸‰ã€å®ç°æ–‡å­—çš„è§å…‰é—ªçƒæ•ˆæœ"><a href="#ä¸‰ã€å®ç°æ–‡å­—çš„è§å…‰é—ªçƒæ•ˆæœ" class="headerlink" title="ä¸‰ã€å®ç°æ–‡å­—çš„è§å…‰é—ªçƒæ•ˆæœ"></a>ä¸‰ã€å®ç°æ–‡å­—çš„è§å…‰é—ªçƒæ•ˆæœ</h2><p><img src="https://img2020.cnblogs.com/blog/2423513/202108/2423513-20210813125627494-376405160.png"></p><p><code>animation: name duration timing-function delay iteration-count direction;</code></p><p>å‚æ•°è¯´æ˜å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p><p><img src="https://img2020.cnblogs.com/blog/2423513/202108/2423513-20210813125716122-1364222231.png"></p><h2 id="äº”ã€åˆ¶ä½œé•‚ç©ºæ–‡å­—"><a href="#äº”ã€åˆ¶ä½œé•‚ç©ºæ–‡å­—" class="headerlink" title="äº”ã€åˆ¶ä½œé•‚ç©ºæ–‡å­—"></a>äº”ã€åˆ¶ä½œé•‚ç©ºæ–‡å­—</h2><p><img src="https://img2020.cnblogs.com/blog/2423513/202108/2423513-20210813125131298-1439491023.png"></p><p>æŠ€æœ¯è¦ç‚¹ï¼šåœ¨æœ¬å®ä¾‹ä¸­ï¼Œå®ç°æ–‡å­—çš„é•‚ç©ºæ•ˆæœä¸»è¦åº”ç”¨äº† CSS3 ä¸­çš„ text-stroke å±æ€§ï¼Œé€šè¿‡è¯¥å±æ€§å¯ä»¥è®¾ç½®æ–‡å­—çš„æè¾¹æ•ˆæœã€‚è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><pre><code>text-stroke:[text-stroke-width] || [text-stroke-color]/*å‚æ•°è¯´æ˜ï¼š text-stroke-widthï¼šè®¾ç½®æ–‡å­—çš„æè¾¹åšåº¦ã€‚text-stroke-colorï¼šè®¾ç½®æ–‡å­—çš„æè¾¹é¢œè‰²ã€‚*/</code></pre><h2 id="å…­ã€å®ç°æ–‡å­—çš„å€¾æ–œæ•ˆæœ"><a href="#å…­ã€å®ç°æ–‡å­—çš„å€¾æ–œæ•ˆæœ" class="headerlink" title="å…­ã€å®ç°æ–‡å­—çš„å€¾æ–œæ•ˆæœ"></a>å…­ã€å®ç°æ–‡å­—çš„å€¾æ–œæ•ˆæœ</h2><p><img src="https://img2020.cnblogs.com/blog/2423513/202108/2423513-20210813125458633-503000637.png"></p><pre><code>text-stroke:[text-stroke-width] || [text-stroke-color]/*å‚æ•°è¯´æ˜ï¼š text-stroke-widthï¼šè®¾ç½®æ–‡å­—çš„æè¾¹åšåº¦ã€‚text-stroke-colorï¼šè®¾ç½®æ–‡å­—çš„æè¾¹é¢œè‰²ã€‚*/</code></pre><h2 id="ä¸ƒã€å®ç°ç«ç„°æ–‡å­—"><a href="#ä¸ƒã€å®ç°ç«ç„°æ–‡å­—" class="headerlink" title="ä¸ƒã€å®ç°ç«ç„°æ–‡å­—"></a>ä¸ƒã€å®ç°ç«ç„°æ–‡å­—</h2><p><img src="https://img2020.cnblogs.com/blog/2423513/202108/2423513-20210813125826147-1767245020.png"></p><pre><code>&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;&lt;meta charset=&quot;UTF-8&quot;&gt;&lt;title&gt;å®ç°ç«ç„°æ–‡å­—&lt;/title&gt;&lt;style type=&quot;text/css&quot;&gt;body&#123;font-size:120px; /*è®¾ç½®å­—ä½“å¤§å°*/font-weight:bold; /*è®¾ç½®å­—ä½“ç²—ç»†*/font-family:&#39;å¾®è½¯é›…é»‘&#39;; /*è®¾ç½®å­—ä½“*/background:#000; /*è®¾ç½®é¡µé¢èƒŒæ™¯é¢œè‰²*/color:#fff; /*è®¾ç½®æ–‡å­—é¢œè‰²*/text-align:center/*è®¾ç½®æ–‡å­—å±…ä¸­*/&#125;div&#123;text-shadow:0 0 20px #fefcc9,10px -10px 30px #feec85,-20px -20px 40px #ffae34,20px -40px 50px #ec760c,0 -80px 70px #f38e1c; /*è®¾ç½®æ–‡å­—é˜´å½±*/-webkit-animation: flame 2s infinite; /*è®¾ç½®åŠ¨ç”»*/&#125;@-webkit-keyframes flame&#123; /*åˆ›å»ºåŠ¨ç”»*/0%&#123;text-shadow:0 0 20px #fefcc9,10px -10px 30px #feec85,-20px -20px 40px #ffae34,20px -40px 50px #ec760c,0 -80px 70px #f38e1c;&#125;30%&#123;text-shadow:0 0 20px #fefcc9,10px -10px 30px #feec85,-20px -20px 40px #ffae34,20px -40px 50px #ec760c,10px -90px 80px #f38e1c;&#125;60%&#123;text-shadow:0 0 20px #fefcc9,10px -10px 30px #feec85,-20px -20px 40px #ffae34,20px -40px 50px #ec760c,0px -80px 100px #f38e1c;&#125;100%&#123;text-shadow:0 0 20px #fefcc9,10px -10px 30px #feec85,-20px -20px 40px #ffae34,20px -40px 50px #ec760c,0 -80px 70px #f38e1c;&#125;&#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div&gt;æ˜Ÿæ˜Ÿä¹‹ç«å¯ä»¥ç‡åŸ&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h2 id="å…«ã€ä½¿ç”¨-SVG-åˆ›å»ºç©ºå¿ƒè™šçº¿çº¿æ¡æ–‡å­—"><a href="#å…«ã€ä½¿ç”¨-SVG-åˆ›å»ºç©ºå¿ƒè™šçº¿çº¿æ¡æ–‡å­—" class="headerlink" title="å…«ã€ä½¿ç”¨ SVG åˆ›å»ºç©ºå¿ƒè™šçº¿çº¿æ¡æ–‡å­—"></a>å…«ã€ä½¿ç”¨ SVG åˆ›å»ºç©ºå¿ƒè™šçº¿çº¿æ¡æ–‡å­—</h2><p><img src="https://img2020.cnblogs.com/blog/2423513/202108/2423513-20210813130022598-1290072040.png"></p><pre><code>&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;&lt;meta charset=&quot;UTF-8&quot;&gt;&lt;title&gt;Document&lt;/title&gt;&lt;style type=&quot;text/css&quot;&gt;text&#123;font-family:SimHei; /*å®šä¹‰å­—ä½“*/font-size:56px; /*å®šä¹‰æ–‡å­—å¤§å°*/font-weight:bolder; /*å®šä¹‰å­—ä½“ç²—ç»†*/fill:transparent; /*å®šä¹‰æ–‡å­—é€æ˜*/stroke:#0000FF; /*å®šä¹‰æè¾¹é¢œè‰²*/stroke-dasharray:3; /*å®šä¹‰è™šçº¿é•¿åº¦å’Œè™šçº¿é—´è·*/&#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;svg width=&quot;600&quot; height=&quot;300&quot;&gt;&lt;text x=&quot;30&quot; y=&quot;150&quot;&gt;äººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ç”¨Python&lt;/text&gt;&lt;/svg&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h2 id="ä¹ã€ä½¿ç”¨-SVG-å®ç°æ–‡å­—æ²¿æ›²çº¿æ˜¾ç¤ºæ•ˆæœ"><a href="#ä¹ã€ä½¿ç”¨-SVG-å®ç°æ–‡å­—æ²¿æ›²çº¿æ˜¾ç¤ºæ•ˆæœ" class="headerlink" title="ä¹ã€ä½¿ç”¨ SVG å®ç°æ–‡å­—æ²¿æ›²çº¿æ˜¾ç¤ºæ•ˆæœ"></a>ä¹ã€ä½¿ç”¨ SVG å®ç°æ–‡å­—æ²¿æ›²çº¿æ˜¾ç¤ºæ•ˆæœ</h2><p><img src="https://img2020.cnblogs.com/blog/2423513/202108/2423513-20210813130155895-469616243.png"></p><pre><code>&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;&lt;meta charset=&quot;UTF-8&quot;&gt;&lt;title&gt;ä½¿ç”¨SVGå®ç°æ–‡å­—æ²¿æ›²çº¿æ˜¾ç¤ºæ•ˆæœ&lt;/title&gt;&lt;style type=&quot;text/css&quot;&gt;text&#123;font-family:SimHei;/*å®šä¹‰å­—ä½“*/font-size:33px;/*å®šä¹‰æ–‡å­—å¤§å°*/fill:url(#linear);/*å®šä¹‰æ–‡å­—é¢œè‰²çº¿æ€§æ¸å˜*/&#125;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;svg width=&quot;1000&quot; height=&quot;800&quot;&gt;&lt;defs&gt;&lt;path id=&quot;textPath&quot; d=&quot;M130,140 C130,240 330,240 330,140 S510,60 510,140&quot;/&gt;&lt;linearGradient id=&quot;linear&quot; x1=&quot;0%&quot; y1=&quot;0%&quot; x2=&quot;100%&quot; y2=&quot;0%&quot;&gt;&lt;stop offset=&quot;0%&quot; stop-color=&quot;#FF0000&quot;&gt;&lt;/stop&gt;&lt;stop offset=&quot;50%&quot; stop-color=&quot;#00FF00&quot;&gt;&lt;/stop&gt;&lt;stop offset=&quot;100%&quot; stop-color=&quot;#0000FF&quot;&gt;&lt;/stop&gt;&lt;/linearGradient&gt;&lt;/defs&gt;&lt;text dy=&quot;10&quot;&gt;&lt;textPath xlink:href=&quot;#textPath&quot;&gt;ä¸–ç•Œä¼šå‘é‚£äº›æœ‰ç›®æ ‡å’Œè¿œè§çš„äººè®©è·¯&lt;/textPath&gt;&lt;/text&gt;&lt;/svg&gt;&lt;/body&gt;&lt;/html&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
            <tag> è½¬è½½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†—ä½™å¯¼èˆªï¼ˆè·¯ç”±å†—ä½™ï¼‰è§£å†³æ–¹å¼</title>
      <link href="/2022/08/10/article23/"/>
      <url>/2022/08/10/article23/</url>
      
        <content type="html"><![CDATA[<p>é¡¹ç›®ä¸­</p><p>æŠ¥é”™ï¼š <code>NavigationDuplicated: Avoided redundant navigation to current location:</code></p><p><code>ï¼ˆNavigationDuplicated: é¿å…äº†å¯¹å½“å‰ä½ç½®çš„å†—ä½™å¯¼èˆªï¼‰</code></p><p>è§£å†³æ–¹æ³•ï¼š</p><p>è¿™ä¸ªæŠ¥é”™çš„å…³é”®æ˜¯<code>this.$router.push(...).catch(err =&gt; err)</code>è¦æœ‰åé¢çš„<code>catch</code>ã€‚å› ä¸ºè·³è½¬æ–¹æ³•è¿”å›äº†ä¸€ä¸ª<code>promise</code>å¯¹è±¡ï¼Œè¦æœ‰å¤„ç†æ‹’ç»çš„æ–¹æ³•ã€‚</p><p>é¦–å…ˆæ£€æŸ¥ï¼Œè·¯ç”±è·³è½¬çš„æ—¶å€™æ˜¯ä¸æ˜¯è°ƒç”¨çš„<code>push</code>æ–¹æ³•ï¼Œè¿˜æ˜¯ç”¨çš„<code>replace</code>ï¼Ÿ</p><p>æ‰“å¼€ router æ–‡ä»¶å¤¹ä¸‹çš„ index.jsï¼ˆè·¯ç”±æ–‡ä»¶ï¼‰æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p><p>// pust æ–¹æ³•</p><pre><code>const routerRePush = VueRouter.prototype.pushVueRouter.prototype.push = function (location) &#123;  return routerRePush.call(this, location).catch(error =&gt; error)&#125;</code></pre><p>// replace æ–¹æ³•</p><pre><code>const routerReplace = VueRouter.prototype.replaceVueRouter.prototype.replace = function (location) &#123;  return routerReplace.call(this, location).catch(error =&gt; error)&#125;</code></pre><p>é—®é¢˜è§£å†³ï¼Œç¥æˆ‘ç”Ÿæ—¥å¿«ä¹å¥½å§</p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯å¿…å¤‡å…«è‚¡æ–‡</title>
      <link href="/2022/07/18/article22/"/>
      <url>/2022/07/18/article22/</url>
      
        <content type="html"><![CDATA[<h2 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h2><h3 id="http-å’Œ-https-çš„åŸºæœ¬æ¦‚å¿µ"><a href="#http-å’Œ-https-çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="http å’Œ https çš„åŸºæœ¬æ¦‚å¿µ"></a>http å’Œ https çš„åŸºæœ¬æ¦‚å¿µ</h3><p>http: æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯è¯·æ±‚å’Œåº”ç­”çš„æ ‡å‡†ï¼ˆTCPï¼‰ï¼Œç”¨äºä» WWW æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„è¶…æ–‡æœ¬ä¼ è¾“åè®®ã€‚<br>https:æ˜¯ä»¥å®‰å…¨ä¸ºç›®æ ‡çš„ HTTP é€šé“ï¼Œå³ HTTP ä¸‹ åŠ å…¥ SSL å±‚è¿›è¡ŒåŠ å¯†ã€‚å…¶ä½œç”¨æ˜¯ï¼šå»ºç«‹ä¸€ä¸ªä¿¡æ¯å®‰å…¨é€šé“ï¼Œæ¥ç¡®ä¿æ•°æ®çš„ä¼ è¾“ï¼Œç¡®ä¿ç½‘ç«™çš„çœŸå®æ€§ã€‚</p><h3 id="http-å’Œ-https-çš„åŒºåˆ«åŠä¼˜ç¼ºç‚¹ï¼Ÿ"><a href="#http-å’Œ-https-çš„åŒºåˆ«åŠä¼˜ç¼ºç‚¹ï¼Ÿ" class="headerlink" title="http å’Œ https çš„åŒºåˆ«åŠä¼˜ç¼ºç‚¹ï¼Ÿ"></a>http å’Œ https çš„åŒºåˆ«åŠä¼˜ç¼ºç‚¹ï¼Ÿ</h3><ul><li>http æ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œä¿¡æ¯æ˜¯æ˜æ–‡ä¼ è¾“ï¼ŒHTTPS åè®®è¦æ¯” http åè®®<code>å®‰å…¨</code>ï¼Œhttps æ˜¯å…·æœ‰å®‰å…¨æ€§çš„ ssl åŠ å¯†ä¼ è¾“åè®®ï¼Œå¯é˜²æ­¢æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¸è¢«çªƒå–ã€æ”¹å˜ï¼Œç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§ã€‚</li><li>http åè®®çš„<code>é»˜è®¤ç«¯å£</code>ä¸º 80ï¼Œhttps çš„é»˜è®¤ç«¯å£ä¸º 443ã€‚</li><li>http çš„è¿æ¥å¾ˆç®€å•ï¼Œæ˜¯æ— çŠ¶æ€çš„ã€‚https æ¡æ‰‹é˜¶æ®µæ¯”è¾ƒ<code>è´¹æ—¶</code>ï¼Œä¼šä½¿é¡µé¢åŠ è½½æ—¶é—´å»¶é•¿ 50%ï¼Œå¢åŠ  10%~20%çš„è€—ç”µã€‚</li><li>https <code>ç¼“å­˜</code>ä¸å¦‚ http é«˜æ•ˆï¼Œä¼šå¢åŠ æ•°æ®å¼€é”€ã€‚</li><li>Https åè®®éœ€è¦ ca è¯ä¹¦ï¼Œè´¹ç”¨è¾ƒé«˜ï¼ŒåŠŸèƒ½è¶Šå¼ºå¤§çš„<code>è¯ä¹¦è´¹</code>ç”¨è¶Šé«˜ã€‚</li><li>SSL è¯ä¹¦éœ€è¦ç»‘å®š <code>IP</code>ï¼Œä¸èƒ½å†åŒä¸€ä¸ª IP ä¸Šç»‘å®šå¤šä¸ªåŸŸåï¼ŒIPV4 èµ„æºæ”¯æŒä¸äº†è¿™ç§æ¶ˆè€—ã€‚</li></ul><h3 id="https-åè®®çš„å·¥ä½œåŸç†"><a href="#https-åè®®çš„å·¥ä½œåŸç†" class="headerlink" title="https åè®®çš„å·¥ä½œåŸç†"></a>https åè®®çš„å·¥ä½œåŸç†</h3><p>å®¢æˆ·ç«¯åœ¨ä½¿ç”¨ HTTPS æ–¹å¼ä¸ Web æœåŠ¡å™¨é€šä¿¡æ—¶æœ‰ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ol><li>å®¢æˆ·ç«¯ä½¿ç”¨ https url è®¿é—®æœåŠ¡å™¨ï¼Œåˆ™è¦æ±‚ web æœåŠ¡å™¨<code>å»ºç«‹ ssl é“¾æ¥</code>ã€‚</li><li>web æœåŠ¡å™¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚ä¹‹åï¼Œä¼š<code>å°†ç½‘ç«™çš„è¯ä¹¦ï¼ˆè¯ä¹¦ä¸­åŒ…å«äº†å…¬é’¥ï¼‰ï¼Œä¼ è¾“ç»™å®¢æˆ·ç«¯</code>ã€‚</li><li>å®¢æˆ·ç«¯å’Œ web æœåŠ¡å™¨ç«¯å¼€å§‹<code>åå•† SSL é“¾æ¥çš„å®‰å…¨ç­‰çº§</code>ï¼Œä¹Ÿå°±æ˜¯åŠ å¯†ç­‰çº§ã€‚</li><li>å®¢æˆ·ç«¯æµè§ˆå™¨é€šè¿‡åŒæ–¹åå•†ä¸€è‡´çš„å®‰å…¨ç­‰çº§ï¼Œ<code>å»ºç«‹ä¼šè¯å¯†é’¥</code>ï¼Œç„¶åé€šè¿‡ç½‘ç«™çš„å…¬é’¥æ¥åŠ å¯†ä¼šè¯å¯†é’¥ï¼Œå¹¶ä¼ é€ç»™ç½‘ç«™ã€‚</li><li>web æœåŠ¡å™¨<code>é€šè¿‡è‡ªå·±çš„ç§é’¥è§£å¯†å‡ºä¼šè¯å¯†é’¥</code>ã€‚</li><li>web æœåŠ¡å™¨<code>é€šè¿‡ä¼šè¯å¯†é’¥åŠ å¯†ä¸å®¢æˆ·ç«¯ä¹‹é—´çš„é€šä¿¡</code>ã€‚</li></ol><h3 id="HTTP-è¯·æ±‚è·¨åŸŸé—®é¢˜"><a href="#HTTP-è¯·æ±‚è·¨åŸŸé—®é¢˜" class="headerlink" title="HTTP è¯·æ±‚è·¨åŸŸé—®é¢˜"></a>HTTP è¯·æ±‚è·¨åŸŸé—®é¢˜</h3><ul><li><p>è·¨åŸŸçš„åŸç†</p><p><strong>è·¨åŸŸ</strong>ï¼Œæ˜¯æŒ‡æµè§ˆå™¨ä¸èƒ½æ‰§è¡Œå…¶ä»–ç½‘ç«™çš„è„šæœ¬ã€‚å®ƒæ˜¯ç”±æµè§ˆå™¨çš„<code>åŒæºç­–ç•¥</code>é€ æˆçš„ã€‚<br><strong>åŒæºç­–ç•¥</strong>,æ˜¯æµè§ˆå™¨å¯¹ JavaScript å®æ–½çš„å®‰å…¨é™åˆ¶ï¼Œåªè¦<code>åè®®ã€åŸŸåã€ç«¯å£</code>æœ‰ä»»ä½•ä¸€ä¸ªä¸åŒï¼Œéƒ½è¢«å½“ä½œæ˜¯ä¸åŒçš„åŸŸã€‚<br><strong>è·¨åŸŸåŸç†</strong>ï¼Œå³æ˜¯é€šè¿‡å„ç§æ–¹å¼ï¼Œ<code>é¿å¼€æµè§ˆå™¨çš„å®‰å…¨é™åˆ¶</code>ã€‚</p></li><li><p>è§£å†³æ–¹æ¡ˆ</p><p>æœ€åˆåšé¡¹ç›®çš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯jsonpï¼Œä½†å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œä½¿ç”¨getè¯·æ±‚ä¸å®‰å…¨ï¼Œæºå¸¦æ•°æ®è¾ƒå°ï¼Œåæ¥ä¹Ÿç”¨è¿‡iframeï¼Œä½†åªæœ‰ä¸»åŸŸç›¸åŒæ‰è¡Œï¼Œä¹Ÿæ˜¯å­˜åœ¨äº›é—®é¢˜ï¼Œåæ¥é€šè¿‡äº†è§£å’Œå­¦ä¹ å‘ç°ä½¿ç”¨ä»£ç†å’Œproxyä»£ç†é…åˆèµ·æ¥ä½¿ç”¨æ¯”è¾ƒæ–¹ä¾¿ï¼Œå°±å¼•å¯¼åå°æŒ‰è¿™ç§æ–¹å¼åšä¸‹æœåŠ¡å™¨é…ç½®ï¼Œåœ¨å¼€å‘ä¸­ä½¿ç”¨proxyï¼Œåœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨nginxä»£ç†ï¼Œè¿™æ ·å¼€å‘è¿‡ç¨‹ä¸­å½¼æ­¤éƒ½æ–¹ä¾¿ï¼Œæ•ˆç‡ä¹Ÿé«˜ï¼›ç°åœ¨h5æ–°ç‰¹æ€§è¿˜æœ‰ windows.postMessage()</p><ul><li><p><strong>JSONP</strong>ï¼š<br>ajax è¯·æ±‚å—åŒæºç­–ç•¥å½±å“ï¼Œä¸å…è®¸è¿›è¡Œè·¨åŸŸè¯·æ±‚ï¼Œè€Œ script æ ‡ç­¾ src å±æ€§ä¸­çš„é“¾ æ¥å´å¯ä»¥è®¿é—®è·¨åŸŸçš„ js è„šæœ¬ï¼Œåˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼ŒæœåŠ¡ç«¯ä¸å†è¿”å› JSON æ ¼å¼çš„æ•°æ®ï¼Œè€Œæ˜¯ è¿”å›ä¸€æ®µè°ƒç”¨æŸä¸ªå‡½æ•°çš„ js ä»£ç ï¼Œåœ¨ src ä¸­è¿›è¡Œäº†è°ƒç”¨ï¼Œè¿™æ ·å®ç°äº†è·¨åŸŸã€‚</p><p>æ­¥éª¤ï¼š</p></li></ul><ol><li>å»åˆ›å»ºä¸€ä¸ªscriptæ ‡ç­¾</li><li>scriptçš„srcå±æ€§è®¾ç½®æ¥å£åœ°å€</li><li>æ¥å£å‚æ•°ï¼Œå¿…é¡»è¦å¸¦ä¸€ä¸ªè‡ªå®šä¹‰å‡½æ•°åï¼Œè¦ä¸ç„¶åå°æ— æ³•è¿”å›æ•°æ®</li><li>é€šè¿‡å®šä¹‰å‡½æ•°åå»æ¥å—è¿”å›çš„æ•°æ®</li></ol></li></ul><pre><code> //åŠ¨æ€åˆ›å»º script var script = document.createElement(&#39;script&#39;); // è®¾ç½®å›è°ƒå‡½æ•° function getData(data) &#123;     console.log(data); &#125; //è®¾ç½® script çš„ src å±æ€§ï¼Œå¹¶è®¾ç½®è¯·æ±‚åœ°å€ script.src = &#39;http://localhost:3000/?callback=getData&#39;; // è®© script ç”Ÿæ•ˆ document.body.appendChild(script);</code></pre><ul><li><strong>JSONP çš„ç¼ºç‚¹</strong>:<br>JSON åªæ”¯æŒ getï¼Œå› ä¸º script æ ‡ç­¾åªèƒ½ä½¿ç”¨ get è¯·æ±‚ï¼› JSONP éœ€è¦åç«¯é…åˆè¿”å›æŒ‡å®šæ ¼å¼çš„æ•°æ®ã€‚</li><li><strong>document.domain</strong> åŸºç¡€åŸŸåç›¸åŒ å­åŸŸåä¸åŒ</li><li><strong>window.name</strong> åˆ©ç”¨åœ¨ä¸€ä¸ªæµè§ˆå™¨çª—å£å†…ï¼Œè½½å…¥æ‰€æœ‰çš„åŸŸåéƒ½æ˜¯å…±äº«ä¸€ä¸ªwindow.name</li><li><strong>CORS</strong> CORS(Cross-origin resource sharing)è·¨åŸŸèµ„æºå…±äº« æœåŠ¡å™¨è®¾ç½®å¯¹CORSçš„æ”¯æŒåŸç†ï¼šæœåŠ¡å™¨è®¾ç½®Access-Control-Allow-Origin HTTPå“åº”å¤´ä¹‹åï¼Œæµè§ˆå™¨å°†ä¼šå…è®¸è·¨åŸŸè¯·æ±‚</li><li><strong>proxyä»£ç†</strong> ç›®å‰å¸¸ç”¨æ–¹å¼,é€šè¿‡æœåŠ¡å™¨è®¾ç½®ä»£ç†</li><li><strong>window.postMessage()</strong> åˆ©ç”¨h5æ–°ç‰¹æ€§window.postMessage()</li></ul><h3 id="Cookieã€sessionStorageã€localStorage-çš„åŒºåˆ«"><a href="#Cookieã€sessionStorageã€localStorage-çš„åŒºåˆ«" class="headerlink" title="Cookieã€sessionStorageã€localStorage çš„åŒºåˆ«"></a>Cookieã€sessionStorageã€localStorage çš„åŒºåˆ«</h3><p><strong>ç›¸åŒç‚¹</strong>ï¼š</p><ul><li>å­˜å‚¨åœ¨å®¢æˆ·ç«¯</li></ul><p><strong>ä¸åŒç‚¹</strong>ï¼š</p><ul><li>cookieæ•°æ®å¤§å°ä¸èƒ½è¶…è¿‡4kï¼›sessionStorageå’ŒlocalStorageçš„å­˜å‚¨æ¯”cookieå¤§å¾—å¤šï¼Œå¯ä»¥è¾¾åˆ°5M+</li><li>cookieè®¾ç½®çš„è¿‡æœŸæ—¶é—´ä¹‹å‰ä¸€ç›´æœ‰æ•ˆï¼›localStorageæ°¸ä¹…å­˜å‚¨ï¼Œæµè§ˆå™¨å…³é—­åæ•°æ®ä¸ä¸¢å¤±é™¤éä¸»åŠ¨åˆ é™¤æ•°æ®ï¼›sessionStorageæ•°æ®åœ¨å½“å‰æµè§ˆå™¨çª—å£å…³é—­åè‡ªåŠ¨åˆ é™¤</li><li>cookieçš„æ•°æ®ä¼šè‡ªåŠ¨çš„ä¼ é€’åˆ°æœåŠ¡å™¨ï¼›sessionStorageå’ŒlocalStorageæ•°æ®ä¿å­˜åœ¨æœ¬åœ°</li></ul><h2 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h2><h3 id="TCPä¸‰æ¬¡æ¡æ‰‹"><a href="#TCPä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="TCPä¸‰æ¬¡æ¡æ‰‹"></a>TCPä¸‰æ¬¡æ¡æ‰‹</h3><ol><li>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼š<code>å»ºç«‹è¿æ¥æ—¶ï¼Œå®¢æˆ·ç«¯å‘é€synåŒ…ï¼ˆsyn=jï¼‰åˆ°æœåŠ¡å™¨ï¼Œå¹¶è¿›å…¥SYN_SENTçŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨ç¡®è®¤</code>ï¼›SYNï¼šåŒæ­¥åºåˆ—ç¼–å·ï¼ˆSynchronize Sequence Numbersï¼‰ã€‚</li><li>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼š<code>æœåŠ¡å™¨æ”¶åˆ°synåŒ…å¹¶ç¡®è®¤å®¢æˆ·çš„SYN</code>ï¼ˆack=j+1ï¼‰ï¼Œ<code>åŒæ—¶ä¹Ÿå‘é€ä¸€ä¸ªè‡ªå·±çš„SYNåŒ…</code>ï¼ˆsyn=kï¼‰ï¼Œå³SYN+ACKåŒ…ï¼Œæ­¤æ—¶æœåŠ¡å™¨è¿›å…¥SYN_RECVçŠ¶æ€ï¼›</li><li>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼š<code>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„SYN+ACKåŒ…ï¼Œå‘æœåŠ¡å™¨å‘é€ç¡®è®¤åŒ…ACK(ack=k+1ï¼‰</code>ï¼Œæ­¤åŒ…å‘é€å®Œæ¯•ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿›å…¥ESTABLISHEDï¼ˆTCPè¿æ¥æˆåŠŸï¼‰çŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹ã€‚</li></ol><h3 id="TCP-å››æ¬¡æŒ¥æ‰‹"><a href="#TCP-å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="TCP å››æ¬¡æŒ¥æ‰‹"></a>TCP å››æ¬¡æŒ¥æ‰‹</h3><ol><li><code>å®¢æˆ·ç«¯è¿›ç¨‹å‘å‡ºè¿æ¥é‡Šæ”¾æŠ¥æ–‡</code>ï¼Œå¹¶ä¸”åœæ­¢å‘é€æ•°æ®ã€‚é‡Šæ”¾æ•°æ®æŠ¥æ–‡é¦–éƒ¨ï¼ŒFIN=1ï¼Œå…¶åºåˆ—å·ä¸ºseq=uï¼ˆç­‰äºå‰é¢å·²ç»ä¼ é€è¿‡æ¥çš„æ•°æ®çš„æœ€åä¸€ä¸ªå­—èŠ‚çš„åºå·åŠ 1ï¼‰ï¼Œæ­¤æ—¶ï¼Œ<code>å®¢æˆ·ç«¯è¿›å…¥FIN-WAIT-1ï¼ˆç»ˆæ­¢ç­‰å¾…1ï¼‰çŠ¶æ€</code>ã€‚ TCPè§„å®šï¼ŒFINæŠ¥æ–‡æ®µå³ä½¿ä¸æºå¸¦æ•°æ®ï¼Œä¹Ÿè¦æ¶ˆè€—ä¸€ä¸ªåºå·ã€‚</li><li><code>æœåŠ¡å™¨æ”¶åˆ°è¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼Œå‘å‡ºç¡®è®¤æŠ¥æ–‡</code>ï¼ŒACK=1ï¼Œack=u+1ï¼Œå¹¶ä¸”å¸¦ä¸Šè‡ªå·±çš„åºåˆ—å·seq=vï¼Œæ­¤æ—¶ï¼Œ<code>æœåŠ¡ç«¯å°±è¿›å…¥äº†CLOSE-WAITï¼ˆå…³é—­ç­‰å¾…ï¼‰çŠ¶æ€</code>ã€‚TCPæœåŠ¡å™¨é€šçŸ¥é«˜å±‚çš„åº”ç”¨è¿›ç¨‹ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨çš„æ–¹å‘å°±é‡Šæ”¾äº†ï¼Œè¿™æ—¶å€™å¤„äºåŠå…³é—­çŠ¶æ€ï¼Œå³å®¢æˆ·ç«¯å·²ç»æ²¡æœ‰æ•°æ®è¦å‘é€äº†ï¼Œä½†æ˜¯æœåŠ¡å™¨è‹¥å‘é€æ•°æ®ï¼Œå®¢æˆ·ç«¯ä¾ç„¶è¦æ¥å—ã€‚è¿™ä¸ªçŠ¶æ€è¿˜è¦æŒç»­ä¸€æ®µæ—¶é—´ï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªCLOSE-WAITçŠ¶æ€æŒç»­çš„æ—¶é—´ã€‚</li><li>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„ç¡®è®¤è¯·æ±‚åï¼Œæ­¤æ—¶ï¼Œ<code>å®¢æˆ·ç«¯å°±è¿›å…¥FIN-WAIT-2ï¼ˆç»ˆæ­¢ç­‰å¾…2ï¼‰çŠ¶æ€</code>ï¼Œç­‰å¾…æœåŠ¡å™¨å‘é€è¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼ˆåœ¨è¿™ä¹‹å‰è¿˜éœ€è¦æ¥å—æœåŠ¡å™¨å‘é€çš„æœ€ åçš„æ•°æ®ï¼‰ã€‚</li><li><code>æœåŠ¡å™¨å°†æœ€åçš„æ•°æ®å‘é€å®Œæ¯•åï¼Œå°±å‘å®¢æˆ·ç«¯å‘é€è¿æ¥é‡Šæ”¾æŠ¥æ–‡</code>ï¼ŒFIN=1ï¼Œack=u+1ï¼Œç”±äºåœ¨åŠå…³é—­çŠ¶æ€ï¼ŒæœåŠ¡å™¨å¾ˆå¯èƒ½åˆå‘é€äº†ä¸€äº›æ•°æ®ï¼Œå‡å®šæ­¤æ—¶çš„åºåˆ—å·ä¸ºseq=wï¼Œæ­¤æ—¶ï¼Œ<code>æœåŠ¡å™¨å°±è¿›å…¥äº†LAST-ACKï¼ˆæœ€åç¡®è®¤ï¼‰çŠ¶æ€</code>ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„ç¡®è®¤ã€‚</li><li><code>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„è¿æ¥é‡Šæ”¾æŠ¥æ–‡åï¼Œå¿…é¡»å‘å‡ºç¡®è®¤</code>ï¼ŒACK=1ï¼Œack=w+1ï¼Œè€Œè‡ªå·±çš„åºåˆ—å·æ˜¯seq=u+1ï¼Œæ­¤æ—¶ï¼Œ<code>å®¢æˆ·ç«¯å°±è¿›å…¥äº†TIME-WAITï¼ˆæ—¶é—´ç­‰å¾…ï¼‰çŠ¶æ€</code>ã€‚æ³¨æ„æ­¤æ—¶TCPè¿æ¥è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œå¿…é¡»ç»è¿‡2âˆ—âˆ—MSLï¼ˆæœ€é•¿æŠ¥æ–‡æ®µå¯¿å‘½ï¼‰çš„æ—¶é—´åï¼Œ<code>å½“å®¢æˆ·ç«¯æ’¤é”€ç›¸åº”çš„TCBåï¼Œæ‰è¿›å…¥CLOSEDçŠ¶æ€</code>ã€‚</li><li>æœåŠ¡å™¨åªè¦æ”¶åˆ°äº†å®¢æˆ·ç«¯å‘å‡ºçš„ç¡®è®¤ï¼Œ<code>ç«‹å³è¿›å…¥CLOSEDçŠ¶æ€</code>ã€‚åŒæ ·ï¼Œæ’¤é”€TCBåï¼Œå°±ç»“æŸäº†è¿™æ¬¡çš„TCPè¿æ¥ã€‚å¯ä»¥çœ‹åˆ°ï¼Œ<code>æœåŠ¡å™¨ç»“æŸTCPè¿æ¥çš„æ—¶é—´è¦æ¯”å®¢æˆ·ç«¯æ—©ä¸€äº›</code>ã€‚</li></ol><h3 id="TCP-IP-å¦‚ä½•ä¿è¯æ•°æ®åŒ…ä¼ è¾“çš„æœ‰åºå¯é ï¼Ÿ"><a href="#TCP-IP-å¦‚ä½•ä¿è¯æ•°æ®åŒ…ä¼ è¾“çš„æœ‰åºå¯é ï¼Ÿ" class="headerlink" title="TCP/IP / å¦‚ä½•ä¿è¯æ•°æ®åŒ…ä¼ è¾“çš„æœ‰åºå¯é ï¼Ÿ"></a>TCP/IP / å¦‚ä½•ä¿è¯æ•°æ®åŒ…ä¼ è¾“çš„æœ‰åºå¯é ï¼Ÿ</h3><p>å¯¹å­—èŠ‚æµåˆ†æ®µå¹¶è¿›è¡Œç¼–å·ç„¶å<code>é€šè¿‡ ACK å›å¤</code>å’Œ<code>è¶…æ—¶é‡å‘</code>è¿™ä¸¤ä¸ªæœºåˆ¶æ¥ä¿è¯ã€‚</p><ol><li>ï¼ˆ1ï¼‰ä¸ºäº†ä¿è¯æ•°æ®åŒ…çš„å¯é ä¼ é€’ï¼Œå‘é€æ–¹å¿…é¡»æŠŠå·²å‘é€çš„æ•°æ®åŒ…ä¿ç•™åœ¨ç¼“å†²åŒºï¼›</li><li>å¹¶ä¸ºæ¯ä¸ªå·²å‘é€çš„æ•°æ®åŒ…å¯åŠ¨ä¸€ä¸ªè¶…æ—¶å®šæ—¶å™¨ï¼›</li><li>å¦‚åœ¨å®šæ—¶å™¨è¶…æ—¶ä¹‹å‰æ”¶åˆ°äº†å¯¹æ–¹å‘æ¥çš„åº”ç­”ä¿¡æ¯ï¼ˆå¯èƒ½æ˜¯å¯¹æœ¬åŒ…çš„åº”ç­”ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯¹æœ¬åŒ…åç»­åŒ…çš„åº”ç­”ï¼‰ï¼Œåˆ™é‡Šæ”¾è¯¥æ•°æ®åŒ…å ç”¨çš„ç¼“å†²åŒº;</li><li>å¦åˆ™ï¼Œé‡ä¼ è¯¥æ•°æ®åŒ…ï¼Œç›´åˆ°æ”¶åˆ°åº”ç­”æˆ–é‡ä¼ æ¬¡æ•°è¶…è¿‡è§„å®šçš„æœ€å¤§æ¬¡æ•°ä¸ºæ­¢ã€‚</li><li>æ¥æ”¶æ–¹æ”¶åˆ°æ•°æ®åŒ…åï¼Œå…ˆè¿›è¡ŒCRCæ ¡éªŒï¼Œå¦‚æœæ­£ç¡®åˆ™æŠŠæ•°æ®äº¤ç»™ä¸Šå±‚åè®®ï¼Œç„¶åç»™å‘é€æ–¹å‘é€ä¸€ä¸ªç´¯è®¡åº”ç­”åŒ…ï¼Œè¡¨æ˜è¯¥æ•°æ®å·²æ”¶åˆ°ï¼Œå¦‚æœæ¥æ”¶æ–¹æ­£å¥½ä¹Ÿæœ‰æ•°æ®è¦å‘ç»™å‘é€æ–¹ï¼Œåº”ç­”åŒ…ä¹Ÿå¯æ–¹åœ¨æ•°æ®åŒ…ä¸­æå¸¦è¿‡å»ã€‚</li></ol><h3 id="TCPå’ŒUDPçš„åŒºåˆ«"><a href="#TCPå’ŒUDPçš„åŒºåˆ«" class="headerlink" title="TCPå’ŒUDPçš„åŒºåˆ«"></a>TCPå’ŒUDPçš„åŒºåˆ«</h3><ol><li>TCPæ˜¯é¢å‘<code>é“¾æ¥</code>çš„ï¼Œè€ŒUDPæ˜¯é¢å‘æ— è¿æ¥çš„ã€‚</li><li>TCPä»…æ”¯æŒ<code>å•æ’­ä¼ è¾“</code>ï¼ŒUDP æä¾›äº†å•æ’­ï¼Œå¤šæ’­ï¼Œå¹¿æ’­çš„åŠŸèƒ½ã€‚</li><li>TCPçš„ä¸‰æ¬¡æ¡æ‰‹ä¿è¯äº†è¿æ¥çš„<code>å¯é æ€§</code>; UDPæ˜¯æ— è¿æ¥çš„ã€ä¸å¯é çš„ä¸€ç§æ•°æ®ä¼ è¾“åè®®ï¼Œé¦–å…ˆä¸å¯é æ€§ä½“ç°åœ¨æ— è¿æ¥ä¸Šï¼Œé€šä¿¡éƒ½ä¸éœ€è¦å»ºç«‹è¿æ¥ï¼Œå¯¹æ¥æ”¶åˆ°çš„æ•°æ®ä¹Ÿä¸å‘é€ç¡®è®¤ä¿¡å·ï¼Œå‘é€ç«¯ä¸çŸ¥é“æ•°æ®æ˜¯å¦ä¼šæ­£ç¡®æ¥æ”¶ã€‚</li><li>UDPçš„<code>å¤´éƒ¨å¼€é”€</code>æ¯”TCPçš„æ›´å°ï¼Œæ•°æ®<code>ä¼ è¾“é€Ÿç‡æ›´é«˜</code>ï¼Œ<code>å®æ—¶æ€§æ›´å¥½</code>ã€‚</li></ol><h3 id="ç²˜åŒ…é—®é¢˜åˆ†æä¸å¯¹ç­–"><a href="#ç²˜åŒ…é—®é¢˜åˆ†æä¸å¯¹ç­–" class="headerlink" title="ç²˜åŒ…é—®é¢˜åˆ†æä¸å¯¹ç­–"></a>ç²˜åŒ…é—®é¢˜åˆ†æä¸å¯¹ç­–</h3><p>CPç²˜åŒ…æ˜¯æŒ‡å‘é€æ–¹å‘é€çš„è‹¥å¹²åŒ…æ•°æ®åˆ°æ¥æ”¶æ–¹æ¥æ”¶æ—¶ç²˜æˆä¸€åŒ…ï¼Œä»æ¥æ”¶ç¼“å†²åŒºçœ‹ï¼Œåä¸€åŒ…æ•°æ®çš„å¤´ç´§æ¥ç€å‰ä¸€åŒ…æ•°æ®çš„å°¾ã€‚</p><p><strong>ç²˜åŒ…å‡ºç°åŸå› </strong></p><p>ç®€å•å¾—è¯´ï¼Œåœ¨æµä¼ è¾“ä¸­å‡ºç°ï¼ŒUDPä¸ä¼šå‡ºç°ç²˜åŒ…ï¼Œå› ä¸ºå®ƒæœ‰<strong>æ¶ˆæ¯è¾¹ç•Œ</strong></p><p>ç²˜åŒ…æƒ…å†µæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯<code>ç²˜åœ¨ä¸€èµ·çš„åŒ…éƒ½æ˜¯å®Œæ•´çš„æ•°æ®åŒ…</code>ï¼Œå¦ä¸€ç§æƒ…å†µæ˜¯<code>ç²˜åœ¨ä¸€èµ·çš„åŒ…æœ‰ä¸å®Œæ•´çš„åŒ…</code>ã€‚</p><p>ä¸ºäº†<strong>é¿å…ç²˜åŒ…</strong>ç°è±¡ï¼Œå¯é‡‡å–ä»¥ä¸‹å‡ ç§æªæ–½ï¼š</p><ol><li>å¯¹äºå‘é€æ–¹å¼•èµ·çš„ç²˜åŒ…ç°è±¡ï¼Œç”¨æˆ·å¯é€šè¿‡ç¼–ç¨‹è®¾ç½®æ¥é¿å…ï¼Œ<code>TCPæä¾›äº†å¼ºåˆ¶æ•°æ®ç«‹å³ä¼ é€çš„æ“ä½œæŒ‡ä»¤push</code>ï¼ŒTCPè½¯ä»¶æ”¶åˆ°è¯¥æ“ä½œæŒ‡ä»¤åï¼Œå°±ç«‹å³å°†æœ¬æ®µæ•°æ®å‘é€å‡ºå»ï¼Œè€Œä¸å¿…ç­‰å¾…å‘é€ç¼“å†²åŒºæ»¡ï¼›</li><li>å¯¹äºæ¥æ”¶æ–¹å¼•èµ·çš„ç²˜åŒ…ï¼Œåˆ™å¯é€šè¿‡ä¼˜åŒ–ç¨‹åºè®¾è®¡ã€ç²¾ç®€æ¥æ”¶è¿›ç¨‹å·¥ä½œé‡ã€<code>æé«˜æ¥æ”¶è¿›ç¨‹ä¼˜å…ˆçº§ç­‰æªæ–½</code>ï¼Œä½¿å…¶åŠæ—¶æ¥æ”¶æ•°æ®ï¼Œä»è€Œå°½é‡é¿å…å‡ºç°ç²˜åŒ…ç°è±¡ï¼›</li><li>ç”±æ¥æ”¶æ–¹æ§åˆ¶ï¼Œå°†ä¸€åŒ…æ•°æ®æŒ‰ç»“æ„å­—æ®µï¼Œäººä¸ºæ§åˆ¶åˆ†å¤šæ¬¡æ¥æ”¶ï¼Œç„¶ååˆå¹¶ï¼Œé€šè¿‡è¿™ç§æ‰‹æ®µæ¥é¿å…ç²˜åŒ…ã€‚<code>åˆ†åŒ…å¤šå‘</code>ã€‚</li></ol><p>ä»¥ä¸Šæåˆ°çš„ä¸‰ç§æªæ–½ï¼Œéƒ½æœ‰å…¶ä¸è¶³ä¹‹å¤„ã€‚</p><ol><li>ç¬¬ä¸€ç§ç¼–ç¨‹è®¾ç½®æ–¹æ³•è™½ç„¶å¯ä»¥é¿å…å‘é€æ–¹å¼•èµ·çš„ç²˜åŒ…ï¼Œä½†å®ƒå…³é—­äº†ä¼˜åŒ–ç®—æ³•ï¼Œé™ä½äº†ç½‘ç»œå‘é€æ•ˆç‡ï¼Œå½±å“åº”ç”¨ç¨‹åºçš„æ€§èƒ½ï¼Œä¸€èˆ¬ä¸å»ºè®®ä½¿ç”¨ã€‚</li><li>ç¬¬äºŒç§æ–¹æ³•åªèƒ½å‡å°‘å‡ºç°ç²˜åŒ…çš„å¯èƒ½æ€§ï¼Œä½†å¹¶ä¸èƒ½å®Œå…¨é¿å…ç²˜åŒ…ï¼Œå½“å‘é€é¢‘ç‡è¾ƒé«˜æ—¶ï¼Œæˆ–ç”±äºç½‘ç»œçªå‘å¯èƒ½ä½¿æŸä¸ªæ—¶é—´æ®µæ•°æ®åŒ…åˆ°è¾¾æ¥æ”¶æ–¹è¾ƒå¿«ï¼Œæ¥æ”¶æ–¹è¿˜æ˜¯æœ‰å¯èƒ½æ¥ä¸åŠæ¥æ”¶ï¼Œä»è€Œå¯¼è‡´ç²˜åŒ…ã€‚</li><li>ç¬¬ä¸‰ç§æ–¹æ³•è™½ç„¶é¿å…äº†ç²˜åŒ…ï¼Œä½†åº”ç”¨ç¨‹åºçš„æ•ˆç‡è¾ƒä½ï¼Œå¯¹å®æ—¶åº”ç”¨çš„åœºåˆä¸é€‚åˆã€‚</li></ol><p>ä¸€ç§æ¯”è¾ƒå‘¨å…¨çš„å¯¹ç­–æ˜¯ï¼šæ¥æ”¶æ–¹åˆ›å»ºä¸€é¢„å¤„ç†çº¿ç¨‹ï¼Œå¯¹æ¥æ”¶åˆ°çš„æ•°æ®åŒ…è¿›è¡Œé¢„å¤„ç†ï¼Œå°†ç²˜è¿çš„åŒ…åˆ†å¼€ã€‚å®éªŒè¯æ˜è¿™ç§æ–¹æ³•æ˜¯é«˜æ•ˆå¯è¡Œçš„ã€‚</p><h2 id="æµè§ˆå™¨"><a href="#æµè§ˆå™¨" class="headerlink" title="æµè§ˆå™¨"></a>æµè§ˆå™¨</h2><h3 id="ä»è¾“å…¥URLåˆ°é¡µé¢åŠ è½½çš„å…¨è¿‡ç¨‹"><a href="#ä»è¾“å…¥URLåˆ°é¡µé¢åŠ è½½çš„å…¨è¿‡ç¨‹" class="headerlink" title="ä»è¾“å…¥URLåˆ°é¡µé¢åŠ è½½çš„å…¨è¿‡ç¨‹"></a>ä»è¾“å…¥URLåˆ°é¡µé¢åŠ è½½çš„å…¨è¿‡ç¨‹</h3><ul><li>é¦–å…ˆåœ¨æµè§ˆå™¨ä¸­è¾“å…¥URL</li><li>æŸ¥æ‰¾ç¼“å­˜ï¼šæµè§ˆå™¨å…ˆæŸ¥çœ‹æµè§ˆå™¨ç¼“å­˜-ç³»ç»Ÿç¼“å­˜-è·¯ç”±ç¼“å­˜ä¸­æ˜¯å¦æœ‰è¯¥åœ°å€é¡µé¢ï¼Œå¦‚æœæœ‰åˆ™æ˜¾ç¤ºé¡µé¢å†…å®¹ã€‚å¦‚æœæ²¡æœ‰åˆ™è¿›è¡Œä¸‹ä¸€æ­¥ã€‚<ul><li>æµè§ˆå™¨ç¼“å­˜ï¼šæµè§ˆå™¨ä¼šè®°å½•DNSä¸€æ®µæ—¶é—´ï¼Œå› æ­¤ï¼Œåªæ˜¯ç¬¬ä¸€ä¸ªåœ°æ–¹è§£æDNSè¯·æ±‚ï¼›</li><li>æ“ä½œç³»ç»Ÿç¼“å­˜:å¦‚æœåœ¨æµè§ˆå™¨ç¼“å­˜ä¸­ä¸åŒ…å«è¿™ä¸ªè®°å½•ï¼Œåˆ™ä¼šä½¿ç³»ç»Ÿè°ƒç”¨æ“ä½œç³»ç»Ÿï¼Œ è·å–æ“ä½œç³»ç»Ÿçš„è®°å½•(ä¿å­˜æœ€è¿‘çš„DNSæŸ¥è¯¢ç¼“å­˜)ï¼›</li><li>è·¯ç”±å™¨ç¼“å­˜ï¼šå¦‚æœä¸Šè¿°ä¸¤ä¸ªæ­¥éª¤å‡ä¸èƒ½æˆåŠŸè·å–DNSè®°å½•ï¼Œç»§ç»­æœç´¢è·¯ç”±å™¨ç¼“å­˜ï¼›</li><li>ISPç¼“å­˜ï¼šè‹¥ä¸Šè¿°å‡å¤±è´¥ï¼Œç»§ç»­å‘ISPæœç´¢ã€‚</li></ul></li><li>DNSåŸŸåè§£æï¼šæµè§ˆå™¨å‘DNSæœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œè§£æè¯¥URLä¸­çš„åŸŸåå¯¹åº”çš„IPåœ°å€ã€‚<code>DNSæœåŠ¡å™¨æ˜¯åŸºäºUDPçš„ï¼Œå› æ­¤ä¼šç”¨åˆ°UDPåè®®ã€‚</code>ã€‚</li><li>å»ºç«‹TCPè¿æ¥ï¼šè§£æå‡ºIPåœ°å€åï¼Œæ ¹æ®IPåœ°å€å’Œé»˜è®¤80ç«¯å£ï¼Œå’ŒæœåŠ¡å™¨å»ºç«‹TCPè¿æ¥</li><li>å‘èµ·HTTPè¯·æ±‚ï¼šæµè§ˆå™¨å‘èµ·è¯»å–æ–‡ä»¶çš„HTTPè¯·æ±‚ï¼Œï¼Œè¯¥è¯·æ±‚æŠ¥æ–‡ä½œä¸ºTCPä¸‰æ¬¡æ¡æ‰‹çš„ç¬¬ä¸‰æ¬¡æ•°æ®å‘é€ç»™æœåŠ¡å™¨</li><li>æœåŠ¡å™¨å“åº”è¯·æ±‚å¹¶è¿”å›ç»“æœï¼šæœåŠ¡å™¨å¯¹æµè§ˆå™¨è¯·æ±‚åšå‡ºå“åº”ï¼Œå¹¶æŠŠå¯¹åº”çš„htmlæ–‡ä»¶å‘é€ç»™æµè§ˆå™¨</li><li>å…³é—­TCPè¿æ¥ï¼šé€šè¿‡å››æ¬¡æŒ¥æ‰‹é‡Šæ”¾TCPè¿æ¥</li><li>æµè§ˆå™¨æ¸²æŸ“ï¼šå®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰è§£æHTMLå†…å®¹å¹¶æ¸²æŸ“å‡ºæ¥ï¼Œæµè§ˆå™¨æ¥æ”¶åˆ°æ•°æ®åŒ…åçš„è§£ææµç¨‹ä¸ºï¼š<ul><li>æ„å»ºDOMæ ‘ï¼šè¯æ³•åˆ†æç„¶åè§£ææˆDOMæ ‘ï¼ˆdom treeï¼‰ï¼Œæ˜¯ç”±domå…ƒç´ åŠå±æ€§èŠ‚ç‚¹ç»„æˆï¼Œæ ‘çš„æ ¹æ˜¯documentå¯¹è±¡</li><li>æ„å»ºCSSè§„åˆ™æ ‘ï¼šç”ŸæˆCSSè§„åˆ™æ ‘ï¼ˆCSS Rule Treeï¼‰</li><li>æ„å»ºrenderæ ‘ï¼šWebæµè§ˆå™¨å°†DOMå’ŒCSSOMç»“åˆï¼Œå¹¶æ„å»ºå‡ºæ¸²æŸ“æ ‘ï¼ˆrender treeï¼‰</li><li>å¸ƒå±€ï¼ˆLayoutï¼‰ï¼šè®¡ç®—å‡ºæ¯ä¸ªèŠ‚ç‚¹åœ¨å±å¹•ä¸­çš„ä½ç½®</li><li>ç»˜åˆ¶ï¼ˆPaintingï¼‰ï¼šå³éå†renderæ ‘ï¼Œå¹¶ä½¿ç”¨UIåç«¯å±‚ç»˜åˆ¶æ¯ä¸ªèŠ‚ç‚¹ã€‚</li></ul></li></ul><p>JSå¼•æ“è§£æè¿‡ç¨‹ï¼šè°ƒç”¨JSå¼•æ“æ‰§è¡ŒJSä»£ç ï¼ˆJSçš„è§£é‡Šé˜¶æ®µï¼Œé¢„å¤„ç†é˜¶æ®µï¼Œæ‰§è¡Œé˜¶æ®µç”Ÿæˆæ‰§è¡Œä¸Šä¸‹æ–‡ï¼ŒVOï¼Œä½œç”¨åŸŸé“¾ã€å›æ”¶æœºåˆ¶ç­‰ç­‰ï¼‰</p><ul><li>åˆ›å»ºwindowå¯¹è±¡ï¼šwindowå¯¹è±¡ä¹Ÿå«å…¨å±€æ‰§è¡Œç¯å¢ƒï¼Œå½“é¡µé¢äº§ç”Ÿæ—¶å°±è¢«åˆ›å»ºï¼Œæ‰€æœ‰çš„å…¨å±€å˜é‡å’Œå‡½æ•°éƒ½å±äºwindowçš„å±æ€§å’Œæ–¹æ³•ï¼Œè€ŒDOM Treeä¹Ÿä¼šæ˜ å°„åœ¨windowçš„doucmentå¯¹è±¡ä¸Šã€‚å½“å…³é—­ç½‘é¡µæˆ–è€…å…³é—­æµè§ˆå™¨æ—¶ï¼Œå…¨å±€æ‰§è¡Œç¯å¢ƒä¼šè¢«é”€æ¯ã€‚</li><li>åŠ è½½æ–‡ä»¶ï¼šå®Œæˆjså¼•æ“åˆ†æå®ƒçš„è¯­æ³•ä¸è¯æ³•æ˜¯å¦åˆæ³•ï¼Œå¦‚æœåˆæ³•è¿›å…¥é¢„ç¼–è¯‘</li><li>é¢„ç¼–è¯‘ï¼šåœ¨é¢„ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼Œæµè§ˆå™¨ä¼šå¯»æ‰¾å…¨å±€å˜é‡å£°æ˜ï¼ŒæŠŠå®ƒä½œä¸ºwindowçš„å±æ€§åŠ å…¥åˆ°windowå¯¹è±¡ä¸­ï¼Œå¹¶ç»™å˜é‡èµ‹å€¼ä¸ºâ€™undefinedâ€™ï¼›å¯»æ‰¾å…¨å±€å‡½æ•°å£°æ˜ï¼ŒæŠŠå®ƒä½œä¸ºwindowçš„æ–¹æ³•åŠ å…¥åˆ°windowå¯¹è±¡ä¸­ï¼Œå¹¶å°†å‡½æ•°ä½“èµ‹å€¼ç»™ä»–ï¼ˆåŒ¿åå‡½æ•°æ˜¯ä¸å‚ä¸é¢„ç¼–è¯‘çš„ï¼Œå› ä¸ºå®ƒæ˜¯å˜é‡ï¼‰ã€‚è€Œå˜é‡æå‡ä½œä¸ºä¸åˆç†çš„åœ°æ–¹åœ¨ES6ä¸­å·²ç»è§£å†³äº†ï¼Œå‡½æ•°æå‡è¿˜å­˜åœ¨ã€‚</li><li>è§£é‡Šæ‰§è¡Œï¼šæ‰§è¡Œåˆ°å˜é‡å°±èµ‹å€¼ï¼Œå¦‚æœå˜é‡æ²¡æœ‰è¢«å®šä¹‰ï¼Œä¹Ÿå°±æ²¡æœ‰è¢«é¢„ç¼–è¯‘ç›´æ¥èµ‹å€¼ï¼Œåœ¨ES5éä¸¥æ ¼æ¨¡å¼ä¸‹è¿™ä¸ªå˜é‡ä¼šæˆä¸ºwindowçš„ä¸€ä¸ªå±æ€§ï¼Œä¹Ÿå°±æ˜¯æˆä¸ºå…¨å±€å˜é‡ã€‚stringã€intè¿™æ ·çš„å€¼å°±æ˜¯ç›´æ¥æŠŠå€¼æ”¾åœ¨å˜é‡çš„å­˜å‚¨ç©ºé—´é‡Œï¼Œobjectå¯¹è±¡å°±æ˜¯æŠŠæŒ‡é’ˆæŒ‡å‘å˜é‡çš„å­˜å‚¨ç©ºé—´ã€‚å‡½æ•°æ‰§è¡Œï¼Œå°±å°†å‡½æ•°çš„ç¯å¢ƒæ¨å…¥ä¸€ä¸ªç¯å¢ƒçš„æ ˆä¸­ï¼Œæ‰§è¡Œå®Œæˆåå†å¼¹å‡ºï¼Œæ§åˆ¶æƒäº¤è¿˜ç»™ä¹‹å‰çš„ç¯å¢ƒã€‚JSä½œç”¨åŸŸå…¶å®å°±æ˜¯è¿™æ ·çš„æ‰§è¡Œæµæœºåˆ¶å®ç°çš„ã€‚</li></ul><h3 id="æµè§ˆå™¨é‡ç»˜ä¸å›æµçš„åŒºåˆ«ï¼Ÿ"><a href="#æµè§ˆå™¨é‡ç»˜ä¸å›æµçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="æµè§ˆå™¨é‡ç»˜ä¸å›æµçš„åŒºåˆ«ï¼Ÿ"></a>æµè§ˆå™¨é‡ç»˜ä¸å›æµçš„åŒºåˆ«ï¼Ÿ</h3><ul><li><code>é‡æ’/å›æµï¼ˆReflowï¼‰</code>ï¼šå½“<code>DOM</code>çš„å˜åŒ–å½±å“äº†å…ƒç´ çš„å‡ ä½•ä¿¡æ¯ï¼Œæµè§ˆå™¨éœ€è¦é‡æ–°è®¡ç®—å…ƒç´ çš„å‡ ä½•å±æ€§ï¼Œå°†å…¶å®‰æ”¾åœ¨ç•Œé¢ä¸­çš„æ­£ç¡®ä½ç½®ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšé‡æ’ã€‚è¡¨ç°ä¸ºé‡æ–°ç”Ÿæˆå¸ƒå±€ï¼Œé‡æ–°æ’åˆ—å…ƒç´ ã€‚</li><li><code>é‡ç»˜(Repaint)</code>: å½“ä¸€ä¸ªå…ƒç´ çš„å¤–è§‚å‘ç”Ÿæ”¹å˜ï¼Œä½†æ²¡æœ‰æ”¹å˜å¸ƒå±€,é‡æ–°æŠŠå…ƒç´ å¤–è§‚ç»˜åˆ¶å‡ºæ¥çš„è¿‡ç¨‹ï¼Œå«åšé‡ç»˜ã€‚è¡¨ç°ä¸ºæŸäº›å…ƒç´ çš„å¤–è§‚è¢«æ”¹å˜</li></ul><p>å•å•æ”¹å˜å…ƒç´ çš„å¤–è§‚ï¼Œè‚¯å®šä¸ä¼šå¼•èµ·ç½‘é¡µé‡æ–°ç”Ÿæˆå¸ƒå±€ï¼Œä½†å½“æµè§ˆå™¨å®Œæˆé‡æ’ä¹‹åï¼Œå°†ä¼šé‡æ–°ç»˜åˆ¶å—åˆ°æ­¤æ¬¡é‡æ’å½±å“çš„éƒ¨åˆ†</p><p>é‡æ’å’Œé‡ç»˜ä»£ä»·æ˜¯é«˜æ˜‚çš„ï¼Œå®ƒä»¬ä¼šç ´åç”¨æˆ·ä½“éªŒï¼Œå¹¶ä¸”è®©UIå±•ç¤ºéå¸¸è¿Ÿç¼“ï¼Œè€Œç›¸æ¯”ä¹‹ä¸‹é‡æ’çš„æ€§èƒ½å½±å“æ›´å¤§ï¼Œåœ¨ä¸¤è€…æ— æ³•é¿å…çš„æƒ…å†µä¸‹ï¼Œä¸€èˆ¬æˆ‘ä»¬å®å¯é€‰æ‹©ä»£ä»·æ›´å°çš„é‡ç»˜ã€‚</p><p>ã€é‡ç»˜ã€ä¸ä¸€å®šä¼šå‡ºç°ã€é‡æ’ã€ï¼Œã€é‡æ’ã€å¿…ç„¶ä¼šå‡ºç°ã€é‡ç»˜ã€ã€‚</p><h3 id="å¦‚ä½•è§¦å‘å›æµå’Œé‡ç»˜ï¼Ÿ"><a href="#å¦‚ä½•è§¦å‘å›æµå’Œé‡ç»˜ï¼Ÿ" class="headerlink" title="å¦‚ä½•è§¦å‘å›æµå’Œé‡ç»˜ï¼Ÿ"></a>å¦‚ä½•è§¦å‘å›æµå’Œé‡ç»˜ï¼Ÿ</h3><p>ä»»ä½•æ”¹å˜ç”¨æ¥æ„å»ºæ¸²æŸ“æ ‘çš„ä¿¡æ¯éƒ½ä¼šå¯¼è‡´ä¸€æ¬¡å›æµæˆ–é‡ç»˜ï¼š</p><ul><li>æ·»åŠ ã€åˆ é™¤ã€æ›´æ–°DOMèŠ‚ç‚¹</li><li>é€šè¿‡display: noneéšè—ä¸€ä¸ªDOMèŠ‚ç‚¹-è§¦å‘å›æµå’Œé‡ç»˜</li><li>é€šè¿‡visibility: hiddenéšè—ä¸€ä¸ªDOMèŠ‚ç‚¹-åªè§¦å‘é‡ç»˜ï¼Œå› ä¸ºæ²¡æœ‰å‡ ä½•å˜åŒ–</li><li>ç§»åŠ¨æˆ–è€…ç»™é¡µé¢ä¸­çš„DOMèŠ‚ç‚¹æ·»åŠ åŠ¨ç”»</li><li>æ·»åŠ ä¸€ä¸ªæ ·å¼è¡¨ï¼Œè°ƒæ•´æ ·å¼å±æ€§</li><li>ç”¨æˆ·è¡Œä¸ºï¼Œä¾‹å¦‚è°ƒæ•´çª—å£å¤§å°ï¼Œæ”¹å˜å­—å·ï¼Œæˆ–è€…æ»šåŠ¨ã€‚</li></ul><h3 id="å¦‚ä½•é¿å…å›æµå’Œé‡ç»˜ï¼Ÿ"><a href="#å¦‚ä½•é¿å…å›æµå’Œé‡ç»˜ï¼Ÿ" class="headerlink" title="å¦‚ä½•é¿å…å›æµå’Œé‡ç»˜ï¼Ÿ"></a>å¦‚ä½•é¿å…å›æµå’Œé‡ç»˜ï¼Ÿ</h3><ul><li><p><code>é›†ä¸­æ”¹å˜æ ·å¼</code>ï¼Œä¸è¦ä¸€æ¡ä¸€æ¡åœ°ä¿®æ”¹ DOM çš„æ ·å¼ã€‚</p></li><li><p>ä¸è¦æŠŠ DOM ç»“ç‚¹çš„å±æ€§å€¼æ”¾åœ¨å¾ªç¯é‡Œå½“æˆå¾ªç¯é‡Œçš„å˜é‡ã€‚</p></li><li><p>ä¸ºåŠ¨ç”»çš„ HTML å…ƒä»¶ä½¿ç”¨ <code>fixed</code> æˆ– <code>absoult</code> çš„ <code>position</code>ï¼Œé‚£ä¹ˆä¿®æ”¹ä»–ä»¬çš„ CSS æ˜¯ä¸ä¼š reflow çš„ã€‚</p></li><li><p>ä¸ä½¿ç”¨ table å¸ƒå±€ã€‚å› ä¸ºå¯èƒ½å¾ˆå°çš„ä¸€ä¸ªå°æ”¹åŠ¨ä¼šé€ æˆæ•´ä¸ª table çš„é‡æ–°å¸ƒå±€ã€‚</p></li><li><p>å°½é‡åªä¿®æ”¹<code>positionï¼šabsolute</code>æˆ–<code>fixed</code>å…ƒç´ ï¼Œå¯¹å…¶ä»–å…ƒç´ å½±å“ä¸å¤§</p></li><li><p>åŠ¨ç”»å¼€å§‹<code>GPU</code>åŠ é€Ÿï¼Œ<code>translate</code>ä½¿ç”¨<code>3D</code>å˜åŒ–</p></li><li><p>æå‡ä¸ºåˆæˆå±‚</p><p>å°†å…ƒç´ æå‡ä¸ºåˆæˆå±‚æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p><ul><li>åˆæˆå±‚çš„ä½å›¾ï¼Œä¼šäº¤ç”± GPU åˆæˆï¼Œæ¯” CPU å¤„ç†è¦å¿«</li><li>å½“éœ€è¦ repaint æ—¶ï¼Œåªéœ€è¦ repaint æœ¬èº«ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–çš„å±‚</li><li>å¯¹äº transform å’Œ opacity æ•ˆæœï¼Œä¸ä¼šè§¦å‘ layout å’Œ paint</li></ul><p>æå‡åˆæˆå±‚çš„æœ€å¥½æ–¹å¼æ˜¯ä½¿ç”¨ CSS çš„ will-change å±æ€§ï¼š</p></li></ul><p>  <code>target &#123;will-change: transform;&#125;</code></p><h2 id="HTML-amp-amp-CSS"><a href="#HTML-amp-amp-CSS" class="headerlink" title="HTML &amp;&amp; CSS"></a>HTML &amp;&amp; CSS</h2><h3 id="HTML5-æ–°ç‰¹æ€§ã€è¯­ä¹‰åŒ–"><a href="#HTML5-æ–°ç‰¹æ€§ã€è¯­ä¹‰åŒ–" class="headerlink" title="HTML5 æ–°ç‰¹æ€§ã€è¯­ä¹‰åŒ–"></a>HTML5 æ–°ç‰¹æ€§ã€è¯­ä¹‰åŒ–</h3><ol><li><p><strong>æ¦‚å¿µ</strong>ï¼š</p><p>HTML5çš„è¯­ä¹‰åŒ–æŒ‡çš„æ˜¯<code>åˆç†æ­£ç¡®çš„ä½¿ç”¨è¯­ä¹‰åŒ–çš„æ ‡ç­¾æ¥åˆ›å»ºé¡µé¢ç»“æ„</code>ã€‚ã€æ­£ç¡®çš„æ ‡ç­¾åšæ­£ç¡®çš„äº‹ã€‘</p></li><li><p><strong>è¯­ä¹‰åŒ–æ ‡ç­¾</strong>ï¼š</p><p>header nav main article section aside footer</p></li><li><p><strong>è¯­ä¹‰åŒ–çš„ä¼˜ç‚¹</strong>:</p><ul><li>åœ¨<code>æ²¡CSSæ ·å¼çš„æƒ…å†µä¸‹ï¼Œé¡µé¢æ•´ä½“ä¹Ÿä¼šå‘ˆç°å¾ˆå¥½çš„ç»“æ„æ•ˆæœ</code></li><li><code>ä»£ç ç»“æ„æ¸…æ™°</code>ï¼Œæ˜“äºé˜…è¯»ï¼Œ</li><li><code>åˆ©äºå¼€å‘å’Œç»´æŠ¤</code> æ–¹ä¾¿å…¶ä»–è®¾å¤‡è§£æï¼ˆå¦‚å±å¹•é˜…è¯»å™¨ï¼‰æ ¹æ®è¯­ä¹‰æ¸²æŸ“ç½‘é¡µã€‚</li><li><code>æœ‰åˆ©äºæœç´¢å¼•æ“ä¼˜åŒ–ï¼ˆSEOï¼‰</code>ï¼Œæœç´¢å¼•æ“çˆ¬è™«ä¼šæ ¹æ®ä¸åŒçš„æ ‡ç­¾æ¥èµ‹äºˆä¸åŒçš„æƒé‡</li></ul></li></ol><h3 id="CSS-é€‰æ‹©å™¨åŠä¼˜å…ˆçº§"><a href="#CSS-é€‰æ‹©å™¨åŠä¼˜å…ˆçº§" class="headerlink" title="CSS é€‰æ‹©å™¨åŠä¼˜å…ˆçº§"></a>CSS é€‰æ‹©å™¨åŠä¼˜å…ˆçº§</h3><p><strong>é€‰æ‹©å™¨</strong></p><ul><li>idé€‰æ‹©å™¨(#myid)</li><li>ç±»é€‰æ‹©å™¨(.myclass)</li><li>å±æ€§é€‰æ‹©å™¨(a[rel=â€externalâ€])</li><li>ä¼ªç±»é€‰æ‹©å™¨(a:hover, li:nth-child)</li><li>æ ‡ç­¾é€‰æ‹©å™¨(div, h1,p)</li><li>ç›¸é‚»é€‰æ‹©å™¨ï¼ˆh1 + pï¼‰</li><li>å­é€‰æ‹©å™¨(ul &gt; li)</li><li>åä»£é€‰æ‹©å™¨(li a)</li><li>é€šé…ç¬¦é€‰æ‹©å™¨(*)</li></ul><p><strong>ä¼˜å…ˆçº§ï¼š</strong></p><ul><li><code>!important</code></li><li>å†…è”æ ·å¼ï¼ˆ1000ï¼‰</li><li>IDé€‰æ‹©å™¨ï¼ˆ0100ï¼‰</li><li>ç±»é€‰æ‹©å™¨/å±æ€§é€‰æ‹©å™¨/ä¼ªç±»é€‰æ‹©å™¨ï¼ˆ0010ï¼‰</li><li>å…ƒç´ é€‰æ‹©å™¨/ä¼ªå…ƒç´ é€‰æ‹©å™¨ï¼ˆ0001ï¼‰</li><li>å…³ç³»é€‰æ‹©å™¨/é€šé…ç¬¦é€‰æ‹©å™¨ï¼ˆ0000ï¼‰</li></ul><p>å¸¦!important æ ‡è®°çš„æ ·å¼å±æ€§ä¼˜å…ˆçº§æœ€é«˜ï¼› æ ·å¼è¡¨çš„æ¥æºç›¸åŒæ—¶ï¼š<code>!important &gt; è¡Œå†…æ ·å¼&gt;IDé€‰æ‹©å™¨ &gt; ç±»é€‰æ‹©å™¨ &gt; æ ‡ç­¾ &gt; é€šé…ç¬¦ &gt; ç»§æ‰¿ &gt; æµè§ˆå™¨é»˜è®¤å±æ€§</code></p><h3 id="position-å±æ€§çš„å€¼æœ‰å“ªäº›åŠå…¶åŒºåˆ«"><a href="#position-å±æ€§çš„å€¼æœ‰å“ªäº›åŠå…¶åŒºåˆ«" class="headerlink" title="position å±æ€§çš„å€¼æœ‰å“ªäº›åŠå…¶åŒºåˆ«"></a>position å±æ€§çš„å€¼æœ‰å“ªäº›åŠå…¶åŒºåˆ«</h3><ul><li><strong>å›ºå®šå®šä½ fixed</strong>ï¼š å…ƒç´ çš„ä½ç½®ç›¸å¯¹äºæµè§ˆå™¨çª—å£æ˜¯å›ºå®šä½ç½®ï¼Œå³ä½¿çª—å£æ˜¯æ»šåŠ¨çš„å®ƒä¹Ÿä¸ä¼šç§»åŠ¨ã€‚Fixed å®š ä½ä½¿å…ƒç´ çš„ä½ç½®ä¸æ–‡æ¡£æµæ— å…³ï¼Œå› æ­¤ä¸å æ®ç©ºé—´ã€‚ Fixed å®šä½çš„å…ƒç´ å’Œå…¶ä»–å…ƒç´ é‡å ã€‚</li><li><strong>ç›¸å¯¹å®šä½ relative</strong>ï¼š å¦‚æœå¯¹ä¸€ä¸ªå…ƒç´ è¿›è¡Œç›¸å¯¹å®šä½ï¼Œå®ƒå°†å‡ºç°åœ¨å®ƒæ‰€åœ¨çš„ä½ç½®ä¸Šã€‚ç„¶åï¼Œå¯ä»¥é€šè¿‡è®¾ç½®å‚ç›´ æˆ–æ°´å¹³ä½ç½®ï¼Œè®©è¿™ä¸ªå…ƒç´ â€œç›¸å¯¹äºâ€å®ƒçš„èµ·ç‚¹è¿›è¡Œç§»åŠ¨ã€‚ åœ¨ä½¿ç”¨ç›¸å¯¹å®šä½æ—¶ï¼Œæ— è®ºæ˜¯ å¦è¿›è¡Œç§»åŠ¨ï¼Œå…ƒç´ ä»ç„¶å æ®åŸæ¥çš„ç©ºé—´ã€‚å› æ­¤ï¼Œç§»åŠ¨å…ƒç´ ä¼šå¯¼è‡´å®ƒè¦†ç›–å…¶å®ƒæ¡†ã€‚</li><li><strong>ç»å¯¹å®šä½ absolute</strong>ï¼š ç»å¯¹å®šä½çš„å…ƒç´ çš„ä½ç½®ç›¸å¯¹äºæœ€è¿‘çš„å·²å®šä½çˆ¶å…ƒç´ ï¼Œå¦‚æœå…ƒç´ æ²¡æœ‰å·²å®šä½çš„çˆ¶å…ƒç´ ï¼Œé‚£ ä¹ˆå®ƒçš„ä½ç½®ç›¸å¯¹äºã€‚absolute å®šä½ä½¿å…ƒç´ çš„ä½ç½®ä¸æ–‡æ¡£æµæ— å…³ï¼Œå› æ­¤ä¸å æ®ç©ºé—´ã€‚ absolute å®šä½çš„å…ƒç´ å’Œå…¶ä»–å…ƒç´ é‡å ã€‚</li><li><strong>ç²˜æ€§å®šä½ sticky</strong>ï¼š å…ƒç´ å…ˆæŒ‰ç…§æ™®é€šæ–‡æ¡£æµå®šä½ï¼Œç„¶åç›¸å¯¹äºè¯¥å…ƒç´ åœ¨æµä¸­çš„ flow rootï¼ˆBFCï¼‰å’Œ containing blockï¼ˆæœ€è¿‘çš„å—çº§ç¥–å…ˆå…ƒç´ ï¼‰å®šä½ã€‚è€Œåï¼Œå…ƒç´ å®šä½è¡¨ç°ä¸ºåœ¨è·¨è¶Šç‰¹å®šé˜ˆå€¼å‰ä¸ºç›¸å¯¹å®š ä½ï¼Œä¹‹åä¸ºå›ºå®šå®šä½ã€‚</li><li><strong>é»˜è®¤å®šä½ Static</strong>ï¼š é»˜è®¤å€¼ã€‚æ²¡æœ‰å®šä½ï¼Œå…ƒç´ å‡ºç°åœ¨æ­£å¸¸çš„æµä¸­ï¼ˆå¿½ç•¥ top, bottom, left, right æˆ–è€… z-index å£° æ˜ï¼‰ã€‚ inherit: è§„å®šåº”è¯¥ä»çˆ¶å…ƒç´ ç»§æ‰¿ position å±æ€§çš„å€¼ã€‚</li></ul><h3 id="box-sizingå±æ€§"><a href="#box-sizingå±æ€§" class="headerlink" title="box-sizingå±æ€§"></a>box-sizingå±æ€§</h3><ul><li>box-sizing è§„å®šä¸¤ä¸ªå¹¶æ’çš„å¸¦è¾¹æ¡†çš„æ¡†ï¼Œè¯­æ³•ä¸º box-sizingï¼šcontent-box/border-box/inherit</li><li><strong>content-box</strong>ï¼šå®½åº¦å’Œé«˜åº¦åˆ†åˆ«åº”ç”¨åˆ°å…ƒç´ çš„å†…å®¹æ¡†ï¼Œåœ¨å®½åº¦å’Œé«˜åº¦ä¹‹å¤–ç»˜åˆ¶å…ƒç´ çš„å†…è¾¹è·å’Œè¾¹æ¡†ã€‚ã€æ ‡å‡†ç›’å­æ¨¡å‹ã€‘</li><li><strong>border-box</strong>ï¼šä¸ºå…ƒç´ è®¾å®šçš„å®½åº¦å’Œé«˜åº¦å†³å®šäº†å…ƒç´ çš„è¾¹æ¡†ç›’ã€‚ã€IE ç›’å­æ¨¡å‹ã€‘</li><li><strong>inherit</strong>ï¼šç»§æ‰¿çˆ¶å…ƒç´ çš„ box-sizing å€¼ã€‚</li></ul><h3 id="CSS-ç›’å­æ¨¡å‹"><a href="#CSS-ç›’å­æ¨¡å‹" class="headerlink" title="CSS ç›’å­æ¨¡å‹"></a>CSS ç›’å­æ¨¡å‹</h3><p>CSS ç›’æ¨¡å‹æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç›’å­ï¼Œå®ƒåŒ…æ‹¬ï¼šè¾¹è·ï¼Œè¾¹æ¡†ï¼Œå¡«å……å’Œå®é™…å†…å®¹ã€‚CSS ä¸­çš„ç›’å­æ¨¡å‹åŒ…æ‹¬ IE ç›’å­æ¨¡å‹å’Œæ ‡å‡†çš„ W3C ç›’å­æ¨¡å‹ã€‚<br>åœ¨æ ‡å‡†çš„ç›’å­æ¨¡å‹ä¸­ï¼Œ<code>width æŒ‡ content éƒ¨åˆ†çš„å®½åº¦</code>ã€‚<br>åœ¨ IE ç›’å­æ¨¡å‹ä¸­ï¼Œ<code>width è¡¨ç¤º content+padding+border è¿™ä¸‰ä¸ªéƒ¨åˆ†çš„å®½åº¦</code>ã€‚</p><p>æ•…åœ¨è®¡ç®—ç›’å­çš„å®½åº¦æ—¶å­˜åœ¨å·®å¼‚ï¼š</p><p><strong>æ ‡å‡†ç›’æ¨¡å‹ï¼š</strong> ä¸€ä¸ªå—çš„æ€»å®½åº¦ = width+margin(å·¦å³)+padding(å·¦å³)+border(å·¦å³)</p><p><strong>æ€ªå¼‚ç›’æ¨¡å‹ï¼š</strong> ä¸€ä¸ªå—çš„æ€»å®½åº¦ = width+marginï¼ˆå·¦å³ï¼‰ï¼ˆæ—¢ width å·²ç»åŒ…å«äº† padding å’Œ border å€¼ï¼‰</p><h3 id="è®©ä¸€ä¸ªå…ƒç´ æ°´å¹³å‚ç›´å±…ä¸­"><a href="#è®©ä¸€ä¸ªå…ƒç´ æ°´å¹³å‚ç›´å±…ä¸­" class="headerlink" title="è®©ä¸€ä¸ªå…ƒç´ æ°´å¹³å‚ç›´å±…ä¸­"></a>è®©ä¸€ä¸ªå…ƒç´ æ°´å¹³å‚ç›´å±…ä¸­</h3><ul><li><p><strong>æ°´å¹³å±…ä¸­</strong></p><ul><li><p>å¯¹äº è¡Œå†…å…ƒç´  : <code>text-align: center</code>;</p></li><li><p>å¯¹äºç¡®å®šå®½åº¦çš„å—çº§å…ƒç´ ï¼š</p><p>ï¼ˆ1ï¼‰widthå’Œmarginå®ç°ã€‚<code>margin: 0 auto</code>;</p><p>ï¼ˆ2ï¼‰ç»å¯¹å®šä½å’Œmargin-left: -width/2, å‰ææ˜¯çˆ¶å…ƒç´ position: relative</p></li><li><p>å¯¹äºå®½åº¦æœªçŸ¥çš„å—çº§å…ƒç´ </p><p>ï¼ˆ1ï¼‰<code>tableæ ‡ç­¾é…åˆmarginå·¦å³autoå®ç°æ°´å¹³å±…ä¸­</code>ã€‚ä½¿ç”¨tableæ ‡ç­¾ï¼ˆæˆ–ç›´æ¥å°†å—çº§å…ƒç´ è®¾å€¼ä¸º display:tableï¼‰ï¼Œå†é€šè¿‡ç»™è¯¥æ ‡ç­¾æ·»åŠ å·¦å³marginä¸ºautoã€‚</p><p>ï¼ˆ2ï¼‰inline-blockå®ç°æ°´å¹³å±…ä¸­æ–¹æ³•ã€‚displayï¼šinline-blockå’Œtext-align:centerå®ç°æ°´å¹³å±…ä¸­ã€‚</p><p>ï¼ˆ3ï¼‰<code>ç»å¯¹å®šä½+transform</code>ï¼ŒtranslateXå¯ä»¥ç§»åŠ¨æœ¬èº«å…ƒç´ çš„50%ã€‚</p><p>ï¼ˆ4ï¼‰flexå¸ƒå±€ä½¿ç”¨<code>justify-content:center</code></p></li></ul></li><li><p><strong>å‚ç›´å±…ä¸­</strong></p><ol><li>åˆ©ç”¨ <code>line-height</code> å®ç°å±…ä¸­ï¼Œè¿™ç§æ–¹æ³•é€‚åˆçº¯æ–‡å­—ç±»</li><li>é€šè¿‡è®¾ç½®çˆ¶å®¹å™¨ ç›¸å¯¹å®šä½ ï¼Œå­çº§è®¾ç½® <code>ç»å¯¹å®šä½</code>ï¼Œæ ‡ç­¾é€šè¿‡marginå®ç°è‡ªé€‚åº”å±…ä¸­</li><li>å¼¹æ€§å¸ƒå±€ flex :çˆ¶çº§è®¾ç½®display: flex; å­çº§è®¾ç½®marginä¸ºautoå®ç°è‡ªé€‚åº”å±…ä¸­</li><li>çˆ¶çº§è®¾ç½®ç›¸å¯¹å®šä½ï¼Œå­çº§è®¾ç½®ç»å¯¹å®šä½ï¼Œå¹¶ä¸”é€šè¿‡ä½ç§» transform å®ç°</li><li><code>table å¸ƒå±€</code>ï¼Œçˆ¶çº§é€šè¿‡è½¬æ¢æˆè¡¨æ ¼å½¢å¼ï¼Œ<code>ç„¶åå­çº§è®¾ç½® vertical-align å®ç°</code>ã€‚ï¼ˆéœ€è¦æ³¨æ„çš„æ˜¯ï¼švertical-align: middleä½¿ç”¨çš„å‰ææ¡ä»¶æ˜¯å†…è”å…ƒç´ ä»¥åŠdisplayå€¼ä¸ºtable-cellçš„å…ƒç´ ï¼‰</li></ol></li></ul><h3 id="éšè—é¡µé¢ä¸­æŸä¸ªå…ƒç´ çš„æ–¹æ³•"><a href="#éšè—é¡µé¢ä¸­æŸä¸ªå…ƒç´ çš„æ–¹æ³•" class="headerlink" title="éšè—é¡µé¢ä¸­æŸä¸ªå…ƒç´ çš„æ–¹æ³•"></a>éšè—é¡µé¢ä¸­æŸä¸ªå…ƒç´ çš„æ–¹æ³•</h3><p>1.<code>opacityï¼š0</code>ï¼Œè¯¥å…ƒç´ éšè—èµ·æ¥äº†ï¼Œä½†ä¸ä¼šæ”¹å˜é¡µé¢å¸ƒå±€ï¼Œå¹¶ä¸”ï¼Œå¦‚æœè¯¥å…ƒç´ å·²ç»ç»‘å®š ä¸€äº›äº‹ä»¶ï¼Œå¦‚click äº‹ä»¶ï¼Œé‚£ä¹ˆç‚¹å‡»è¯¥åŒºåŸŸï¼Œä¹Ÿèƒ½è§¦å‘ç‚¹å‡»äº‹ä»¶çš„</p><p>2.<code>visibilityï¼šhidden</code>ï¼Œè¯¥å…ƒç´ éšè—èµ·æ¥äº†ï¼Œä½†ä¸ä¼šæ”¹å˜é¡µé¢å¸ƒå±€ï¼Œä½†æ˜¯ä¸ä¼šè§¦å‘è¯¥å…ƒç´ å·² ç»ç»‘å®šçš„äº‹ä»¶ ï¼Œéšè—å¯¹åº”å…ƒç´ ï¼Œåœ¨æ–‡æ¡£å¸ƒå±€ä¸­ä»ä¿ç•™åŸæ¥çš„ç©ºé—´ï¼ˆé‡ç»˜ï¼‰</p><p>3.<code>displayï¼šnone</code>ï¼ŒæŠŠå…ƒç´ éšè—èµ·æ¥ï¼Œå¹¶ä¸”ä¼šæ”¹å˜é¡µé¢å¸ƒå±€ï¼Œå¯ä»¥ç†è§£æˆåœ¨é¡µé¢ä¸­æŠŠè¯¥å…ƒç´ ã€‚ ä¸æ˜¾ç¤ºå¯¹åº”çš„å…ƒç´ ï¼Œåœ¨æ–‡æ¡£å¸ƒå±€ä¸­ä¸å†åˆ†é…ç©ºé—´ï¼ˆå›æµ+é‡ç»˜ï¼‰</p><h3 id="ç”¨CSSå®ç°ä¸‰è§’ç¬¦å·"><a href="#ç”¨CSSå®ç°ä¸‰è§’ç¬¦å·" class="headerlink" title="ç”¨CSSå®ç°ä¸‰è§’ç¬¦å·"></a>ç”¨CSSå®ç°ä¸‰è§’ç¬¦å·</h3><pre><code>/*è®°å¿†å£è¯€ï¼šç›’å­å®½é«˜å‡ä¸ºé›¶ï¼Œä¸‰é¢è¾¹æ¡†çš†é€æ˜ã€‚ */div:after&#123;    position: absolute;    width: 0px;    height: 0px;    content:&quot; &quot;;    border-right: 100px solid transparent;    border-top: 100px solid #ff0;    border-left: 100px solid transparent;    border-bottom: 100px solid transparent;&#125;</code></pre><h3 id="é¡µé¢å¸ƒå±€"><a href="#é¡µé¢å¸ƒå±€" class="headerlink" title="é¡µé¢å¸ƒå±€"></a>é¡µé¢å¸ƒå±€</h3><h4 id="1-Flex-å¸ƒå±€"><a href="#1-Flex-å¸ƒå±€" class="headerlink" title="1.Flex å¸ƒå±€"></a>1.Flex å¸ƒå±€</h4><p>å¸ƒå±€çš„ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆï¼ŒåŸºäºç›’çŠ¶æ¨¡å‹ï¼Œä¾èµ– display å±æ€§ + position å±æ€§ + float å±æ€§ã€‚å®ƒå¯¹äºé‚£äº›ç‰¹æ®Šå¸ƒå±€éå¸¸ä¸æ–¹ä¾¿ï¼Œæ¯”å¦‚ï¼Œå‚ç›´å±…ä¸­å°±ä¸å®¹æ˜“å®ç°ã€‚</p><p>Flex æ˜¯ Flexible Box çš„ç¼©å†™ï¼Œæ„ä¸ºâ€å¼¹æ€§å¸ƒå±€â€,ç”¨æ¥ä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§ã€‚æŒ‡å®šå®¹å™¨ display: flex å³å¯ã€‚ ç®€å•çš„åˆ†ä¸ºå®¹å™¨å±æ€§å’Œå…ƒç´ å±æ€§ã€‚</p><p>å®¹å™¨çš„å±æ€§ï¼š</p><ul><li>flex-directionï¼šå†³å®šä¸»è½´çš„æ–¹å‘ï¼ˆå³å­ item çš„æ’åˆ—æ–¹æ³•ï¼‰flex-direction: row | row-reverse | column | column-reverse;</li><li>flex-wrapï¼šå†³å®šæ¢è¡Œè§„åˆ™ flex-wrap: nowrap | wrap | wrap-reverse;</li><li>flex-flowï¼š .box { flex-flow: || ; }</li><li>justify-contentï¼šå¯¹å…¶æ–¹å¼ï¼Œæ°´å¹³ä¸»è½´å¯¹é½æ–¹å¼</li><li>align-itemsï¼šå¯¹é½æ–¹å¼ï¼Œç«–ç›´è½´çº¿æ–¹å‘</li><li>align-content</li></ul><p>é¡¹ç›®çš„å±æ€§ï¼ˆå…ƒç´ çš„å±æ€§ï¼‰ï¼š</p><ul><li>order å±æ€§ï¼šå®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºï¼Œé¡ºåºè¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º 0</li><li>flex-grow å±æ€§ï¼šå®šä¹‰é¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ï¼Œå³ä½¿å­˜åœ¨ç©ºé—´ï¼Œä¹Ÿä¸ä¼šæ”¾å¤§</li><li>flex-shrink å±æ€§ï¼šå®šä¹‰äº†é¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼Œå½“ç©ºé—´ä¸è¶³çš„æƒ…å†µä¸‹ä¼šç­‰æ¯”ä¾‹çš„ç¼©å°ï¼Œå¦‚æœ å®šä¹‰ä¸ª item çš„ flow-shrink ä¸º 0ï¼Œåˆ™ä¸ºä¸ç¼©å°</li><li>flex-basis å±æ€§ï¼šå®šä¹‰äº†åœ¨åˆ†é…å¤šä½™çš„ç©ºé—´ï¼Œé¡¹ç›®å æ®çš„ç©ºé—´ã€‚</li><li>flexï¼šæ˜¯ flex-grow å’Œ flex-shrinkã€flex-basis çš„ç®€å†™ï¼Œé»˜è®¤å€¼ä¸º 0 1 autoã€‚</li><li>align-selfï¼šå…è®¸å•ä¸ªé¡¹ç›®ä¸å…¶ä»–é¡¹ç›®ä¸ä¸€æ ·çš„å¯¹é½æ–¹å¼ï¼Œå¯ä»¥è¦†ç›–</li><li>align-itemsï¼Œé»˜è®¤å± æ€§ä¸º autoï¼Œè¡¨ç¤ºç»§æ‰¿çˆ¶å…ƒç´ çš„ align-items æ¯”å¦‚è¯´ï¼Œç”¨ flex å®ç°åœ£æ¯å¸ƒå±€</li></ul><h4 id="2-Rem-å¸ƒå±€"><a href="#2-Rem-å¸ƒå±€" class="headerlink" title="2.Rem å¸ƒå±€"></a>2.Rem å¸ƒå±€</h4><p>é¦–å…ˆ Rem ç›¸å¯¹äºæ ¹(html)çš„ font-size å¤§å°æ¥è®¡ç®—ã€‚ç®€å•çš„è¯´å®ƒå°±æ˜¯ä¸€ä¸ªç›¸å¯¹å•ä¾‹ å¦‚:font-size:10px;,é‚£ä¹ˆï¼ˆ1rem = 10pxï¼‰äº†è§£è®¡ç®—åŸç†åé¦–å…ˆè§£å†³æ€ä¹ˆåœ¨ä¸åŒè®¾å¤‡ä¸Šè®¾ç½® html çš„ font-size å¤§å°ã€‚å…¶å® rem å¸ƒå±€çš„æœ¬è´¨æ˜¯ç­‰æ¯”ç¼©æ”¾ï¼Œä¸€èˆ¬æ˜¯åŸºäºå®½åº¦ã€‚</p><p><strong>ä¼˜ç‚¹</strong>ï¼šå¯ä»¥å¿«é€Ÿé€‚ç”¨ç§»åŠ¨ç«¯å¸ƒå±€ï¼Œå­—ä½“ï¼Œå›¾ç‰‡é«˜åº¦</p><p><strong>ç¼ºç‚¹</strong>ï¼š</p><p>â‘ ç›®å‰ ie ä¸æ”¯æŒï¼Œå¯¹ pc é¡µé¢æ¥è®²ä½¿ç”¨æ¬¡æ•°ä¸å¤šï¼›<br>â‘¡æ•°æ®é‡å¤§ï¼šæ‰€æœ‰çš„å›¾ç‰‡ï¼Œç›’å­éƒ½éœ€è¦æˆ‘ä»¬å»ç»™ä¸€ä¸ªå‡†ç¡®çš„å€¼ï¼›æ‰èƒ½ä¿è¯ä¸åŒæœºå‹çš„é€‚é…ï¼›<br>â‘¢åœ¨å“åº”å¼å¸ƒå±€ä¸­ï¼Œå¿…é¡»é€šè¿‡ js æ¥åŠ¨æ€æ§åˆ¶æ ¹å…ƒç´  font-size çš„å¤§å°ã€‚ä¹Ÿå°±æ˜¯è¯´ css æ ·å¼å’Œ js ä»£ç æœ‰ä¸€å®šçš„è€¦åˆæ€§ã€‚ä¸”å¿…é¡»å°†æ”¹å˜ font-size çš„ä»£ç æ”¾åœ¨ css æ ·å¼ä¹‹å‰ã€‚</p><h4 id="3-ç™¾åˆ†æ¯”å¸ƒå±€"><a href="#3-ç™¾åˆ†æ¯”å¸ƒå±€" class="headerlink" title="3.ç™¾åˆ†æ¯”å¸ƒå±€"></a>3.ç™¾åˆ†æ¯”å¸ƒå±€</h4><p>é€šè¿‡ç™¾åˆ†æ¯”å•ä½ â€œ % â€œ æ¥å®ç°å“åº”å¼çš„æ•ˆæœã€‚é€šè¿‡ç™¾åˆ†æ¯”å•ä½å¯ä»¥ä½¿å¾—æµè§ˆå™¨ä¸­çš„ç»„ä»¶çš„å®½å’Œé«˜éšç€æµè§ˆå™¨çš„å˜åŒ–è€Œå˜åŒ–ï¼Œä»è€Œå®ç°å“åº”å¼çš„æ•ˆæœã€‚ ç›´è§‚çš„ç†è§£ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè®¤ä¸ºå­å…ƒç´ çš„ç™¾åˆ†æ¯”å®Œå…¨ç›¸å¯¹äºç›´æ¥çˆ¶å…ƒç´ ï¼Œheight ç™¾åˆ†æ¯”ç›¸ å¯¹äº heightï¼Œwidth ç™¾åˆ†æ¯”ç›¸å¯¹äº widthã€‚ paddingã€borderã€margin ç­‰ç­‰ä¸è®ºæ˜¯å‚ç›´æ–¹å‘è¿˜æ˜¯æ°´å¹³æ–¹å‘ï¼Œéƒ½ç›¸å¯¹äºç›´æ¥çˆ¶å…ƒç´ çš„ widthã€‚ é™¤äº† border-radius å¤–ï¼Œè¿˜æœ‰æ¯”å¦‚ translateã€background-size ç­‰éƒ½æ˜¯ç›¸å¯¹äºè‡ªèº«çš„ã€‚</p><p><strong>ç¼ºç‚¹</strong>ï¼š</p><p>ï¼ˆ1ï¼‰è®¡ç®—å›°éš¾<br>ï¼ˆ2ï¼‰å„ä¸ªå±æ€§ä¸­å¦‚æœä½¿ç”¨ç™¾åˆ†æ¯”ï¼Œç›¸å¯¹çˆ¶å…ƒç´ çš„å±æ€§å¹¶ä¸æ˜¯å”¯ä¸€çš„ã€‚é€ æˆæˆ‘ä»¬ä½¿ç”¨ç™¾åˆ†æ¯”å•ä½å®¹æ˜“ä½¿å¸ƒå±€é—®é¢˜å˜å¾—å¤æ‚ã€‚</p><h4 id="4-æµ®åŠ¨å¸ƒå±€"><a href="#4-æµ®åŠ¨å¸ƒå±€" class="headerlink" title="4.æµ®åŠ¨å¸ƒå±€"></a>4.æµ®åŠ¨å¸ƒå±€</h4><p>æµ®åŠ¨å¸ƒå±€:å½“å…ƒç´ æµ®åŠ¨ä»¥åå¯ä»¥å‘å·¦æˆ–å‘å³ç§»åŠ¨ï¼Œç›´åˆ°å®ƒçš„å¤–è¾¹ç¼˜ç¢°åˆ°åŒ…å«å®ƒçš„æ¡†æˆ–è€…å¦å¤–ä¸€ä¸ªæµ®åŠ¨å…ƒç´ çš„è¾¹æ¡†ä¸ºæ­¢ã€‚å…ƒç´ æµ®åŠ¨ä»¥åä¼šè„±ç¦»æ­£å¸¸çš„æ–‡æ¡£æµï¼Œæ‰€ä»¥æ–‡æ¡£çš„æ™®é€šæµä¸­çš„æ¡†å°±å˜çš„å¥½åƒæµ®åŠ¨å…ƒç´ ä¸å­˜åœ¨ä¸€æ ·ã€‚</p><p><strong>ä¼˜ç‚¹</strong></p><p>è¿™æ ·åšçš„ä¼˜ç‚¹å°±æ˜¯åœ¨å›¾æ–‡æ··æ’çš„æ—¶å€™å¯ä»¥å¾ˆå¥½çš„ä½¿æ–‡å­—ç¯ç»•åœ¨å›¾ç‰‡å‘¨å›´ã€‚å¦å¤–å½“å…ƒç´ æµ®åŠ¨äº†èµ·æ¥ä¹‹åï¼Œå®ƒæœ‰ç€å—çº§å…ƒç´ çš„ä¸€äº›æ€§è´¨ä¾‹å¦‚å¯ä»¥è®¾ç½®å®½é«˜ç­‰ï¼Œä½†å®ƒä¸inline-blockè¿˜æ˜¯æœ‰ä¸€äº›åŒºåˆ«çš„ï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯å…³äºæ¨ªå‘æ’åºçš„æ—¶å€™ï¼Œfloatå¯ä»¥è®¾ç½®æ–¹å‘è€Œinline-blockæ–¹å‘æ˜¯å›ºå®šçš„ï¼›è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯inline-blockåœ¨ä½¿ç”¨æ—¶æœ‰æ—¶ä¼šæœ‰ç©ºç™½é—´éš™çš„é—®é¢˜</p><p><strong>ç¼ºç‚¹</strong></p><p>æœ€æ˜æ˜¾çš„ç¼ºç‚¹å°±æ˜¯æµ®åŠ¨å…ƒç´ ä¸€æ—¦è„±ç¦»äº†æ–‡æ¡£æµï¼Œå°±æ— æ³•æ’‘èµ·çˆ¶å…ƒç´ ï¼Œ<code>ä¼šé€ æˆçˆ¶çº§å…ƒç´ é«˜åº¦å¡Œé™·</code>ã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨remæˆ–viewportè¿›è¡Œç§»åŠ¨ç«¯é€‚é…"><a href="#å¦‚ä½•ä½¿ç”¨remæˆ–viewportè¿›è¡Œç§»åŠ¨ç«¯é€‚é…" class="headerlink" title="å¦‚ä½•ä½¿ç”¨remæˆ–viewportè¿›è¡Œç§»åŠ¨ç«¯é€‚é…"></a>å¦‚ä½•ä½¿ç”¨remæˆ–viewportè¿›è¡Œç§»åŠ¨ç«¯é€‚é…</h3><p><strong>remé€‚é…åŸç†ï¼š</strong></p><p>æ”¹å˜äº†ä¸€ä¸ªå…ƒç´ åœ¨ä¸åŒè®¾å¤‡ä¸Šå æ®çš„cssåƒç´ çš„ä¸ªæ•°</p><p>remé€‚é…çš„ä¼˜ç¼ºç‚¹</p><ul><li>ä¼˜ç‚¹ï¼šæ²¡æœ‰ç ´åå®Œç¾è§†å£</li><li>ç¼ºç‚¹ï¼špxå€¼è½¬æ¢remå¤ªè¿‡äºå¤æ‚(ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨lessæ¥è§£å†³è¿™ä¸ªé—®é¢˜)</li></ul><p><strong>viewporté€‚é…çš„åŸç†</strong></p><p>viewporté€‚é…æ–¹æ¡ˆä¸­ï¼Œæ¯ä¸€ä¸ªå…ƒç´ åœ¨ä¸åŒè®¾å¤‡ä¸Šå æ®çš„cssåƒç´ çš„ä¸ªæ•°æ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯cssåƒç´ å’Œç‰©ç†åƒç´ çš„æ¯”ä¾‹æ˜¯ä¸ä¸€æ ·çš„ï¼Œç­‰æ¯”çš„</p><p>viewporté€‚é…çš„ä¼˜ç¼ºç‚¹</p><ul><li>åœ¨æˆ‘ä»¬è®¾è®¡å›¾ä¸Šæ‰€é‡å–çš„å¤§å°å³ä¸ºæˆ‘ä»¬å¯ä»¥è®¾ç½®çš„åƒç´ å¤§å°ï¼Œå³æ‰€é‡å³æ‰€è®¾</li><li>ç¼ºç‚¹ç ´åå®Œç¾è§†å£</li></ul><h3 id="æ¸…é™¤æµ®åŠ¨çš„æ–¹å¼"><a href="#æ¸…é™¤æµ®åŠ¨çš„æ–¹å¼" class="headerlink" title="æ¸…é™¤æµ®åŠ¨çš„æ–¹å¼"></a>æ¸…é™¤æµ®åŠ¨çš„æ–¹å¼</h3><ul><li><p>æ·»åŠ é¢å¤–æ ‡ç­¾</p>  <div class="parent">      //æ·»åŠ é¢å¤–æ ‡ç­¾å¹¶ä¸”æ·»åŠ clearå±æ€§      <div style="clear:both"></div>      //ä¹Ÿå¯ä»¥åŠ ä¸€ä¸ªbræ ‡ç­¾  </div>  </li><li><p>çˆ¶çº§æ·»åŠ overflowå±æ€§ï¼Œæˆ–è€…è®¾ç½®é«˜åº¦</p></li><li><p>å»ºç«‹ä¼ªç±»é€‰æ‹©å™¨æ¸…é™¤æµ®åŠ¨</p></li></ul><pre><code>//åœ¨cssä¸­æ·»åŠ :afterä¼ªå…ƒç´ .parent:after&#123;  /* è®¾ç½®æ·»åŠ å­å…ƒç´ çš„å†…å®¹æ˜¯ç©º */  content: &#39;&#39;;  /* è®¾ç½®æ·»åŠ å­å…ƒç´ ä¸ºå—çº§å…ƒç´  */  display: block;  /* è®¾ç½®æ·»åŠ çš„å­å…ƒç´ çš„é«˜åº¦0 */  height: 0;  /* è®¾ç½®æ·»åŠ å­å…ƒç´ çœ‹ä¸è§ */  visibility: hidden;  /* è®¾ç½®clearï¼šboth */  clear: both;&#125;</code></pre><h2 id="JSã€TSã€ES6"><a href="#JSã€TSã€ES6" class="headerlink" title="JSã€TSã€ES6"></a>JSã€TSã€ES6</h2><h3 id="JSä¸­çš„8ç§æ•°æ®ç±»å‹åŠåŒºåˆ«"><a href="#JSä¸­çš„8ç§æ•°æ®ç±»å‹åŠåŒºåˆ«" class="headerlink" title="JSä¸­çš„8ç§æ•°æ®ç±»å‹åŠåŒºåˆ«"></a>JSä¸­çš„8ç§æ•°æ®ç±»å‹åŠåŒºåˆ«</h3><p>åŒ…æ‹¬å€¼ç±»å‹(åŸºæœ¬å¯¹è±¡ç±»å‹)å’Œå¼•ç”¨ç±»å‹(å¤æ‚å¯¹è±¡ç±»å‹)</p><p><strong>åŸºæœ¬ç±»å‹(å€¼ç±»å‹)ï¼š</strong> Number(æ•°å­—),String(å­—ç¬¦ä¸²),Boolean(å¸ƒå°”),Symbol(ç¬¦å·),null(ç©º),undefined(æœªå®šä¹‰)åœ¨å†…å­˜ä¸­å æ®å›ºå®šå¤§å°ï¼Œä¿å­˜åœ¨æ ˆå†…å­˜ä¸­</p><p><strong>å¼•ç”¨ç±»å‹(å¤æ‚æ•°æ®ç±»å‹)ï¼š</strong> Object(å¯¹è±¡)ã€Function(å‡½æ•°)ã€‚å…¶ä»–è¿˜æœ‰Array(æ•°ç»„)ã€Date(æ—¥æœŸ)ã€RegExp(æ­£åˆ™è¡¨è¾¾å¼)ã€ç‰¹æ®Šçš„åŸºæœ¬åŒ…è£…ç±»å‹(Stringã€Numberã€Boolean) ä»¥åŠå•ä½“å†…ç½®å¯¹è±¡(Globalã€Math)ç­‰ å¼•ç”¨ç±»å‹çš„å€¼æ˜¯å¯¹è±¡ ä¿å­˜åœ¨å †å†…å­˜ä¸­ï¼Œæ ˆå†…å­˜å­˜å‚¨çš„æ˜¯å¯¹è±¡çš„å˜é‡æ ‡è¯†ç¬¦ä»¥åŠå¯¹è±¡åœ¨å †å†…å­˜ä¸­çš„å­˜å‚¨åœ°å€ã€‚</p><h3 id="JSä¸­çš„æ•°æ®ç±»å‹æ£€æµ‹æ–¹æ¡ˆ"><a href="#JSä¸­çš„æ•°æ®ç±»å‹æ£€æµ‹æ–¹æ¡ˆ" class="headerlink" title="JSä¸­çš„æ•°æ®ç±»å‹æ£€æµ‹æ–¹æ¡ˆ"></a>JSä¸­çš„æ•°æ®ç±»å‹æ£€æµ‹æ–¹æ¡ˆ</h3><h4 id="1-typeof"><a href="#1-typeof" class="headerlink" title="1.typeof"></a>1.typeof</h4><pre><code>  console.log(typeof 1);        // number  console.log(typeof true);      // boolean  console.log(typeof &#39;mc&#39;);      // string  console.log(typeof function()&#123;&#125;);  // function  console.log(typeof console.log());  // function  console.log(typeof []);       // object  console.log(typeof &#123;&#125;);       // object  console.log(typeof null);      // object  console.log(typeof undefined);    // undefined</code></pre><p>ä¼˜ç‚¹ï¼šèƒ½å¤Ÿå¿«é€ŸåŒºåˆ†åŸºæœ¬æ•°æ®ç±»å‹</p><p>ç¼ºç‚¹ï¼šä¸èƒ½å°†Objectã€Arrayå’ŒNullåŒºåˆ†ï¼Œéƒ½è¿”å›object</p><h4 id="2-instanceof"><a href="#2-instanceof" class="headerlink" title="2.instanceof"></a>2.instanceof</h4><pre><code>console.log(1 instanceof Number);            // falseconsole.log(true instanceof Boolean);        // falseconsole.log(&#39;str&#39; instanceof String);        // false console.log([] instanceof Array);            // trueconsole.log(function ()&#123;&#125; instanceof Function);    // trueconsole.log(&#123;&#125; instanceof Object);           // true</code></pre><p>ä¼˜ç‚¹ï¼šèƒ½å¤ŸåŒºåˆ†Arrayã€Objectå’ŒFunctionï¼Œé€‚åˆç”¨äºåˆ¤æ–­è‡ªå®šä¹‰çš„ç±»å®ä¾‹å¯¹è±¡</p><p>ç¼ºç‚¹ï¼šNumberï¼ŒBooleanï¼ŒStringåŸºæœ¬æ•°æ®ç±»å‹ä¸èƒ½åˆ¤æ–­</p><h4 id="3-Object-prototype-toString-call"><a href="#3-Object-prototype-toString-call" class="headerlink" title="3.Object.prototype.toString.call()"></a>3.Object.prototype.toString.call()</h4><pre><code>var toString = Object.prototype.toString;console.log(toString.call(1));           //[object Number]console.log(toString.call(true));          //[object Boolean]console.log(toString.call(&#39;mc&#39;));          //[object String]console.log(toString.call([]));           //[object Array]console.log(toString.call(&#123;&#125;));           //[object Object]console.log(toString.call(function ()&#123;&#125;));      //[object Function]console.log(toString.call(undefined));       //[object Undefined]console.log(toString.call(null));          //[object Null]</code></pre><p>ä¼˜ç‚¹ï¼šç²¾å‡†åˆ¤æ–­æ•°æ®ç±»å‹</p><p>ç¼ºç‚¹ï¼šå†™æ³•ç¹çä¸å®¹æ˜“è®°ï¼Œæ¨èè¿›è¡Œå°è£…åä½¿ç”¨</p><h3 id="var-amp-amp-let-amp-amp-const"><a href="#var-amp-amp-let-amp-amp-const" class="headerlink" title="var &amp;&amp; let &amp;&amp; const"></a>var &amp;&amp; let &amp;&amp; const</h3><p>ES6ä¹‹å‰åˆ›å»ºå˜é‡ç”¨çš„æ˜¯var,ä¹‹ååˆ›å»ºå˜é‡ç”¨çš„æ˜¯let/const</p><p><strong>ä¸‰è€…åŒºåˆ«</strong>ï¼š</p><ol><li>varå®šä¹‰çš„å˜é‡ï¼Œ<code>æ²¡æœ‰å—çš„æ¦‚å¿µï¼Œå¯ä»¥è·¨å—è®¿é—®</code>, ä¸èƒ½è·¨å‡½æ•°è®¿é—®ã€‚<br>letå®šä¹‰çš„å˜é‡ï¼Œåªèƒ½åœ¨å—ä½œç”¨åŸŸé‡Œè®¿é—®ï¼Œä¸èƒ½è·¨å—è®¿é—®ï¼Œä¹Ÿä¸èƒ½è·¨å‡½æ•°è®¿é—®ã€‚<br>constç”¨æ¥å®šä¹‰å¸¸é‡ï¼Œä½¿ç”¨æ—¶å¿…é¡»åˆå§‹åŒ–(å³å¿…é¡»èµ‹å€¼)ï¼Œåªèƒ½åœ¨å—ä½œç”¨åŸŸé‡Œè®¿é—®ï¼Œä¸”ä¸èƒ½ä¿®æ”¹ã€‚</li><li>varå¯ä»¥<code>å…ˆä½¿ç”¨ï¼Œåå£°æ˜</code>ï¼Œå› ä¸ºå­˜åœ¨å˜é‡æå‡ï¼›letå¿…é¡»å…ˆå£°æ˜åä½¿ç”¨ã€‚</li><li>varæ˜¯å…è®¸åœ¨ç›¸åŒä½œç”¨åŸŸå†…<code>é‡å¤å£°æ˜åŒä¸€ä¸ªå˜é‡</code>çš„ï¼Œè€Œletä¸constä¸å…è®¸è¿™ä¸€ç°è±¡ã€‚</li><li>åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­ï¼ŒåŸºäºletå£°æ˜çš„å…¨å±€å˜é‡å’Œå…¨å±€å¯¹è±¡GOï¼ˆwindowï¼‰æ²¡æœ‰ä»»ä½•å…³ç³» ;<br>varå£°æ˜çš„å˜é‡ä¼šå’ŒGOæœ‰æ˜ å°„å…³ç³»ï¼›</li><li><code>ä¼šäº§ç”Ÿæš‚æ—¶æ€§æ­»åŒº</code>ï¼š</li></ol><p>æš‚æ—¶æ€§æ­»åŒºæ˜¯æµè§ˆå™¨çš„bugï¼šæ£€æµ‹ä¸€ä¸ªæœªè¢«å£°æ˜çš„å˜é‡ç±»å‹æ—¶ï¼Œä¸ä¼šæŠ¥é”™ï¼Œä¼šè¿”å›undefined<br>å¦‚ï¼š<code>console.log(typeof a) //undefined</code><br>è€Œï¼š<code>console.log(typeof a)//æœªå£°æ˜ä¹‹å‰ä¸èƒ½ä½¿ç”¨</code><br><code>let a</code></p><ol><li>let /const/functionä¼šæŠŠå½“å‰æ‰€åœ¨çš„å¤§æ‹¬å·(é™¤å‡½æ•°ä¹‹å¤–)ä½œä¸ºä¸€ä¸ªå…¨æ–°çš„å—çº§ä¸Šä¸‹æ–‡ï¼Œåº”ç”¨è¿™ä¸ªæœºåˆ¶ï¼Œåœ¨å¼€å‘é¡¹ç›®çš„æ—¶å€™ï¼Œé‡åˆ°å¾ªç¯äº‹ä»¶ç»‘å®šç­‰ç±»ä¼¼çš„éœ€æ±‚ï¼Œæ— éœ€å†è‡ªå·±æ„å»ºé—­åŒ…æ¥å­˜å‚¨ï¼Œåªè¦åŸºäºletçš„å—ä½œç”¨ç‰¹å¾å³å¯è§£å†³</li></ol><h3 id="JSåƒåœ¾å›æ”¶æœºåˆ¶"><a href="#JSåƒåœ¾å›æ”¶æœºåˆ¶" class="headerlink" title="JSåƒåœ¾å›æ”¶æœºåˆ¶"></a>JSåƒåœ¾å›æ”¶æœºåˆ¶</h3><ol><li>é¡¹ç›®ä¸­ï¼Œå¦‚æœå­˜åœ¨å¤§é‡ä¸è¢«é‡Šæ”¾çš„å†…å­˜ï¼ˆå †/æ ˆ/ä¸Šä¸‹æ–‡ï¼‰ï¼Œé¡µé¢æ€§èƒ½ä¼šå˜å¾—å¾ˆæ…¢ã€‚å½“æŸäº›ä»£ç æ“ä½œä¸èƒ½è¢«åˆç†é‡Šæ”¾ï¼Œå°±ä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚æˆ‘ä»¬å°½å¯èƒ½å‡å°‘ä½¿ç”¨é—­åŒ…ï¼Œå› ä¸ºå®ƒä¼šæ¶ˆè€—å†…å­˜ã€‚</li><li>æµè§ˆå™¨åƒåœ¾å›æ”¶æœºåˆ¶/å†…å­˜å›æ”¶æœºåˆ¶:</li></ol><p>æµè§ˆå™¨çš„Javascriptå…·æœ‰è‡ªåŠ¨åƒåœ¾å›æ”¶æœºåˆ¶(GC:Garbage Collecation)ï¼Œåƒåœ¾æ”¶é›†å™¨ä¼šå®šæœŸï¼ˆå‘¨æœŸæ€§ï¼‰æ‰¾å‡ºé‚£äº›ä¸åœ¨ç»§ç»­ä½¿ç”¨çš„å˜é‡ï¼Œç„¶åé‡Šæ”¾å…¶å†…å­˜ã€‚</p><ol><li><p><strong>æ ‡è®°æ¸…é™¤</strong>:åœ¨<code>js</code>ä¸­ï¼Œæœ€å¸¸ç”¨çš„åƒåœ¾å›æ”¶æœºåˆ¶æ˜¯æ ‡è®°æ¸…é™¤ï¼šå½“å˜é‡è¿›å…¥æ‰§è¡Œç¯å¢ƒæ—¶ï¼Œè¢«æ ‡è®°ä¸ºâ€œè¿›å…¥ç¯å¢ƒâ€ï¼Œå½“å˜é‡ç¦»å¼€æ‰§è¡Œç¯å¢ƒæ—¶ï¼Œä¼šè¢«æ ‡è®°ä¸ºâ€œç¦»å¼€ç¯å¢ƒâ€ã€‚åƒåœ¾å›æ”¶å™¨ä¼šé”€æ¯é‚£äº›å¸¦æ ‡è®°çš„å€¼å¹¶å›æ”¶å®ƒä»¬æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ã€‚<br><strong>è°·æ­Œæµè§ˆå™¨</strong>ï¼šâ€œæŸ¥æ‰¾å¼•ç”¨â€ï¼Œæµè§ˆå™¨ä¸å®šæ—¶å»æŸ¥æ‰¾å½“å‰å†…å­˜çš„å¼•ç”¨ï¼Œå¦‚æœæ²¡æœ‰è¢«å ç”¨äº†ï¼Œæµè§ˆå™¨ä¼šå›æ”¶å®ƒï¼›å¦‚æœè¢«å ç”¨ï¼Œå°±ä¸èƒ½å›æ”¶ã€‚<br><strong>IEæµè§ˆå™¨</strong>ï¼šâ€œå¼•ç”¨è®¡æ•°æ³•â€ï¼Œå½“å‰å†…å­˜è¢«å ç”¨ä¸€æ¬¡ï¼Œè®¡æ•°ç´¯åŠ 1æ¬¡ï¼Œç§»é™¤å ç”¨å°±å‡1ï¼Œå‡åˆ°0æ—¶ï¼Œæµè§ˆå™¨å°±å›æ”¶å®ƒã€‚</p></li><li><p>ä¼˜åŒ–æ‰‹æ®µï¼šå†…å­˜ä¼˜åŒ– ; æ‰‹åŠ¨é‡Šæ”¾ï¼šå–æ¶ˆå†…å­˜çš„å ç”¨å³å¯ã€‚</p><p>ï¼ˆ1ï¼‰å †å†…å­˜ï¼šfn = null ã€nullï¼šç©ºæŒ‡é’ˆå¯¹è±¡ã€‘</p><p>ï¼ˆ2ï¼‰æ ˆå†…å­˜ï¼šæŠŠä¸Šä¸‹æ–‡ä¸­ï¼Œè¢«å¤–éƒ¨å ç”¨çš„å †çš„å ç”¨å–æ¶ˆå³å¯ã€‚</p></li><li><p>å†…å­˜æ³„æ¼</p><p>åœ¨ JS ä¸­ï¼Œå¸¸è§çš„å†…å­˜æ³„éœ²ä¸»è¦æœ‰ 4 ç§,å…¨å±€å˜é‡ã€é—­åŒ…ã€DOM å…ƒç´ çš„å¼•ç”¨ã€å®šæ—¶å™¨</p></li></ol><h3 id="ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾"><a href="#ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾" class="headerlink" title="ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾"></a>ä½œç”¨åŸŸå’Œä½œç”¨åŸŸé“¾</h3><p>åˆ›å»ºå‡½æ•°çš„æ—¶å€™ï¼Œå·²ç»å£°æ˜äº†å½“å‰å‡½æ•°çš„ä½œç”¨åŸŸ==&gt;<code>å½“å‰åˆ›å»ºå‡½æ•°æ‰€å¤„çš„ä¸Šä¸‹æ–‡</code>ã€‚å¦‚æœæ˜¯åœ¨å…¨å±€ä¸‹åˆ›å»ºçš„å‡½æ•°å°±æ˜¯<code>[[scope]]:EC(G)</code>ï¼Œå‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œå½¢æˆä¸€ä¸ªå…¨æ–°çš„ç§æœ‰ä¸Šä¸‹æ–‡<code>EC(FN)</code>ï¼Œä¾›å­—ç¬¦ä¸²ä»£ç æ‰§è¡Œ(è¿›æ ˆæ‰§è¡Œ)</p><p>å®šä¹‰ï¼šç®€å•æ¥è¯´ä½œç”¨åŸŸå°±æ˜¯å˜é‡ä¸å‡½æ•°çš„å¯è®¿é—®èŒƒå›´ï¼Œ<code>ç”±å½“å‰ç¯å¢ƒä¸ä¸Šå±‚ç¯å¢ƒçš„ä¸€ç³»åˆ—å˜é‡å¯¹è±¡ç»„æˆ</code><br>1.å…¨å±€ä½œç”¨åŸŸï¼šä»£ç åœ¨ç¨‹åºçš„ä»»ä½•åœ°æ–¹éƒ½èƒ½è¢«è®¿é—®ï¼Œwindow å¯¹è±¡çš„å†…ç½®å±æ€§éƒ½æ‹¥æœ‰å…¨å±€ä½œç”¨åŸŸã€‚<br>2.å‡½æ•°ä½œç”¨åŸŸï¼šåœ¨å›ºå®šçš„ä»£ç ç‰‡æ®µæ‰èƒ½è¢«è®¿é—®</p><p>ä½œç”¨ï¼šä½œç”¨åŸŸæœ€å¤§çš„ç”¨å¤„å°±æ˜¯<code>éš”ç¦»å˜é‡</code>ï¼Œä¸åŒä½œç”¨åŸŸä¸‹åŒåå˜é‡ä¸ä¼šæœ‰å†²çªã€‚</p><p><strong>ä½œç”¨åŸŸé“¾å‚è€ƒé“¾æ¥</strong>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå˜é‡åˆ° åˆ›å»ºè¯¥å˜é‡ çš„å‡½æ•°çš„ä½œç”¨åŸŸä¸­å–å€¼ã€‚ä½†æ˜¯å¦‚æœåœ¨å½“å‰ä½œç”¨åŸŸä¸­æ²¡æœ‰æŸ¥åˆ°ï¼Œå°±ä¼šå‘ä¸Šçº§ä½œç”¨åŸŸå»æŸ¥ï¼Œç›´åˆ°æŸ¥åˆ°å…¨å±€ä½œç”¨åŸŸï¼Œè¿™ä¹ˆä¸€ä¸ªæŸ¥æ‰¾è¿‡ç¨‹å½¢æˆçš„é“¾æ¡å°±å«åšä½œç”¨åŸŸé“¾ã€‚</p><h3 id="é—­åŒ…çš„ä¸¤å¤§ä½œç”¨ï¼šä¿å­˜-ä¿æŠ¤"><a href="#é—­åŒ…çš„ä¸¤å¤§ä½œç”¨ï¼šä¿å­˜-ä¿æŠ¤" class="headerlink" title="é—­åŒ…çš„ä¸¤å¤§ä½œç”¨ï¼šä¿å­˜/ä¿æŠ¤"></a>é—­åŒ…çš„ä¸¤å¤§ä½œç”¨ï¼šä¿å­˜/ä¿æŠ¤</h3><ul><li><p><strong>é—­åŒ…çš„æ¦‚å¿µ</strong></p><p>å‡½æ•°æ‰§è¡Œæ—¶å½¢æˆçš„ç§æœ‰ä¸Šä¸‹æ–‡EC(FN)ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œä»£ç æ‰§è¡Œå®Œä¼šå‡ºæ ˆåé‡Šæ”¾;ä½†æ˜¯ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œå¦‚æœå½“å‰ç§æœ‰ä¸Šä¸‹æ–‡ä¸­çš„æŸä¸ªä¸œè¥¿è¢«ä¸Šä¸‹æ–‡ä»¥å¤–çš„äº‹ç‰©å ç”¨äº†ï¼Œåˆ™ä¸Šä¸‹æ–‡ä¸ä¼šå‡ºæ ˆé‡Šæ”¾ï¼Œä»è€Œå½¢æˆä¸é”€æ¯çš„ä¸Šä¸‹æ–‡ã€‚ å‡½æ•°æ‰§è¡Œå‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šå½¢æˆä¸€ä¸ªå…¨æ–°çš„ç§æœ‰ä¸Šä¸‹æ–‡ï¼Œå¯èƒ½ä¼šè¢«é‡Šæ”¾ï¼Œå¯èƒ½ä¸ä¼šè¢«é‡Šæ”¾ï¼Œä¸è®ºé‡Šæ”¾ä¸å¦ï¼Œä»–çš„ä½œç”¨æ˜¯ï¼š</p></li></ul><p>ï¼ˆ1ï¼‰ä¿æŠ¤ï¼šåˆ’åˆ†ä¸€ä¸ªç‹¬ç«‹çš„ä»£ç æ‰§è¡ŒåŒºåŸŸï¼Œåœ¨è¿™ä¸ªåŒºåŸŸä¸­æœ‰è‡ªå·±ç§æœ‰å˜é‡å­˜å‚¨çš„ç©ºé—´ï¼Œä¿æŠ¤è‡ªå·±çš„ç§æœ‰å˜é‡ä¸å—å¤–ç•Œå¹²æ‰°ï¼ˆæ“ä½œè‡ªå·±çš„ç§æœ‰å˜é‡å’Œå¤–ç•Œæ²¡æœ‰å…³ç³»ï¼‰ï¼›</p><p>ï¼ˆ2ï¼‰ä¿å­˜ï¼šå¦‚æœå½“å‰ä¸Šä¸‹æ–‡ä¸è¢«é‡Šæ”¾ã€åªè¦ä¸Šä¸‹æ–‡ä¸­çš„æŸä¸ªä¸œè¥¿è¢«å¤–éƒ¨å ç”¨å³å¯ã€‘ï¼Œåˆ™å­˜å‚¨çš„è¿™äº›ç§æœ‰å˜é‡ä¹Ÿä¸ä¼šè¢«é‡Šæ”¾ï¼Œå¯ä»¥ä¾›å…¶ä¸‹çº§ä¸Šä¸‹æ–‡ä¸­è°ƒå–ä½¿ç”¨ï¼Œç›¸å½“äºæŠŠä¸€äº›å€¼ä¿å­˜èµ·æ¥äº†ï¼›</p><p>æˆ‘ä»¬æŠŠå‡½æ•°æ‰§è¡Œå½¢æˆç§æœ‰ä¸Šä¸‹æ–‡ï¼Œæ¥ä¿æŠ¤å’Œä¿å­˜ç§æœ‰å˜é‡æœºåˆ¶ç§°ä¸º<code>é—­åŒ…</code>ã€‚</p><p><code>é—­åŒ…æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°--ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹</code></p><p><strong>ç¨å…¨é¢çš„å›ç­”</strong>ï¼š åœ¨jsä¸­å˜é‡çš„ä½œç”¨åŸŸå±äºå‡½æ•°ä½œç”¨åŸŸ, åœ¨å‡½æ•°æ‰§è¡Œå®Œå,ä½œç”¨åŸŸå°±ä¼šè¢«æ¸…ç†,å†…å­˜ä¹Ÿä¼šéšä¹‹è¢«å›æ”¶,ä½†æ˜¯ç”±äºé—­åŒ…å‡½æ•°æ˜¯å»ºç«‹åœ¨å‡½æ•°å†…éƒ¨çš„å­å‡½æ•°, ç”±äºå…¶å¯è®¿é—®ä¸Šçº§ä½œç”¨åŸŸ,å³ä½¿ä¸Šçº§å‡½æ•°æ‰§è¡Œå®Œ, ä½œç”¨åŸŸä¹Ÿä¸ä¼šéšä¹‹é”€æ¯, è¿™æ—¶çš„å­å‡½æ•°(ä¹Ÿå°±æ˜¯é—­åŒ…),ä¾¿æ‹¥æœ‰äº†è®¿é—®ä¸Šçº§ä½œç”¨åŸŸä¸­å˜é‡çš„æƒé™,å³ä½¿ä¸Šçº§å‡½æ•°æ‰§è¡Œå®Œåä½œç”¨åŸŸå†…çš„å€¼ä¹Ÿä¸ä¼šè¢«é”€æ¯ã€‚</p><ul><li><p><strong>é—­åŒ…çš„ç‰¹æ€§</strong>ï¼š</p><ul><li><p>1ã€å†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å®šä¹‰ä»–ä»¬å¤–éƒ¨å‡½æ•°çš„å‚æ•°å’Œå˜é‡ã€‚(ä½œç”¨åŸŸé“¾çš„å‘ä¸ŠæŸ¥æ‰¾ï¼ŒæŠŠå¤–å›´çš„ä½œç”¨åŸŸä¸­çš„å˜é‡å€¼å­˜å‚¨åœ¨å†…å­˜ä¸­è€Œä¸æ˜¯åœ¨å‡½æ•°è°ƒç”¨å®Œæ¯•åé”€æ¯)è®¾è®¡ç§æœ‰çš„æ–¹æ³•å’Œå˜é‡ï¼Œé¿å…å…¨å±€å˜é‡çš„æ±¡æŸ“ã€‚</p><p>1.1.é—­åŒ…æ˜¯å¯†é—­çš„å®¹å™¨ï¼Œï¼Œç±»ä¼¼äºsetã€mapå®¹å™¨ï¼Œå­˜å‚¨æ•°æ®çš„</p><p>1.2.é—­åŒ…æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå­˜æ”¾æ•°æ®çš„æ ¼å¼ä¸º key-value å½¢å¼</p></li><li><p>2ã€å‡½æ•°åµŒå¥—å‡½æ•°</p></li><li><p>3ã€æœ¬è´¨æ˜¯å°†å‡½æ•°å†…éƒ¨å’Œå¤–éƒ¨è¿æ¥èµ·æ¥ã€‚ä¼˜ç‚¹æ˜¯å¯ä»¥è¯»å–å‡½æ•°å†…éƒ¨çš„å˜é‡ï¼Œè®©è¿™äº›å˜é‡çš„å€¼å§‹ç»ˆä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œä¸ä¼šåœ¨å‡½æ•°è¢«è°ƒç”¨ä¹‹åè‡ªåŠ¨æ¸…é™¤</p></li></ul></li><li><p><strong>é—­åŒ…å½¢æˆçš„æ¡ä»¶</strong>ï¼š</p><ol><li>å‡½æ•°çš„åµŒå¥—</li><li>å†…éƒ¨å‡½æ•°å¼•ç”¨å¤–éƒ¨å‡½æ•°çš„å±€éƒ¨å˜é‡ï¼Œå»¶é•¿å¤–éƒ¨å‡½æ•°çš„å˜é‡ç”Ÿå‘½å‘¨æœŸ</li></ol></li><li><p><strong>é—­åŒ…çš„ç”¨é€”</strong>ï¼š</p><ol><li>æ¨¡ä»¿å—çº§ä½œç”¨åŸŸ</li><li>ä¿æŠ¤å¤–éƒ¨å‡½æ•°çš„å˜é‡ èƒ½å¤Ÿè®¿é—®å‡½æ•°å®šä¹‰æ—¶æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸ(é˜»æ­¢å…¶è¢«å›æ”¶)</li><li>å°è£…ç§æœ‰åŒ–å˜é‡</li><li>åˆ›å»ºæ¨¡å—</li></ol></li><li><p><strong>é—­åŒ…åº”ç”¨åœºæ™¯</strong></p><p>é—­åŒ…çš„ä¸¤ä¸ªåœºæ™¯ï¼Œé—­åŒ…çš„ä¸¤å¤§ä½œç”¨ï¼š<code>ä¿å­˜/ä¿æŠ¤</code>ã€‚ åœ¨å¼€å‘ä¸­, å…¶å®æˆ‘ä»¬éšå¤„å¯è§é—­åŒ…çš„èº«å½±, å¤§éƒ¨åˆ†å‰ç«¯JavaScript ä»£ç éƒ½æ˜¯â€œäº‹ä»¶é©±åŠ¨â€çš„,å³ä¸€ä¸ªäº‹ä»¶ç»‘å®šçš„å›è°ƒæ–¹æ³•; å‘é€ajaxè¯·æ±‚æˆåŠŸ|å¤±è´¥çš„å›è°ƒ;setTimeoutçš„å»¶æ—¶å›è°ƒ;æˆ–è€…ä¸€ä¸ªå‡½æ•°å†…éƒ¨è¿”å›å¦ä¸€ä¸ªåŒ¿åå‡½æ•°,è¿™äº›éƒ½æ˜¯é—­åŒ…çš„åº”ç”¨ã€‚</p></li><li><p><strong>é—­åŒ…çš„ä¼˜ç‚¹</strong>ï¼šå»¶é•¿å±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸ</p></li><li><p><strong>é—­åŒ…ç¼ºç‚¹</strong>ï¼šä¼šå¯¼è‡´å‡½æ•°çš„å˜é‡ä¸€ç›´ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè¿‡å¤šçš„é—­åŒ…å¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼</p></li></ul><h3 id="JS-ä¸­-this-çš„äº”ç§æƒ…å†µ"><a href="#JS-ä¸­-this-çš„äº”ç§æƒ…å†µ" class="headerlink" title="JS ä¸­ this çš„äº”ç§æƒ…å†µ"></a>JS ä¸­ this çš„äº”ç§æƒ…å†µ</h3><ol><li>ä½œä¸ºæ™®é€šå‡½æ•°æ‰§è¡Œæ—¶ï¼Œ<code>this</code>æŒ‡å‘<code>window</code>ã€‚</li><li>å½“å‡½æ•°ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œ<code>this</code>å°±ä¼šæŒ‡å‘<code>è¯¥å¯¹è±¡</code>ã€‚</li><li>æ„é€ å™¨è°ƒç”¨ï¼Œ<code>this</code>æŒ‡å‘<code>è¿”å›çš„è¿™ä¸ªå¯¹è±¡</code>ã€‚</li><li>ç®­å¤´å‡½æ•° ç®­å¤´å‡½æ•°çš„<code>this</code>ç»‘å®šçœ‹çš„æ˜¯<code>thisæ‰€åœ¨å‡½æ•°å®šä¹‰åœ¨å“ªä¸ªå¯¹è±¡ä¸‹</code>ï¼Œå°±ç»‘å®šå“ªä¸ªå¯¹è±¡ã€‚å¦‚æœæœ‰åµŒå¥—çš„æƒ…å†µï¼Œåˆ™thisç»‘å®šåˆ°æœ€è¿‘çš„ä¸€å±‚å¯¹è±¡ä¸Šã€‚</li><li>åŸºäºFunction.prototypeä¸Šçš„ <code>apply ã€ call å’Œ bind </code>è°ƒç”¨æ¨¡å¼ï¼Œè¿™ä¸‰ä¸ªæ–¹æ³•éƒ½å¯ä»¥æ˜¾ç¤ºçš„æŒ‡å®šè°ƒç”¨å‡½æ•°çš„ this æŒ‡å‘ã€‚<code>apply</code>æ¥æ”¶å‚æ•°çš„æ˜¯æ•°ç»„ï¼Œ<code>call</code>æ¥å—å‚æ•°åˆ—è¡¨ï¼Œ`` bind<code>æ–¹æ³•é€šè¿‡ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ª</code> this <code>ç»‘å®šäº†ä¼ å…¥å¯¹è±¡çš„æ–°å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°çš„ </code>this<code>æŒ‡å‘é™¤äº†ä½¿ç”¨</code>new `æ—¶ä¼šè¢«æ”¹å˜ï¼Œå…¶ä»–æƒ…å†µä¸‹éƒ½ä¸ä¼šæ”¹å˜ã€‚è‹¥ä¸ºç©ºé»˜è®¤æ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡windowã€‚</li></ol><h3 id="åŸå‹-amp-amp-åŸå‹é“¾"><a href="#åŸå‹-amp-amp-åŸå‹é“¾" class="headerlink" title="åŸå‹ &amp;&amp; åŸå‹é“¾"></a>åŸå‹ &amp;&amp; åŸå‹é“¾</h3><p><strong>åŸå‹å…³ç³»ï¼š</strong></p><ul><li>æ¯ä¸ª classéƒ½æœ‰æ˜¾ç¤ºåŸå‹ prototype</li><li>æ¯ä¸ªå®ä¾‹éƒ½æœ‰éšå¼åŸå‹ _ proto_</li><li>å®ä¾‹çš„_ proto_æŒ‡å‘å¯¹åº” class çš„ prototype</li></ul><p>â€Œ<strong>åŸå‹:</strong> åœ¨ JS ä¸­ï¼Œæ¯å½“å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼ˆå‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼‰æ—¶ï¼Œå¯¹è±¡ä¸­éƒ½ä¼šåŒ…å«ä¸€äº›é¢„å®šä¹‰çš„å±æ€§ã€‚å…¶ä¸­æ¯ä¸ª<code>å‡½æ•°å¯¹è±¡</code>éƒ½æœ‰ä¸€ä¸ª<code>prototype</code> å±æ€§ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘å‡½æ•°çš„<code>åŸå‹å¯¹è±¡</code>ã€‚</p><p>åŸå‹é“¾ï¼šå‡½æ•°çš„åŸå‹é“¾å¯¹è±¡constructoré»˜è®¤æŒ‡å‘å‡½æ•°æœ¬èº«ï¼ŒåŸå‹å¯¹è±¡é™¤äº†æœ‰åŸå‹å±æ€§å¤–ï¼Œä¸ºäº†å®ç°ç»§æ‰¿ï¼Œè¿˜æœ‰ä¸€ä¸ªåŸå‹é“¾æŒ‡é’ˆ__proto__,è¯¥æŒ‡é’ˆæ˜¯æŒ‡å‘ä¸Šä¸€å±‚çš„åŸå‹å¯¹è±¡ï¼Œè€Œä¸Šä¸€å±‚çš„åŸå‹å¯¹è±¡çš„ç»“æ„ä¾ç„¶ç±»ä¼¼ã€‚å› æ­¤å¯ä»¥åˆ©ç”¨__proto__ä¸€ç›´æŒ‡å‘Objectçš„åŸå‹å¯¹è±¡ä¸Šï¼Œè€ŒObjectåŸå‹å¯¹è±¡ç”¨Object.prototype.__ proto__ = nullè¡¨ç¤ºåŸå‹é“¾é¡¶ç«¯ã€‚å¦‚æ­¤å½¢æˆäº†jsçš„åŸå‹é“¾ç»§æ‰¿ã€‚åŒæ—¶æ‰€æœ‰çš„jså¯¹è±¡éƒ½æœ‰Objectçš„åŸºæœ¬é˜²èŒƒ</p><p><strong>ç‰¹ç‚¹:</strong> <code>JavaScript</code>å¯¹è±¡æ˜¯é€šè¿‡å¼•ç”¨æ¥ä¼ é€’çš„ï¼Œæˆ‘ä»¬åˆ›å»ºçš„æ¯ä¸ªæ–°å¯¹è±¡å®ä½“ä¸­å¹¶æ²¡æœ‰ä¸€ä»½å±äºè‡ªå·±çš„åŸå‹å‰¯æœ¬ã€‚å½“æˆ‘ä»¬ä¿®æ”¹åŸå‹æ—¶ï¼Œä¸ä¹‹ç›¸å…³çš„å¯¹è±¡ä¹Ÿä¼šç»§æ‰¿è¿™ä¸€æ”¹å˜ã€‚</p><h3 id="newè¿ç®—ç¬¦çš„å®ç°æœºåˆ¶"><a href="#newè¿ç®—ç¬¦çš„å®ç°æœºåˆ¶" class="headerlink" title="newè¿ç®—ç¬¦çš„å®ç°æœºåˆ¶"></a>newè¿ç®—ç¬¦çš„å®ç°æœºåˆ¶</h3><ol><li>é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„<code>ç©ºå¯¹è±¡</code></li><li><code>è®¾ç½®åŸå‹</code>ï¼Œå°†å¯¹è±¡çš„åŸå‹è®¾ç½®ä¸ºå‡½æ•°çš„<code>prototype</code>å¯¹è±¡ã€‚</li><li>è®©å‡½æ•°çš„<code>this</code>æŒ‡å‘è¿™ä¸ªå¯¹è±¡ï¼Œæ‰§è¡Œæ„é€ å‡½æ•°çš„ä»£ç ï¼ˆä¸ºè¿™ä¸ªæ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼‰</li><li>åˆ¤æ–­å‡½æ•°çš„è¿”å›å€¼ç±»å‹ï¼Œå¦‚æœæ˜¯å€¼ç±»å‹ï¼Œè¿”å›åˆ›å»ºçš„å¯¹è±¡ã€‚å¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œå°±è¿”å›è¿™ä¸ªå¼•ç”¨ç±»å‹çš„å¯¹è±¡ã€‚</li></ol><h3 id="EventLoop-äº‹ä»¶å¾ªç¯"><a href="#EventLoop-äº‹ä»¶å¾ªç¯" class="headerlink" title="EventLoop äº‹ä»¶å¾ªç¯"></a>EventLoop äº‹ä»¶å¾ªç¯</h3><p><code>JSæ˜¯å•çº¿ç¨‹çš„ï¼Œä¸ºäº†é˜²æ­¢ä¸€ä¸ªå‡½æ•°æ‰§è¡Œæ—¶é—´è¿‡é•¿é˜»å¡åé¢çš„ä»£ç ï¼Œæ‰€ä»¥ä¼šå…ˆå°†åŒæ­¥ä»£ç å‹å…¥æ‰§è¡Œæ ˆä¸­ï¼Œä¾æ¬¡æ‰§è¡Œï¼Œå°†å¼‚æ­¥ä»£ç æ¨å…¥å¼‚æ­¥é˜Ÿåˆ—ï¼Œå¼‚æ­¥é˜Ÿåˆ—åˆåˆ†ä¸ºå®ä»»åŠ¡é˜Ÿåˆ—å’Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå› ä¸ºå®ä»»åŠ¡é˜Ÿåˆ—çš„æ‰§è¡Œæ—¶é—´è¾ƒé•¿ï¼Œæ‰€ä»¥å¾®ä»»åŠ¡é˜Ÿåˆ—è¦ä¼˜å…ˆäºå®ä»»åŠ¡é˜Ÿåˆ—ã€‚å¾®ä»»åŠ¡é˜Ÿåˆ—çš„ä»£è¡¨å°±æ˜¯ï¼Œ</code>Promise.then<code>ï¼Œ</code>MutationObserver<code>ï¼Œå®ä»»åŠ¡çš„è¯å°±æ˜¯setImmediate setTimeout setInterval</code></p><p>JSè¿è¡Œçš„ç¯å¢ƒã€‚ä¸€èˆ¬ä¸ºæµè§ˆå™¨æˆ–è€…Nodeã€‚ åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œæœ‰JS å¼•æ“çº¿ç¨‹å’Œæ¸²æŸ“çº¿ç¨‹ï¼Œä¸”ä¸¤ä¸ªçº¿ç¨‹äº’æ–¥ã€‚ Nodeç¯å¢ƒä¸­ï¼Œåªæœ‰JS çº¿ç¨‹ã€‚ ä¸åŒç¯å¢ƒæ‰§è¡Œæœºåˆ¶æœ‰å·®å¼‚ï¼Œä¸åŒä»»åŠ¡è¿›å…¥ä¸åŒEvent Queueé˜Ÿåˆ—ã€‚ å½“ä¸»ç¨‹ç»“æŸï¼Œå…ˆæ‰§è¡Œå‡†å¤‡å¥½å¾®ä»»åŠ¡ï¼Œç„¶åå†æ‰§è¡Œå‡†å¤‡å¥½çš„å®ä»»åŠ¡ï¼Œä¸€ä¸ªè½®è¯¢ç»“æŸã€‚</p><h4 id="æµè§ˆå™¨ä¸­çš„äº‹ä»¶ç¯ï¼ˆEvent-Loop"><a href="#æµè§ˆå™¨ä¸­çš„äº‹ä»¶ç¯ï¼ˆEvent-Loop" class="headerlink" title="æµè§ˆå™¨ä¸­çš„äº‹ä»¶ç¯ï¼ˆEvent Loop)"></a><strong>æµè§ˆå™¨ä¸­çš„äº‹ä»¶ç¯ï¼ˆEvent Loop)</strong></h4><p>äº‹ä»¶ç¯çš„è¿è¡Œæœºåˆ¶æ˜¯ï¼Œå…ˆä¼šæ‰§è¡Œæ ˆä¸­çš„å†…å®¹ï¼Œæ ˆä¸­çš„å†…å®¹æ‰§è¡Œåæ‰§è¡Œå¾®ä»»åŠ¡ï¼Œå¾®ä»»åŠ¡æ¸…ç©ºåå†æ‰§è¡Œå®ä»»åŠ¡ï¼Œå…ˆå–å‡ºä¸€ä¸ªå®ä»»åŠ¡ï¼Œå†å»æ‰§è¡Œå¾®ä»»åŠ¡ï¼Œç„¶ååœ¨å–å®ä»»åŠ¡æ¸…å¾®ä»»åŠ¡è¿™æ ·ä¸åœçš„å¾ªç¯ã€‚</p><ul><li>eventLoop æ˜¯ç”±JSçš„å®¿ä¸»ç¯å¢ƒï¼ˆæµè§ˆå™¨ï¼‰æ¥å®ç°çš„ï¼›</li><li>äº‹ä»¶å¾ªç¯å¯ä»¥ç®€å•çš„æè¿°ä¸ºä»¥ä¸‹å››ä¸ªæ­¥éª¤:<ol><li>å‡½æ•°å…¥æ ˆï¼Œå½“Stackä¸­æ‰§è¡Œåˆ°å¼‚æ­¥ä»»åŠ¡çš„æ—¶å€™ï¼Œå°±å°†ä»–ä¸¢ç»™WebAPIs,æ¥ç€æ‰§è¡ŒåŒæ­¥ä»»åŠ¡,ç›´åˆ°Stackä¸ºç©ºï¼›</li><li>æ­¤æœŸé—´WebAPIså®Œæˆè¿™ä¸ªäº‹ä»¶ï¼ŒæŠŠå›è°ƒå‡½æ•°æ”¾å…¥é˜Ÿåˆ—ä¸­ç­‰å¾…æ‰§è¡Œï¼ˆå¾®ä»»åŠ¡æ”¾åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå®ä»»åŠ¡æ”¾åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼‰</li><li>æ‰§è¡Œæ ˆä¸ºç©ºæ—¶ï¼ŒEvent LoopæŠŠå¾®ä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œæ¸…ç©ºï¼›</li><li>å¾®ä»»åŠ¡é˜Ÿåˆ—æ¸…ç©ºåï¼Œè¿›å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå–é˜Ÿåˆ—çš„ç¬¬ä¸€é¡¹ä»»åŠ¡æ”¾å…¥Stack(æ ˆï¼‰ä¸­æ‰§è¡Œï¼Œæ‰§è¡Œå®Œæˆåï¼ŒæŸ¥çœ‹å¾®ä»»åŠ¡é˜Ÿåˆ—æ˜¯å¦æœ‰ä»»åŠ¡ï¼Œæœ‰çš„è¯ï¼Œæ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚é‡å¤4ï¼Œç»§ç»­ä»å®ä»»åŠ¡ä¸­å–ä»»åŠ¡æ‰§è¡Œï¼Œæ‰§è¡Œå®Œæˆä¹‹åï¼Œç»§ç»­æ¸…ç©ºå¾®ä»»åŠ¡ï¼Œå¦‚æ­¤åå¤å¾ªç¯ï¼Œç›´è‡³æ¸…ç©ºæ‰€æœ‰çš„ä»»åŠ¡ã€‚</li></ol></li></ul><p>æµè§ˆå™¨ä¸­çš„ä»»åŠ¡æº(task):</p><ul><li><code>å®ä»»åŠ¡(macrotask)</code>ï¼š<br>å®¿ä¸»ç¯å¢ƒæä¾›çš„ï¼Œæ¯”å¦‚æµè§ˆå™¨<br>ajaxã€setTimeoutã€setIntervalã€setTmmediate(åªå…¼å®¹ie)ã€scriptã€requestAnimationFrameã€messageChannelã€UIæ¸²æŸ“ã€ä¸€äº›æµè§ˆå™¨api</li><li><code>å¾®ä»»åŠ¡(microtask)</code>ï¼š<br>è¯­è¨€æœ¬èº«æä¾›çš„ï¼Œæ¯”å¦‚promise.then<br>thenã€queueMicrotask(åŸºäºthen)ã€mutationObserver(æµè§ˆå™¨æä¾›)ã€messageChannel ã€mutationObersve</li></ul><h3 id="ä»‹ç»èŠ‚æµé˜²æŠ–åŸç†ã€åŒºåˆ«ä»¥åŠåº”ç”¨"><a href="#ä»‹ç»èŠ‚æµé˜²æŠ–åŸç†ã€åŒºåˆ«ä»¥åŠåº”ç”¨" class="headerlink" title="ä»‹ç»èŠ‚æµé˜²æŠ–åŸç†ã€åŒºåˆ«ä»¥åŠåº”ç”¨"></a>ä»‹ç»èŠ‚æµé˜²æŠ–åŸç†ã€åŒºåˆ«ä»¥åŠåº”ç”¨</h3><p><code>èŠ‚æµ</code>ï¼šäº‹ä»¶è§¦å‘åï¼Œè§„å®šæ—¶é—´å†…ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°ä¸èƒ½å†æ¬¡è¢«è°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨è§„å®šçš„æ—¶é—´å†…ï¼Œå‡½æ•°åªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡ï¼Œä¸”æ˜¯æœ€å…ˆè¢«è§¦å‘è°ƒç”¨çš„é‚£æ¬¡ã€‚</p><p><code>é˜²æŠ–</code>ï¼šå¤šæ¬¡è§¦å‘äº‹ä»¶ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°åªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼Œå¹¶ä¸”æ˜¯åœ¨è§¦å‘æ“ä½œç»“æŸæ—¶æ‰§è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä¸€ä¸ªäº‹ä»¶è¢«è§¦å‘å‡†å¤‡æ‰§è¡Œäº‹ä»¶å‡½æ•°å‰ï¼Œä¼šç­‰å¾…ä¸€å®šçš„æ—¶é—´ï¼ˆè¿™æ—¶é—´æ˜¯ç å†œè‡ªå·±å»å®šä¹‰çš„ï¼Œæ¯”å¦‚ 1 ç§’ï¼‰ï¼Œå¦‚æœæ²¡æœ‰å†æ¬¡è¢«è§¦å‘ï¼Œé‚£ä¹ˆå°±æ‰§è¡Œï¼Œå¦‚æœè¢«è§¦å‘äº†ï¼Œé‚£å°±æœ¬æ¬¡ä½œåºŸï¼Œé‡æ–°ä»æ–°è§¦å‘çš„æ—¶é—´å¼€å§‹è®¡ç®—ï¼Œå¹¶å†æ¬¡ç­‰å¾… 1 ç§’ï¼Œç›´åˆ°èƒ½æœ€ç»ˆæ‰§è¡Œï¼</p><p><code>ä½¿ç”¨åœºæ™¯</code>ï¼š<br>èŠ‚æµï¼šæ»šåŠ¨åŠ è½½æ›´å¤šã€æœç´¢æ¡†æœçš„ç´¢è”æƒ³åŠŸèƒ½ã€é«˜é¢‘ç‚¹å‡»ã€è¡¨å•é‡å¤æäº¤â€¦â€¦<br>é˜²æŠ–ï¼šæœç´¢æ¡†æœç´¢è¾“å…¥ï¼Œå¹¶åœ¨è¾“å…¥å®Œä»¥åè‡ªåŠ¨æœç´¢ã€æ‰‹æœºå·ï¼Œé‚®ç®±éªŒè¯è¾“å…¥æ£€æµ‹ã€çª—å£å¤§å° resize å˜åŒ–åï¼Œå†é‡æ–°æ¸²æŸ“ã€‚</p><pre><code>/** * èŠ‚æµå‡½æ•° ä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸€æ¬¡åï¼Œåªæœ‰å¤§äºè®¾å®šçš„æ‰§è¡Œå‘¨æœŸæ‰ä¼šæ‰§è¡Œç¬¬äºŒæ¬¡ã€‚æœ‰ä¸ªéœ€è¦é¢‘ç¹è§¦å‘çš„å‡½æ•°ï¼Œå‡ºäºä¼˜åŒ–æ€§èƒ½çš„è§’åº¦ï¼Œåœ¨è§„å®šæ—¶é—´å†…ï¼Œåªè®©å‡½æ•°è§¦å‘çš„ç¬¬ä¸€æ¬¡ç”Ÿæ•ˆï¼Œåé¢çš„ä¸ç”Ÿæ•ˆã€‚ * @param fnè¦è¢«èŠ‚æµçš„å‡½æ•° * @param delayè§„å®šçš„æ—¶é—´ */function throttle(fn, delay) &#123;    //è®°å½•ä¸Šä¸€æ¬¡å‡½æ•°è§¦å‘çš„æ—¶é—´    var lastTime = 0;    return function()&#123;        //è®°å½•å½“å‰å‡½æ•°è§¦å‘çš„æ—¶é—´        var nowTime = Date.now();        if(nowTime - lastTime &gt; delay)&#123;            //ä¿®æ­£thisæŒ‡å‘é—®é¢˜            fn.call(this);            //åŒæ­¥æ‰§è¡Œç»“æŸæ—¶é—´            lastTime = nowTime;        &#125;    &#125;&#125;document.onscroll = throttle(function () &#123;    console.log(&#39;sclloräº‹ä»¶è¢«è§¦å‘äº†&#39; + Date.now());&#125;, 200); /** * é˜²æŠ–å‡½æ•°  ä¸€ä¸ªéœ€è¦é¢‘ç¹è§¦å‘çš„å‡½æ•°ï¼Œåœ¨è§„å®šæ—¶é—´å†…ï¼Œåªè®©æœ€åä¸€æ¬¡ç”Ÿæ•ˆï¼Œå‰é¢çš„ä¸ç”Ÿæ•ˆ * @param fnè¦è¢«èŠ‚æµçš„å‡½æ•° * @param delayè§„å®šçš„æ—¶é—´ */function debounce(fn, delay) &#123;    //è®°å½•ä¸Šä¸€æ¬¡çš„å»¶æ—¶å™¨    var timer = null;    return function () &#123;       //æ¸…é™¤ä¸Šä¸€æ¬¡çš„æ¼”ç¤ºå™¨        clearTimeout(timer);        //é‡æ–°è®¾ç½®æ–°çš„å»¶æ—¶å™¨        timer = setTimeout(function()&#123;            //ä¿®æ­£thisæŒ‡å‘é—®é¢˜            fn.apply(this);        &#125;, delay);    &#125;&#125;document.getElementById(&#39;btn&#39;).onclick = debounce(function () &#123;    console.log(&#39;æŒ‰é’®è¢«ç‚¹å‡»äº†&#39; + Date.now());&#125;, 1000);</code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>13 è¡Œ JavaScript ä»£ç è®©ä½ çœ‹èµ·æ¥åƒæ˜¯é«˜æ‰‹</title>
      <link href="/2022/06/22/article21/"/>
      <url>/2022/06/22/article21/</url>
      
        <content type="html"><![CDATA[<p>JavaScript å¯ä»¥åšè®¸å¤šç¥å¥‡çš„äº‹æƒ…ï¼Œä¹Ÿæœ‰å¾ˆå¤šä¸œè¥¿éœ€è¦å­¦ä¹ ï¼Œä»Šå¤©æˆ‘ä»¬ä»‹ç»å‡ ä¸ªçŸ­å°ç²¾æ‚çš„ä»£ç æ®µã€‚</p><h3 id="è·å–éšæœºå¸ƒå°”å€¼ï¼ˆTrue-Falseï¼‰"><a href="#è·å–éšæœºå¸ƒå°”å€¼ï¼ˆTrue-Falseï¼‰" class="headerlink" title="è·å–éšæœºå¸ƒå°”å€¼ï¼ˆTrue/Falseï¼‰"></a>è·å–éšæœºå¸ƒå°”å€¼ï¼ˆTrue/Falseï¼‰</h3><p>ä½¿ç”¨ <code>Math.random()</code> ä¼šè¿”å› 0 åˆ° 1 çš„éšæœºæ•°ï¼Œä¹‹ååˆ¤æ–­å®ƒæ˜¯å¦å¤§äº 0.5ï¼Œå°†ä¼šå¾—åˆ°ä¸€ä¸ª 50% æ¦‚ç‡ä¸º <code>True</code> æˆ– <code>False</code> çš„å€¼</p><pre><code>const randomBoolean = () =&gt; Math.random() &gt;= 0.5;console.log(randomBoolean());</code></pre><h3 id="åˆ¤æ–­ä¸€ä¸ªæ—¥æœŸæ˜¯å¦æ˜¯å·¥ä½œæ—¥"><a href="#åˆ¤æ–­ä¸€ä¸ªæ—¥æœŸæ˜¯å¦æ˜¯å·¥ä½œæ—¥" class="headerlink" title="åˆ¤æ–­ä¸€ä¸ªæ—¥æœŸæ˜¯å¦æ˜¯å·¥ä½œæ—¥"></a>åˆ¤æ–­ä¸€ä¸ªæ—¥æœŸæ˜¯å¦æ˜¯å·¥ä½œæ—¥</h3><pre><code>const isWeekday = (date) =&gt; date.getDay() % 6 !== 0;console.log(isWeekday(new Date(2021, 0, 11)));// Result: true (å‘¨ä¸€)console.log(isWeekday(new Date(2021, 0, 10)));// Result: false (å‘¨æ—¥)</code></pre><h3 id="åè½¬å­—ç¬¦ä¸²"><a href="#åè½¬å­—ç¬¦ä¸²" class="headerlink" title="åè½¬å­—ç¬¦ä¸²"></a>åè½¬å­—ç¬¦ä¸²</h3><p>æœ‰è®¸å¤šåè½¬å­—ç¬¦ä¸²çš„æ–¹æ³•ï¼Œè¿™é‡Œä½¿ç”¨ä¸€ç§æœ€ç®€å•çš„ï¼Œä½¿ç”¨äº† <code>split()</code>ï¼Œ<code>reverse()</code> å’Œ <code>join()</code></p><pre><code>const reverse = str =&gt; str.split(&#39;&#39;).reverse().join(&#39;&#39;);reverse(&#39;hello world&#39;);// Result: &#39;dlrow olleh&#39;</code></pre><h3 id="åˆ¤æ–­å½“å‰æ ‡ç­¾é¡µæ˜¯å¦ä¸ºå¯è§†çŠ¶æ€"><a href="#åˆ¤æ–­å½“å‰æ ‡ç­¾é¡µæ˜¯å¦ä¸ºå¯è§†çŠ¶æ€" class="headerlink" title="åˆ¤æ–­å½“å‰æ ‡ç­¾é¡µæ˜¯å¦ä¸ºå¯è§†çŠ¶æ€"></a>åˆ¤æ–­å½“å‰æ ‡ç­¾é¡µæ˜¯å¦ä¸ºå¯è§†çŠ¶æ€</h3><p>æµè§ˆå™¨å¯ä»¥æ‰“å¼€å¾ˆå¤šæ ‡ç­¾é¡µï¼Œä¸‹é¢ ğŸ‘‡ğŸ» çš„ä»£ç æ®µå°±æ˜¯åˆ¤æ–­å½“å‰æ ‡ç­¾é¡µæ˜¯å¦æ˜¯æ¿€æ´»çš„æ ‡ç­¾é¡µ</p><pre><code>const isBrowserTabInView = () =&gt; document.hidden;isBrowserTabInView();</code></pre><h3 id="åˆ¤æ–­æ•°å­—ä¸ºå¥‡æ•°æˆ–è€…å¶æ•°"><a href="#åˆ¤æ–­æ•°å­—ä¸ºå¥‡æ•°æˆ–è€…å¶æ•°" class="headerlink" title="åˆ¤æ–­æ•°å­—ä¸ºå¥‡æ•°æˆ–è€…å¶æ•°"></a>åˆ¤æ–­æ•°å­—ä¸ºå¥‡æ•°æˆ–è€…å¶æ•°</h3><p>å–æ¨¡è¿ç®—ç¬¦ <code>%</code> å¯ä»¥å¾ˆå¥½åœ°å®Œæˆè¿™ä¸ªä»»åŠ¡</p><pre><code>const isEven = num =&gt; num % 2 === 0;console.log(isEven(2));// Result: trueconsole.log(isEven(3));// Result: false</code></pre><h3 id="ä»-Date-å¯¹è±¡ä¸­è·å–æ—¶é—´"><a href="#ä»-Date-å¯¹è±¡ä¸­è·å–æ—¶é—´" class="headerlink" title="ä» Date å¯¹è±¡ä¸­è·å–æ—¶é—´"></a>ä» Date å¯¹è±¡ä¸­è·å–æ—¶é—´</h3><p>ä½¿ç”¨ <code>Date</code> å¯¹è±¡çš„ <code>.toTimeString()</code> æ–¹æ³•è½¬æ¢ä¸ºæ—¶é—´å­—ç¬¦ä¸²ï¼Œä¹‹åæˆªå–å­—ç¬¦ä¸²å³å¯</p><pre><code>const timeFromDate = date =&gt; date.toTimeString().slice(0, 8);console.log(timeFromDate(new Date(2021, 0, 10, 17, 30, 0)));// Result: &quot;17:30:00&quot;console.log(timeFromDate(new Date()));// Result: è¿”å›å½“å‰æ—¶é—´</code></pre><h3 id="ä¿ç•™æŒ‡å®šçš„å°æ•°ä½"><a href="#ä¿ç•™æŒ‡å®šçš„å°æ•°ä½" class="headerlink" title="ä¿ç•™æŒ‡å®šçš„å°æ•°ä½"></a>ä¿ç•™æŒ‡å®šçš„å°æ•°ä½</h3><pre><code>const toFixed = (n, fixed) =&gt; ~~(Math.pow(10, fixed) * n) / Math.pow(10, fixed);// ExamplestoFixed(25.198726354, 1);       // 25.1toFixed(25.198726354, 2);       // 25.19toFixed(25.198726354, 3);       // 25.198toFixed(25.198726354, 4);       // 25.1987toFixed(25.198726354, 5);       // 25.19872toFixed(25.198726354, 6);       // 25.198726</code></pre><h3 id="æ£€æŸ¥æŒ‡å®šå…ƒç´ æ˜¯å¦å¤„äºèšç„¦çŠ¶æ€"><a href="#æ£€æŸ¥æŒ‡å®šå…ƒç´ æ˜¯å¦å¤„äºèšç„¦çŠ¶æ€" class="headerlink" title="æ£€æŸ¥æŒ‡å®šå…ƒç´ æ˜¯å¦å¤„äºèšç„¦çŠ¶æ€"></a>æ£€æŸ¥æŒ‡å®šå…ƒç´ æ˜¯å¦å¤„äºèšç„¦çŠ¶æ€</h3><p>å¯ä»¥ä½¿ç”¨ <code>document.activeElement</code> æ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦å¤„äºèšç„¦çŠ¶æ€</p><pre><code>const elementIsInFocus = (el) =&gt; (el === document.activeElement);elementIsInFocus(anyElement)// Result: å¦‚æœå¤„äºç„¦ç‚¹çŠ¶æ€ä¼šè¿”å› True å¦åˆ™è¿”å› False</code></pre><h3 id="æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦æ”¯æŒè§¦æ‘¸äº‹ä»¶"><a href="#æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦æ”¯æŒè§¦æ‘¸äº‹ä»¶" class="headerlink" title="æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦æ”¯æŒè§¦æ‘¸äº‹ä»¶"></a>æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦æ”¯æŒè§¦æ‘¸äº‹ä»¶</h3><pre><code>const touchSupported = () =&gt; &#123;  (&#39;ontouchstart&#39; in window || window.DocumentTouch &amp;&amp; document instanceof window.DocumentTouch);&#125;console.log(touchSupported());// Result: å¦‚æœæ”¯æŒè§¦æ‘¸äº‹ä»¶ä¼šè¿”å› True å¦åˆ™è¿”å› False</code></pre><h3 id="æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦æ˜¯è‹¹æœè®¾å¤‡"><a href="#æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦æ˜¯è‹¹æœè®¾å¤‡" class="headerlink" title="æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦æ˜¯è‹¹æœè®¾å¤‡"></a>æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦æ˜¯è‹¹æœè®¾å¤‡</h3><p>å¯ä»¥ä½¿ç”¨ <code>navigator.platform</code> åˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦æ˜¯è‹¹æœè®¾å¤‡</p><pre><code>const isAppleDevice = /Mac|iPod|iPhone|iPad/.test(navigator.platform);console.log(isAppleDevice);// Result: æ˜¯è‹¹æœè®¾å¤‡ä¼šè¿”å› True</code></pre><h3 id="æ»šåŠ¨è‡³é¡µé¢é¡¶éƒ¨"><a href="#æ»šåŠ¨è‡³é¡µé¢é¡¶éƒ¨" class="headerlink" title="æ»šåŠ¨è‡³é¡µé¢é¡¶éƒ¨"></a>æ»šåŠ¨è‡³é¡µé¢é¡¶éƒ¨</h3><p><code>window.scrollTo()</code> ä¼šæ»šåŠ¨è‡³æŒ‡å®šçš„åæ ‡ï¼Œå¦‚æœè®¾ç½®åæ ‡ä¸ºï¼ˆ0ï¼Œ0ï¼‰ï¼Œå°±ä¼šå›åˆ°é¡µé¢é¡¶éƒ¨</p><pre><code>const goToTop = () =&gt; window.scrollTo(0, 0);goToTop();// Result: å°†ä¼šæ»šåŠ¨è‡³é¡¶éƒ¨</code></pre><h3 id="è·å–æ‰€æœ‰å‚æ•°çš„å¹³å‡å€¼"><a href="#è·å–æ‰€æœ‰å‚æ•°çš„å¹³å‡å€¼" class="headerlink" title="è·å–æ‰€æœ‰å‚æ•°çš„å¹³å‡å€¼"></a>è·å–æ‰€æœ‰å‚æ•°çš„å¹³å‡å€¼</h3><p>å¯ä»¥ä½¿ç”¨ <code>reduce()</code> å‡½æ•°æ¥è®¡ç®—æ‰€æœ‰å‚æ•°çš„å¹³å‡å€¼</p><pre><code>const average = (...args) =&gt; args.reduce((a, b) =&gt; a + b) / args.length;average(1, 2, 3, 4);// Result: 2.5</code></pre><h3 id="è½¬æ¢åæ°-æ‘„æ°"><a href="#è½¬æ¢åæ°-æ‘„æ°" class="headerlink" title="è½¬æ¢åæ°/æ‘„æ°"></a>è½¬æ¢åæ°/æ‘„æ°</h3><p>å†ä¹Ÿä¸æ€•å¤„ç†æ¸©åº¦å•ä½äº†ï¼Œä¸‹é¢ä¸¤ä¸ªå‡½æ•°æ˜¯ä¸¤ä¸ªæ¸©åº¦å•ä½çš„ç›¸äº’è½¬æ¢ã€‚</p><pre><code>const celsiusToFahrenheit = (celsius) =&gt; celsius * 9/5 + 32;const fahrenheitToCelsius = (fahrenheit) =&gt; (fahrenheit - 32) * 5/9;// ExamplescelsiusToFahrenheit(15);    // 59celsiusToFahrenheit(0);     // 32celsiusToFahrenheit(-20);   // -4fahrenheitToCelsius(59);    // 15fahrenheitToCelsius(32);    // 0</code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> è½¬è½½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue2ä¸vue3</title>
      <link href="/2022/06/04/article20/"/>
      <url>/2022/06/04/article20/</url>
      
        <content type="html"><![CDATA[<h2 id="1-å…¨å±€å±æ€§"><a href="#1-å…¨å±€å±æ€§" class="headerlink" title="1. å…¨å±€å±æ€§"></a>1. å…¨å±€å±æ€§</h2><h4 id="1-0-1-vue2"><a href="#1-0-1-vue2" class="headerlink" title="1.0.1. vue2"></a>1.0.1. vue2</h4><ul><li>å¯¹äºä¸€äº›ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œvue2 ä¸­é€šå¸¸ä½¿ç”¨ prototype åŸå‹æ¥æŒ‚è½½åˆ° vue å¯¹è±¡ä¸­</li></ul><p><code>import Vue from &#39;vue&#39;</code><br><code>Vue.prototype.$http=Axiox</code><br><code>Vue.prototype.$echart= Echart</code></p><h4 id="1-0-2-vue3"><a href="#1-0-2-vue3" class="headerlink" title="1.0.2. vue3"></a>1.0.2. vue3</h4><ul><li><p>vue3 ä¸­æä¾›äº†ä¸€ä¸ªåä¸º<code>globalProperties</code>çš„å…¨å±€å±æ€§é…ç½®ï¼Œå¯ä»¥ä»£æ›¿ vue2 ä¸­çš„ prototype</p><p><code>app.config.globalProperties.$http = Axios</code><br><code>app.config.globalProperties.$echart = Echart</code></p></li><li><p>ä½¿ç”¨$http</p><p>import {getCurrentInstance} from â€˜vueâ€™<br>setup () {<br>const { ctx } = getCurrentInstance();<br>onMounted(() =&gt; {<br>console.log(ctx.$http)<br>})<br>â€¦â€¦.<br>}</p></li></ul><h2 id="2-ref-ä¸-v-for-çš„ç”Ÿæˆ"><a href="#2-ref-ä¸-v-for-çš„ç”Ÿæˆ" class="headerlink" title="2. ref ä¸ v-for çš„ç”Ÿæˆ"></a>2. ref ä¸ v-for çš„ç”Ÿæˆ</h2><h4 id="2-0-1-vue2"><a href="#2-0-1-vue2" class="headerlink" title="2.0.1. vue2"></a>2.0.1. vue2</h4><p>vue2 ä¸­ v-for ä¸ ref ä¸€èµ·ä½¿ç”¨ï¼Œæ‰¹é‡æ¨¡æ¿å¼•ç”¨çš„æ—¶å€™ï¼Œè·å–çš„ ref ä¸ºä¸€ä¸ªæ•°ç»„</p><pre><code>&lt;div v-for=&quot;i in 3&quot; ref=&quot;setItemRef&quot; :key=&quot;i&quot;&gt;&#123;&#123;i&#125;&#125;&lt;/div&gt; //è¿™é‡Œæ˜¯æ•°ç»„mounted() &#123;      console.log(this.$refs.setItemRef)&#125;,</code></pre><h4 id="2-0-2-vue3"><a href="#2-0-2-vue3" class="headerlink" title="2.0.2. vue3"></a>2.0.2. vue3</h4><p>vue3 ä¸­ ref ç»‘å®šçš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œ</p><pre><code>&lt;div v-for=&quot;item in 3&quot; :ref=&quot;setItemRef&quot;&gt;&lt;/div&gt; //è¿™é‡Œç»‘å®šçš„æ˜¯å‡½æ•°setup()&#123;    let itemRefs = []    const setItemRef = el =&gt; &#123;    itemRefs.push(el)    &#125;    onMounted(() =&gt; &#123;        console.log(itemRefs)    &#125;)&#125;</code></pre><p>äºŒè€…è·å– ref çš„ dom æ–¹å¼æœ‰å˜åŒ–ï¼Œä½†æ˜¯è·å–çš„ç»“æœç›¸åŒ</p><p><a href="https://gitee.com/baifangzi/blogimage/raw/master/img/image-20201218175111169.png"><img src="https://gitee.com/baifangzi/blogimage/raw/master/img/image-20201218175111169.png"></a></p><h2 id="3-å¼‚æ­¥ç»„ä»¶"><a href="#3-å¼‚æ­¥ç»„ä»¶" class="headerlink" title="3. å¼‚æ­¥ç»„ä»¶"></a>3. å¼‚æ­¥ç»„ä»¶</h2><p>åœ¨è·¯ç”±ä¸­ï¼Œå¸¸å¸¸ä½¿ç”¨æ‡’åŠ è½½çš„æ–¹å¼æ¥å¼•å…¥ç»„ä»¶</p><h4 id="3-0-1-vue2"><a href="#3-0-1-vue2" class="headerlink" title="3.0.1. vue2"></a>3.0.1. vue2</h4><p><code>component: () =&gt; import(&#39;@/views/homePage/index.vue&#39;),</code></p><h4 id="3-0-2-vue3"><a href="#3-0-2-vue3" class="headerlink" title="3.0.2. vue3"></a>3.0.2. vue3</h4><p>åœ¨ vue3 ä¸­å¼•å…¥äº†ä¸€ä¸ªæ–°çš„æ–¹æ³• â€”&gt;<code>defineAsyncComponent</code>å®šä¹‰å¼‚æ­¥ç»„ä»¶ï¼Œæ¥åŒ…è£¹ vue2 å¼•å…¥æ–¹å¼é‡Œé¢çš„å†…å®¹</p><p><code>import &#123; defineAsyncComponent &#125; from &#39;vue&#39;</code><br><code>component: defineAsyncComponent(() =&gt; import(&#39;./NextPage.vue&#39;))</code></p><h2 id="4-è‡ªå®šä¹‰æŒ‡ä»¤"><a href="#4-è‡ªå®šä¹‰æŒ‡ä»¤" class="headerlink" title="4. è‡ªå®šä¹‰æŒ‡ä»¤"></a>4. è‡ªå®šä¹‰æŒ‡ä»¤</h2><h3 id="4-1-æ”¹å˜é’©å­å‡½æ•°çš„å‘½å"><a href="#4-1-æ”¹å˜é’©å­å‡½æ•°çš„å‘½å" class="headerlink" title="4.1. æ”¹å˜é’©å­å‡½æ•°çš„å‘½å"></a>4.1. æ”¹å˜é’©å­å‡½æ•°çš„å‘½å</h3><h4 id="4-1-1-vue2"><a href="#4-1-1-vue2" class="headerlink" title="4.1.1. vue2"></a>4.1.1. vue2</h4><p>vue2 ä¸­ç»‘å®šçš„é’©å­å‡½æ•°ä¸º</p><ul><li><strong>bind</strong> - æŒ‡ä»¤ç»‘å®šåˆ°å…ƒç´ åå‘ç”Ÿã€‚åªå‘ç”Ÿä¸€æ¬¡ã€‚</li><li><strong>inserted</strong> - å…ƒç´ æ’å…¥çˆ¶ DOM åå‘ç”Ÿã€‚</li><li><strong>update</strong> - å½“å…ƒç´ æ›´æ–°ï¼Œä½†å­å…ƒç´ å°šæœªæ›´æ–°æ—¶ï¼Œå°†è°ƒç”¨æ­¤é’©å­ã€‚</li><li><strong>componentUpdated</strong> - ä¸€æ—¦ç»„ä»¶å’Œå­çº§è¢«æ›´æ–°ï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸ªé’©å­ã€‚</li><li><strong>unbind</strong> - ä¸€æ—¦æŒ‡ä»¤è¢«ç§»é™¤ï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸ªé’©å­ã€‚ä¹Ÿåªè°ƒç”¨ä¸€æ¬¡ã€‚</li></ul><h4 id="4-1-2-vue3"><a href="#4-1-2-vue3" class="headerlink" title="4.1.2. vue3"></a>4.1.2. vue3</h4><p>å°†é’©å­å‡½æ•°çš„å‘½åä¸ç”Ÿå‘½å‘¨æœŸçš„é’©å­å‡½æ•°å‘½åç›¸ä¸€è‡´</p><ul><li>bind â†’ <strong>beforeMount</strong></li><li>inserted â†’ <strong>mounted</strong></li><li><strong>beforeUpdate</strong>ï¼šæ–°çš„ï¼è¿™æ˜¯åœ¨å…ƒç´ æœ¬èº«æ›´æ–°ä¹‹å‰è°ƒç”¨çš„ï¼Œå¾ˆåƒç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚</li><li>componentUpdated â†’ <strong>updated</strong></li><li><strong>beforeUnmount</strong>ï¼šæ–°çš„ï¼ä¸ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­ç±»ä¼¼ï¼Œå®ƒå°†åœ¨å¸è½½å…ƒç´ ä¹‹å‰è°ƒç”¨ã€‚</li><li>unbind -&gt; <strong>unmounted</strong></li></ul><h3 id="4-2-åœ¨é’©å­å‡½æ•°ä¸­å¼•ç”¨ç»„ä»¶å®ä¾‹çš„æ–¹å¼"><a href="#4-2-åœ¨é’©å­å‡½æ•°ä¸­å¼•ç”¨ç»„ä»¶å®ä¾‹çš„æ–¹å¼" class="headerlink" title="4.2. åœ¨é’©å­å‡½æ•°ä¸­å¼•ç”¨ç»„ä»¶å®ä¾‹çš„æ–¹å¼"></a>4.2. åœ¨é’©å­å‡½æ•°ä¸­å¼•ç”¨ç»„ä»¶å®ä¾‹çš„æ–¹å¼</h3><p>æŸäº›æƒ…å†µä¸‹éœ€è¦å»è·å–ç»„ä»¶ä¸­å®ä¾‹çš„æŸäº›å±æ€§</p><h4 id="4-2-1-vue2"><a href="#4-2-1-vue2" class="headerlink" title="4.2.1. vue2"></a>4.2.1. vue2</h4><ul><li>éœ€è¦é€šè¿‡ vnod æ¥è·å–å®ä¾‹</li></ul><pre><code>Vue.directive(&#39;has&#39;, &#123;inserted: (el, binding, vnode) =&gt; checkPermission(el, binding, vnode),&#125;);export const checkPermission = (el, binding, vnode) =&gt; &#123;    const permissionArr = vnode.context.$store.state.permissionId //æ‰€æ‹¥æœ‰çš„æ‰€æœ‰æƒé™ id&#125;</code></pre><h4 id="4-2-2-vue3"><a href="#4-2-2-vue3" class="headerlink" title="4.2.2. vue3"></a>4.2.2. vue3</h4><ul><li>ä» binding ä¸­å»è·å–å¯¹è±¡</li></ul><pre><code>export const checkPermission = (el, binding, vnode) =&gt; &#123;const permissionArr =binding.instance.$store.state.permissionId //æ‰€æ‹¥æœ‰çš„æ‰€æœ‰æƒé™ id&#125;</code></pre><h4 id="4-2-3-v-bind-â€-attrsâ€"><a href="#4-2-3-v-bind-â€-attrsâ€" class="headerlink" title="4.2.3. v-bind=â€$attrsâ€"></a>4.2.3. v-bind=â€$attrsâ€</h4><h2 id="5-è‡ªå®šä¹‰å…ƒç´ å…ƒç´ çš„äº¤äº’"><a href="#5-è‡ªå®šä¹‰å…ƒç´ å…ƒç´ çš„äº¤äº’" class="headerlink" title="5. è‡ªå®šä¹‰å…ƒç´ å…ƒç´ çš„äº¤äº’"></a>5. è‡ªå®šä¹‰å…ƒç´ å…ƒç´ çš„äº¤äº’</h2><h3 id="5-1-is-çš„ç”¨æ³•"><a href="#5-1-is-çš„ç”¨æ³•" class="headerlink" title="5.1. is çš„ç”¨æ³•"></a>5.1. is çš„ç”¨æ³•</h3><h4 id="5-1-1-vue2"><a href="#5-1-1-vue2" class="headerlink" title="5.1.1. vue2"></a>5.1.1. vue2</h4><ul><li>ç»„ä»¶ï¼š</li></ul><p><code>&lt;component :is=&quot;currentTabComponent&quot;&gt;&lt;/component&gt;</code></p><ul><li><p>html æ ‡ç­¾</p>  <table>    <tr is="blog-post-row"></tr>  </table></li></ul><h4 id="5-1-2-vue3"><a href="#5-1-2-vue3" class="headerlink" title="5.1.2. vue3"></a>5.1.2. vue3</h4><ul><li>ç»„ä»¶</li></ul><p><code>&lt;component is=&quot;currentTabComponent&quot;&gt;&lt;/component&gt;</code></p><ul><li><p>html æ ‡ç­¾</p>  <table>    <tr v-is="'blog-post-row'"></tr>  // v-isç±»ä¼¼ç»‘å®šä¸€ä¸ªå˜é‡ï¼Œè€Œæˆ‘ä»¬éœ€è¦ç»„ä»¶åï¼Œä¸ºå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ç”¨å•å¼•å·åŒ…è£¹  </table></li></ul><h2 id="6-äº‹ä»¶"><a href="#6-äº‹ä»¶" class="headerlink" title="6. äº‹ä»¶"></a>6. äº‹ä»¶</h2><ul><li>vue3 ä¸­å»é™¤äº† <code>$on</code>ã€<code>$off</code>ã€<code>$once</code>ã€ä¸‰ç§æ–¹æ³•ï¼Œä»…ä¿ç•™<code>$emit</code>ã€‚</li></ul><h2 id="7-è¿‡æ»¤å™¨"><a href="#7-è¿‡æ»¤å™¨" class="headerlink" title="7. è¿‡æ»¤å™¨"></a>7. è¿‡æ»¤å™¨</h2><p>vue3 ä¸­ç§»é™¤äº†è¿‡æ»¤å™¨çš„åŠŸèƒ½ï¼Œå»ºè®®ä½¿ç”¨ methods æˆ–è€… computed æ¥ä»£æ›¿ï¼Œå®é™…ä¸Šåœ¨ vue2 ä¸­ä¹Ÿå®Œå…¨å¯ä»¥è¿™ä¸¤ç§æ–¹å¼å®ç°</p><h3 id="7-1-å±€éƒ¨è¿‡æ»¤å™¨"><a href="#7-1-å±€éƒ¨è¿‡æ»¤å™¨" class="headerlink" title="7.1. å±€éƒ¨è¿‡æ»¤å™¨"></a>7.1. å±€éƒ¨è¿‡æ»¤å™¨</h3><h4 id="7-1-1-vue2"><a href="#7-1-1-vue2" class="headerlink" title="7.1.1. vue2"></a>7.1.1. vue2</h4><pre><code>&lt;p&gt;&#123;&#123;message|toLower&#125;&#125;&lt;/p&gt;data() &#123;    return &#123;    message: &#39;ABC&#39;    &#125;&#125;,filters: &#123;    toLower(value) &#123;        return value.toLowerCase()    &#125;&#125;</code></pre><h4 id="7-1-2-vue3"><a href="#7-1-2-vue3" class="headerlink" title="7.1.2. vue3"></a>7.1.2. vue3</h4><ul><li><p>vue3 ç”¨ computed æˆ–è€… methods æ¥å®šä¹‰</p><p>  <code>&lt;p&gt;&#123;&#123;messageToLower&#125;&#125;&lt;/p&gt;</code></p></li></ul><pre><code>import &#123;        computed,    ref,    &#125; from &#39;vue&#39;;setup()&#123;    let message = ref(&#39;ABC&#39;)    let messageToLower = computed(() =&gt; &#123;        // console.log(message)        return message.value.toLowerCase()    &#125;)    return&#123;        messageToLower,    &#125;&#125;</code></pre><h3 id="7-2-å…¨å±€è¿‡æ»¤å™¨"><a href="#7-2-å…¨å±€è¿‡æ»¤å™¨" class="headerlink" title="7.2. å…¨å±€è¿‡æ»¤å™¨"></a>7.2. å…¨å±€è¿‡æ»¤å™¨</h3><h4 id="7-2-1-vue2"><a href="#7-2-1-vue2" class="headerlink" title="7.2.1. vue2"></a>7.2.1. vue2</h4><pre><code>Vue.filter(&#39;toLower&#39;,  (value)=&gt; &#123;    return value.toLowerCase()&#125;)</code></pre><h4 id="7-2-2-vue3"><a href="#7-2-2-vue3" class="headerlink" title="7.2.2. vue3"></a>7.2.2. vue3</h4><ul><li><p>åœ¨ main.js ä¸­æ³¨å†Œ</p><p>const app =createApp(App)<br>app.config.globalProperties.$filter={<br>toLower(value){<br>return value.toLowerCase()<br>}<br>}</p></li><li><p>ä½¿ç”¨</p></li></ul><p><code>&lt;p&gt;&#123;&#123;$filters.toLower(message)&#125;&#125;&lt;/p&gt;</code></p><h2 id="8-æ ¹èŠ‚ç‚¹"><a href="#8-æ ¹èŠ‚ç‚¹" class="headerlink" title="8. æ ¹èŠ‚ç‚¹"></a>8. æ ¹èŠ‚ç‚¹</h2><h4 id="8-0-1-vue2"><a href="#8-0-1-vue2" class="headerlink" title="8.0.1. vue2"></a>8.0.1. vue2</h4><ul><li><p>vue2 çš„ <code>template</code>ä¸­åªèƒ½å­˜åœ¨ä¸€ä¸ªæ ¹èŠ‚ç‚¹</p>  <template>    <div id="app">        ...    </div>  </template></li></ul><h4 id="8-0-2-vue3"><a href="#8-0-2-vue3" class="headerlink" title="8.0.2. vue3"></a>8.0.2. vue3</h4><ul><li><p>vue3 ä¸­å¯ä»¥å­˜åœ¨å¤šä¸ªèŠ‚ç‚¹</p>  <template>    <div>...</div>    <a>...</a>    <p>...</p>  </template></li></ul><h2 id="9-å†…è”æ¨¡æ¿"><a href="#9-å†…è”æ¨¡æ¿" class="headerlink" title="9. å†…è”æ¨¡æ¿"></a>9. å†…è”æ¨¡æ¿</h2><h4 id="9-0-1-vue2"><a href="#9-0-1-vue2" class="headerlink" title="9.0.1. vue2"></a>9.0.1. vue2</h4><ul><li><p>åˆ©ç”¨ inline-template å±æ€§</p></li><li><p>åœ¨ vue2 ä¸­æ–‡æ¡£æç¤ºäº†è¿™ä¹ˆä¸€æ®µè¯ï¼Œæ‰€ä»¥å‡ ä¹æ²¡æœ‰ç”¨è¿‡</p><p>ä¸è¿‡ï¼Œ<code>inline-template</code> ä¼šè®©æ¨¡æ¿çš„ä½œç”¨åŸŸå˜å¾—æ›´åŠ éš¾ä»¥ç†è§£ã€‚æ‰€ä»¥ä½œä¸ºæœ€ä½³å®è·µï¼Œè¯·åœ¨ç»„ä»¶å†…ä¼˜å…ˆé€‰æ‹© <code>template</code> é€‰é¡¹æˆ– <code>.vue</code> æ–‡ä»¶é‡Œçš„ä¸€ä¸ª <code>&lt;template&gt;</code> å…ƒç´ æ¥å®šä¹‰æ¨¡æ¿ã€‚&gt;</p></li></ul><h4 id="9-0-2-vue3"><a href="#9-0-2-vue3" class="headerlink" title="9.0.2. vue3"></a>9.0.2. vue3</h4><p>ç§»é™¤äº†æ­¤åŠŸèƒ½ï¼Œ</p><h2 id="10-å”¯ä¸€çš„-key"><a href="#10-å”¯ä¸€çš„-key" class="headerlink" title="10. å”¯ä¸€çš„ key"></a>10. å”¯ä¸€çš„ key</h2><h3 id="10-1-v-if-ä¸­çš„-key"><a href="#10-1-v-if-ä¸­çš„-key" class="headerlink" title="10.1. v-if ä¸­çš„ key"></a>10.1. v-if ä¸­çš„ key</h3><h4 id="10-1-1-vue2"><a href="#10-1-1-vue2" class="headerlink" title="10.1.1. vue2"></a>10.1.1. vue2</h4><ul><li><p>åœ¨ vue2 ä¸­ï¼Œv-ifï¼Œv-else ä¸­çš„ key æ˜¯ä¸ºäº†æ§åˆ¶æŸä¸ªç»„ä»¶æˆ–è€…å…ƒç´ çš„å¤ç”¨</p></li><li><p>ä¸å¸¦ key çš„è¯ä¼šå¤ç”¨ï¼Œ**&lt; hello-world &gt;**ç»„ä»¶åªåˆ›å»ºä¸€æ¬¡</p>  <template v-if="loginType === 'username'">     <hello-world title="username"></hello-world>  </template>  <template v-else>     <hello-world title="email"></hello-world>  </template>  <button @click="changeType">åˆ‡æ¢</button></li><li><p>å¸¦ key çš„è¯æ¯æ¬¡åˆ‡æ¢éƒ½ä¼šé‡æ–°å»æ¸²æŸ“ç»„ä»¶ï¼ˆå‰ææ˜¯ key ä¸åŒï¼‰</p>  <template v-if="loginType === 'username'">      <hello-world title="username" key="a"></hello-world>  </template>  <template v-else>      <hello-world title="email" key="b"></hello-world>  </template>  <button @click="changeType">åˆ‡æ¢</button></li></ul><h4 id="10-1-2-vue3"><a href="#10-1-2-vue3" class="headerlink" title="10.1.2. vue3"></a>10.1.2. vue3</h4><p>vue3 ä¸­é»˜è®¤æ˜¯å¸¦æœ‰ key çš„ï¼Œè¿™ä¸ª key å§‹ç»ˆä¿æŒå”¯ä¸€ï¼Œä¸å…¶ä»–çš„ key ä¸åŒï¼Œä¸èƒ½é€šè¿‡æ•…æ„ä½¿ç”¨ç›¸åŒçš„ <code>key</code> æ¥å¼ºåˆ¶é‡ç”¨åˆ†æ”¯ã€‚</p><pre><code>&lt;div v-if=&quot;condition&quot;&gt;Yes&lt;/div&gt;&lt;div v-else&gt;No&lt;/div&gt;</code></pre><h3 id="10-2-template-ä¸­-v-for-çš„-key"><a href="#10-2-template-ä¸­-v-for-çš„-key" class="headerlink" title="10.2. template ä¸­ v-for çš„ key"></a>10.2. template ä¸­ v-for çš„ key</h3><h4 id="10-2-1-vue2"><a href="#10-2-1-vue2" class="headerlink" title="10.2.1. vue2"></a>10.2.1. vue2</h4><p>vue2 ä¸­ï¼Œåœ¨ template æ ‡ç­¾ä¸Šï¼Œå¯ä»¥ä½¿ç”¨ v-for æŒ‡ä»¤ï¼Œä½†æ˜¯ä¸èƒ½ç»‘å®š keyï¼Œåªèƒ½åœ¨å­èŠ‚ç‚¹ä¸Šé¢å»ç»‘å®šå”¯ä¸€çš„ key</p><pre><code>&lt;template v-for=&quot;item in list&quot;&gt;  &lt;div :key=&quot;item.id&quot;&gt;...&lt;/div&gt;&lt;/template&gt;</code></pre><h4 id="10-2-2-vue3"><a href="#10-2-2-vue3" class="headerlink" title="10.2.2. vue3"></a>10.2.2. vue3</h4><p>vue3 ä¸­å¯ä»¥å°† key ç»‘å®šåˆ° template ä¸Š</p><pre><code>&lt;template v-for=&quot;item in list&quot; :key=&quot;item.id&quot;&gt;  &lt;div&gt;...&lt;/div&gt;&lt;/template&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webapck</title>
      <link href="/2022/05/26/article19/"/>
      <url>/2022/05/26/article19/</url>
      
        <content type="html"><![CDATA[<h4 id="æ­å»ºç¯å¢ƒ"><a href="#æ­å»ºç¯å¢ƒ" class="headerlink" title="æ­å»ºç¯å¢ƒ"></a>æ­å»ºç¯å¢ƒ</h4><p>npm init åˆå§‹åŒ–é¡¹ç›®<br><code>npm i -D snabbdom å®‰è£…</code><br><code>npm i -D webpack@5 webpack-cli@3 webpack-dev-server@3 </code></p><h4 id="ç®€å•ä»‹ç»"><a href="#ç®€å•ä»‹ç»" class="headerlink" title="ç®€å•ä»‹ç»"></a>ç®€å•ä»‹ç»</h4><p>snabbdom æ˜¯ä¸€ä¸ª DOM åº“.[é‡è¦]<br>ä¸èƒ½å¤Ÿç›´æ¥è¿è¡Œåœ¨ Node ç¯å¢ƒä¸­ï¼Œ<br>æˆ‘ä»¬éœ€è¦æ­å»ºä¸€ä¸ª webpack å’Œ webpack-dev-server çš„å¼€å‘ç¯å¢ƒ<br>éœ€è¦æ³¨æ„çš„æ˜¯å¿…é¡»å®‰è£… webpck5. ä¸èƒ½å¤Ÿå®‰è£… webpack4.<br>å› ä¸º webpck4 ä¸­æ²¡æœ‰è¯»å– exports çš„èƒ½åŠ›å“ˆ<br>ç„¶åå®‰è£…ï¼šç›®çš„æ˜¯æ­å»ºå¼€å‘çš„è¿è¡Œç¯å¢ƒ</p><p><code>npm i -D webpack@5 webpack-cli@3 webpack-dev-server@3 </code><br>è¿™ä¸ªåƒä¸‡ä¸å¿˜è®°é…ç½®å‘€</p><h4 id="åˆ›å»º-webpack-config-æ–‡ä»¶"><a href="#åˆ›å»º-webpack-config-æ–‡ä»¶" class="headerlink" title="åˆ›å»º webpack.config æ–‡ä»¶"></a>åˆ›å»º webpack.config æ–‡ä»¶</h4><pre><code>//è¿™ä¸ªwebpack.configæ–‡ä»¶åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹// å®‰è£…å®˜ç½‘é…ç½®ç›´æ¥å¤åˆ¶ https://webpack.js.org/ ç„¶ååšç®€å•çš„ä¿®æ”¹const path = require(&#39;path&#39;);module.exports = &#123;    // å…¥å£ï¼Œéœ€è¦é ä½ å»åˆ›å»º    entry: &#39;./src/index.js&#39;,    // å‡ºå£    output: &#123;      // path: path.resolve(__dirname, &#39;dist&#39;),      //è™šæ‹Ÿçš„æ‰“åŒ…è·¯å¾„ ä¹Ÿå°±æ˜¯è¯´æ–‡ä»¶å¤¹ä¸ä¼šçœŸæ­£çš„ç”Ÿæˆï¼Œè€Œæ˜¯åœ¨8080ç«¯å£è™šæ‹Ÿç”Ÿæˆçš„      // xuni è¿™ä¸ªä¸ä¼šçœŸæ­£çš„ç”Ÿæˆï¼Œåœ¨å†…å­˜ä¸­ï¼Œæ‰“åŒ…åçš„æ–‡ä»¶åæ˜¯ bundle      publicPath:&#39;xuni&#39;,      filename: &#39;bundle.js&#39;,    &#125;,    &lt;!-- é…ç½®çš„æ˜¯ å¼€å‘æœåŠ¡ --&gt;    devServer: &#123;        port: 8080, //ç«¯å£        // é™æ€èµ„æºæ–‡ä»¶å¤¹,ä½ åˆ›å»ºä¸€ä¸ªï¼Œè·Ÿsrc åŒçº§ï¼Œ        contentBase:&#39;www&#39;    &#125;&#125;;</code></pre><h4 id="éœ€è¦åˆ›å»ºçš„æ–‡ä»¶"><a href="#éœ€è¦åˆ›å»ºçš„æ–‡ä»¶" class="headerlink" title="éœ€è¦åˆ›å»ºçš„æ–‡ä»¶"></a>éœ€è¦åˆ›å»ºçš„æ–‡ä»¶</h4><p>æ ¹æ®ä¸Šé¢çš„é…ç½®è¦æ±‚ã€‚<br>æˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®çš„è·Ÿç›®å½•ä¸‹åˆ›å»º src æ–‡ä»¶å¤¹ï¼Œsrc ä¸‹æœ‰ index.js æ–‡ä»¶<br>æˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®çš„è·Ÿç›®å½•ä¸‹åˆ›å»º www æ–‡ä»¶å¤¹ï¼Œsrc ä¸‹æœ‰ index.html æ–‡ä»¶</p><p>æˆ‘ä»¬åœ¨ index.js æ–‡ä»¶ä¸­å†™<br>console.log(â€œä½ å¥½å•Šï¼Œç¯å¢ƒå·²ç»æ­å»º ok,æˆ‘å¥½é«˜å…´â€)<br>è¿™ä¸ªæ–‡ä»¶æ‰“åŒ…åå¯¹åº”çš„è™šæ‹Ÿæ–‡ä»¶æ˜¯ bundle.js</p><p>æˆ‘ä»¬åœ¨ index.html æ–‡ä»¶ä¸­å†™</p><pre><code>&lt;body&gt;&lt;h1&gt;ä½ å¥½å•Šï¼&lt;/h1&gt;  &lt;!--    è¿™ä¸ªcontainer åœ¨æˆ‘ä»¬ç­‰ä¼šä½¿ç”¨snabbdomçš„æ—¶å€™éœ€è¦ï¼Œ    æˆ‘ä»¬ç°åœ¨å°±å°†ä»–åˆ›å»ºå¥½    --&gt;  &lt;div id=&quot;container&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;!-- bundle.js æ˜¯æˆ‘ä»¬ç”Ÿæˆåœ¨å†…å­˜ä¸­çš„ï¼Œåœ¨ç‰©ç†ä¸Šçœ‹ä¸è§ã€‚ æˆ‘ä»¬ç­‰ä¼šå†™çš„xuni/bundle.js æ˜¯æ‰“åŒ…åçš„ã€‚ å®ƒæ‰“åŒ…å‰çš„æ˜¯ srcä¸‹æœ‰index.jsæ–‡ä»¶ --&gt;&lt;script src=&quot;xuni/bundle.js&quot;&gt;&lt;/script&gt;&lt;/html&gt;</code></pre><h4 id="æ›´æ”¹-package-json-æ–‡ä»¶é…ç½®"><a href="#æ›´æ”¹-package-json-æ–‡ä»¶é…ç½®" class="headerlink" title="æ›´æ”¹ package.json æ–‡ä»¶é…ç½®"></a>æ›´æ”¹ package.json æ–‡ä»¶é…ç½®</h4><p>åœ¨ package.json æ–‡ä»¶ä¸­ã€‚<br>æˆ‘ä»¬éœ€è¦æ›´æ”¹ä¸€ä¸‹é…ç½®</p><pre><code>&quot;scripts&quot;: &#123;&quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;&#125;,æ›´æ”¹ä¸º&quot;scripts&quot;: &#123;&quot;dev&quot;: &quot;webpack-dev-server&quot;&#125;,</code></pre><p>è¿™æ ·æˆ‘ä»¬æ‰§è¡Œ npm run dev å°±ä¼šå°†,<br>æˆ‘ä»¬ä¸‹è½½çš„ webpack-dev-server æœåŠ¡å¯åŠ¨èµ·æ¥</p><h4 id="ç„¶åç®€å•å»èµ°ä¸€ä¸‹-snabbdom-çš„æµç¨‹"><a href="#ç„¶åç®€å•å»èµ°ä¸€ä¸‹-snabbdom-çš„æµç¨‹" class="headerlink" title="ç„¶åç®€å•å»èµ°ä¸€ä¸‹ snabbdom çš„æµç¨‹"></a>ç„¶åç®€å•å»èµ°ä¸€ä¸‹ snabbdom çš„æµç¨‹</h4><p>snabbdom çš„åœ°å€ï¼š<a href="https://github.com/snabbdom/snabbdom">https://github.com/snabbdom/snabbdom</a><br>å¤åˆ¶ Exampleã€‚åˆ°æˆ‘ä»¬çš„ index.js æ–‡ä»¶ä¸­</p><p>æˆ‘ä»¬ä¼šå‘ç°æœ‰<br><code>const container = document.getElementById(&quot;container&quot;);</code><br>æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ index.html ä¸­å»åˆ›å»º<br>è¿™å°±è§£é‡Šäº†ä¸ºå•¥æˆ‘ä»¬çš„ index.html éœ€è¦æœ‰ä¸€ä¸ª id ä¸º container<br>ä¸è¿‡æˆ‘ä»¬åˆšåˆšå·²ç»åˆ›å»ºäº†</p><p>ç„¶åæˆ‘ä»¬ä¼šå‘ç°æœ‰ä¸¤ä¸ªå‡½æ•°æŠ¥é”™<br><code>someFn is not undefined</code><br><code>anotherEventHandler is not undefined</code><br>æˆ‘ä»¬å°†è¿™ä¸¤ä¸ªå‡½æ•°æ›´æ”¹ä¸ºæ™®é€šå‡½æ•° å°± ok äº†</p><h4 id="index-js-ç®€å•ä½¿ç”¨-h-å‡½æ•°"><a href="#index-js-ç®€å•ä½¿ç”¨-h-å‡½æ•°" class="headerlink" title="index.js ç®€å•ä½¿ç”¨ h å‡½æ•°"></a>index.js ç®€å•ä½¿ç”¨ h å‡½æ•°</h4><pre><code>import &#123;init,classModule,propsModule,styleModule,eventListenersModule,h,&#125; from &quot;snabbdom&quot;;let myVnode1 = h(&#39;a&#39;,&#123; props:&#123; href: &#39;https://www.cnblogs.com/IwishIcould/&#39; &#125;&#125;,&#39;æˆ‘çš„åšå®¢&#39;)console.log(&quot;myVnode1&quot;, myVnode1) //è¾“å‡ºæ¥çš„å†…å®¹å°±æ˜¯è™šæ‹Ÿ dom èŠ‚ç‚¹è¿™è¡Œä»£ç è¯´æ˜äº†: h å‡½æ•°äº§ç”Ÿè™šæ‹Ÿ dom èŠ‚ç‚¹</code></pre><h4 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h4><pre><code>&lt;div&gt;    &lt;p&gt;123&lt;/p&gt;&lt;/div&gt;è½¬åŒ–ä¸ºè¿™ä¸ªlet obj=&#123;  &#39;tag&#39;:&#39;div&#39;,  &#39;child&#39;:[      &#39;tag&#39;:&#39;p&#39;,      &#39;text&#39;:&#39;123&#39;  ]&#125;</code></pre><p>ä¸æ˜¯ h å‡½æ•°åšçš„ã€‚<br>è€Œæ˜¯æ¨¡æ¿ç¼–è¯‘åŸç†åšçš„</p><h4 id="ä½¿ç”¨-patch-å‡½æ•°è®©è™šæ‹Ÿ-dom-èŠ‚ç‚¹ä¸Šæ ‘"><a href="#ä½¿ç”¨-patch-å‡½æ•°è®©è™šæ‹Ÿ-dom-èŠ‚ç‚¹ä¸Šæ ‘" class="headerlink" title="ä½¿ç”¨ patch å‡½æ•°è®©è™šæ‹Ÿ dom èŠ‚ç‚¹ä¸Šæ ‘"></a>ä½¿ç”¨ patch å‡½æ•°è®©è™šæ‹Ÿ dom èŠ‚ç‚¹ä¸Šæ ‘</h4><pre><code>import &#123;init,classModule,propsModule,styleModule,eventListenersModule,h,&#125; from &quot;snabbdom&quot;;let myVnode1 = h(&#39;a&#39;, &#123; props: &#123; href: &#39;https://www.cnblogs.com/IwishIcould/&#39; &#125; &#125;, &#39;æˆ‘çš„åšå®¢&#39;)console.log(&quot;myVnode1&quot;, myVnode1) //è¾“å‡ºæ¥çš„å†…å®¹å°±æ˜¯è™šæ‹Ÿ dom èŠ‚ç‚¹// ä½¿ç”¨ init å‡½æ•°åˆ›å»º patch å‡½æ•°const patch = init([classModule, propsModule, styleModule, eventListenersModule])const container = document.getElementById(&#39;container&#39;)// è®©è™šæ‹ŸèŠ‚ç‚¹ä¸Šæ ‘patch(container,myVnode1)</code></pre><h4 id="init-å‡½æ•°åˆ›å»º-patch-å‡½æ•°"><a href="#init-å‡½æ•°åˆ›å»º-patch-å‡½æ•°" class="headerlink" title="init å‡½æ•°åˆ›å»º patch å‡½æ•°"></a>init å‡½æ•°åˆ›å»º patch å‡½æ•°</h4><p>ä½¿ç”¨ init å‡½æ•°åˆ›å»º patch å‡½æ•° ,init å‡½æ•°æ¥å— 4 ä¸ªå‚æ•°ã€‚<br><code>const patch = init([classModule, propsModule, styleModule, eventListenersModule])</code><br>[ç±»æ¨¡å—ï¼Œå±æ€§æ¨¡å—ï¼Œstyle æ¨¡å—ï¼Œäº‹ä»¶æ¨¡å— ]</p><h4 id="patch-å‡½æ•°è®©è™šæ‹Ÿ-dom-èŠ‚ç‚¹ä¸Šæ ‘"><a href="#patch-å‡½æ•°è®©è™šæ‹Ÿ-dom-èŠ‚ç‚¹ä¸Šæ ‘" class="headerlink" title="patch å‡½æ•°è®©è™šæ‹Ÿ dom èŠ‚ç‚¹ä¸Šæ ‘"></a>patch å‡½æ•°è®©è™šæ‹Ÿ dom èŠ‚ç‚¹ä¸Šæ ‘</h4><pre><code>// è®©è™šæ‹ŸèŠ‚ç‚¹ä¸Šæ ‘patch(container,myVnode1)patch å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œä¸Šæ ‘åˆ°å“ªä¸€ä¸ªå®¹å™¨ä¸‹ï¼Œä¸Šæ ‘çš„è™šæ‹ŸèŠ‚ç‚¹#### ä¸€ä¸ªå®¹å™¨è®©å¤šä¸ªè™šæ‹ŸèŠ‚ç‚¹ä¸Šæ ‘ï¼Œå¯ä»¥ä½¿ç”¨ h å‡½æ•°çš„åµŒå¥—let myVnode1 = h(&#39;ul&#39;, &#123;&#125;, [h(&#39;li&#39;, &#123;&#125;, &#39;å§“å&#39;),h(&#39;li&#39;, &#123;&#125;, &#39;å¹´é¾„&#39;),h(&#39;li&#39;, &#123;&#125;, &#39;çˆ±å¥½&#39;),])console.log(&quot;myVnode1&quot;, myVnode1) //è¾“å‡ºæ¥çš„å†…å®¹å°±æ˜¯è™šæ‹Ÿ dom èŠ‚ç‚¹// ä½¿ç”¨ init å‡½æ•°åˆ›å»º patch å‡½æ•°const patch = init([classModule, propsModule, styleModule, eventListenersModule])const container = document.getElementById(&#39;container&#39;)// è®©è™šæ‹ŸèŠ‚ç‚¹ä¸Šæ ‘patch(container, myVnode1)console.log(&quot;ä¸Šæ ‘å&quot;, myVnode1) //è¾“å‡ºæ¥çš„å†…å®¹å°±æ˜¯è™šæ‹Ÿ dom èŠ‚ç‚¹</code></pre>]]></content>
      
      
      <categories>
          
          <category> webapck </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> webapck </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES6 Promiseç”¨æ³•</title>
      <link href="/2022/05/08/article18/"/>
      <url>/2022/05/08/article18/</url>
      
        <content type="html"><![CDATA[<p>ä¸‹é¢ä»£ç åˆ›é€ äº†ä¸€ä¸ª Promise å®ä¾‹ã€‚</p><pre><code>const promise = new Promise(function(resolve, reject) &#123;  // ... some code  if (/* å¼‚æ­¥æ“ä½œæˆåŠŸ */)&#123;    resolve(value);  &#125; else &#123;    reject(error);  &#125;&#125;);</code></pre><p>Promise æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ resolve å’Œ rejectã€‚å®ƒä»¬æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼Œç”± JavaScript å¼•æ“æä¾›ï¼Œä¸ç”¨è‡ªå·±éƒ¨ç½²ã€‚<br>resolve å‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°† Promise å¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜ä¸ºâ€œæˆåŠŸâ€ï¼ˆå³ä» pending å˜ä¸º resolvedï¼‰ï¼Œåœ¨å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ï¼›reject å‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°† Promise å¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜ä¸ºâ€œå¤±è´¥â€ï¼ˆå³ä» pending å˜ä¸º rejectedï¼‰ï¼Œåœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œæŠ¥å‡ºçš„é”™è¯¯ï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ã€‚<br>Promise å®ä¾‹ç”Ÿæˆä»¥åï¼Œå¯ä»¥ç”¨ then æ–¹æ³•åˆ†åˆ«æŒ‡å®š resolved çŠ¶æ€å’Œ rejected çŠ¶æ€çš„å›è°ƒå‡½æ•°ã€‚</p><pre><code>promise.then(function(value) &#123;  // success&#125;, function(error) &#123;  // failure&#125;);</code></pre><p>then æ–¹æ³•å¯ä»¥æ¥å—ä¸¤ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°æ˜¯ Promise å¯¹è±¡çš„çŠ¶æ€å˜ä¸º resolved æ—¶è°ƒç”¨ï¼Œç¬¬äºŒä¸ªå›è°ƒå‡½æ•°æ˜¯ Promise å¯¹è±¡çš„çŠ¶æ€å˜ä¸º rejected æ—¶è°ƒç”¨ã€‚å…¶ä¸­ï¼Œç¬¬äºŒä¸ªå‡½æ•°æ˜¯å¯é€‰çš„ï¼Œä¸ä¸€å®šè¦æä¾›ã€‚è¿™ä¸¤ä¸ªå‡½æ•°éƒ½æ¥å— Promise å¯¹è±¡ä¼ å‡ºçš„å€¼ä½œä¸ºå‚æ•°ã€‚<br>ä¸‹é¢æ˜¯ä¸€ä¸ª Promise å¯¹è±¡çš„ç®€å•ä¾‹å­ã€‚</p><pre><code>function timeout(ms) &#123;  return new Promise((resolve, reject) =&gt; &#123;    setTimeout(resolve, ms, &#39;done&#39;);  &#125;);&#125;timeout(100).then((value) =&gt; &#123;  console.log(value);&#125;);</code></pre><p>ä¸Šé¢ä»£ç ä¸­ï¼Œtimeout æ–¹æ³•è¿”å›ä¸€ä¸ª Promise å®ä¾‹ï¼Œè¡¨ç¤ºä¸€æ®µæ—¶é—´ä»¥åæ‰ä¼šå‘ç”Ÿçš„ç»“æœã€‚è¿‡äº†æŒ‡å®šçš„æ—¶é—´ï¼ˆms å‚æ•°ï¼‰ä»¥åï¼ŒPromise å®ä¾‹çš„çŠ¶æ€å˜ä¸º resolvedï¼Œå°±ä¼šè§¦å‘ then æ–¹æ³•ç»‘å®šçš„å›è°ƒå‡½æ•°ã€‚<br>Promise æ–°å»ºåå°±ä¼šç«‹å³æ‰§è¡Œã€‚</p><pre><code>let promise = new Promise(function(resolve, reject) &#123;  console.log(&#39;Promise&#39;);  resolve();&#125;);promise.then(function() &#123;  console.log(&#39;resolved.&#39;);&#125;);console.log(&#39;Hi!&#39;);// Promise// Hi!// resolved</code></pre><p>ä¸Šé¢ä»£ç ä¸­ï¼ŒPromise æ–°å»ºåç«‹å³æ‰§è¡Œï¼Œæ‰€ä»¥é¦–å…ˆè¾“å‡ºçš„æ˜¯ Promiseã€‚ç„¶åï¼Œthen æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå°†åœ¨å½“å‰è„šæœ¬æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ‰ä¼šæ‰§è¡Œï¼Œæ‰€ä»¥ resolved æœ€åè¾“å‡ºã€‚<br>ä¸‹é¢æ˜¯å¼‚æ­¥åŠ è½½å›¾ç‰‡çš„ä¾‹å­ã€‚</p><pre><code>function loadImageAsync(url) &#123;  return new Promise(function(resolve, reject) &#123;    const image = new Image();    image.onload = function() &#123;      resolve(image);    &#125;;    image.onerror = function() &#123;      reject(new Error(&#39;Could not load image at &#39; + url));    &#125;;    image.src = url;  &#125;);&#125;</code></pre><p>ä¸Šé¢ä»£ç ä¸­ï¼Œä½¿ç”¨ Promise åŒ…è£…äº†ä¸€ä¸ªå›¾ç‰‡åŠ è½½çš„å¼‚æ­¥æ“ä½œã€‚å¦‚æœåŠ è½½æˆåŠŸï¼Œå°±è°ƒç”¨ resolve æ–¹æ³•ï¼Œå¦åˆ™å°±è°ƒç”¨ reject æ–¹æ³•ã€‚<br>Promise æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œè‡ªå·±èº«ä¸Šæœ‰ allã€rejectã€resolve è¿™å‡ ä¸ªçœ¼ç†Ÿçš„æ–¹æ³•ï¼ŒåŸå‹ä¸Šæœ‰ thenã€catch ç­‰åŒæ ·å¾ˆçœ¼ç†Ÿçš„æ–¹æ³•ã€‚<br>é‚£å°± new ä¸€ä¸ª</p><pre><code>var p = new Promise(function(resolve, reject)&#123;    //åšä¸€äº›å¼‚æ­¥æ“ä½œ    setTimeout(function()&#123;        console.log(&#39;æ‰§è¡Œå®Œæˆ&#39;);        resolve(&#39;éšä¾¿ä»€ä¹ˆæ•°æ®&#39;);    &#125;, 2000);&#125;);</code></pre><p>Promise çš„æ„é€ å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯å‡½æ•°ï¼Œå¹¶ä¸”ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼šresolveï¼Œrejectï¼Œåˆ†åˆ«è¡¨ç¤ºå¼‚æ­¥æ“ä½œæ‰§è¡ŒæˆåŠŸåçš„å›è°ƒå‡½æ•°å’Œå¼‚æ­¥æ“ä½œæ‰§è¡Œå¤±è´¥åçš„å›è°ƒå‡½æ•°ã€‚å…¶å®è¿™é‡Œç”¨â€œæˆåŠŸâ€å’Œâ€œå¤±è´¥â€æ¥æè¿°å¹¶ä¸å‡†ç¡®ï¼ŒæŒ‰ç…§æ ‡å‡†æ¥è®²ï¼Œresolve æ˜¯å°† Promise çš„çŠ¶æ€ç½®ä¸º fullfiledï¼Œreject æ˜¯å°† Promise çš„çŠ¶æ€ç½®ä¸º rejectedã€‚ä¸è¿‡åœ¨æˆ‘ä»¬å¼€å§‹é˜¶æ®µå¯ä»¥å…ˆè¿™ä¹ˆç†è§£ï¼Œåé¢å†ç»†ç©¶æ¦‚å¿µã€‚</p><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ‰§è¡Œäº†ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œä¹Ÿå°±æ˜¯ setTimeoutï¼Œ2 ç§’åï¼Œè¾“å‡ºâ€œæ‰§è¡Œå®Œæˆâ€ï¼Œå¹¶ä¸”è°ƒç”¨ resolve æ–¹æ³•ã€‚<br>è¿è¡Œä»£ç ï¼Œä¼šåœ¨ 2 ç§’åè¾“å‡ºâ€œæ‰§è¡Œå®Œæˆâ€ã€‚æ³¨æ„ï¼æˆ‘åªæ˜¯ new äº†ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶æ²¡æœ‰è°ƒç”¨å®ƒï¼Œæˆ‘ä»¬ä¼ è¿›å»çš„å‡½æ•°å°±å·²ç»æ‰§è¡Œäº†ï¼Œè¿™æ˜¯éœ€è¦æ³¨æ„çš„ä¸€ä¸ªç»†èŠ‚ã€‚æ‰€ä»¥æˆ‘ä»¬ç”¨ Promise çš„æ—¶å€™ä¸€èˆ¬æ˜¯åŒ…åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œåœ¨éœ€è¦çš„æ—¶å€™å»è¿è¡Œè¿™ä¸ªå‡½æ•°ï¼Œå¦‚ï¼š</p><pre><code>function runAsync()&#123;    var p = new Promise(function(resolve, reject)&#123;        //åšä¸€äº›å¼‚æ­¥æ“ä½œ        setTimeout(function()&#123;            console.log(&#39;æ‰§è¡Œå®Œæˆ&#39;);            resolve(&#39;éšä¾¿ä»€ä¹ˆæ•°æ®&#39;);        &#125;, 2000);    &#125;);    return p;&#125;runAsync()</code></pre><p>è¿™æ—¶å€™ä½ åº”è¯¥æœ‰ä¸¤ä¸ªç–‘é—®ï¼š</p><p>1.åŒ…è£…è¿™ä¹ˆä¸€ä¸ªå‡½æ•°æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</p><p>2.resolve(â€˜éšä¾¿ä»€ä¹ˆæ•°æ®â€™);è¿™æ˜¯å¹²æ¯›çš„ï¼Ÿ</p><p>æˆ‘ä»¬ç»§ç»­æ¥è®²ã€‚åœ¨æˆ‘ä»¬åŒ…è£…å¥½çš„å‡½æ•°æœ€åï¼Œä¼š return å‡º Promise å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰§è¡Œè¿™ä¸ªå‡½æ•°æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ª Promise å¯¹è±¡ã€‚è¿˜è®°å¾— Promise å¯¹è±¡ä¸Šæœ‰ thenã€catch æ–¹æ³•å§ï¼Ÿè¿™å°±æ˜¯å¼ºå¤§ä¹‹å¤„äº†ï¼Œçœ‹ä¸‹é¢çš„ä»£ç ï¼š</p><pre><code>runAsync().then(function(data)&#123;    console.log(data);    //åé¢å¯ä»¥ç”¨ä¼ è¿‡æ¥çš„æ•°æ®åšäº›å…¶ä»–æ“ä½œ    //......&#125;);</code></pre><p>åœ¨ runAsync()çš„è¿”å›ä¸Šç›´æ¥è°ƒç”¨ then æ–¹æ³•ï¼Œthen æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯å‡½æ•°ï¼Œå¹¶ä¸”ä¼šæ‹¿åˆ°æˆ‘ä»¬åœ¨ runAsync ä¸­è°ƒç”¨ resolve æ—¶ä¼ çš„çš„å‚æ•°ã€‚è¿è¡Œè¿™æ®µä»£ç ï¼Œä¼šåœ¨ 2 ç§’åè¾“å‡ºâ€œæ‰§è¡Œå®Œæˆâ€ï¼Œç´§æ¥ç€è¾“å‡ºâ€œéšä¾¿ä»€ä¹ˆæ•°æ®â€ã€‚</p><p>è¿™æ—¶å€™ä½ åº”è¯¥æœ‰æ‰€é¢†æ‚Ÿäº†ï¼ŒåŸæ¥ then é‡Œé¢çš„å‡½æ•°å°±è·Ÿæˆ‘ä»¬å¹³æ—¶çš„å›è°ƒå‡½æ•°ä¸€ä¸ªæ„æ€ï¼Œèƒ½å¤Ÿåœ¨ runAsync è¿™ä¸ªå¼‚æ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆä¹‹åè¢«æ‰§è¡Œã€‚è¿™å°±æ˜¯ Promise çš„ä½œç”¨äº†ï¼Œç®€å•æ¥è®²ï¼Œå°±æ˜¯èƒ½æŠŠåŸæ¥çš„å›è°ƒå†™æ³•åˆ†ç¦»å‡ºæ¥ï¼Œåœ¨å¼‚æ­¥æ“ä½œæ‰§è¡Œå®Œåï¼Œç”¨é“¾å¼è°ƒç”¨çš„æ–¹å¼æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚</p><p>ä½ å¯èƒ½ä¼šä¸å±‘ä¸€é¡¾ï¼Œé‚£ä¹ˆç‰›é€¼è½°è½°çš„ Promise å°±è¿™ç‚¹èƒ½è€ï¼Ÿæˆ‘æŠŠå›è°ƒå‡½æ•°å°è£…ä¸€ä¸‹ï¼Œç»™ runAsync ä¼ è¿›å»ä¸ä¹Ÿä¸€æ ·å—ï¼Œå°±åƒè¿™æ ·ï¼š</p><pre><code>function runAsync(callback)&#123;    setTimeout(function()&#123;        console.log(&#39;æ‰§è¡Œå®Œæˆ&#39;);        callback(&#39;éšä¾¿ä»€ä¹ˆæ•°æ®&#39;);    &#125;, 2000);&#125;runAsync(function(data)&#123;    console.log(data);&#125;);</code></pre><p>æ•ˆæœä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œè¿˜è´¹åŠ²ç”¨ Promise å¹²å˜›ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæœ‰å¤šå±‚å›è°ƒè¯¥æ€ä¹ˆåŠï¼Ÿå¦‚æœ callback ä¹Ÿæ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œè€Œä¸”æ‰§è¡Œå®Œåä¹Ÿéœ€è¦æœ‰ç›¸åº”çš„å›è°ƒå‡½æ•°ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæ€»ä¸èƒ½å†å®šä¹‰ä¸€ä¸ª callback2ï¼Œç„¶åç»™ callback ä¼ è¿›å»å§ã€‚è€Œ Promise çš„ä¼˜åŠ¿åœ¨äºï¼Œå¯ä»¥åœ¨ then æ–¹æ³•ä¸­ç»§ç»­å†™ Promise å¯¹è±¡å¹¶è¿”å›ï¼Œç„¶åç»§ç»­è°ƒç”¨ then æ¥è¿›è¡Œå›è°ƒæ“ä½œã€‚</p><h4 id="é“¾å¼æ“ä½œçš„ç”¨æ³•"><a href="#é“¾å¼æ“ä½œçš„ç”¨æ³•" class="headerlink" title="é“¾å¼æ“ä½œçš„ç”¨æ³•"></a><strong>é“¾å¼æ“ä½œçš„ç”¨æ³•</strong></h4><p>æ‰€ä»¥ï¼Œä»è¡¨é¢ä¸Šçœ‹ï¼ŒPromise åªæ˜¯èƒ½å¤Ÿç®€åŒ–å±‚å±‚å›è°ƒçš„å†™æ³•ï¼Œè€Œå®è´¨ä¸Šï¼ŒPromise çš„ç²¾é«“æ˜¯â€œçŠ¶æ€â€ï¼Œç”¨ç»´æŠ¤çŠ¶æ€ã€ä¼ é€’çŠ¶æ€çš„æ–¹å¼æ¥ä½¿å¾—å›è°ƒå‡½æ•°èƒ½å¤ŸåŠæ—¶è°ƒç”¨ï¼Œå®ƒæ¯”ä¼ é€’ callback å‡½æ•°è¦ç®€å•ã€çµæ´»çš„å¤šã€‚æ‰€ä»¥ä½¿ç”¨ Promise çš„æ­£ç¡®åœºæ™¯æ˜¯è¿™æ ·çš„ï¼š</p><pre><code>runAsync1().then(function(data)&#123;    console.log(data);    return runAsync2();&#125;).then(function(data)&#123;    console.log(data);    return runAsync3();&#125;).then(function(data)&#123;    console.log(data);&#125;);</code></pre><p>è¿™æ ·èƒ½å¤ŸæŒ‰é¡ºåºï¼Œæ¯éš”ä¸¤ç§’è¾“å‡ºæ¯ä¸ªå¼‚æ­¥å›è°ƒä¸­çš„å†…å®¹ï¼Œåœ¨ runAsync2 ä¸­ä¼ ç»™ resolve çš„æ•°æ®ï¼Œèƒ½åœ¨æ¥ä¸‹æ¥çš„ then æ–¹æ³•ä¸­æ‹¿åˆ°ã€‚è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://img-blog.csdnimg.cn/20181118110118300.png"></p><p>çŒœçŒœ runAsync1ã€runAsync2ã€runAsync3 è¿™ä¸‰ä¸ªå‡½æ•°éƒ½æ˜¯å¦‚ä½•å®šä¹‰çš„ï¼Ÿæ²¡é”™ï¼Œå°±æ˜¯ä¸‹é¢è¿™æ ·</p><pre><code>function runAsync1()&#123;    var p = new Promise(function(resolve, reject)&#123;        //åšä¸€äº›å¼‚æ­¥æ“ä½œ        setTimeout(function()&#123;            console.log(&#39;å¼‚æ­¥ä»»åŠ¡1æ‰§è¡Œå®Œæˆ&#39;);            resolve(&#39;éšä¾¿ä»€ä¹ˆæ•°æ®1&#39;);        &#125;, 1000);    &#125;);    return p;&#125;function runAsync2()&#123;    var p = new Promise(function(resolve, reject)&#123;        //åšä¸€äº›å¼‚æ­¥æ“ä½œ        setTimeout(function()&#123;            console.log(&#39;å¼‚æ­¥ä»»åŠ¡2æ‰§è¡Œå®Œæˆ&#39;);            resolve(&#39;éšä¾¿ä»€ä¹ˆæ•°æ®2&#39;);        &#125;, 2000);    &#125;);    return p;&#125;function runAsync3()&#123;    var p = new Promise(function(resolve, reject)&#123;        //åšä¸€äº›å¼‚æ­¥æ“ä½œ        setTimeout(function()&#123;            console.log(&#39;å¼‚æ­¥ä»»åŠ¡3æ‰§è¡Œå®Œæˆ&#39;);            resolve(&#39;éšä¾¿ä»€ä¹ˆæ•°æ®3&#39;);        &#125;, 2000);    &#125;);    return p;&#125;</code></pre><p>åœ¨ then æ–¹æ³•ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥ return æ•°æ®è€Œä¸æ˜¯ Promise å¯¹è±¡ï¼Œåœ¨åé¢çš„ then ä¸­å°±å¯ä»¥æ¥æ”¶åˆ°æ•°æ®äº†ï¼Œæ¯”å¦‚æˆ‘ä»¬æŠŠä¸Šé¢çš„ä»£ç ä¿®æ”¹æˆè¿™æ ·ï¼š</p><pre><code>runAsync1().then(function(data)&#123;    console.log(data);    return runAsync2();&#125;).then(function(data)&#123;    console.log(data);    return &#39;ç›´æ¥è¿”å›æ•°æ®&#39;;  //è¿™é‡Œç›´æ¥è¿”å›æ•°æ®&#125;).then(function(data)&#123;    console.log(data);&#125;);</code></pre><p>é‚£ä¹ˆè¾“å‡ºå°±å˜æˆäº†è¿™æ ·ï¼š</p><p><img src="https://img-blog.csdnimg.cn/20181118110243603.png"></p><h4 id="reject-çš„ç”¨æ³•"><a href="#reject-çš„ç”¨æ³•" class="headerlink" title="reject çš„ç”¨æ³•"></a><strong>reject çš„ç”¨æ³•</strong></h4><p>åˆ°è¿™é‡Œï¼Œä½ åº”è¯¥å¯¹â€œPromise æ˜¯ä»€ä¹ˆç©æ„â€æœ‰äº†æœ€åŸºæœ¬çš„äº†è§£ã€‚é‚£ä¹ˆæˆ‘ä»¬æ¥ç€æ¥çœ‹çœ‹ ES6 çš„ Promise è¿˜æœ‰å“ªäº›åŠŸèƒ½ã€‚æˆ‘ä»¬å…‰ç”¨äº† resolveï¼Œè¿˜æ²¡ç”¨ reject å‘¢ï¼Œå®ƒæ˜¯åšä»€ä¹ˆçš„å‘¢ï¼Ÿäº‹å®ä¸Šï¼Œæˆ‘ä»¬å‰é¢çš„ä¾‹å­éƒ½æ˜¯åªæœ‰â€œæ‰§è¡ŒæˆåŠŸâ€çš„å›è°ƒï¼Œè¿˜æ²¡æœ‰â€œå¤±è´¥â€çš„æƒ…å†µï¼Œreject çš„ä½œç”¨å°±æ˜¯æŠŠ Promise çš„çŠ¶æ€ç½®ä¸º rejectedï¼Œè¿™æ ·æˆ‘ä»¬åœ¨ then ä¸­å°±èƒ½æ•æ‰åˆ°ï¼Œç„¶åæ‰§è¡Œâ€œå¤±è´¥â€æƒ…å†µçš„å›è°ƒã€‚çœ‹ä¸‹é¢çš„ä»£ç ã€‚</p><pre><code>function getNumber()&#123;    var p = new Promise(function(resolve, reject)&#123;        //åšä¸€äº›å¼‚æ­¥æ“ä½œ        setTimeout(function()&#123;            var num = Math.ceil(Math.random()*10); //ç”Ÿæˆ1-10çš„éšæœºæ•°            if(num&lt;=5)&#123;                resolve(num);            &#125;            else&#123;                reject(&#39;æ•°å­—å¤ªå¤§äº†&#39;);            &#125;        &#125;, 2000);    &#125;);    return p;&#125;getNumber().then(    function(data)&#123;        console.log(&#39;resolved&#39;);        console.log(data);    &#125;,    function(reason, data)&#123;        console.log(&#39;rejected&#39;);        console.log(reason);    &#125;);</code></pre><p>getNumber å‡½æ•°ç”¨æ¥å¼‚æ­¥è·å–ä¸€ä¸ªæ•°å­—ï¼Œ2 ç§’åæ‰§è¡Œå®Œæˆï¼Œå¦‚æœæ•°å­—å°äºç­‰äº 5ï¼Œæˆ‘ä»¬è®¤ä¸ºæ˜¯â€œæˆåŠŸâ€äº†ï¼Œè°ƒç”¨ resolve ä¿®æ”¹ Promise çš„çŠ¶æ€ã€‚å¦åˆ™æˆ‘ä»¬è®¤ä¸ºæ˜¯â€œå¤±è´¥â€äº†ï¼Œè°ƒç”¨ reject å¹¶ä¼ é€’ä¸€ä¸ªå‚æ•°ï¼Œä½œä¸ºå¤±è´¥çš„åŸå› ã€‚</p><p>è¿è¡Œ getNumber å¹¶ä¸”åœ¨ then ä¸­ä¼ äº†ä¸¤ä¸ªå‚æ•°ï¼Œthen æ–¹æ³•å¯ä»¥æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå¯¹åº” resolve çš„å›è°ƒï¼Œç¬¬äºŒä¸ªå¯¹åº” reject çš„å›è°ƒã€‚æ‰€ä»¥æˆ‘ä»¬èƒ½å¤Ÿåˆ†åˆ«æ‹¿åˆ°ä»–ä»¬ä¼ è¿‡æ¥çš„æ•°æ®ã€‚å¤šæ¬¡è¿è¡Œè¿™æ®µä»£ç ï¼Œä½ ä¼šéšæœºå¾—åˆ°ä¸‹é¢ä¸¤ç§ç»“æœï¼š</p><p><img src="https://img-blog.csdnimg.cn/20181118110405487.png"><img src="https://img-blog.csdnimg.cn/20181118110346440.png"></p><h4 id="catch-çš„ç”¨æ³•"><a href="#catch-çš„ç”¨æ³•" class="headerlink" title="catch çš„ç”¨æ³•"></a><strong>catch çš„ç”¨æ³•</strong></h4><p>æˆ‘ä»¬çŸ¥é“ Promise å¯¹è±¡é™¤äº† then æ–¹æ³•ï¼Œè¿˜æœ‰ä¸€ä¸ª catch æ–¹æ³•ï¼Œå®ƒæ˜¯åšä»€ä¹ˆç”¨çš„å‘¢ï¼Ÿå…¶å®å®ƒå’Œ then çš„ç¬¬äºŒä¸ªå‚æ•°ä¸€æ ·ï¼Œç”¨æ¥æŒ‡å®š reject çš„å›è°ƒï¼Œç”¨æ³•æ˜¯è¿™æ ·ï¼š</p><pre><code>getNumber().then(function(data)&#123;    console.log(&#39;resolved&#39;);    console.log(data);&#125;).catch(function(reason)&#123;    console.log(&#39;rejected&#39;);    console.log(reason);&#125;);</code></pre><p>æ•ˆæœå’Œå†™åœ¨ then çš„ç¬¬äºŒä¸ªå‚æ•°é‡Œé¢ä¸€æ ·ã€‚ä¸è¿‡å®ƒè¿˜æœ‰å¦å¤–ä¸€ä¸ªä½œç”¨ï¼šåœ¨æ‰§è¡Œ resolve çš„å›è°ƒï¼ˆä¹Ÿå°±æ˜¯ä¸Šé¢ then ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰æ—¶ï¼Œå¦‚æœæŠ›å‡ºå¼‚å¸¸äº†ï¼ˆä»£ç å‡ºé”™äº†ï¼‰ï¼Œé‚£ä¹ˆå¹¶ä¸ä¼šæŠ¥é”™å¡æ­» jsï¼Œè€Œæ˜¯ä¼šè¿›åˆ°è¿™ä¸ª catch æ–¹æ³•ä¸­ã€‚è¯·çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p><pre><code>getNumber().then(function(data)&#123;    console.log(&#39;resolved&#39;);    console.log(data);    console.log(somedata); //æ­¤å¤„çš„somedataæœªå®šä¹‰&#125;).catch(function(reason)&#123;    console.log(&#39;rejected&#39;);    console.log(reason);&#125;);</code></pre><p>åœ¨ resolve çš„å›è°ƒä¸­ï¼Œæˆ‘ä»¬ console.log(somedata);è€Œ somedata è¿™ä¸ªå˜é‡æ˜¯æ²¡æœ‰è¢«å®šä¹‰çš„ã€‚å¦‚æœæˆ‘ä»¬ä¸ç”¨ Promiseï¼Œä»£ç è¿è¡Œåˆ°è¿™é‡Œå°±ç›´æ¥åœ¨æ§åˆ¶å°æŠ¥é”™äº†ï¼Œä¸å¾€ä¸‹è¿è¡Œäº†ã€‚ä½†æ˜¯åœ¨è¿™é‡Œï¼Œä¼šå¾—åˆ°è¿™æ ·çš„ç»“æœï¼š</p><p><img src="https://img-blog.csdnimg.cn/20181118110528999.png"></p><p>ä¹Ÿå°±æ˜¯è¯´è¿›åˆ° catch æ–¹æ³•é‡Œé¢å»äº†ï¼Œè€Œä¸”æŠŠé”™è¯¯åŸå› ä¼ åˆ°äº† reason å‚æ•°ä¸­ã€‚å³ä¾¿æ˜¯æœ‰é”™è¯¯çš„ä»£ç ä¹Ÿä¸ä¼šæŠ¥é”™äº†ï¼Œè¿™ä¸æˆ‘ä»¬çš„ try/catch è¯­å¥æœ‰ç›¸åŒçš„åŠŸèƒ½ã€‚</p><h4 id="all-çš„ç”¨æ³•"><a href="#all-çš„ç”¨æ³•" class="headerlink" title="all çš„ç”¨æ³•"></a><strong>all çš„ç”¨æ³•</strong></h4><p>Promise çš„ all æ–¹æ³•æä¾›äº†å¹¶è¡Œæ‰§è¡Œå¼‚æ­¥æ“ä½œçš„èƒ½åŠ›ï¼Œå¹¶ä¸”åœ¨æ‰€æœ‰å¼‚æ­¥æ“ä½œæ‰§è¡Œå®Œåæ‰æ‰§è¡Œå›è°ƒã€‚æˆ‘ä»¬ä»æ—§ä½¿ç”¨ä¸Šé¢å®šä¹‰å¥½çš„ runAsync1ã€runAsync2ã€runAsync3 è¿™ä¸‰ä¸ªå‡½æ•°ï¼Œçœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><pre><code>Promise.all([runAsync1(), runAsync2(), runAsync3()]).then(function(results)&#123;    console.log(results);&#125;);</code></pre><p>ç”¨ Promise.all æ¥æ‰§è¡Œï¼Œall æ¥æ”¶ä¸€ä¸ªæ•°ç»„å‚æ•°ï¼Œé‡Œé¢çš„å€¼æœ€ç»ˆéƒ½ç®—è¿”å› Promise å¯¹è±¡ã€‚è¿™æ ·ï¼Œä¸‰ä¸ªå¼‚æ­¥æ“ä½œçš„å¹¶è¡Œæ‰§è¡Œçš„ï¼Œç­‰åˆ°å®ƒä»¬éƒ½æ‰§è¡Œå®Œåæ‰ä¼šè¿›åˆ° then é‡Œé¢ã€‚é‚£ä¹ˆï¼Œä¸‰ä¸ªå¼‚æ­¥æ“ä½œè¿”å›çš„æ•°æ®å“ªé‡Œå»äº†å‘¢ï¼Ÿéƒ½åœ¨ then é‡Œé¢å‘¢ï¼Œall ä¼šæŠŠæ‰€æœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœæ”¾è¿›ä¸€ä¸ªæ•°ç»„ä¸­ä¼ ç»™ thenï¼Œå°±æ˜¯ä¸Šé¢çš„ resultsã€‚æ‰€ä»¥ä¸Šé¢ä»£ç çš„è¾“å‡ºç»“æœå°±æ˜¯ï¼š</p><p><img src="https://img-blog.csdnimg.cn/2018111811063113.png"></p><p>æœ‰äº† allï¼Œä½ å°±å¯ä»¥å¹¶è¡Œæ‰§è¡Œå¤šä¸ªå¼‚æ­¥æ“ä½œï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªå›è°ƒä¸­å¤„ç†æ‰€æœ‰çš„è¿”å›æ•°æ®ï¼Œæ˜¯ä¸æ˜¯å¾ˆé…·ï¼Ÿæœ‰ä¸€ä¸ªåœºæ™¯æ˜¯å¾ˆé€‚åˆç”¨è¿™ä¸ªçš„ï¼Œä¸€äº›æ¸¸æˆç±»çš„ç´ ææ¯”è¾ƒå¤šçš„åº”ç”¨ï¼Œæ‰“å¼€ç½‘é¡µæ—¶ï¼Œé¢„å…ˆåŠ è½½éœ€è¦ç”¨åˆ°çš„å„ç§èµ„æºå¦‚å›¾ç‰‡ã€flash ä»¥åŠå„ç§é™æ€æ–‡ä»¶ã€‚æ‰€æœ‰çš„éƒ½åŠ è½½å®Œåï¼Œæˆ‘ä»¬å†è¿›è¡Œé¡µé¢çš„åˆå§‹åŒ–ã€‚</p><h4 id="race-çš„ç”¨æ³•"><a href="#race-çš„ç”¨æ³•" class="headerlink" title="race çš„ç”¨æ³•"></a><strong>race çš„ç”¨æ³•</strong></h4><p>all æ–¹æ³•çš„æ•ˆæœå®é™…ä¸Šæ˜¯ã€Œè°è·‘çš„æ…¢ï¼Œä»¥è°ä¸ºå‡†æ‰§è¡Œå›è°ƒã€ï¼Œé‚£ä¹ˆç›¸å¯¹çš„å°±æœ‰å¦ä¸€ä¸ªæ–¹æ³•ã€Œè°è·‘çš„å¿«ï¼Œä»¥è°ä¸ºå‡†æ‰§è¡Œå›è°ƒã€ï¼Œè¿™å°±æ˜¯ race æ–¹æ³•ï¼Œè¿™ä¸ªè¯æœ¬æ¥å°±æ˜¯èµ›è·‘çš„æ„æ€ã€‚race çš„ç”¨æ³•ä¸ all ä¸€æ ·ï¼Œæˆ‘ä»¬æŠŠä¸Šé¢ runAsync1 çš„å»¶æ—¶æ”¹ä¸º 1 ç§’æ¥çœ‹ä¸€ä¸‹ï¼š</p><pre><code>Promise.race([runAsync1(), runAsync2(), runAsync3()]).then(function(results)&#123;    console.log(results);&#125;);</code></pre><p>è¿™ä¸‰ä¸ªå¼‚æ­¥æ“ä½œåŒæ ·æ˜¯å¹¶è¡Œæ‰§è¡Œçš„ã€‚ç»“æœä½ åº”è¯¥å¯ä»¥çŒœåˆ°ï¼Œ1 ç§’å runAsync1 å·²ç»æ‰§è¡Œå®Œäº†ï¼Œæ­¤æ—¶ then é‡Œé¢çš„å°±æ‰§è¡Œäº†ã€‚ç»“æœæ˜¯è¿™æ ·çš„ï¼š</p><p><img src="https://img-blog.csdnimg.cn/20181118110730499.png"></p><p>ä½ çŒœå¯¹äº†å—ï¼Ÿä¸å®Œå…¨ï¼Œæ˜¯å§ã€‚åœ¨ then é‡Œé¢çš„å›è°ƒå¼€å§‹æ‰§è¡Œæ—¶ï¼ŒrunAsync2()å’Œ runAsync3()å¹¶æ²¡æœ‰åœæ­¢ï¼Œä»æ—§å†æ‰§è¡Œã€‚äºæ˜¯å†è¿‡ 1 ç§’åï¼Œè¾“å‡ºäº†ä»–ä»¬ç»“æŸçš„æ ‡å¿—ã€‚</p><p>è¿™ä¸ª race æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿä½¿ç”¨åœºæ™¯è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥ç”¨ race ç»™æŸä¸ªå¼‚æ­¥è¯·æ±‚è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œå¹¶ä¸”åœ¨è¶…æ—¶åæ‰§è¡Œç›¸åº”çš„æ“ä½œï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>//è¯·æ±‚æŸä¸ªå›¾ç‰‡èµ„æºfunction requestImg()&#123;var p = new Promise(function(resolve, reject)&#123;var img = new Image();img.onload = function()&#123;resolve(img);&#125;img.src = &#39;xxxxxx&#39;;&#125;);return p;&#125;//å»¶æ—¶å‡½æ•°ï¼Œç”¨äºç»™è¯·æ±‚è®¡æ—¶function timeout()&#123;    var p = new Promise(function(resolve, reject)&#123;        setTimeout(function()&#123;            reject(&#39;å›¾ç‰‡è¯·æ±‚è¶…æ—¶&#39;);        &#125;, 5000);    &#125;);    return p;&#125;Promise.race([requestImg(), timeout()]).then(function(results)&#123;    console.log(results);&#125;).catch(function(reason)&#123;    console.log(reason);&#125;);</code></pre><p>requestImg å‡½æ•°ä¼šå¼‚æ­¥è¯·æ±‚ä¸€å¼ å›¾ç‰‡ï¼Œæˆ‘æŠŠåœ°å€å†™ä¸ºâ€xxxxxxâ€ï¼Œæ‰€ä»¥è‚¯å®šæ˜¯æ— æ³•æˆåŠŸè¯·æ±‚åˆ°çš„ã€‚timeout å‡½æ•°æ˜¯ä¸€ä¸ªå»¶æ—¶ 5 ç§’çš„å¼‚æ­¥æ“ä½œã€‚æˆ‘ä»¬æŠŠè¿™ä¸¤ä¸ªè¿”å› Promise å¯¹è±¡çš„å‡½æ•°æ”¾è¿› raceï¼Œäºæ˜¯ä»–ä¿©å°±ä¼šèµ›è·‘ï¼Œå¦‚æœ 5 ç§’ä¹‹å†…å›¾ç‰‡è¯·æ±‚æˆåŠŸäº†ï¼Œé‚£ä¹ˆéè¿›å…¥ then æ–¹æ³•ï¼Œæ‰§è¡Œæ­£å¸¸çš„æµç¨‹ã€‚å¦‚æœ 5 ç§’é’Ÿå›¾ç‰‡è¿˜æœªæˆåŠŸè¿”å›ï¼Œé‚£ä¹ˆ timeout å°±è·‘èµ¢äº†ï¼Œåˆ™è¿›å…¥ catchï¼ŒæŠ¥å‡ºâ€œå›¾ç‰‡è¯·æ±‚è¶…æ—¶â€çš„ä¿¡æ¯ã€‚è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://img-blog.csdnimg.cn/20181118110835406.png"></p><p>è½¬è‡ªâ€”â€”â€”â€”<a href="https://www.cnblogs.com/samve/">Samve</a>promise ç”¨æ³•è®²è§£</p>]]></content>
      
      
      <categories>
          
          <category> ES6 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES6 </tag>
            
            <tag> è½¬è½½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScriptäº‹ä»¶ã€äº‹ä»¶ç±»å‹ã€äº‹ä»¶æµå’Œäº‹ä»¶æ¨¡å‹</title>
      <link href="/2022/04/26/article17/"/>
      <url>/2022/04/26/article17/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€ã€äº‹ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä¸€ã€äº‹ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸€ã€äº‹ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä¸€ã€äº‹ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>äº‹ä»¶ (Event) æ˜¯ JavaScript åº”ç”¨è·³åŠ¨çš„å¿ƒè„ ï¼Œè¿›è¡Œäº¤äº’ï¼Œä½¿ç½‘é¡µåŠ¨èµ·æ¥ã€‚å½“æˆ‘ä»¬ä¸æµè§ˆå™¨ä¸­ Web é¡µé¢è¿›è¡ŒæŸäº›ç±»å‹çš„äº¤äº’æ—¶ï¼Œäº‹ä»¶å°±å‘ç”Ÿäº†ã€‚äº‹ä»¶å¯èƒ½æ˜¯ç”¨æˆ·åœ¨æŸäº›å†…å®¹ä¸Šçš„ç‚¹å‡»ã€é¼ æ ‡ç»è¿‡æŸä¸ªç‰¹å®šå…ƒç´ æˆ–æŒ‰ä¸‹é”®ç›˜ä¸Šçš„æŸäº›æŒ‰é”®ã€‚äº‹ä»¶è¿˜å¯èƒ½æ˜¯ Web æµè§ˆå™¨ä¸­å‘ç”Ÿçš„äº‹æƒ…ï¼Œæ¯”å¦‚è¯´æŸä¸ª Web é¡µé¢åŠ è½½å®Œæˆï¼Œæˆ–è€…æ˜¯ç”¨æˆ·æ»šåŠ¨çª—å£æˆ–æ”¹å˜çª—å£å¤§å°ã€‚</p><p>é€šè¿‡ä½¿ç”¨ JavaScript ï¼Œä½ å¯ä»¥ç›‘å¬ç‰¹å®šäº‹ä»¶çš„å‘ç”Ÿï¼Œå¹¶è§„å®šè®©æŸäº›äº‹ä»¶å‘ç”Ÿä»¥å¯¹è¿™äº›äº‹ä»¶åšå‡ºå“åº”ã€‚</p><h3 id="1ã€äº‹ä»¶ä½œç”¨"><a href="#1ã€äº‹ä»¶ä½œç”¨" class="headerlink" title="1ã€äº‹ä»¶ä½œç”¨"></a>1ã€äº‹ä»¶ä½œç”¨</h3><p>ï¼ˆ1ï¼‰éªŒè¯ç”¨æˆ·è¾“å…¥çš„æ•°æ®ã€‚</p><p>ï¼ˆ2ï¼‰å¢åŠ é¡µé¢çš„åŠ¨æ„Ÿæ•ˆæœã€‚</p><p>ï¼ˆ3ï¼‰å¢å¼ºç”¨æˆ·çš„ä½“éªŒåº¦</p><h3 id="2ã€äº‹ä»¶ä¸­çš„å‡ ä¸ªåè¯"><a href="#2ã€äº‹ä»¶ä¸­çš„å‡ ä¸ªåè¯" class="headerlink" title="2ã€äº‹ä»¶ä¸­çš„å‡ ä¸ªåè¯"></a>2ã€äº‹ä»¶ä¸­çš„å‡ ä¸ªåè¯</h3><p>-äº‹ä»¶æº: è°è§¦å‘çš„äº‹ä»¶ -äº‹ä»¶å: è§¦å‘äº†ä»€ä¹ˆäº‹ä»¶ -äº‹ä»¶ç›‘å¬: è°ç®¡è¿™ä¸ªäº‹æƒ…ï¼Œè°ç›‘è§†ï¼Ÿ -äº‹ä»¶å¤„ç†:å‘ç”Ÿäº†æ€ä¹ˆåŠ</p><p>ä¾‹å¦‚</p><p>-é—¯çº¢ç¯ äº‹ä»¶æº:è½¦ ; äº‹ä»¶å: é—¯çº¢ç¯; ç›‘å¬ï¼šæ‘„åƒå¤´ã€äº¤è­¦ ; å¤„ç†:æ‰£åˆ†ç½šæ¬¾ -å•å‡»æŒ‰é’® äº‹ä»¶æº:æŒ‰é’®; äº‹ä»¶å: å•å‡»; ç›‘å¬:çª—å£ ; å¤„ç†:æ‰§è¡Œå‡½æ•°</p><p>å½“æˆ‘ä»¬ç”¨æˆ·åœ¨é¡µé¢ä¸­è¿›è¡Œçš„ç‚¹å‡»åŠ¨ä½œï¼Œé¼ æ ‡ç§»åŠ¨çš„åŠ¨ä½œï¼Œç½‘é¡µé¡µé¢åŠ è½½å®Œæˆçš„åŠ¨ä½œç­‰ï¼Œéƒ½å¯ä»¥ç§°ä¹‹ä¸ºäº‹ä»¶åç§°ï¼Œå³ï¼šclickã€mousemoveã€load ç­‰éƒ½æ˜¯äº‹ä»¶åç§°ï¼Œå…·ä½“çš„æ‰§è¡Œä»£ç å¤„ç†ï¼Œå“åº”æŸä¸ªäº‹ä»¶çš„å‡½æ•°ã€‚</p><pre><code>&lt;body onload=&quot;loadWindow();&quot;&gt;&lt;/body&gt;&lt;script&gt;    function loadWindow()&#123;        alert(&quot;åŠ è½½çª—ä½“&quot;);    &#125;&lt;/script&gt;</code></pre><h3 id="äºŒã€äº‹ä»¶ç±»å‹"><a href="#äºŒã€äº‹ä»¶ç±»å‹" class="headerlink" title="äºŒã€äº‹ä»¶ç±»å‹"></a>äºŒã€äº‹ä»¶ç±»å‹</h3><p>JavaScript å¯ä»¥å¤„ç†çš„äº‹ä»¶ç±»å‹ä¸ºï¼šé¼ æ ‡äº‹ä»¶ã€é”®ç›˜äº‹ä»¶ã€HTML äº‹ä»¶ã€‚</p><p><a href="http://www.w3school.com.cn/tags/html_ref_eventattributes.asp">http://www.w3school.com.cn/tags/html_ref_eventattributes.asp</a> ç”¨+æŸ¥</p><p>Window äº‹ä»¶å±æ€§ï¼šé’ˆå¯¹ window å¯¹è±¡è§¦å‘çš„äº‹ä»¶ï¼ˆåº”ç”¨åˆ° <body> æ ‡ç­¾ï¼‰</p><p>Form äº‹ä»¶ï¼šç”± HTML è¡¨å•å†…çš„åŠ¨ä½œè§¦å‘çš„äº‹ä»¶ï¼ˆåº”ç”¨åˆ°å‡ ä¹æ‰€æœ‰ HTML å…ƒç´ ï¼Œä½†æœ€å¸¸ç”¨åœ¨ form å…ƒç´ ä¸­ï¼‰</p><p>Keyboard äº‹ä»¶ : é”®ç›˜äº‹ä»¶</p><p>Mouse äº‹ä»¶ï¼šç”±é¼ æ ‡æˆ–ç±»ä¼¼ç”¨æˆ·åŠ¨ä½œè§¦å‘çš„äº‹ä»¶</p><p>Media äº‹ä»¶ï¼šç”±åª’ä»‹ï¼ˆæ¯”å¦‚è§†é¢‘ã€å›¾åƒå’ŒéŸ³é¢‘ï¼‰è§¦å‘çš„äº‹ä»¶ï¼ˆé€‚ç”¨äºæ‰€æœ‰ HTML å…ƒç´ ï¼Œä½†å¸¸è§äºåª’ä»‹å…ƒç´ ä¸­ï¼Œæ¯”å¦‚ <audio>ã€<embed>ã€<img>ã€<object> ä»¥åŠ <video>ï¼‰</p><p>å‡ ä¸ªå¸¸ç”¨çš„äº‹ä»¶ï¼š</p><p>onclick ã€onblur ã€onfocus ã€onload ã€onchange</p><p>onmouseoverã€onmouseoutã€onkeyupã€onkeydown</p><p>onloadï¼šå½“é¡µé¢æˆ–å›¾åƒåŠ è½½å®Œåç«‹å³è§¦å‘<br>onblurï¼šå…ƒç´ å¤±å»ç„¦ç‚¹<br>onfocusï¼šå…ƒç´ è·å¾—ç„¦ç‚¹<br>onclickï¼šé¼ æ ‡ç‚¹å‡»æŸä¸ªå¯¹è±¡<br>onchangeï¼šç”¨æˆ·æ”¹å˜åŸŸçš„å†…å®¹<br>onmouseoverï¼šé¼ æ ‡ç§»åŠ¨åˆ°æŸä¸ªå…ƒç´ ä¸Š<br>onmouseoutï¼šé¼ æ ‡ä»æŸä¸ªå…ƒç´ ä¸Šç¦»å¼€<br>onkeyupï¼šæŸä¸ªé”®ç›˜çš„é”®è¢«æ¾å¼€<br>onkeydownï¼šæŸä¸ªé”®ç›˜çš„é”®è¢«æŒ‰ä¸‹</p><h3 id="ä¸‰ã€äº‹ä»¶æµå’Œäº‹ä»¶æ¨¡å‹"><a href="#ä¸‰ã€äº‹ä»¶æµå’Œäº‹ä»¶æ¨¡å‹" class="headerlink" title="ä¸‰ã€äº‹ä»¶æµå’Œäº‹ä»¶æ¨¡å‹"></a>ä¸‰ã€äº‹ä»¶æµå’Œäº‹ä»¶æ¨¡å‹</h3><p>æˆ‘ä»¬çš„äº‹ä»¶æœ€åéƒ½æœ‰ä¸€ä¸ªç‰¹å®šçš„äº‹ä»¶æºï¼Œæš‚ä¸”å°†äº‹ä»¶æºçœ‹åšæ˜¯ HTML çš„æŸä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆå½“ä¸€ä¸ª HTML å…ƒç´ äº§ç”Ÿä¸€ä¸ªäº‹ä»¶æ—¶ï¼Œè¯¥äº‹ä»¶ä¼šåœ¨å…ƒç´ èŠ‚ç‚¹ä¸æ ¹èŠ‚ç‚¹ä¹‹é—´æŒ‰ç‰¹å®šçš„é¡ºåºä¼ æ’­ï¼Œè·¯å¾„æ‰€ç»è¿‡çš„èŠ‚ç‚¹éƒ½ä¼šå—åˆ°è¯¥äº‹ä»¶ï¼Œè¿™ä¸ªä¼ æ’­è¿‡ç¨‹ç§°ä¸º DOM äº‹ä»¶æµã€‚</p><p>äº‹ä»¶é¡ºåºæœ‰ä¸¤ç§ç±»å‹ï¼šäº‹ä»¶æ•è· å’Œ äº‹ä»¶å†’æ³¡ã€‚</p><p>å†’æ³¡å’Œæ•è·å…¶å®éƒ½æ˜¯äº‹ä»¶æµçš„ä¸åŒè¡¨ç°ï¼Œè¿™ä¸¤è€…çš„äº§ç”Ÿæ˜¯å› ä¸º IE å’Œ Netscape ä¸¤ä¸ªå¤§å…¬å¸å®Œå…¨ä¸åŒçš„äº‹ä»¶æµæ¦‚å¿µäº§ç”Ÿçš„ã€‚ï¼ˆäº‹ä»¶æµï¼šæ˜¯æŒ‡é¡µé¢æ¥å—äº‹ä»¶çš„é¡ºåºï¼‰IE çš„äº‹ä»¶æµæ˜¯äº‹ä»¶å†’æ³¡ï¼ŒNetscape çš„äº‹ä»¶æµæ˜¯äº‹ä»¶æ•è·æµã€‚</p><h3 id="1ã€äº‹ä»¶å†’æ³¡"><a href="#1ã€äº‹ä»¶å†’æ³¡" class="headerlink" title="1ã€äº‹ä»¶å†’æ³¡"></a>1ã€äº‹ä»¶å†’æ³¡</h3><p>IE çš„äº‹ä»¶æµå«åšäº‹ä»¶å†’æ³¡ï¼Œå³äº‹ä»¶å¼€å§‹æ—¶ç”±æœ€å…·ä½“çš„å…ƒç´ æ¥å—ï¼Œç„¶åé€çº§å‘ä¸Šä¼ æ’­åˆ°è¾ƒä¸ºä¸å…·ä½“çš„èŠ‚ç‚¹ï¼ˆæ–‡æ¡£ï¼‰ã€‚ä¾‹å¦‚ä¸‹é¢çš„ï¼š</p><pre><code>&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset=&quot;UTF-8&quot;&gt;&lt;title&gt;JavaScript&lt;/title&gt;&lt;/head&gt;&lt;body&gt;  &lt;div id=&quot;myDiv&quot;&gt;Click me&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><p>å¦‚æœç‚¹å‡»äº†é¡µé¢ä¸­çš„<div>å…ƒç´ ï¼Œé‚£ä¹ˆè¿™ä¸ª click äº‹ä»¶ä¼šæŒ‰ç…§å¦‚ä¸‹é¡ºåºä¼ æ’­ï¼š</p><p><code>1ã€&lt;div&gt;</code></p><p><code>2ã€&lt;body&gt;</code></p><p><code>3ã€&lt;html&gt;</code></p><p><code>4ã€document</code></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œclick äº‹ä»¶é¦–å…ˆåœ¨ div å…ƒç´ ä¸Šå‘ç”Ÿï¼Œè€Œè¿™ä¸ªå…ƒç´ å°±æ˜¯æˆ‘ä»¬å•å‡»çš„å…ƒç´ ã€‚ç„¶åï¼Œclick äº‹ä»¶æ²¿ DOM æ ‘å‘ä¸Šä¼ æ’­ï¼Œåœ¨æ¯ä¸€çº§èŠ‚ç‚¹ä¸Šéƒ½ä¼šå‘ç”Ÿï¼Œç›´åˆ°ä¼ æ’­åˆ° document å¯¹è±¡ã€‚</p><p>æ‰€æœ‰ç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒäº‹ä»¶å†’æ³¡ï¼Œä½†åœ¨å…·ä½“å®ç°ä¸Šè¿˜æ˜¯æœ‰ä¸€äº›å·®åˆ«ã€‚</p><h3 id="2ã€äº‹ä»¶æ•è·"><a href="#2ã€äº‹ä»¶æ•è·" class="headerlink" title="2ã€äº‹ä»¶æ•è·"></a>2ã€äº‹ä»¶æ•è·</h3><p>Netscape æå‡ºçš„å¦ä¸€ç§äº‹ä»¶æµå«åšäº‹ä»¶æ•è·ï¼Œäº‹ä»¶æ•è·çš„æ€æƒ³æ˜¯ä¸å¤ªå…·ä½“çš„èŠ‚ç‚¹åº”è¯¥æ›´æ—©æ¥æ”¶åˆ°äº‹ä»¶ï¼Œè€Œæœ€å…·ä½“çš„èŠ‚ç‚¹åº”è¯¥æœ€åæ¥æ”¶åˆ°äº‹ä»¶ã€‚äº‹ä»¶æ•è·çš„ç”¨æ„åœ¨äºåœ¨äº‹ä»¶åˆ°è¾¾é¢„å®šç›®æ ‡ä¹‹å‰æ•è·å®ƒã€‚è¿˜ä»¥å‰é¢çš„ä¾‹å­ä¸ºä¾‹ã€‚é‚£ä¹ˆå•å‡»<div>å…ƒç´ å°±ä¼šæŒ‰ä¸‹åˆ—é¡ºåºè§¦å‘ click äº‹ä»¶ï¼š</p><p><code>1ã€document</code></p><p><code>2ã€&lt;html&gt;</code></p><p><code>3ã€&lt;body&gt;</code></p><p><code>4ã€&lt;div&gt;</code></p><p>åœ¨äº‹ä»¶æ•è·è¿‡ç¨‹ä¸­ï¼Œdocument å¯¹è±¡é¦–å…ˆæ¥æ”¶åˆ° click äº‹ä»¶ï¼Œç„¶åæ²¿ DOM æ ‘ä¾æ¬¡å‘ä¸‹ï¼Œä¸€ç›´ä¼ æ’­åˆ°äº‹ä»¶çš„å®é™…ç›®æ ‡ï¼Œå³<div>å…ƒç´ ã€‚</p><p>è™½ç„¶äº‹ä»¶æ•è·æ˜¯ Netscape å”¯ä¸€æ”¯æŒçš„äº‹ä»¶æµæ¨¡å¼ï¼Œä½†å¾ˆå¤šä¸»æµæµè§ˆå™¨ç›®å‰ä¹Ÿéƒ½æ”¯æŒè¿™ç§äº‹ä»¶æµæ¨¡å‹ã€‚å°½ç®¡â€œDOM2 çº§äº‹ä»¶â€è§„èŒƒè¦æ±‚äº‹ä»¶åº”è¯¥ä» document å¯¹è±¡å¼€å§‹æ—¶ä¼ æ’­ï¼Œä½†è¿™äº›æµè§ˆå™¨éƒ½æ˜¯ä» window å¯¹è±¡å¼€å§‹æ•è·çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue3é¡¹ç›®æ­å»ºè§„èŒƒ</title>
      <link href="/2022/04/04/article16/"/>
      <url>/2022/04/04/article16/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€-ä»£ç è§„èŒƒ"><a href="#ä¸€-ä»£ç è§„èŒƒ" class="headerlink" title="ä¸€. ä»£ç è§„èŒƒ"></a>ä¸€. ä»£ç è§„èŒƒ</h2><h3 id="1-1-é›†æˆ-editorconfig-é…ç½®"><a href="#1-1-é›†æˆ-editorconfig-é…ç½®" class="headerlink" title="1.1 é›†æˆ editorconfig é…ç½®"></a>1.1 é›†æˆ editorconfig é…ç½®</h3><p>EditorConfig æœ‰åŠ©äºä¸ºä¸åŒ IDE ç¼–è¾‘å™¨ä¸Šç»´æŠ¤ä¸€è‡´çš„ç¼–ç é£æ ¼<br>å®‰è£…æ’ä»¶ï¼šEditorConfig for VS Code åä¼šè¯»å–.editorconfig æ–‡ä»¶</p><h1 id="http-editorconfig-org"><a href="#http-editorconfig-org" class="headerlink" title="http://editorconfig.org"></a><a href="http://editorconfig.org/">http://editorconfig.org</a></h1><pre><code>root = true[*] # è¡¨ç¤ºæ‰€æœ‰æ–‡ä»¶é€‚ç”¨charset = utf-8 # è®¾ç½®æ–‡ä»¶å­—ç¬¦é›†ä¸º utf-8indent_style = space # ç¼©è¿›é£æ ¼ï¼ˆtab | spaceï¼‰indent_size = 2 # ç¼©è¿›å¤§å°end_of_line = lf # æ§åˆ¶æ¢è¡Œç±»å‹(lf | cr | crlf)trim_trailing_whitespace = true # å»é™¤è¡Œé¦–çš„ä»»æ„ç©ºç™½å­—ç¬¦insert_final_newline = true # å§‹ç»ˆåœ¨æ–‡ä»¶æœ«å°¾æ’å…¥ä¸€ä¸ªæ–°è¡Œ[*.md] # è¡¨ç¤ºä»… md æ–‡ä»¶é€‚ç”¨ä»¥ä¸‹è§„åˆ™max_line_length = offtrim_trailing_whitespace = false</code></pre><h3 id="1-2-ä½¿ç”¨-prettier-å·¥å…·"><a href="#1-2-ä½¿ç”¨-prettier-å·¥å…·" class="headerlink" title="1.2 ä½¿ç”¨ prettier å·¥å…·"></a>1.2 ä½¿ç”¨ prettier å·¥å…·</h3><p>Prettier æ˜¯ä¸€æ¬¾å¼ºå¤§çš„æ ¼å¼åŒ–å·¥å…·</p><p>1.å®‰è£…å¼€å‘å¼ï¼ˆ-Dï¼‰ä¾èµ– prettier<br><code>npm install prettier -D</code></p><ol><li>é…ç½®.prettierrc æ–‡ä»¶ï¼š</li></ol><ul><li><p>useTabsï¼šä½¿ç”¨ tab ç¼©è¿›è¿˜æ˜¯ç©ºæ ¼ç¼©è¿›ï¼Œé€‰æ‹© falseï¼›</p></li><li><p>tabWidthï¼štab æ˜¯ç©ºæ ¼çš„æƒ…å†µä¸‹ï¼Œæ˜¯å‡ ä¸ªç©ºæ ¼ï¼Œé€‰æ‹© 2 ä¸ªï¼›</p></li><li><p>printWidthï¼šå½“è¡Œå­—ç¬¦çš„é•¿åº¦ï¼Œæ¨è 80ï¼Œä¹Ÿæœ‰äººå–œæ¬¢ 100 æˆ–è€… 120ï¼›</p></li><li><p>singleQuoteï¼šä½¿ç”¨å•å¼•å·è¿˜æ˜¯åŒå¼•å·ï¼Œé€‰æ‹© trueï¼Œä½¿ç”¨å•å¼•å·ï¼›</p></li><li><p>trailingCommaï¼šåœ¨å¤šè¡Œè¾“å…¥çš„å°¾é€—å·æ˜¯å¦æ·»åŠ ï¼Œè®¾ç½®ä¸º noneï¼›</p></li><li><p>semiï¼šè¯­å¥æœ«å°¾æ˜¯å¦è¦åŠ åˆ†å·ï¼Œé»˜è®¤å€¼ trueï¼Œé€‰æ‹© false è¡¨ç¤ºä¸åŠ ï¼›</p><pre><code>&#123;  &quot;useTabs&quot;: false,  &quot;tabWidth&quot;: 2,  &quot;printWidth&quot;: 80,  &quot;singleQuote&quot;: true,  &quot;trailingComma&quot;: &quot;none&quot;,  &quot;semi&quot;: false&#125;</code></pre><p>3.åˆ›å»º.prettierignore å¿½ç•¥æ–‡ä»¶</p><pre><code>/dist/*.local.output.js/node_modules/****/*.svg**/*.sh/public/*</code></pre><p>4.VSCode éœ€è¦å®‰è£… prettier çš„æ’ä»¶ï¼š<code>Prettier-Code formatter</code></p><p>5.åœ¨ package.json ä¸­é…ç½®ä¸€ä¸ª scripts</p></li></ul><p><code>&quot;prettier&quot;: &quot;prettier --write .&quot;</code></p><p>6.æ‰§è¡Œè„šæœ¬ï¼š</p><pre><code>`npm run prettier`</code></pre><h3 id="1-3-ä½¿ç”¨-ESLint-æ£€æµ‹"><a href="#1-3-ä½¿ç”¨-ESLint-æ£€æµ‹" class="headerlink" title="1.3 ä½¿ç”¨ ESLint æ£€æµ‹#"></a>1.3 ä½¿ç”¨ ESLint æ£€æµ‹<a href="https://www.cnblogs.com/Acyang/p/15649095.html#13-%E4%BD%BF%E7%94%A8eslint%E6%A3%80%E6%B5%8B">#</a></h3><ol><li><p>VSCode å®‰è£… ESLint æ’ä»¶ï¼š<code>ESLint</code></p></li><li><p>è§£å†³ eslint å’Œ prettier å†²çªçš„é—®é¢˜<br><code>npm i eslint-plugin-prettier eslint-config-prettier -D</code></p></li><li><p>æ·»åŠ  prettier æ’ä»¶</p><p>extends: [<br>â€œplugin:vue/vue3-essentialâ€,<br>â€œeslint:recommendedâ€,<br>â€œ@vue/typescript/recommendedâ€,<br>â€œ@vue/prettierâ€,<br>â€œ@vue/prettier/@typescript-eslintâ€,<br>â€˜plugin:prettier/recommendedâ€™<br>],</p></li></ol><h2 id="äºŒã€é¡¹ç›®æ­å»ºè§„èŒƒ-ç¬¬ä¸‰æ–¹åº“é›†æˆ"><a href="#äºŒã€é¡¹ç›®æ­å»ºè§„èŒƒ-ç¬¬ä¸‰æ–¹åº“é›†æˆ" class="headerlink" title="äºŒã€é¡¹ç›®æ­å»ºè§„èŒƒ-ç¬¬ä¸‰æ–¹åº“é›†æˆ"></a>äºŒã€é¡¹ç›®æ­å»ºè§„èŒƒ-ç¬¬ä¸‰æ–¹åº“é›†æˆ</h2><h3 id="2-1-vue-config-js-é…ç½®ï¼ˆä¿®æ”¹-vue-cli-å°è£…å¥½çš„å†…éƒ¨-webpackï¼‰"><a href="#2-1-vue-config-js-é…ç½®ï¼ˆä¿®æ”¹-vue-cli-å°è£…å¥½çš„å†…éƒ¨-webpackï¼‰" class="headerlink" title="2.1 vue.config.js é…ç½®ï¼ˆä¿®æ”¹ vue-cli å°è£…å¥½çš„å†…éƒ¨ webpackï¼‰"></a>2.1 vue.config.js é…ç½®ï¼ˆä¿®æ”¹ vue-cli å°è£…å¥½çš„å†…éƒ¨ webpackï¼‰</h3><p>node æ¥å— commonJS æ¨¡æ¿è§„èŒƒ</p><pre><code>const path require(&#39;path&#39;)module.exports = &#123;    // 1. é…ç½®æ–¹å¼ä¸€ï¼š CLIæä¾›çš„å±æ€§    outputDir: &#39;./build&#39;,    publicPath: &#39;./&#39;, // æ‰“åŒ…åæ–‡ä»¶æ˜¯ç›¸å¯¹è·¯å¾„    // 2. é…ç½®æ–¹å¼äºŒï¼š å’ŒWebpackå±æ€§å®Œå…¨ä¸€è‡´ï¼Œæœ€åä¼šè¿›è¡Œåˆå¹¶    configureWebpack: &#123;        resolve: &#123;            alias: &#123;                components: &#39;@/components&#39;            &#125;        &#125;    &#125;,    // configureæ˜¯å‡½æ•°å½¢å¼ï¼šç›´æ¥è¦†ç›–åŸWebpacké…ç½®    configureWebpack: (config) =&gt; &#123;        config.resolve.alias = &#123;            &quot;@&quot;: path.resolve(__dirname, &#39;src&#39;),            components: &#39;@/components&#39;        &#125;    &#125;,    // 3. é…ç½®æ–¹å¼ä¸‰ï¼šchainWebpacké“¾å¼å½¢å¼    chainWebpack: (config) =&gt; &#123;        config.resolve.alias.set(&#39;@&#39;, path.resolve(__dirname, &#39;src&#39;).set(&#39;components&#39;, &#39;@/components&#39;))    &#125;&#125;</code></pre><h3 id="2-2-vue-router-é›†æˆ"><a href="#2-2-vue-router-é›†æˆ" class="headerlink" title="2.2 vue-router é›†æˆ"></a>2.2 vue-router é›†æˆ</h3><ol><li><p>å®‰è£… vue-router æœ€æ–°ç‰ˆæœ¬</p><p><code> npm install vue-router@next</code></p><p><code>defineComponent</code>ï¼šå®šä¹‰ç»„ä»¶ï¼Œæ›´å¥½çš„æ”¯æŒ ts</p></li><li><p>åˆ›å»º router å¯¹è±¡</p><p>import { createRouter, createWebHashHistory } from â€˜vue-routerâ€™;<br>import type { RouteRecordRaw } from â€˜vue-routerâ€™; // å£°æ˜å¯¼å…¥çš„æ˜¯ä¸€ä¸ª typeï¼Œå¯ä¸åŠ </p><p>const routes: RouteRecordRaw[] = [<br>{<br>path: â€˜/â€˜,<br>redirect: â€˜/loginâ€™<br>},<br>{<br>path: â€˜/loginâ€™,<br>component: () =&gt; import(â€˜@/views/login/index.vueâ€™)<br>},<br>{<br>path: â€˜/mainâ€™,<br>component: () =&gt; import(â€˜@/views/main/index.vueâ€™)<br>}<br>]</p><p>const router = createRouter({<br>routes,<br>history: createWebHashHistory()<br>})</p><p>export default router</p></li></ol><h3 id="2-3-element-plus-é›†æˆ"><a href="#2-3-element-plus-é›†æˆ" class="headerlink" title="2.3 element-plus é›†æˆ"></a>2.3 element-plus é›†æˆ</h3><ol><li><p>å…¨å±€å¼•ç”¨ï¼šæ‰€æœ‰ç»„ä»¶å…¨éƒ¨é›†æˆ</p><p> ä¼˜ç‚¹ï¼šé›†æˆç®€å•ï¼Œæ–¹ä¾¿ä½¿ç”¨<br> ç¼ºç‚¹ï¼šå…¨éƒ¨ä¼šæ‰“åŒ…</p><p> import ElementPlus from â€˜element-plusâ€™;<br> import â€˜element-plus/theme-chalk/index.cssâ€™;<br> app.use(ElementPlus)</p></li><li><p>æŒ‰éœ€å¼•ç”¨</p><p> ä¼˜ç‚¹ï¼šåŒ…ä¼šå°ä¸€äº›<br> ç¼ºç‚¹ï¼šå¼•ç”¨éº»çƒ¦</p><pre><code> &lt;el-button type=&quot;primary&quot;&gt;å“ˆå“ˆå“ˆå“ˆ&lt;/el-button&gt;</code></pre><p> import { ElButton } from â€˜element-plusâ€™<br> import â€˜element-plus/theme-chalk/base.cssâ€™;<br> import â€˜element-plus/theme-chalk/el-button.cssâ€™;</p><p> components: {<br> ElButton<br> }</p></li></ol><p>ä»¥ä¸Šæ–¹æ³•å¤ªéº»çƒ¦ï¼Œå¯ä»¥æ·»åŠ  babel-plugin-import å·¥å…·è¿›è¡ŒæŒ‰éœ€å¼•å…¥ï¼Œå¹¶è¿›è¡Œé…ç½®</p><p><code>npm install babel-plugin-import -D</code></p><pre><code>// babel.config.jsmodule.exports = &#123;  plugins: [    [      &#39;import&#39;,      &#123;        libraryName: &#39;element-plus&#39;,        // å¼•å…¥ç»„ä»¶        customName: (name) =&gt; &#123;          name = name.slice(3)          return `element-plus/lib/components/$&#123;name&#125;`        &#125;,        // å¼•å…¥æ ·å¼        customStyleName: (name) =&gt; &#123;          name = name.slice(3)          // å¦‚æœä½ éœ€è¦å¼•å…¥ [name].scss æ–‡ä»¶ï¼Œä½ éœ€è¦ç”¨ä¸‹é¢è¿™è¡Œ          // return `element-plus/lib/components/$&#123;name&#125;/style`          // å¼•å…¥ [name].css          return `element-plus/lib/components/$&#123;name&#125;/style/css`        &#125;      &#125;    ]  ],  presets: [&#39;@vue/cli-plugin-babel/preset&#39;]&#125;</code></pre><ul><li><p>main.ts å…¥å£æ–‡ä»¶å­˜æ”¾ä¸»è¦é€»è¾‘</p></li><li><p>æŠŠå…±æ€§çš„é€»è¾‘è¿›è¡ŒæŠ½å–</p><p>// main.ts<br>import { createApp, App } from â€˜vueâ€™<br>import { globalRegister } from â€˜./globalâ€™<br>import rootApp from â€˜./App.vueâ€™</p><p>const app: App = createApp(rootApp)</p><p>/** app.use()æœ‰ä¼ å…¥å‡½æ•°çš„ä¸¤ç§æ–¹å¼<br>app.use(function(app: App) {</p><pre><code>  &#125;)  app.use(&#123;      install: function(app: App) &#123;      &#125;  &#125;)</code></pre><p>*/</p><p>// æ–¹å¼ä¸€ï¼š<br>globalRegister(app)<br>// æ–¹å¼äºŒï¼šæ›´ä¼˜é›…<br>app.use(globalRegister)</p><p>// global/index.ts<br>import { App } from â€˜vueâ€™<br>import registerElement from â€˜./regiserElementâ€™<br>export function globalRegister(app: App): void {<br>registerElement(app)<br>}</p><p>// global/registerELement<br>import { App } from â€˜vueâ€™<br>import â€˜element-plus/theme-chalk/base.cssâ€™;<br>import { ElButton, ElForm } from â€˜element-plusâ€™</p><p>const components = [<br>ElButton,<br>ElForm<br>]</p><p>export default function (app: App): void {<br>for (const component of components) {<br>app.component(component.name, component)<br>}<br>}</p></li></ul><h2 id="ä¸‰ã€å…¶ä»–æ–‡ä»¶"><a href="#ä¸‰ã€å…¶ä»–æ–‡ä»¶" class="headerlink" title="ä¸‰ã€å…¶ä»–æ–‡ä»¶"></a>ä¸‰ã€å…¶ä»–æ–‡ä»¶</h2><h3 id="1-browserslistrc-å¸®åŠ©æˆ‘ä»¬åšæµè§ˆå™¨é€‚é…"><a href="#1-browserslistrc-å¸®åŠ©æˆ‘ä»¬åšæµè§ˆå™¨é€‚é…" class="headerlink" title="1. browserslistrc - å¸®åŠ©æˆ‘ä»¬åšæµè§ˆå™¨é€‚é…"></a>1. browserslistrc - å¸®åŠ©æˆ‘ä»¬åšæµè§ˆå™¨é€‚é…</h3><ul><li>å¸®åŠ©æˆ‘ä»¬åšæµè§ˆå™¨é€‚é…</li><li>css æŸ¥è¯¢æ–‡ä»¶</li><li>babelï¼šES6 TS -&gt; JS</li></ul><blockquote><p>1% // å¸‚åœºä»½é¢å¤§äºç™¾åˆ†ä¹‹ä¸€çš„æµè§ˆå™¨<br>last 2 versions // é€‚é…ä¸»æµæµè§ˆå™¨çš„æœ€æ–°çš„ä¸¤ä¸ªç‰ˆæœ¬<br>not dead // ç›®å‰æµè§ˆå™¨å¤„äºç»´æŠ¤çŠ¶æ€çš„ xxxxxxxxxxÂ &gt; 1% // å¸‚åœºä»½é¢å¤§äºç™¾åˆ†ä¹‹ä¸€çš„æµè§ˆå™¨ last 2 versions // é€‚é…ä¸»æµæµè§ˆå™¨çš„æœ€æ–°çš„ä¸¤ä¸ªç‰ˆæœ¬ not dead // ç›®å‰æµè§ˆå™¨å¤„äºç»´æŠ¤çŠ¶æ€çš„ onloadï¼šå½“é¡µé¢æˆ–å›¾åƒåŠ è½½å®Œåç«‹å³è§¦å‘ onblurï¼šå…ƒç´ å¤±å»ç„¦ç‚¹ onfocusï¼šå…ƒç´ è·å¾—ç„¦ç‚¹ onclickï¼šé¼ æ ‡ç‚¹å‡»æŸä¸ªå¯¹è±¡ onchangeï¼šç”¨æˆ·æ”¹å˜åŸŸçš„å†…å®¹ onmouseoverï¼šé¼ æ ‡ç§»åŠ¨åˆ°æŸä¸ªå…ƒç´ ä¸Š onmouseoutï¼šé¼ æ ‡ä»æŸä¸ªå…ƒç´ ä¸Šç¦»å¼€ onkeyupï¼šæŸä¸ªé”®ç›˜çš„é”®è¢«æ¾å¼€ onkeydownï¼šæŸä¸ªé”®ç›˜çš„é”®è¢«æŒ‰ä¸‹</p></blockquote><h3 id="2-tsconfig-json-TS-é…ç½®æ–‡ä»¶"><a href="#2-tsconfig-json-TS-é…ç½®æ–‡ä»¶" class="headerlink" title="2.tsconfig.json - TS é…ç½®æ–‡ä»¶"></a>2.tsconfig.json - TS é…ç½®æ–‡ä»¶</h3><pre><code>&#123;  &quot;compilerOptions&quot;: &#123; // ç¼–è¯‘é€‰é¡¹    // ç›®æ ‡ä»£ç ï¼ˆts -&gt; js(es5/6/7)ï¼‰    &quot;target&quot;: &quot;esnext&quot;,    // ç›®æ ‡ä»£ç éœ€è¦ä½¿ç”¨çš„æ¨¡å—åŒ–æ–¹æ¡ˆ(commonjs require/module.exports/es module import/export)ï¼Œå¸¸å†™umdï¼Œä»£è¡¨æ”¯æŒå¤šç§æ¨¡å—åŒ–    &quot;module&quot;: &quot;esnext&quot;,    // ä¸¥æ ¼çš„æ£€æŸ¥(any)    &quot;strict&quot;: true,    // å¯¹jsxè¿›è¡Œæ€æ ·çš„å¤„ç†ï¼Œä¸è½¬åŒ–preserveä¿ç•™    &quot;jsx&quot;: &quot;preserve&quot;,    // è¾…åŠ©å¯¼å…¥åŠŸèƒ½    &quot;importHelpers&quot;: true,    // æŒ‰ç…§nodeæ–¹å¼å»è§£ææ¨¡å— import &quot;/index.node .json .js&quot;    &quot;moduleResolution&quot;: &quot;node&quot;,    // è·³è¿‡ä¸€äº›åº“çš„ç±»å‹æ£€æµ‹(axiosæœ¬èº«ä¼šå®šä¹‰å¾ˆå¤šç±»å‹ï¼Œæé«˜æ€§èƒ½ï¼Œæœ‰å¯èƒ½å¤šä¸ªåº“çš„ç±»å‹å‘½åä¼šå†²çª)    &quot;skipLibCheck&quot;: true,    // export default/module.exports = &#123;&#125;æ˜¯å¦èƒ½æ··åˆä½¿ç”¨    // es module / commonjs æ˜¯å¦èƒ½æ··åˆä½¿ç”¨    &quot;esModuleInterop&quot;: true,    &quot;allowSyntheticDefaultImports&quot;: true,    // è¦ä¸è¦ç”Ÿæˆæ˜ å°„æ–‡ä»¶(ts -&gt; js)    &quot;sourceMap&quot;: true,    // æ–‡ä»¶è·¯å¾„åœ¨è§£ææ—¶çš„åŸºæœ¬çš„url    &quot;baseUrl&quot;: &quot;.&quot;,    // æŒ‡å®šå…·ä½“è¦è§£æä½¿ç”¨çš„ç±»å‹ï¼Œä¸ä¼ æ—¶targetå†™çš„ä»€ä¹ˆç±»å‹åœ¨è¿™é‡Œå°±å¯ä»¥ä½¿ç”¨    &quot;types&quot;: [&quot;webpack-env&quot;],    // ç¼–è¯‘çš„è·¯å¾„è§£æï¼Œä½¿ç”¨@/componentsä¼šåœ¨src/componentsä¸­å¯»æ‰¾    &quot;paths&quot;: &#123;      &quot;@/*&quot;: [&quot;src/*&quot;],      &quot;components/*&quot;: [&quot;src/components/*&quot;] // (æˆ‘ä»¬è‡ªå·±æ–°å¢çš„)    &#125;,    // å¯ä»¥æŒ‡å®šåœ¨é¡¹ç›®ä¸­å¯ä»¥ä½¿ç”¨å“ªäº›åº“çš„ç±»å‹(Proxy/Window/Document)    &quot;lib&quot;: [&quot;esnext&quot;, &quot;dom&quot;, &quot;dom.iterable&quot;, &quot;scripthost&quot;]  &#125;,  // å“ªäº›æ–‡ä»¶éœ€è¦è¢«çº¦æŸå’Œè§£æ  &quot;include&quot;: [    &quot;src/**/*.ts&quot;,    &quot;src/**/*.tsx&quot;,    &quot;src/**/*.vue&quot;,    &quot;tests/**/*.ts&quot;,    &quot;tests/**/*.tsx&quot;  ],  // æ’é™¤å“ªäº›æ–‡ä»¶è¢«çº¦æŸå’Œè§£æ  &quot;exclude&quot;: [&quot;node_modules&quot;]&#125;</code></pre><h3 id="3-shims-vue-d-ts-å£°æ˜ï¼Œé˜²æ­¢æŠ¥é”™"><a href="#3-shims-vue-d-ts-å£°æ˜ï¼Œé˜²æ­¢æŠ¥é”™" class="headerlink" title="3.shims-vue.d.ts å£°æ˜ï¼Œé˜²æ­¢æŠ¥é”™"></a>3.shims-vue.d.ts å£°æ˜ï¼Œé˜²æ­¢æŠ¥é”™</h3><pre><code>declare module &#39;*.vue&#39; &#123;  import type &#123; DefineComponent &#125; from &#39;vue&#39;  const component: DefineComponent&lt;&#123;&#125;, &#123;&#125;, any&gt;  export default component&#125;</code></pre><p>// å£°æ˜ä¸€ä¸‹$storeï¼Œé˜²æ­¢æŠ¥é”™<br><code>declare let $store: any</code></p>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•åŸºäº React å°è£…ä¸€ä¸ªç»„ä»¶</title>
      <link href="/2022/03/18/article15/"/>
      <url>/2022/03/18/article15/</url>
      
        <content type="html"><![CDATA[<h2 id="antd-æ˜¯å¦‚ä½•å°è£…ç»„ä»¶çš„"><a href="#antd-æ˜¯å¦‚ä½•å°è£…ç»„ä»¶çš„" class="headerlink" title="antd æ˜¯å¦‚ä½•å°è£…ç»„ä»¶çš„"></a>antd æ˜¯å¦‚ä½•å°è£…ç»„ä»¶çš„</h2><h3 id="ä»“åº“åœ°å€"><a href="#ä»“åº“åœ°å€" class="headerlink" title="ä»“åº“åœ°å€"></a>ä»“åº“åœ°å€</h3><ul><li>antd ä»“åº“åœ°å€ï¼š<a href="https://github.com/ant-design/ant-design">https://github.com/ant-design/ant-design</a></li><li>divider ç»„ä»¶åœ¨ä¸‹å›¾å¯¹åº”ç›®å½•ä¸‹ (ä»£ç æˆ‘ä¼šæ‹·è´è¿‡æ¥ï¼Œæ„Ÿå…´è¶£çš„è¿˜æ˜¯å¯ä»¥å»å…‹éš†ä¸€ä¸‹ä»“åº“)<br><img src="https://img2020.cnblogs.com/blog/2352436/202111/2352436-20211127180234938-992380461.png"></li></ul><h3 id="divider-ç»„ä»¶æºä»£ç "><a href="#divider-ç»„ä»¶æºä»£ç " class="headerlink" title="divider ç»„ä»¶æºä»£ç "></a>divider ç»„ä»¶æºä»£ç </h3><p>antd çš„æºç ä½¿ç”¨äº† TypeScript è¯­æ³•ï¼Œå› æ­¤ä¸äº†è§£è¯­æ³•çš„åŒå­¦è¦åŠæ—¶äº†è§£ï¼</p><pre><code>import * as React from &#39;react&#39;;import classNames from &#39;classnames&#39;;import &#123; ConfigConsumer, ConfigConsumerProps &#125; from &#39;../config-provider&#39;;export interface DividerProps &#123;    prefixCls?: string;    type?: &#39;horizontal&#39; | &#39;vertical&#39;;    orientation?: &#39;left&#39; | &#39;right&#39; | &#39;center&#39;;    className?: string;    children?: React.ReactNode;    dashed?: boolean;    style?: React.CSSProperties;    plain?: boolean;&#125;const Divider: React.FC&lt;DividerProps&gt; = props =&gt; (    &lt;ConfigConsumer&gt;        &#123;(&#123; getPrefixCls, direction &#125;: ConfigConsumerProps) =&gt; &#123;            const &#123;                prefixCls: customizePrefixCls,                type = &#39;horizontal&#39;,                orientation = &#39;center&#39;,                className,                children,                dashed,                plain,                ...restProps            &#125; = props;            const prefixCls = getPrefixCls(&#39;divider&#39;, customizePrefixCls);            const orientationPrefix = orientation.length &gt; 0 ? `-$&#123;orientation&#125;` : orientation;            const hasChildren = !!children;            const classString = classNames(                prefixCls,                `$&#123;prefixCls&#125;-$&#123;type&#125;`,                &#123;                    [`$&#123;prefixCls&#125;-with-text`]: hasChildren,                    [`$&#123;prefixCls&#125;-with-text$&#123;orientationPrefix&#125;`]: hasChildren,                    [`$&#123;prefixCls&#125;-dashed`]: !!dashed,                    [`$&#123;prefixCls&#125;-plain`]: !!plain,                    [`$&#123;prefixCls&#125;-rtl`]: direction === &#39;rtl&#39;,                &#125;,                className,            );            return (                &lt;div className=&#123;classString&#125; &#123;...restProps&#125; role=&quot;separator&quot;&gt;                    &#123;children &amp;&amp; &lt;span className=&#123;`$&#123;prefixCls&#125;-inner-text`&#125;&gt;&#123;children&#125;&lt;/span&gt;&#125;                &lt;/div&gt;            );        &#125;&#125;    &lt;/ConfigConsumer&gt;);export default Divider;</code></pre><h3 id="å¦‚ä½•æš´éœ²ç»„ä»¶å±æ€§"><a href="#å¦‚ä½•æš´éœ²ç»„ä»¶å±æ€§" class="headerlink" title="å¦‚ä½•æš´éœ²ç»„ä»¶å±æ€§"></a>å¦‚ä½•æš´éœ²ç»„ä»¶å±æ€§</h3><p>åœ¨æºç ä¸­ï¼Œæœ€å…ˆçœ‹åˆ°çš„æ˜¯ä»¥ä¸‹å†…å®¹ï¼Œè¿™äº›å±æ€§ä¹Ÿå°±æ˜¯ divider ç»„ä»¶æ‰€æš´éœ²çš„å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ <code>&lt;Divider type=&#39;vertical&#39; /&gt;</code> è¿™æ ·æ¥ä¼ å…¥ type å±æ€§ï¼Œé‚£ä¹ˆ divider åˆ†å‰²çº¿æ ·å¼å°±ä¼šæ¸²æŸ“ä¸ºå‚ç›´åˆ†å‰²çº¿ï¼Œæ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼</p><pre><code>export interface DividerProps &#123; // interface æ˜¯ TypeScript çš„è¯­æ³•    prefixCls?: string;    type?: &#39;horizontal&#39; | &#39;vertical&#39;; // é™å®š type åªèƒ½ä¼ å…¥ä¸¤ä¸ªå€¼ä¸­çš„ä¸€ä¸ª    orientation?: &#39;left&#39; | &#39;right&#39; | &#39;center&#39;;    className?: string;    children?: React.ReactNode;    dashed?: boolean;    style?: React.CSSProperties;    plain?: boolean;&#125;</code></pre><p>åœ¨ä¸Šé¢çš„å±æ€§ä¸­ï¼Œæˆ‘ä»¬è¿˜å‘ç° className å’Œ style æ˜¯æ¯”è¾ƒå¸¸è§çš„å±æ€§ï¼Œè¿™ä»£è¡¨æˆ‘ä»¬å¯ä»¥ <code>&lt;Divider type=&#39;vertical&#39; className=&#39;myClassName&#39; style=&#123;&#123;width: '1em'&#125;&#125; /&gt;</code> è¿™æ ·ä½¿ç”¨è¿™äº›å±æ€§ã€‚</p><h3 id="å¦‚ä½•è®¾ç½®ç»Ÿä¸€ç±»åå‰ç¼€"><a href="#å¦‚ä½•è®¾ç½®ç»Ÿä¸€ç±»åå‰ç¼€" class="headerlink" title="å¦‚ä½•è®¾ç½®ç»Ÿä¸€ç±»åå‰ç¼€"></a>å¦‚ä½•è®¾ç½®ç»Ÿä¸€ç±»åå‰ç¼€</h3><p>æˆ‘ä»¬çŸ¥é“ï¼Œantd çš„ç»„ä»¶ç±»åä¼šæœ‰ä»–ä»¬ç‹¬ç‰¹çš„å‰ç¼€ <code>ant-</code>ï¼Œè¿™æ˜¯å¦‚ä½•å¤„ç†çš„å‘¢ï¼Ÿç»§ç»­çœ‹æºç ã€‚</p><pre><code>&lt;ConfigConsumer&gt;    &#123;(&#123; getPrefixCls, direction &#125;: ConfigConsumerProps) =&gt; &#123;        const &#123;            prefixCls: customizePrefixCls,            type = &#39;horizontal&#39;,            orientation = &#39;center&#39;,            className,            children,            dashed,            plain,            ...restProps        &#125; = props;        const prefixCls = getPrefixCls(&#39;divider&#39;, customizePrefixCls);</code></pre><p>â€‹<br> ä»æºç ä¸­ï¼Œå‘ç° prefixCls ï¼Œæ˜¯é€šè¿‡ getPrefixCls æ–¹æ³•ç”Ÿæˆï¼Œå†çœ‹çœ‹ getPrefixCls æ–¹æ³•çš„æºç ï¼Œå¦‚ä¸‹ã€‚</p><pre><code>    export interface ConfigConsumerProps &#123;  ...  getPrefixCls: (suffixCls?: string, customizePrefixCls?: string) =&gt; string;  ...&#125;const defaultGetPrefixCls = (suffixCls?: string, customizePrefixCls?: string) =&gt; &#123;  if (customizePrefixCls) return customizePrefixCls;  return suffixCls ? `ant-$&#123;suffixCls&#125;` : &#39;ant&#39;;&#125;;</code></pre><p>ä¸éš¾å‘ç°æ­¤æ—¶ä¼šç”Ÿæˆçš„ç±»åå‰ç¼€ä¸º <code>ant-divider</code> ã€‚</p><h3 id="å¦‚ä½•å¤„ç†æ ·å¼ä¸ç±»å"><a href="#å¦‚ä½•å¤„ç†æ ·å¼ä¸ç±»å" class="headerlink" title="å¦‚ä½•å¤„ç†æ ·å¼ä¸ç±»å"></a>å¦‚ä½•å¤„ç†æ ·å¼ä¸ç±»å</h3><p>æˆ‘ä»¬å°è£…çš„ç»„ä»¶è‚¯å®šæ˜¯æœ‰é¢„è®¾çš„æ ·å¼ï¼Œåˆå› ä¸ºæ ·å¼è¦é€šè¿‡ç±»åæ¥å®šä¹‰ï¼Œè€Œæˆ‘ä»¬ä¼ å…¥çš„å±æ€§å€¼åˆ™ä¼šå†³å®šç»„ä»¶ä¸Šè¦æ·»åŠ å“ªä¸ªç±»åï¼Œè¿™åˆæ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿä¸‹é¢çœ‹æºç ã€‚</p><pre><code> import classNames from &#39;classnames&#39;; const classString = classNames(     prefixCls,     `$&#123;prefixCls&#125;-$&#123;type&#125;`,     &#123;         [`$&#123;prefixCls&#125;-with-text`]: hasChildren,         [`$&#123;prefixCls&#125;-with-text$&#123;orientationPrefix&#125;`]: hasChildren,         [`$&#123;prefixCls&#125;-dashed`]: !!dashed,         [`$&#123;prefixCls&#125;-plain`]: !!plain,         [`$&#123;prefixCls&#125;-rtl`]: direction === &#39;rtl&#39;,     &#125;,     className, ); return (     &lt;div className=&#123;classString&#125; &#123;...restProps&#125; role=&quot;separator&quot;&gt;         &#123;children &amp;&amp; &lt;span className=&#123;`$&#123;prefixCls&#125;-inner-text`&#125;&gt;&#123;children&#125;&lt;/span&gt;&#125;     &lt;/div&gt; );</code></pre><p>å®ƒé€šè¿‡ classNames æ–¹æ³•ï¼ˆ<a href="https://www.npmjs.com/package/classnames">classNames æ˜¯ React å¤„ç†å¤šç±»åçš„ç»„ä»¶</a>ï¼‰å®šä¹‰äº†ä¸€ä¸ªæ‰€æœ‰ç±»åçš„å¸¸é‡ï¼Œç„¶åä¼ ç»™äº† div ä¸­çš„ className å±æ€§ã€‚</p><p>å…¶å®ç”Ÿæˆçš„ç±»åä¹Ÿå°±æ˜¯ <code>ant-divider-horizontal</code> è¿™ä¸ªæ ·å­ï¼Œé‚£ä¹ˆ css ä¸­ä»¥æ­¤ç±»åå®šä¹‰çš„æ ·å¼ä¹Ÿå°±è‡ªç„¶ä¼šç”Ÿæ•ˆäº†ã€‚è€Œ className å’Œ style å±æ€§åˆ™æ˜¯é€šè¿‡ <code>&#123;...restProps&#125;</code> æ¥ä¼ å…¥ã€‚</p><p>æœ€åæˆ‘ä»¬å†çœ‹çœ‹å®ƒçš„ css æ ·å¼ä»£ç æ˜¯æ€ä¹ˆå†™çš„ï¼</p><h3 id="divider-ç»„ä»¶æ ·å¼æºä»£ç "><a href="#divider-ç»„ä»¶æ ·å¼æºä»£ç " class="headerlink" title="divider ç»„ä»¶æ ·å¼æºä»£ç "></a>divider ç»„ä»¶æ ·å¼æºä»£ç </h3><p>antd ç»„ä»¶çš„æ ·å¼ä½¿ç”¨ Less ä¹¦å†™ï¼Œä¸äº†è§£ Less è¯­æ³•çš„åŒå­¦ä¸€å®šè¦äº†è§£ä¸€ä¸‹ã€‚</p><pre><code>@import &#39;../../style/themes/index&#39;;@import &#39;../../style/mixins/index&#39;;@divider-prefix-cls: ~&#39;@&#123;ant-prefix&#125;-divider&#39;; // å¯ä»¥çœ‹åˆ°è¿™é‡Œå¯¹åº”çš„ä¹Ÿå°±æ˜¯ä¹‹å‰è¯´åˆ°çš„ç±»åå‰ç¼€.@&#123;divider-prefix-cls&#125; &#123;  .reset-component();  border-top: @border-width-base solid @divider-color;  &amp;-vertical &#123; // è¿™é‡Œçš„å®Œæ•´ç±»åå…¶å®å°±æ˜¯ ant-divider-vertical, ä¹Ÿå°±æ˜¯ divider ç»„ä»¶çš„ type å±æ€§å€¼ä¸º vertical æ—¶å¯¹åº”çš„æ ·å¼    position: relative;    top: -0.06em;    display: inline-block;    height: 0.9em;    margin: 0 8px;    vertical-align: middle;    border-top: 0;    border-left: @border-width-base solid @divider-color;  &#125;  &amp;-horizontal &#123;    display: flex;    clear: both;    width: 100%;    min-width: 100%;    margin: 24px 0;  &#125;  &amp;-horizontal&amp;-with-text &#123;    display: flex;    margin: 16px 0;    color: @heading-color;    font-weight: 500;    font-size: @font-size-lg;    white-space: nowrap;    text-align: center;    border-top: 0;    border-top-color: @divider-color;    &amp;::before,    &amp;::after &#123;      position: relative;      top: 50%;      width: 50%;      border-top: @border-width-base solid transparent;      // Chrome not accept `inherit` in `border-top`      border-top-color: inherit;      border-bottom: 0;      transform: translateY(50%);      content: &#39;&#39;;    &#125;  &#125;  &amp;-horizontal&amp;-with-text-left &#123;    &amp;::before &#123;      top: 50%;      width: @divider-orientation-margin;    &#125;    &amp;::after &#123;      top: 50%;      width: 100% - @divider-orientation-margin;    &#125;  &#125;  &amp;-horizontal&amp;-with-text-right &#123;    &amp;::before &#123;      top: 50%;      width: 100% - @divider-orientation-margin;    &#125;    &amp;::after &#123;      top: 50%;      width: @divider-orientation-margin;    &#125;  &#125;  &amp;-inner-text &#123;    display: inline-block;    padding: 0 @divider-text-padding;  &#125;  &amp;-dashed &#123;    background: none;    border-color: @divider-color;    border-style: dashed;    border-width: @border-width-base 0 0;  &#125;  &amp;-horizontal&amp;-with-text&amp;-dashed &#123;    border-top: 0;    &amp;::before,    &amp;::after &#123;      border-style: dashed none none;    &#125;  &#125;  &amp;-vertical&amp;-dashed &#123;    border-width: 0 0 0 @border-width-base;  &#125;  &amp;-plain&amp;-with-text &#123;    color: @text-color;    font-weight: normal;    font-size: @font-size-base;  &#125;&#125;@import &#39;./rtl&#39;;</code></pre><p>åœ¨æºç ä¸­è¿˜æœ‰å¾ˆå¤šåœ°æ–¹å€¼å¾—å­¦ä¹ ï¼Œæ¯”å¦‚è¿™é‡Œçš„ ConfigConsumer çš„å®šä¹‰ä¸ä½¿ç”¨ï¼Œæ„Ÿå…´è¶£çš„æ¬¢è¿ä¸€èµ·äº¤æµã€‚</p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTPå›¾è§£</title>
      <link href="/2022/03/11/article14/"/>
      <url>/2022/03/11/article14/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡åªè¦å†…å®¹ï¼š</p><ul><li>äº†è§£ web åŠç½‘ç»œåŸºç¡€</li><li>ç®€å•çš„ http åè®®</li></ul><h2 id="äº†è§£-web-åŠç½‘ç»œåŸºç¡€"><a href="#äº†è§£-web-åŠç½‘ç»œåŸºç¡€" class="headerlink" title="äº†è§£ web åŠç½‘ç»œåŸºç¡€"></a>äº†è§£ web åŠç½‘ç»œåŸºç¡€</h2><h3 id="1ã€ä½¿ç”¨-http-åè®®è®¿é—®-web"><a href="#1ã€ä½¿ç”¨-http-åè®®è®¿é—®-web" class="headerlink" title="1ã€ä½¿ç”¨ http åè®®è®¿é—® web"></a>1ã€ä½¿ç”¨ http åè®®è®¿é—® web</h3><p>å½“æˆ‘ä»¬ç”¨ç½‘é¡µæµè§ˆå™¨ï¼ˆweb browserï¼‰çš„åœ°å€æ ä¸­è¾“å…¥ URL æ—¶ï¼ŒWeb é¡µé¢çš„å‘ˆç°è¿‡ç¨‹ï¼š</p><ul><li>è¾“å…¥ URL æ—¶ï¼Œå¯ä»¥çœ‹åˆ° web é¡µé¢ï¼Œå³ä½¿ä¸äº†è§£è¿ä½œåŸç†ï¼Œä¹Ÿèƒ½çœ‹åˆ°é¡µé¢</li><li>è¾“å…¥ URL åï¼Œä¿¡æ¯ä¼šè¢«é€å¾€æŸå¤„</li><li>ç„¶åä»æŸå¤„è·å¾—çš„å›å¤ï¼Œå†…å®¹å°±ä¼šæ˜¾ç¤ºåœ¨ web é¡µé¢ä¸Š</li></ul><p>web é¡µé¢ä¸å¯èƒ½å‡­ç©ºæ˜¾ç¤ºå‡ºæ¥ï¼Œæ ¹æ® web æµè§ˆå™¨åœ°å€æ ä¸­æŒ‡å®šçš„ URLï¼Œweb æµè§ˆå™¨ä¼šä»æœåŠ¡å™¨ç«¯è·å–æ–‡ä»¶èµ„æºç­‰ä¿¡æ¯ï¼Œä»è€Œæ˜¾ç¤º web é¡µé¢ã€‚</p><p>åƒè¿™ä¸€å¥—æµç¨‹å°±å¯ä»¥ç§°ä½œæ˜¯å®¢æˆ·ç«¯ï¼ˆclientï¼‰å‘æœåŠ¡ç«¯ï¼ˆserverï¼‰è·å–æœåŠ¡å™¨èµ„æº</p><p><img src="https://images2015.cnblogs.com/blog/938876/201612/938876-20161226102247007-547804454.png" alt="img"></p><p>web ä½¿ç”¨ä¸€ç§åä¸º HTTPï¼ˆHyperText Transfer Protocolï¼‰ï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®ä½œä¸ºè§„èŒƒï¼Œå®Œæˆä»å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯ç­‰ä¸€ç³»åˆ—è¿ä½œè¿‡ç¨‹ã€‚è€Œåè®®æ˜¯æŒ‡è§„åˆ™çš„çº¦å®šã€‚å¯ä»¥ç†è§£æˆï¼Œweb æ˜¯å»ºç«‹åœ¨ HTTP åè®®ä¸Šé€šä¿¡çš„ã€‚</p><h3 id="2ã€ç½‘ç»œåŸºç¡€-TCP-IP"><a href="#2ã€ç½‘ç»œåŸºç¡€-TCP-IP" class="headerlink" title="2ã€ç½‘ç»œåŸºç¡€ TCP/IP"></a>2ã€ç½‘ç»œåŸºç¡€ TCP/IP</h3><p>ä¸ºäº†äº†è§£ HTTPï¼Œå¿…é¡»çš„äº†è§£ TCP/IP åè®®æ—ã€‚</p><p>é€šå¸¸ä½¿ç”¨çš„ç½‘ç»œå®åœ¨ TCP/IP åè®®æ—çš„åŸºç¡€ä¸Šè¿ä½œçš„ã€‚è€Œ HTTP å°±å±äºä»–çš„ä¸€ä¸ªå­é›†ã€‚</p><h4 id="2-1ã€TCP-IP-åè®®æ—"><a href="#2-1ã€TCP-IP-åè®®æ—" class="headerlink" title="2.1ã€TCP/IP åè®®æ—"></a>2.1ã€TCP/IP åè®®æ—</h4><p>è®¡ç®—æœºä¸ç½‘ç»œè®¾å¤‡è¦ç›¸äº’é€šä¿¡ï¼ŒåŒæ–¹å°±å¿…é¡»åŸºäºç›¸åŒçš„æ–¹æ³•ã€‚æ¯”å¦‚ï¼šå¦‚ä½•æ¢æµ‹åˆ°é€šä¿¡ç›®æ ‡ã€ç”±å“ªä¸€æ–¹å…ˆå‘èµ·é€šä¿¡ã€ä½¿ç”¨å“ªç§è¯­è¨€ç­‰ç­‰å¥½å¤šè§„åˆ™ã€‚ç„¶è€Œè¿™ç§è§„åˆ™å°±æ˜¯æ‰€è°“çš„åè®®ï¼ˆprotocolï¼‰ï¼Œä½ è¦ç”¨æˆ‘å°±æŒ‰ç…§æˆ‘åè®®çš„è§„åˆ™æ¥ã€‚å¸¸ç”¨åè®®æœ‰ï¼štcpï¼Œhttpï¼Œftpï¼Œdhcpï¼Œdnsï¼Œipï¼Œpppoeï¼Œudpï¼Œsnmpï¼Œicmp ç­‰ç­‰ã€‚</p><p>åƒè¿™æ ·æŠŠä¸äº’è”ç½‘å…³è”çš„åè®®é›†åˆèµ·æ¥æ€»ç§° TCP/IPï¼ŒTCP/IP å®åœ¨ IP åè®®é€šä¿¡è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨åˆ°çš„åè®®æ—çš„ç»Ÿç§°</p><h4 id="2-2ã€TCP-ip-çš„åˆ†å±‚ç®¡ç†"><a href="#2-2ã€TCP-ip-çš„åˆ†å±‚ç®¡ç†" class="headerlink" title="2.2ã€TCP/ip çš„åˆ†å±‚ç®¡ç†"></a>2.2ã€TCP/ip çš„åˆ†å±‚ç®¡ç†</h4><p>TCP/IP åè®®æ—é‡è¦çš„ä¸€ç‚¹å°±æ˜¯åˆ†å±‚ã€‚TCP/IP åè®®æ—æŒ‰å±‚æ¬¡åˆ’åˆ†åˆ†åˆ«æ˜¯ï¼šåº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚å’Œæ•°æ®é“¾è·¯å±‚ã€‚æŠŠå¡”å±‚æ¬¡åŒ–æ˜¯æœ‰å¥½å¤„çš„ã€‚æ¯”å¦‚ï¼šå½“æŸä¸ªåœ°æ–¹éœ€æ±‚å˜æ›´æ—¶ï¼Œå°±å¿…é¡»å§æ‰€æœ‰çš„æ•´ä½“æ›¿æ¢æ‰ã€‚è€Œåˆ†å±‚ä¹‹ååªéœ€è¦æŠŠå˜åŠ¨çš„å±‚æ›¿æ¢æ‰å³å¯ã€‚ä¸‹é¢ä»‹ç»ä¸€ä¸‹æ¯ä¸ªå±‚æ¬¡çš„ä½œç”¨</p><p><strong>åº”ç”¨å±‚</strong></p><p>åº”ç”¨å±‚å†³å®šäº†å‘ç”¨æˆ·æä¾›åº”ç”¨æœåŠ¡æ—¶é€šä¿¡çš„æ´»åŠ¨ã€‚æ¯”å¦‚ï¼šftpï¼Œdns æœåŠ¡å°±æ˜¯å…¶ä¸­çš„ä¸¤ç±»ã€‚HTTP åè®®ä¹Ÿå¤„äºè¯¥å±‚ã€‚</p><p><strong>ä¼ è¾“å±‚</strong></p><p>ä¼ è¾“å±‚å¯¹ä¸Šå±‚åº”ç”¨å±‚ï¼Œæä¾›å¤„äºç½‘ç»œè¿æ¥ä¸­çš„ä¸¤å°è®¡ç®—æœºä¹‹é—´çš„æ•°æ®ä¼ è¾“ã€‚åœ¨ä¼ è¾“å±‚æœ‰ä¸¤ä¸ªæ€§è´¨ä¸åŒçš„åè®®ï¼šTCP å’Œ UDPã€‚</p><p><strong>ç½‘ç»œå±‚</strong></p><p>ç½‘ç»œå±‚ç”¨æ¥å¤„ç†ç½‘ç»œä¸ŠæµåŠ¨çš„æ•°æ®åŒ…ã€‚æ•°æ®åŒ…æ˜¯ç½‘ç»œä¼ è¾“çš„æœ€å°å•ä½ã€‚è¯¥å±‚è§„å®šäº†é€šè¿‡æ€æ ·çš„è·¯å¾„åˆ°è¾¾å¯¹æ–¹è®¡ç®—æœºï¼Œå¹¶æŠŠæ•°æ®åŒ…å‘é€ç»™å¯¹æ–¹ã€‚</p><p><strong>é“¾è·¯å±‚</strong></p><p>ç”¨æ¥å¤„ç†é“¾æ¥ç½‘ç»œçš„ç¡¬ä»¶éƒ¨åˆ†ã€‚åŒ…æ‹¬æ“ä½œç³»ç»Ÿã€ç¡¬ä»¶çš„è®¾å¤‡é©±åŠ¨ã€ç½‘å¡åŠå…‰çº¤ç­‰ç‰©ç†å¯è§éƒ¨åˆ†ã€‚</p><h4 id="2-3ã€TCP-IP-é€šä¿¡ä¼ è¾“æµ"><a href="#2-3ã€TCP-IP-é€šä¿¡ä¼ è¾“æµ" class="headerlink" title="2.3ã€TCP/IP é€šä¿¡ä¼ è¾“æµ"></a>2.3ã€TCP/IP é€šä¿¡ä¼ è¾“æµ</h4><p>æ¯”å¦‚è¯´æˆ‘æƒ³çœ‹ç™¾åº¦ç½‘é¡µï¼šæµç¨‹å¦‚ä¸‹ï¼š</p><ul><li>å®¢æˆ·ç«¯åœ¨åº”ç”¨å±‚å‘å‡ºä¸€ä¸ªæƒ³çœ‹æŸä¸ª WEB é¡µé¢çš„ HTTP è¯·æ±‚çš„æ—¶å€™ï¼›</li><li>æ¥ç€ä¸ºäº†ä¼ è¾“æ–¹ä¾¿ï¼Œåœ¨ä¼ è¾“å±‚æŠŠåº”ç”¨å±‚æ”¶åˆ°çš„æ•°æ®è¿›è¡Œåˆ†å‰²ï¼Œå¹¶åœ¨å„ä¸ªæŠ¥æ–‡ä¸Šæ‰“ä¸Šæ ‡è®°åºå·åŠç«¯å£å·åè½¬å‘ç»™ç½‘ç»œå±‚ï¼›</li><li>åœ¨ç½‘ç»œå±‚å¢åŠ ä½œä¸ºé€šä¿¡ç›®çš„çš„ MAC åœ°å€åè½¬å‘ç»™é“¾è·¯å±‚ï¼Œè¿™æ ·ä¸€æ¥å‘é€ç½‘ç»œçš„é€šä¿¡è¯·æ±‚å°±å‡†å¤‡é½å…¨äº†ï¼›</li><li>æ¥æ”¶ç«¯çš„æœåŠ¡å™¨åœ¨é“¾è·¯å±‚æ¥æ”¶åˆ°æ•°æ®ï¼ŒæŒ‰åºå¾€ä¸Šå±‚å‘é€ï¼Œä¸€ç›´åˆ°åº”ç”¨å±‚ï¼›</li><li>å½“ä¼ è¾“åˆ°åº”ç”¨å±‚ï¼Œæ‰èƒ½ç®—çœŸæ­£æ¥æ”¶åˆ°ç”±å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„ HTTP è¯·æ±‚äº†ã€‚</li></ul><p><img src="https://images2015.cnblogs.com/blog/938876/201612/938876-20161226105703836-1640778610.png" alt="img"></p><p>å‘é€ç«¯åœ¨å±‚ä¸å±‚ä¹‹é—´ä¼ è¾“æ•°æ®æ—¶ï¼Œæ¯ç»è¿‡ä¸€å±‚æ—¶å¿…å®šä¼šæ‰“ä¸Šä¸€ä¸ªè¯¥å±‚çš„é¦–éƒ¨ä¿¡æ¯ã€‚æ¥æ”¶ç«¯æ²¡ç»è¿‡ä¸€å±‚ï¼Œä¼šæŠŠæ¶ˆå»ã€‚è¿™ç§æ•°æ®ä¿¡å¿ƒåŒ…è£…å«åšå°è£…ã€‚</p><p>TCP/IP ä¼ è¾“æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æ–­å¼€ã€‚ä¸€å¼ å›¾æå®šä¸€åˆ‡ï¼Œå“ˆå“ˆ</p><p><img src="https://images2015.cnblogs.com/blog/938876/201612/938876-20161226110351929-905606021.png" alt="img"></p><h3 id="3ã€URI-å’Œ-URL"><a href="#3ã€URI-å’Œ-URL" class="headerlink" title="3ã€URI å’Œ URL"></a>3ã€URI å’Œ URL</h3><p>URI ç”¨å­—ç¬¦ä¸²æ ‡ç¤ºæŸä¸€äº’è”ç½‘èµ„æºï¼Œè€Œ URL è¡¨ç¤ºèµ„æºçš„åœ°ç‚¹ã€‚å¯è§ URL æ˜¯ URI çš„å­é›†ã€‚</p><p>URI è¦ä½¿ç”¨æ¶µç›–å…¨éƒ¨å¿…è¦ä¿¡æ¯çš„ URIã€ç»å¯¹ URL ä»¥åŠç›¸å¯¹ URLã€‚ç›¸å¯¹ URL æ˜¯æŒ‡ä»æµè§ˆå™¨ä¸­åŸºæœ¬ URI å¤„ç†çš„ URLï¼Œæ¥å…ˆçœ‹ä¸‹ URI çš„æ ¼å¼</p><p><img src="https://images2015.cnblogs.com/blog/938876/201612/938876-20161226111056726-284649747.png" alt="img"></p><h3 id="1ã€é€šä¿¡è¿‡ç¨‹"><a href="#1ã€é€šä¿¡è¿‡ç¨‹" class="headerlink" title="1ã€é€šä¿¡è¿‡ç¨‹"></a>1ã€é€šä¿¡è¿‡ç¨‹</h3><p>HTTP åè®®è§„å®šï¼Œè¯·æ±‚ä»å®¢æˆ·ç«¯å‘å‡ºï¼Œæœ€åæœåŠ¡å™¨ç«¯ç›¸åº”è¯¥è¯·æ±‚å¹¶è¿”å›ã€‚æ¢ä¸ªæ„æ€å°±æ˜¯å®¢æˆ·ç«¯å»ºç«‹é€šä¿¡çš„ï¼ŒæœåŠ¡å™¨ç«¯åœ¨æ²¡æœ‰æ¥æ”¶åˆ°è¯·æ±‚ä¹‹å‰ä¸ä¼šå‘é€å“åº”ã€‚æ¥ä¸€ä¸ªç¤ºä¾‹ï¼š</p><p><img src="https://images2015.cnblogs.com/blog/938876/201612/938876-20161226111936554-179110730.png" alt="img"></p><p>ä¸‹é¢çš„å†…å®¹æ˜¯å®¢æˆ·ç«¯æƒ³æœåŠ¡ç«¯å‘çš„æ±‚æ±‚å†…å®¹</p><p><code>GET / HTTP/1.1</code><br><code>HOST: HACKR.JP</code></p><p>èµ·å§‹è¡Œçš„ get è¡¨ç¤ºè¯·æ±‚è®¿é—®æœåŠ¡å™¨çš„ç±»å‹ï¼Œæˆä¸ºæ–¹æ³•ã€‚éšåçš„å­—ç¬¦ä¸²æŒ‡æ˜äº†è¯·æ±‚è®¿é—®çš„èµ„æºå¯¹è±¡ï¼Œä¹Ÿå«è¯·æ±‚ URLï¼Œåé¢æ˜¯ç‰ˆæœ¬å·ï¼Œç”¨æ¥æç¤ºå®¢æˆ·ç«¯ä½¿ç”¨çš„ HTTP åè®®åŠŸèƒ½</p><p>æ€»ç»“ï¼šè¯·æ±‚æŠ¥æ–‡æ˜¯ç”±è¯·æ±‚æ–¹æ³•ã€è¯·æ±‚ URLã€åè®®ç‰ˆæœ¬ã€å¯é€‰çš„æ°”ä½ å»å¤´å’Œå†…å®¹å®ä½“æ„æˆçš„ã€‚</p><p>æ¥ä¸‹æ¥æœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°è¯·æ±‚ï¼Œä¼šå°†è¯·æ±‚å†…å®¹çš„å¤„ç†ç»“æœä»¥ç›¸åº”çš„å½¢å¼è¿”å›ã€‚</p><p><code>HTTP /1.1 200 OK</code><br><code>Dateï¼šTueï¼Œ10 JUL 2016 10:50:20 GMT</code><br><code>Content-lengthï¼š398</code><br><code>Content-Typeï¼štext/html</code></p><p>æ¥ç”¨å›¾ç‰‡è¯¦ç»†è®²è§£ä¸€ä¸‹ï¼š</p><p><img src="https://images2015.cnblogs.com/blog/938876/201612/938876-20161226112725617-2066854960.png" alt="img"></p><h3 id="2ã€HTTP-æ˜¯ä¸ä¿å­˜çŠ¶æ€çš„åè®®"><a href="#2ã€HTTP-æ˜¯ä¸ä¿å­˜çŠ¶æ€çš„åè®®" class="headerlink" title="2ã€HTTP æ˜¯ä¸ä¿å­˜çŠ¶æ€çš„åè®®"></a>2ã€HTTP æ˜¯ä¸ä¿å­˜çŠ¶æ€çš„åè®®</h3><p>HTTP æ˜¯ä¸€ç§ä¸æŠ¥é”™çŠ¶æ€ï¼Œå³æ— çŠ¶æ€åè®®ã€‚http åè®®è‡ªèº«ä¸å¯¹è¯·æ±‚å’Œç›¸åº”ä¹‹é—´çš„é€šä¿¡çŠ¶æ€è¿›è¡Œä¿å­˜ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ HTTP è¿™ä¸ªçº§åˆ«ï¼Œåè®®å¯¹äºå‘é€è¿‡å¾—è¯·æ±‚å’Œå“åº”ä¸åšæŒä¹…åŒ–å¤„ç†ã€‚</p><p>ä½¿ç”¨ HTTP åè®®ï¼Œæ¯å½“æœ‰æ–°çš„è¯·æ±‚å‘é€æ—¶ï¼Œå°±ä¼šæœ‰å¯¹åº”çš„æ–°å“åº”äº§ç”Ÿã€‚åè®®æœ¬äº‹å¹¶ä¸ä¿ç•™ä¹‹å‰çš„è¯·æ±‚æˆ–å“åº”æŠ¥æ–‡çš„ä¿¡æ¯ã€‚è¿™æ˜¯ä¸ºäº†å¤„ç†å¤§é‡äº‹åŠ¡ï¼Œç¡®ä¿åè®®çš„è¯¾ä¼¸ç¼©æ€§ï¼Œè€Œç‰¹æ„å§ HTTP åè®®è®¾è®¡æˆå¦‚æ­¤ç®€å•çš„ã€‚ä½†æ˜¯ä¹Ÿå­˜åœ¨å¼Šç«¯ï¼Œå½“ä¸šåŠ¡å¤„ç†å˜å¾—æ£˜æ‰‹çš„æƒ…å†µå¤šäº†,æ¯”å¦‚ç”¨æˆ·ç™»å½•ä¸€å®¶ç½‘ç«™ï¼Œå³ä½¿ä»–è·³è½¬åˆ°åˆ«çš„é¡µé¢åï¼Œä¹Ÿéœ€è¦ä¿æŒç™»å½•çŠ¶æ€ï¼Œç„¶è€Œ cookie å°±è¯ç”Ÿäº†ã€‚æœ‰äº† cookie å†ç”¨ http åè®®é€šä¿¡ï¼Œå°±å¯ä»¥ç®¡ç†çŠ¶æ€äº†ã€‚</p><h3 id="3ã€HTTP-æ–¹æ³•"><a href="#3ã€HTTP-æ–¹æ³•" class="headerlink" title="3ã€HTTP æ–¹æ³•"></a>3ã€HTTP æ–¹æ³•</h3><h4 id="3-1ã€GET-è·å–èµ„æº"><a href="#3-1ã€GET-è·å–èµ„æº" class="headerlink" title="3.1ã€GET è·å–èµ„æº"></a>3.1ã€GET è·å–èµ„æº</h4><p>get æ–¹æ³•æ˜¯ç”¨æ¥è¯·æ±‚è®¿é—®å·²è¢« URL è¯†åˆ«çš„èµ„æºã€‚æŒ‡å®šçš„èµ„æºç»æœåŠ¡ç«¯è§£æåè¿”å›å“åº”å†…å®¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯·æ±‚çš„èµ„æºæ˜¯æ–‡æœ¬ï¼Œé‚£å°±ä¿æŒåŸæ ·è¿”å›ï¼›å¦‚æœåƒ cgi é‚£æ ·çš„ç¨‹åºï¼Œåˆ™è¿”å›ç»è¿‡æ‰§è¡Œåçš„è¾“å‡ºç»“æœ</p><p>ä½¿ç”¨ get æ–¹æ³•çš„è¯·æ±‚å“åº”çš„ä¾‹å­ï¼š</p><p><img src="https://images2015.cnblogs.com/blog/938876/201612/938876-20161226120528132-1874626847.png" alt="img"></p><h4 id="3-2ã€POST-ä¼ è¾“å®ä½“ä¸»ä½“"><a href="#3-2ã€POST-ä¼ è¾“å®ä½“ä¸»ä½“" class="headerlink" title="3.2ã€POST ä¼ è¾“å®ä½“ä¸»ä½“"></a>3.2ã€POST ä¼ è¾“å®ä½“ä¸»ä½“</h4><p>post æ–¹æ³•ç”¨æ¥ä¼ è¾“å®ä½“çš„ä¸»ä½“ã€‚è™½ç„¶ç”¨ get æ–¹æ³•ä¹Ÿå¯ä»¥ä¼ è¾“å®ä½“çš„ä¸»ä½“ï¼Œä½†æ˜¯ä¸€èˆ¬ä¸ç”¨ get æ–¹æ³•è¿›è¡Œä¼ è¾“ï¼Œè€Œæ˜¯ç”¨ post æ–¹æ³•ã€‚è™½è¯´ post çš„åŠŸèƒ½ä¸ get å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯ post çš„ä¸»è¦ç›®çš„å¹¶ä¸æ˜¯è·å–ç›¸åº”çš„ä¸»ä½“å†…å®¹ã€‚</p><p>ä½¿ç”¨ post æ–¹æ³•è¯·æ±‚çš„ä¾‹å­ï¼š</p><p><img src="https://images2015.cnblogs.com/blog/938876/201612/938876-20161226120758867-1985668124.png" alt="img"></p><h4 id="3-3ã€PUT-ä¼ è¾“æ–‡ä»¶"><a href="#3-3ã€PUT-ä¼ è¾“æ–‡ä»¶" class="headerlink" title="3.3ã€PUT ä¼ è¾“æ–‡ä»¶"></a>3.3ã€PUT ä¼ è¾“æ–‡ä»¶</h4><p>put æ–¹æ³•ç”¨æ¥ä¼ è¾“æ–‡ä»¶ï¼Œå°±åƒ FTP åè®®çš„æ–‡ä»¶ä¸Šä¼ ä¸€æ ·ï¼Œè¦æ±‚åœ¨è¯·æ±‚æŠ¥æ–‡çš„ä¸»ä½“ä¸­åŒ…å«æ–‡ä»¶å†…å®¹ï¼Œç„¶åä¿å­˜åˆ°è¯·æ±‚ url æŒ‡å®šçš„ä½ç½®ã€‚ç”±äº put çš„æ–¹æ³•ä¸å¸¦éªŒè¯æœºåˆ¶ï¼Œä»»ä½•äººéƒ½å¯ä»¥ä¸Šä¼ æ–‡ä»¶ï¼Œå­˜åœ¨å®‰å…¨æ€§é—®é¢˜ï¼Œå› æ­¤ä¸€èˆ¬çš„ web ç½‘ç«™ä¸é€‚ç”¨è¯¥æ–¹æ³•ã€‚</p><p>ä½¿ç”¨ put æ–¹æ³•è¯·æ±‚çš„ä¾‹å­ï¼š</p><p><img src="https://images2015.cnblogs.com/blog/938876/201612/938876-20161226121403304-570945445.png" alt="img"></p><h4 id="3-4ã€head-è·å–æŠ¥æ–‡é¦–éƒ¨"><a href="#3-4ã€head-è·å–æŠ¥æ–‡é¦–éƒ¨" class="headerlink" title="3.4ã€head è·å–æŠ¥æ–‡é¦–éƒ¨"></a>3.4ã€head è·å–æŠ¥æ–‡é¦–éƒ¨</h4><p>head å’Œ get æ–¹æ³•ä¸€æ ·ï¼Œåªæ˜¯ä¸è¿”å›æŠ¥æ–‡ä¸»ä½“éƒ¨åˆ†ï¼Œç”¨äºç¡®è®¤ url çš„æœ‰æ•ˆæ€§åŠèµ„æºæ›´æ–°çš„æ—¥æœŸæ—¶é—´ç­‰ã€‚</p><p>ä½¿ç”¨ head æ–¹æ³•è¯·æ±‚çš„ä¾‹å­ï¼š</p><p><img src="https://images2015.cnblogs.com/blog/938876/201612/938876-20161226121709414-631298510.png" alt="img"></p><h4 id="3-5ã€DELETE-åˆ é™¤æ–‡ä»¶"><a href="#3-5ã€DELETE-åˆ é™¤æ–‡ä»¶" class="headerlink" title="3.5ã€DELETE åˆ é™¤æ–‡ä»¶"></a>3.5ã€DELETE åˆ é™¤æ–‡ä»¶</h4><p>delete æ–¹æ³•ç”¨æ¥åˆ é™¤æ–‡ä»¶ï¼Œæ˜¯ä¸ put ç›¸åçš„æ–¹æ³•ï¼Œdelete æ–¹æ³•æŒ‰ç…§è¯·æ±‚ url åˆ é™¤æŒ‡å®šçš„èµ„æºã€‚å…¶æœ¬è´¨å’Œ put æ–¹æ³•ä¸€æ ·ä¸å¸¦éªŒè¯æœºåˆ¶ï¼Œæ‰€ä»¥ä¸é€‚ç”¨ delete æ–¹æ³•ã€‚</p><p>ä½¿ç”¨ delete æ–¹æ³•è¯·æ±‚çš„ä¾‹å­ï¼š</p><p><img src="https://images2015.cnblogs.com/blog/938876/201612/938876-20161226123200476-512062972.png" alt="img"></p><p>ä¸‹é¢åˆ—ä¸¾ä¸€äº›æ–¹æ³•ï¼šå…¶ä¸­ link å’Œ unlink å·²è¢« HTTP/1.1 åºŸå¼ƒ ï¼Œä¸åœ¨æ”¯æŒ</p><p><img src="https://images2015.cnblogs.com/blog/938876/201612/938876-20161226123318820-192725553.png" alt="img"></p><h3 id="4ã€æŒä¹…åŒ–"><a href="#4ã€æŒä¹…åŒ–" class="headerlink" title="4ã€æŒä¹…åŒ–"></a>4ã€æŒä¹…åŒ–</h3><p>å½“é¢‘ç¹è®¿é—® web ç½‘é¡µçš„æ—¶å€™ï¼Œæ¯æ¬¡éƒ½è¦è¿›è¡Œ TCP/IP é€šä¿¡ï¼Œtcp/ip é€šä¿¡ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æ–­å¼€ï¼Œä»£ä»·æ˜¯å¾ˆæ˜‚è´µçš„ï¼Œå¢åŠ äº†é€šä¿¡é‡çš„å¼€é”€ï¼Œä¸ºè§£å†³ä¸Šè¿° TCP è¿æ¥çš„é—®é¢˜ï¼ŒHTTP å°±è¯ç”Ÿäº†æŒä¹…è¿æ¥çš„æ–¹æ³•ã€‚ç‰¹ç‚¹æ˜¯åªè¦ä»»æ„ä¸€ç«¯æ²¡æœ‰æ˜ç¡®æå‡ºæ–­å¼€è¿æ¥ï¼Œåˆ™ä¿æŒ TCP è¿æ¥çŠ¶æ€</p><p><img src="https://images2015.cnblogs.com/blog/938876/201612/938876-20161226141328882-90680114.png" alt="img"></p><p>æŒä¹…åŒ–è¿æ¥å‡å°‘äº† TCP è¿æ¥çš„é‡å¤å»ºç«‹å’Œæ–­å¼€æ‰€é€ æˆçš„é¢å¤–å¼€é”€ï¼Œå‡è½»äº†æœåŠ¡ç«¯çš„è´Ÿè½½ã€‚å¦å¤–ï¼Œå‡å°‘å¼€é”€çš„é‚£éƒ¨åˆ†æ—¶é—´ï¼Œä½¿ HTTP è¯·æ±‚å’Œå“åº”èƒ½å¤Ÿæ›´æ—©çš„ç»“æŸï¼Œè¿™æ · web é¡µé¢çš„æ˜¾ç¤ºé€Ÿåº¦ä¹Ÿå°±ç›¸åº”çš„æé«˜äº†ã€‚</p><h3 id="5ã€ä½¿ç”¨-cookie-çš„çŠ¶æ€ç®¡ç†"><a href="#5ã€ä½¿ç”¨-cookie-çš„çŠ¶æ€ç®¡ç†" class="headerlink" title="5ã€ä½¿ç”¨ cookie çš„çŠ¶æ€ç®¡ç†"></a>5ã€ä½¿ç”¨ cookie çš„çŠ¶æ€ç®¡ç†</h3><p>cookie æŠ€æœ¯é€šè¿‡åœ¨è¯·æ±‚å’Œç›¸åº”æŠ¥æ–‡ä¸­å†™å…¥ cookie ä¿¡æ¯æ¥æ§åˆ¶å®¢æˆ·ç«¯çš„çŠ¶æ€ã€‚cookie ä¼šæ ¹æ®ä»æœåŠ¡ç«¯å‘é€çš„ç›¸åº”æŠ¥æ–‡å†…çš„ä¸€ä¸ªå«åš set-cookie çš„é¦–éƒ¨å­—æ®µä¿¡æ¯ï¼Œé€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜ cookieã€‚å½“ä¸‹æ¬¡å®¢æˆ·ç«¯å†å¾€æœåŠ¡å™¨å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨åœ¨è¯·æ±‚å¤´åŠ å…¥ cookie å€¼åå‘é€å‡ºå»ã€‚ä¸‹é¢å¸¦å›¾åˆ†æä¸‹è¿‡ç¨‹</p><ul><li>æ²¡æœ‰ cookie çŠ¶æ€ä¸‹çš„è¯·æ±‚</li></ul><p><img src="https://images2015.cnblogs.com/blog/938876/201612/938876-20161226142019148-996060572.png" alt="img"></p><ul><li>ç¬¬äºŒæ¬¡ä»¥åï¼ˆå­˜æœ‰ cookie ä¿¡æ¯çŠ¶æ€ï¼‰çš„è¯·æ±‚</li></ul><p><img src="https://images2015.cnblogs.com/blog/938876/201612/938876-20161226142059726-1822981009.png" alt="img"></p><p>åç»­å¾…æ›´æ–°ï¼ï¼ï¼æŠ€æœ¯å†™èµ·æ¥æ²¡æœ‰ä»£ç å†™èµ·æ¥é¡ºæ‰‹ï¼Œä¸è¿‡è¿˜æ˜¯å¾—å†™ï¼ŒåšæŒå°±æ˜¯æˆåŠŸ</p>]]></content>
      
      
      <categories>
          
          <category> HTTP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ªäººåšå®¢æ­å»ºï¼ˆä¸‰ï¼‰</title>
      <link href="/2022/03/05/hexo3/"/>
      <url>/2022/03/05/hexo3/</url>
      
        <content type="html"><![CDATA[<h2 id="ç½‘ç«™SEOä¼˜åŒ–"><a href="#ç½‘ç«™SEOä¼˜åŒ–" class="headerlink" title="ç½‘ç«™SEOä¼˜åŒ–"></a>ç½‘ç«™SEOä¼˜åŒ–</h2><p>ç½‘ç«™æ¨å¹¿æ˜¯ä¸€ä¸ªæ¯”è¾ƒçƒ¦äººçš„äº‹æƒ…ï¼Œç‰¹åˆ«æ˜¯å¯¹äºä¸“å¿ƒææŠ€æœ¯çš„æ¥è¯´ï¼Œå¯èƒ½å°±ä¸æ˜¯å¾ˆæ“…é•¿ï¼Œé‚£ä¹ˆæ€ä¹ˆæ‰èƒ½è®©åˆ«äººçŸ¥é“æˆ‘ä»¬ç½‘ç«™å‘¢ï¼Ÿä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬éœ€è¦æƒ³åŠæ³•è®©åˆ«äººé€šè¿‡æœç´¢å°±å¯ä»¥æœç´¢åˆ°åšå®¢çš„å†…å®¹ï¼Œç»™æˆ‘ä»¬å¸¦æ¥è‡ªç„¶æµé‡ï¼Œè¿™å°±éœ€è¦<code>seo</code>ä¼˜åŒ–,è®©æˆ‘ä»¬çš„ç«™ç‚¹å˜å¾—å¯¹æœç´¢å¼•æ“å‹å¥½</p><p><code>SEO</code>æ˜¯ç”±è‹±æ–‡<code>Search Engine Optimization</code>ç¼©å†™è€Œæ¥ï¼Œ ä¸­æ–‡æ„è¯‘ä¸ºâ€œæœç´¢å¼•æ“ä¼˜åŒ–â€ã€‚<code>SEO</code>æ˜¯æŒ‡é€šè¿‡ç«™å†…ä¼˜åŒ–æ¯”å¦‚ç½‘ç«™ç»“æ„è°ƒæ•´ã€ç½‘ç«™å†…å®¹å»ºè®¾ã€ç½‘ç«™ä»£ç ä¼˜åŒ–ç­‰ä»¥åŠç«™å¤–ä¼˜åŒ–ã€‚</p><h3 id="ç™¾åº¦æ”¶å½•"><a href="#ç™¾åº¦æ”¶å½•" class="headerlink" title="ç™¾åº¦æ”¶å½•"></a>ç™¾åº¦æ”¶å½•</h3><p>é¦–å…ˆè¦åšçš„å°±æ˜¯è®©å„å¤§æœç´¢å¼•æ“æ”¶å½•ä½ çš„ç«™ç‚¹ï¼Œæˆ‘ä»¬åœ¨åˆšå»ºç«™çš„æ—¶å€™å„ä¸ªæœç´¢å¼•æ“æ˜¯æ²¡æœ‰æ”¶å½•æˆ‘ä»¬ç½‘ç«™çš„ï¼Œåœ¨æœç´¢å¼•æ“ä¸­è¾“å…¥<code>site:&lt;åŸŸå&gt;</code>æŸ¥çœ‹ç«™ç‚¹æ˜¯å¦è¢«ç™¾åº¦æ”¶å½•</p><h4 id="éªŒè¯ç½‘ç«™æ‰€æœ‰æƒ"><a href="#éªŒè¯ç½‘ç«™æ‰€æœ‰æƒ" class="headerlink" title="éªŒè¯ç½‘ç«™æ‰€æœ‰æƒ"></a>éªŒè¯ç½‘ç«™æ‰€æœ‰æƒ</h4><p>ç™»å½•ç™¾åº¦ç«™é•¿æœç´¢èµ„æºå¹³å°ï¼š<a href="http://zhanzhang.baidu.com/">http://zhanzhang.baidu.com</a>ï¼Œ åªè¦æœ‰ç™¾åº¦æ——ä¸‹çš„è´¦å·å°±å¯ä»¥ç™»å½•ï¼Œç™»å½•æˆåŠŸä¹‹ååœ¨ç«™ç‚¹ç®¡ç†ä¸­ç‚¹å‡»<a href="http://zhanzhang.baidu.com/site/siteadd">æ·»åŠ ç½‘ç«™</a>ç„¶åè¾“å…¥ä½ çš„ç«™ç‚¹åœ°å€ã€‚</p><p>æ³¨æ„ï¼Œè¿™é‡Œéœ€è¦è¾“å…¥æˆ‘ä»¬è‡ªå·±è´­ä¹°çš„åŸŸå,ä¸èƒ½ä½¿ç”¨<code>xxx.github.io</code>ä¹‹ç±»åŸŸå.å› ä¸º<code>github</code>æ˜¯ä¸å…è®¸ç™¾åº¦çš„<code>spider</code>ï¼ˆèœ˜è››ï¼‰çˆ¬å–<code>github</code>ä¸Šçš„å†…å®¹çš„ï¼Œæ‰€ä»¥å¦‚æœæƒ³è®©ä½ çš„ç«™ç‚¹è¢«ç™¾åº¦æ”¶å½•ï¼Œåªèƒ½ä½¿ç”¨è‡ªå·±è´­ä¹°çš„åŸŸå</p><p>åœ¨å¡«å®Œç½‘å€é€‰æ‹©å®Œç½‘ç«™çš„ç±»å‹ä¹‹åéœ€è¦éªŒè¯ç½‘ç«™çš„æ‰€æœ‰æƒï¼ŒéªŒè¯ç½‘ç«™æ‰€æœ‰æƒçš„æ–¹å¼æœ‰ä¸‰ç§ï¼š</p><ul><li>æ–‡ä»¶éªŒè¯</li><li><code>html</code>æ ‡ç­¾éªŒè¯</li><li><code>CNAME</code>è§£æéªŒè¯</li></ul><p>å…¶å®ä½¿ç”¨å“ªä¸€ç§æ–¹å¼éƒ½å¯ä»¥ï¼Œéƒ½æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚</p><p>ä½†æ˜¯ä¸€å®šè¦æ³¨æ„ï¼Œä½¿ç”¨æ–‡ä»¶éªŒè¯æ–‡ä»¶å­˜æ”¾çš„ä½ç½®éœ€è¦æ”¾åœ¨<code>sourc</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œå¦‚æœæ˜¯<code>html</code>æ–‡ä»¶é‚£ä¹ˆ<code>hexo</code>å°±ä¼šå°†å…¶ç¼–è¯‘ï¼Œæ‰€ä»¥å¿…é¡»è¦åœ¨<code>html</code>å¤´éƒ¨åŠ ä¸Šçš„<code>layout:false</code>ï¼Œè¿™æ ·å°±ä¸ä¼šè¢«<code>hexo</code>ç¼–è¯‘ã€‚ï¼ˆå¦‚æœéªŒè¯æ–‡ä»¶æ˜¯<code>txt</code>æ ¼å¼çš„å°±ä¸éœ€è¦ï¼‰</p><h4 id="ç”Ÿæˆç½‘ç«™åœ°å›¾"><a href="#ç”Ÿæˆç½‘ç«™åœ°å›¾" class="headerlink" title="ç”Ÿæˆç½‘ç«™åœ°å›¾"></a>ç”Ÿæˆç½‘ç«™åœ°å›¾</h4><p>æˆ‘ä»¬éœ€è¦ä½¿ç”¨<code>npm</code>è‡ªåŠ¨ç”Ÿæˆç½‘ç«™çš„<code>sitemap</code>ï¼Œç„¶åå°†ç”Ÿæˆçš„<code>sitemap</code>æäº¤åˆ°ç™¾åº¦å’Œå…¶ä»–æœç´¢å¼•æ“</p><h4 id="å®‰è£…sitemapæ’ä»¶"><a href="#å®‰è£…sitemapæ’ä»¶" class="headerlink" title="å®‰è£…sitemapæ’ä»¶"></a>å®‰è£…sitemapæ’ä»¶</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save     </span><br><span class="line">npm install hexo-generator-baidu-sitemap --save</span><br></pre></td></tr></table></figure><h4 id="ä¿®æ”¹åšå®¢é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹åšå®¢é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹åšå®¢é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹åšå®¢é…ç½®æ–‡ä»¶</h4><p>åœ¨æ ¹ç›®å½•é…ç½®æ–‡ä»¶<code>.yml</code>ä¸­ä¿®æ”¹<code>url</code>ä¸ºä½ çš„ç«™ç‚¹åœ°å€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># URL</span><br><span class="line">## If your site is put in a subdirectory, set url as &#x27;http://yoursite.com/child&#x27; and root as &#x27;/child/&#x27;</span><br><span class="line"># url: https://shw2018.github.io/</span><br><span class="line">url: https://sunhwee.com</span><br><span class="line">root: /</span><br><span class="line">permalink: :year/:month/:day/:title/</span><br><span class="line">permalink_defaults:</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œ<code>hexo g</code>å‘½ä»¤ä¹‹åå°±ä¼šåœ¨ç½‘ç«™æ ¹ç›®å½•ç”Ÿæˆ<code>sitemap.xml</code>æ–‡ä»¶å’Œ<code>baidusitemap.xmlæ–‡ä»¶</code>ï¼Œå¯ä»¥é€šè¿‡ï¼š<a href="https://sunhwee.com/baidusitemap.xml">https://sunhwee.com/baidusitemap.xml</a>, æŸ¥çœ‹è¯¥æ–‡ä»¶æ˜¯å¦ç”Ÿæˆï¼Œå…¶ä¸­<code>sitemap.xml</code>æ–‡ä»¶æ˜¯æœç´¢å¼•æ“é€šç”¨çš„æ–‡ä»¶ï¼Œ<code>baidusitemap.xml</code>æ˜¯ç™¾åº¦ä¸“ç”¨çš„<code>sitemap</code>æ–‡ä»¶ã€‚</p><h4 id="å‘ç™¾åº¦æäº¤é“¾æ¥"><a href="#å‘ç™¾åº¦æäº¤é“¾æ¥" class="headerlink" title="å‘ç™¾åº¦æäº¤é“¾æ¥"></a>å‘ç™¾åº¦æäº¤é“¾æ¥</h4><p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥å°†æˆ‘ä»¬ç”Ÿæˆçš„<code>sitemap</code>æ–‡ä»¶æäº¤ç»™ç™¾åº¦ï¼Œè¿˜æ˜¯åœ¨ç™¾åº¦ç«™é•¿å¹³å°ï¼Œæ‰¾åˆ°é“¾æ¥æäº¤ï¼Œæœ‰ä¸¤ç§æäº¤æ–¹å¼ï¼Œè‡ªåŠ¨æäº¤å’Œæ‰‹åŠ¨æäº¤ï¼Œè‡ªåŠ¨æäº¤åˆåˆ†ä¸ºä¸»åŠ¨æ¨é€ã€è‡ªåŠ¨æ¨é€å’Œ<code>sitemap</code></p><p>ä»æ•ˆç‡ä¸Šæ¥è¯´ï¼š</p><p>ä¸»åŠ¨æ¨é€&gt;è‡ªåŠ¨æ¨é€&gt;sitemap</p><h3 id="ä¼˜åŒ–url"><a href="#ä¼˜åŒ–url" class="headerlink" title="ä¼˜åŒ–url"></a>ä¼˜åŒ–url</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">seo`æœç´¢å¼•æ“ä¼˜åŒ–è®¤ä¸ºï¼Œç½‘ç«™çš„æœ€ä½³ç»“æ„æ˜¯**ç”¨æˆ·ä»é¦–é¡µç‚¹å‡»ä¸‰æ¬¡å°±å¯ä»¥åˆ°è¾¾ä»»ä½•ä¸€ä¸ªé¡µé¢**ï¼Œä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨`hexo`ç¼–è¯‘çš„ç«™ç‚¹æ‰“å¼€æ–‡ç« çš„`url`æ˜¯ï¼š`sitename/year/mounth/day/title`å››å±‚çš„ç»“æ„ï¼Œè¿™æ ·çš„`url`ç»“æ„å¾ˆä¸åˆ©äº`seo`ï¼Œçˆ¬è™«å°±ä¼šç»å¸¸çˆ¬ä¸åˆ°æˆ‘ä»¬çš„æ–‡ç« ï¼Œäºæ˜¯ï¼Œæˆ‘ä»¬éœ€è¦ä¼˜åŒ–ä¸€ä¸‹ç½‘ç«™æ–‡ç« `url</span><br></pre></td></tr></table></figure><p>æ–¹æ¡ˆä¸€ï¼š</p><p>å¯ä»¥å°†<code>url</code>ç›´æ¥æ”¹æˆ<code>sitename/title</code>çš„å½¢å¼ï¼Œå¹¶ä¸”<code>title</code>æœ€å¥½æ˜¯ç”¨è‹±æ–‡ï¼Œåœ¨æ ¹ç›®å½•çš„é…ç½®æ–‡ä»¶ä¸‹ä¿®æ”¹<code>permalink</code>å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">url: https://sunhwee.com</span><br><span class="line">root: /</span><br><span class="line">permalink: :title.html</span><br><span class="line">permalink_defaults:</span><br></pre></td></tr></table></figure><p>æ–¹æ¡ˆäºŒï¼š</p><p>ä½¿ç”¨æ’ä»¶ä¼˜åŒ–<code>url</code></p><p>æ’ä»¶<code>hexo-abbrlink</code>å®ç°äº†è¿™ä¸ªåŠŸèƒ½ï¼Œå®ƒå°†åŸæ¥çš„<code>URL</code>åœ°å€é‡æ–°è¿›è¡Œäº†è¿›åˆ¶è½¬æ¢å’Œå†ç¼–ç ã€‚</p><p>å®‰è£…<code>hexo-abbrlink</code>ã€‚</p><p><code>npm install hexo-abbrlink --save</code></p><p>é…ç½®åšå®¢æ ¹ç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># permalink: :title/</span><br><span class="line">permalink: archives/:abbrlink.html</span><br><span class="line">abbrlink:</span><br><span class="line">  alg: crc32  # ç®—æ³•ï¼šcrc16(default) and crc32</span><br><span class="line">  rep: hex    # è¿›åˆ¶ï¼šdec(default) and hex</span><br></pre></td></tr></table></figure><p>è¿è¡Œ<code>hexo clean</code>å’Œ<code>hexo g</code>å‘½ä»¤æ¥é‡æ–°ç”Ÿæˆæ–‡ä»¶çœ‹çœ‹ï¼Œå¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°ï¼Œ<code>URL</code>ç»“æ„æˆåŠŸå˜ä¸ºäº†3å±‚ã€‚</p><h3 id="å…¶ä»–seoä¼˜åŒ–"><a href="#å…¶ä»–seoä¼˜åŒ–" class="headerlink" title="å…¶ä»–seoä¼˜åŒ–"></a>å…¶ä»–seoä¼˜åŒ–</h3><p><code>seo</code>ä¼˜åŒ–åº”è¯¥è¯´æ˜¯ä¸€ä¸ªæ”¶ç›Šå»¶è¿Ÿçš„è¡Œä¸ºï¼Œå¯èƒ½ä½ åšçš„ä¼˜åŒ–çŸ­æœŸå†…çœ‹ä¸åˆ°ä»€ä¹ˆæ•ˆæœï¼Œä½†æ˜¯ä¸€å®šè¦åšæŒï¼Œ<code>seo</code>ä¼˜åŒ–ä¹Ÿæ˜¯æœ‰å¾ˆæ·±çš„å¯ä»¥ç ”ç©¶çš„ä¸œè¥¿ï¼Œä»æˆ‘ä»¬æœ€åˆçš„ç½‘ç«™è®¾è®¡ï¼Œå’Œæœ€åŸºç¡€çš„æ ‡ç­¾çš„é€‰æ‹©éƒ½æœ‰å¾ˆå¤§çš„å…³ç³»ï¼Œç½‘ç«™è®¾è®¡å°±å¦‚æˆ‘ä»¬åˆšåˆšè¯´çš„ï¼Œè¦è®©ç”¨æˆ·ç‚¹å‡»ä¸‰æ¬¡å¯ä»¥åˆ°è¾¾ç½‘ç«™çš„ä»»ä½•ä¸€ä¸ªé¡µé¢ï¼Œè¦å¢åŠ é«˜è´¨é‡çš„å¤–é“¾ï¼Œå¢åŠ ç›¸å…³æ¨èï¼ˆæ¯”å¦‚è¯´æˆ‘ä»¬ç»å¸¸è§åˆ°å³ä¾§æœ¬ç«™çš„æœ€é«˜é˜…è¯»çš„æ’ååˆ—è¡¨ï¼‰ï¼Œç„¶åå°±æ˜¯ç»™æ¯ä¸€ä¸ªé¡µé¢åŠ ä¸Š<code>keyword</code>å’Œæè¿°</p><p>åœ¨ä»£ç ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥å†™å‡ºèƒ½è®©æµè§ˆå™¨è¯†åˆ«çš„è¯­ä¹‰åŒ–<code>HTML</code>ï¼Œè¿™æ ·æœ‰åŠ©äºçˆ¬è™«æŠ“å–æ›´å¤šçš„æœ‰æ•ˆä¿¡æ¯ï¼šçˆ¬è™«ä¾èµ–äºæ ‡ç­¾æ¥ç¡®å®šä¸Šä¸‹æ–‡å’Œå„ä¸ªå…³é”®å­—çš„æƒé‡ï¼›å¹¶ä¸”å¯¹å¤–é“¾è®¾ç½®<code>nofollow</code>æ ‡ç­¾ï¼Œé¿å…<code>spider</code>çˆ¬ç€çˆ¬ç€å°±çˆ¬å‡ºå»äº†ï¼ˆå‡å°‘ç½‘ç«™çš„è·³å‡ºç‡ï¼‰ï¼Œå¹¶ä¸”æˆ‘ä»¬è¦å°½é‡åœ¨ä¸€äº›æ¯”è¾ƒå¤§çš„ç½‘ç«™å¢åŠ æˆ‘ä»¬ç«™ç‚¹çš„æ›å…‰ç‡ï¼Œå› ä¸º<code>spider</code>ä¼šç»å¸¸è®¿é—®å¤§ç«™ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨æ˜é‡‘ç­‰æŠ€æœ¯ç¤¾åŒºå‘è¡¨æ–‡ç« ä¸­å¸¦æœ‰æˆ‘ä»¬çš„ç«™ç‚¹ï¼Œè¿™æ ·<code>spider</code>æ˜¯å¾ˆæœ‰å¯èƒ½çˆ¬åˆ°æˆ‘ä»¬ä¸­çš„ç«™ç‚¹çš„ï¼Œsoâ€¦.</p><ul><li>ç½‘ç«™<strong>å¤–é“¾</strong>çš„æ¨å¹¿åº¦ã€æ•°é‡å’Œè´¨é‡</li><li>ç½‘ç«™çš„<strong>å†…é“¾</strong>è¶³å¤Ÿå¼ºå¤§</li><li>ç½‘ç«™çš„<strong>åŸåˆ›</strong>è´¨é‡</li><li>ç½‘ç«™çš„<strong>å¹´é¾„</strong>æ—¶é—´</li><li>ç½‘ç«™çš„<strong>æ›´æ–°é¢‘ç‡</strong>ï¼ˆæ›´æ–°æ¬¡æ•°è¶Šå¤šè¶Šå¥½ï¼‰</li><li>ç½‘ç«™çš„<strong>æœåŠ¡å™¨</strong></li><li>ç½‘ç«™çš„<strong>æµé‡</strong>ï¼šæµé‡è¶Šé«˜ç½‘ç«™çš„æƒé‡è¶Šé«˜</li><li>ç½‘ç«™çš„<strong>å…³é”®è¯æ’å</strong>ï¼šå…³é”®è¯æ’åè¶Šé å‰ï¼Œç½‘ç«™çš„æƒé‡è¶Šé«˜</li><li>ç½‘ç«™çš„<strong>æ”¶å½•</strong>æ•°é‡ï¼šç½‘ç«™ç™¾åº¦æ”¶å½•æ•°é‡è¶Šå¤šï¼Œç½‘ç«™ç™¾åº¦æƒé‡è¶Šé«˜</li><li>ç½‘ç«™çš„æµè§ˆé‡åŠæ·±åº¦ï¼š<strong>ç”¨æˆ·ä½“éªŒ</strong>è¶Šå¥½ï¼Œç½‘ç«™çš„ç™¾åº¦æƒé‡è¶Šé«˜</li></ul><h3 id="ä¼˜åŒ–å›¾ç‰‡åŠ è½½"><a href="#ä¼˜åŒ–å›¾ç‰‡åŠ è½½" class="headerlink" title="ä¼˜åŒ–å›¾ç‰‡åŠ è½½"></a>ä¼˜åŒ–å›¾ç‰‡åŠ è½½</h3><p><code>issue</code>é—®é¢˜ï¼š<br>ä¼˜åŒ–ç½‘ç«™åŠ è½½é€»è¾‘é—®é¢˜ï¼šå›¾ç‰‡æœ€ååŠ è½½ï¼ŒåŠ å…¥å›¾ç‰‡æ‡’åŠ è½½æ–¹æ³•</p><p>hexo-lazyload-imageçš„ä½œç”¨åŸç†æ˜¯è®²ä½ åšå®¢é‡Œé¢imgæ ‡ç­¾çš„srcå±æ€§æ›¿æ¢ä¸ºä¸€ä¸ªloading imageï¼ŒæŠŠçœŸå®çš„å›¾ç‰‡åœ°å€æ”¾åœ¨data-originå±æ€§ä¸‹é¢ã€‚ç„¶åå½“ä½ çš„ç½‘é¡µç¿»åˆ°é‚£å¼ å›¾ç‰‡æ—¶ï¼ˆä¹Ÿå°±æ˜¯å›¾ç‰‡åœ¨çª—å£ä¸­å®Œå…¨å¯è§æ—¶ï¼‰ï¼Œä»–ä¼šæœ‰ä¸€æ®µjsç”¨data-originçš„å†…å®¹æ›¿æ¢srcï¼Œæ‰“åˆ°æ‡’åŠ è½½çš„ç›®çš„ã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹æ‡’åŠ è½½å’Œgalleryæ’ä»¶ä¼šå‘ç”Ÿå†²çªï¼Œæ¯”å¦‚æŒ‰ç…§æˆ‘ä¸Šé¢æ‰€è¯´ï¼Œæœ€ç»ˆç»“æœå°±ä¼šå˜æˆï¼Œå¯èƒ½åªæœ‰ç¬¬ä¸€å¼ å›¾ç‰‡åœ¨galleryä¸­æ‰“å¼€æ˜¯åŸå›¾ï¼Œå³ç¿»å·¦ç¿»éƒ½ä¼šæ˜¯é‚£å¼ loading imageï¼Œéœ€è¦ä½ æŒæ¡jsï¼Œå¯ä»¥ä¿®æ”¹matery.jsé‡Œé¢çš„å†…å®¹ï¼Œç”šè‡³å¯èƒ½æ¢ä¸€ä¸ªgalleryï¼Œæ¯”å¦‚photosiwpeä¹‹ç±»çš„</p><p>è§£å†³æ–¹æ³•ï¼šä¿®æ”¹<code>/themes/matery/source/js</code>ä¸­çš„<code>matery.js</code>æ–‡ä»¶</p><p>ç¬¬103è¡Œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$(&#x27;#articleContent, #myGallery&#x27;).lightGallery(&#123;</span><br><span class="line">    selector: &#x27;.img-item&#x27;,</span><br><span class="line">    // å¯ç”¨å­—å¹•</span><br><span class="line">    subHtmlSelectorRelative: true,</span><br><span class="line">    showThumbByDefault: false   //è¿™å¥åŠ ä¸Š</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>åé¢åŠ ä¸Šï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(document).find(&#x27;img[data-original]&#x27;).each(function()&#123;</span><br><span class="line">    $(this).parent().attr(&quot;href&quot;, $(this).attr(&quot;data-original&quot;));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å†è£…ä¸ªæ’ä»¶ï¼Œ<a href="https://github.com/Troy-Yang/hexo-lazyload-image">https://github.com/Troy-Yang/hexo-lazyload-image</a><br>åœ¨åšå®¢æ ¹ç›®å½•é…ç½®.ymlæ–‡ä»¶åŠ å…¥å¯¹åº”å­—æ®µï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># lazyload configuration  2019.08.23</span><br><span class="line">lazyload:</span><br><span class="line">  enable: true </span><br><span class="line">  onlypost: false</span><br><span class="line">  loadingImg:     # eg ./images/loading.gif</span><br></pre></td></tr></table></figure><p>å¥½äº†ï¼Œè¿™æ ·å®ç°äº†åšå®¢ç½‘ç«™çš„å›¾ç‰‡æ‡’åŠ è½½ã€‚</p><h3 id="Gulpå®ç°ä»£ç å‹ç¼©"><a href="#Gulpå®ç°ä»£ç å‹ç¼©" class="headerlink" title="Gulpå®ç°ä»£ç å‹ç¼©"></a>Gulpå®ç°ä»£ç å‹ç¼©</h3><p><code>Gulp</code>å®ç°ä»£ç å‹ç¼©ï¼Œä»¥æå‡ç½‘é¡µåŠ è½½é€Ÿåº¦ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£…Gulpæ’ä»¶å’Œ5ä¸ªåŠŸèƒ½æ¨¡å—ï¼Œä¾æ¬¡è¿è¡Œä¸‹é¢çš„ä¸¤æ¡å‘½ä»¤ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp -g  #å®‰è£…gulp</span><br><span class="line"># å®‰è£…åŠŸèƒ½æ¨¡å—</span><br><span class="line">npm install gulp-htmlclean gulp-htmlmin gulp-minify-css gulp-uglify gulp-imagemin --save</span><br><span class="line"># é¢å¤–çš„åŠŸèƒ½æ¨¡å—</span><br><span class="line">npm install gulp-debug gulp-clean-css gulp-changed gulp-if gulp-plumber gulp-babel babel-preset-es2015 del --save</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥åœ¨åšå®¢çš„æ ¹ç›®å½•ä¸‹æ–°å»ºgulpfile.jsæ–‡ä»¶ï¼Œå¹¶å¤åˆ¶ä¸‹é¢çš„å†…å®¹åˆ°æ–‡ä»¶ä¸­ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line">var gulp = require(&quot;gulp&quot;);</span><br><span class="line">var debug = require(&quot;gulp-debug&quot;);</span><br><span class="line">var cleancss = require(&quot;gulp-clean-css&quot;); //csså‹ç¼©ç»„ä»¶</span><br><span class="line">var uglify = require(&quot;gulp-uglify&quot;); //jså‹ç¼©ç»„ä»¶</span><br><span class="line">var htmlmin = require(&quot;gulp-htmlmin&quot;); //htmlå‹ç¼©ç»„ä»¶</span><br><span class="line">var htmlclean = require(&quot;gulp-htmlclean&quot;); //htmlæ¸…ç†ç»„ä»¶</span><br><span class="line">var imagemin = require(&quot;gulp-imagemin&quot;); //å›¾ç‰‡å‹ç¼©ç»„ä»¶</span><br><span class="line">var changed = require(&quot;gulp-changed&quot;); //æ–‡ä»¶æ›´æ”¹æ ¡éªŒç»„ä»¶</span><br><span class="line">var gulpif = require(&quot;gulp-if&quot;); //ä»»åŠ¡ å¸®åŠ©è°ƒç”¨ç»„ä»¶</span><br><span class="line">var plumber = require(&quot;gulp-plumber&quot;); //å®¹é”™ç»„ä»¶ï¼ˆå‘ç”Ÿé”™è¯¯ä¸è·³å‡ºä»»åŠ¡ï¼Œå¹¶æŠ¥å‡ºé”™è¯¯å†…å®¹ï¼‰</span><br><span class="line">var isScriptAll = true; //æ˜¯å¦å¤„ç†æ‰€æœ‰æ–‡ä»¶ï¼Œ(true|å¤„ç†æ‰€æœ‰æ–‡ä»¶)(false|åªå¤„ç†æœ‰æ›´æ”¹çš„æ–‡ä»¶)</span><br><span class="line">var isDebug = true; //æ˜¯å¦è°ƒè¯•æ˜¾ç¤º ç¼–è¯‘é€šè¿‡çš„æ–‡ä»¶</span><br><span class="line">var gulpBabel = require(&quot;gulp-babel&quot;);</span><br><span class="line">var es2015Preset = require(&quot;babel-preset-es2015&quot;);</span><br><span class="line">var del = require(&quot;del&quot;);</span><br><span class="line">var Hexo = require(&quot;hexo&quot;);</span><br><span class="line">var hexo = new Hexo(process.cwd(), &#123;&#125;); // åˆå§‹åŒ–ä¸€ä¸ªhexoå¯¹è±¡</span><br><span class="line"></span><br><span class="line">// æ¸…é™¤publicæ–‡ä»¶å¤¹</span><br><span class="line">gulp.task(&quot;clean&quot;, function() &#123;</span><br><span class="line">  return del([&quot;public/**/*&quot;]);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// ä¸‹é¢å‡ ä¸ªè·Ÿhexoæœ‰å…³çš„æ“ä½œï¼Œä¸»è¦é€šè¿‡hexo.call()å»æ‰§è¡Œï¼Œæ³¨æ„return</span><br><span class="line">// åˆ›å»ºé™æ€é¡µé¢ ï¼ˆç­‰åŒ hexo generateï¼‰</span><br><span class="line">gulp.task(&quot;generate&quot;, function() &#123;</span><br><span class="line">  return hexo.init().then(function() &#123;</span><br><span class="line">    return hexo</span><br><span class="line">      .call(&quot;generate&quot;, &#123;</span><br><span class="line">        watch: false</span><br><span class="line">      &#125;)</span><br><span class="line">      .then(function() &#123;</span><br><span class="line">        return hexo.exit();</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(function(err) &#123;</span><br><span class="line">        return hexo.exit(err);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// å¯åŠ¨HexoæœåŠ¡å™¨</span><br><span class="line">gulp.task(&quot;server&quot;, function() &#123;</span><br><span class="line">  return hexo</span><br><span class="line">    .init()</span><br><span class="line">    .then(function() &#123;</span><br><span class="line">      return hexo.call(&quot;server&quot;, &#123;&#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(function(err) &#123;</span><br><span class="line">      console.log(err);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// éƒ¨ç½²åˆ°æœåŠ¡å™¨</span><br><span class="line">gulp.task(&quot;deploy&quot;, function() &#123;</span><br><span class="line">  return hexo.init().then(function() &#123;</span><br><span class="line">    return hexo</span><br><span class="line">      .call(&quot;deploy&quot;, &#123;</span><br><span class="line">        watch: false</span><br><span class="line">      &#125;)</span><br><span class="line">      .then(function() &#123;</span><br><span class="line">        return hexo.exit();</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(function(err) &#123;</span><br><span class="line">        return hexo.exit(err);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// å‹ç¼©publicç›®å½•ä¸‹çš„jsæ–‡ä»¶</span><br><span class="line">gulp.task(&quot;compressJs&quot;, function() &#123;</span><br><span class="line">  return gulp</span><br><span class="line">    .src([&quot;./public/**/*.js&quot;, &quot;!./public/libs/**&quot;]) //æ’é™¤çš„js</span><br><span class="line">    .pipe(gulpif(!isScriptAll, changed(&quot;./public&quot;)))</span><br><span class="line">    .pipe(gulpif(isDebug, debug(&#123; title: &quot;Compress JS:&quot; &#125;)))</span><br><span class="line">    .pipe(plumber())</span><br><span class="line">    .pipe(</span><br><span class="line">      gulpBabel(&#123;</span><br><span class="line">        presets: [es2015Preset] // es5æ£€æŸ¥æœºåˆ¶</span><br><span class="line">      &#125;)</span><br><span class="line">    )</span><br><span class="line">    .pipe(uglify()) //è°ƒç”¨å‹ç¼©ç»„ä»¶æ–¹æ³•uglify(),å¯¹åˆå¹¶çš„æ–‡ä»¶è¿›è¡Œå‹ç¼©</span><br><span class="line">    .pipe(gulp.dest(&quot;./public&quot;)); //è¾“å‡ºåˆ°ç›®æ ‡ç›®å½•</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// å‹ç¼©publicç›®å½•ä¸‹çš„cssæ–‡ä»¶</span><br><span class="line">gulp.task(&quot;compressCss&quot;, function() &#123;</span><br><span class="line">  var option = &#123;</span><br><span class="line">    rebase: false,</span><br><span class="line">    //advanced: true,               //ç±»å‹ï¼šBoolean é»˜è®¤ï¼štrue [æ˜¯å¦å¼€å¯é«˜çº§ä¼˜åŒ–ï¼ˆåˆå¹¶é€‰æ‹©å™¨ç­‰ï¼‰]</span><br><span class="line">    compatibility: &quot;ie7&quot; //ä¿ç•™ie7åŠä»¥ä¸‹å…¼å®¹å†™æ³• ç±»å‹ï¼šString é»˜è®¤ï¼š&#x27;&#x27;or&#x27;*&#x27; [å¯ç”¨å…¼å®¹æ¨¡å¼ï¼› &#x27;ie7&#x27;ï¼šIE7å…¼å®¹æ¨¡å¼ï¼Œ&#x27;ie8&#x27;ï¼šIE8å…¼å®¹æ¨¡å¼ï¼Œ&#x27;*&#x27;ï¼šIE9+å…¼å®¹æ¨¡å¼]</span><br><span class="line">    //keepBreaks: true,             //ç±»å‹ï¼šBoolean é»˜è®¤ï¼šfalse [æ˜¯å¦ä¿ç•™æ¢è¡Œ]</span><br><span class="line">    //keepSpecialComments: &#x27;*&#x27;      //ä¿ç•™æ‰€æœ‰ç‰¹æ®Šå‰ç¼€ å½“ä½ ç”¨autoprefixerç”Ÿæˆçš„æµè§ˆå™¨å‰ç¼€ï¼Œå¦‚æœä¸åŠ è¿™ä¸ªå‚æ•°ï¼Œæœ‰å¯èƒ½å°†ä¼šåˆ é™¤ä½ çš„éƒ¨åˆ†å‰ç¼€</span><br><span class="line">  &#125;;</span><br><span class="line">  return gulp</span><br><span class="line">    .src([&quot;./public/**/*.css&quot;, &quot;!./public/**/*.min.css&quot;]) //æ’é™¤çš„css</span><br><span class="line">    .pipe(gulpif(!isScriptAll, changed(&quot;./public&quot;)))</span><br><span class="line">    .pipe(gulpif(isDebug, debug(&#123; title: &quot;Compress CSS:&quot; &#125;)))</span><br><span class="line">    .pipe(plumber())</span><br><span class="line">    .pipe(cleancss(option))</span><br><span class="line">    .pipe(gulp.dest(&quot;./public&quot;));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// å‹ç¼©publicç›®å½•ä¸‹çš„htmlæ–‡ä»¶</span><br><span class="line">gulp.task(&quot;compressHtml&quot;, function() &#123;</span><br><span class="line">  var cleanOptions = &#123;</span><br><span class="line">    protect: /&lt;\!--%fooTemplate\b.*?%--&gt;/g, //å¿½ç•¥å¤„ç†</span><br><span class="line">    unprotect: /&lt;script [^&gt;]*\btype=&quot;text\/x-handlebars-template&quot;[\s\S]+?&lt;\/script&gt;/gi //ç‰¹æ®Šå¤„ç†</span><br><span class="line">  &#125;;</span><br><span class="line">  var minOption = &#123;</span><br><span class="line">    collapseWhitespace: true, //å‹ç¼©HTML</span><br><span class="line">    collapseBooleanAttributes: true, //çœç•¥å¸ƒå°”å±æ€§çš„å€¼  &lt;input checked=&quot;true&quot;/&gt; ==&gt; &lt;input /&gt;</span><br><span class="line">    removeEmptyAttributes: true, //åˆ é™¤æ‰€æœ‰ç©ºæ ¼ä½œå±æ€§å€¼    &lt;input id=&quot;&quot; /&gt; ==&gt; &lt;input /&gt;</span><br><span class="line">    removeScriptTypeAttributes: true, //åˆ é™¤&lt;script&gt;çš„type=&quot;text/javascript&quot;</span><br><span class="line">    removeStyleLinkTypeAttributes: true, //åˆ é™¤&lt;style&gt;å’Œ&lt;link&gt;çš„type=&quot;text/css&quot;</span><br><span class="line">    removeComments: true, //æ¸…é™¤HTMLæ³¨é‡Š</span><br><span class="line">    minifyJS: true, //å‹ç¼©é¡µé¢JS</span><br><span class="line">    minifyCSS: true, //å‹ç¼©é¡µé¢CSS</span><br><span class="line">    minifyURLs: true //æ›¿æ¢é¡µé¢URL</span><br><span class="line">  &#125;;</span><br><span class="line">  return gulp</span><br><span class="line">    .src(&quot;./public/**/*.html&quot;)</span><br><span class="line">    .pipe(gulpif(isDebug, debug(&#123; title: &quot;Compress HTML:&quot; &#125;)))</span><br><span class="line">    .pipe(plumber())</span><br><span class="line">    .pipe(htmlclean(cleanOptions))</span><br><span class="line">    .pipe(htmlmin(minOption))</span><br><span class="line">    .pipe(gulp.dest(&quot;./public&quot;));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// å‹ç¼© public/uploads ç›®å½•å†…å›¾ç‰‡</span><br><span class="line">gulp.task(&quot;compressImage&quot;, function() &#123;</span><br><span class="line">  var option = &#123;</span><br><span class="line">    optimizationLevel: 5, //ç±»å‹ï¼šNumber  é»˜è®¤ï¼š3  å–å€¼èŒƒå›´ï¼š0-7ï¼ˆä¼˜åŒ–ç­‰çº§ï¼‰</span><br><span class="line">    progressive: true, //ç±»å‹ï¼šBoolean é»˜è®¤ï¼šfalse æ— æŸå‹ç¼©jpgå›¾ç‰‡</span><br><span class="line">    interlaced: false, //ç±»å‹ï¼šBoolean é»˜è®¤ï¼šfalse éš”è¡Œæ‰«ægifè¿›è¡Œæ¸²æŸ“</span><br><span class="line">    multipass: false //ç±»å‹ï¼šBoolean é»˜è®¤ï¼šfalse å¤šæ¬¡ä¼˜åŒ–svgç›´åˆ°å®Œå…¨ä¼˜åŒ–</span><br><span class="line">  &#125;;</span><br><span class="line">  return gulp</span><br><span class="line">    .src(&quot;./public/medias/**/*.*&quot;)</span><br><span class="line">    .pipe(gulpif(!isScriptAll, changed(&quot;./public/medias&quot;)))</span><br><span class="line">    .pipe(gulpif(isDebug, debug(&#123; title: &quot;Compress Images:&quot; &#125;)))</span><br><span class="line">    .pipe(plumber())</span><br><span class="line">    .pipe(imagemin(option))</span><br><span class="line">    .pipe(gulp.dest(&quot;./public&quot;));</span><br><span class="line">&#125;);</span><br><span class="line">// æ‰§è¡Œé¡ºåºï¼š æ¸…é™¤publicç›®å½• -&gt; äº§ç”ŸåŸå§‹åšå®¢å†…å®¹ -&gt; æ‰§è¡Œå‹ç¼©æ··æ·† -&gt; éƒ¨ç½²åˆ°æœåŠ¡å™¨</span><br><span class="line">gulp.task(</span><br><span class="line">  &quot;build&quot;,</span><br><span class="line">  gulp.series(</span><br><span class="line">    &quot;clean&quot;,</span><br><span class="line">    &quot;generate&quot;,</span><br><span class="line">    &quot;compressHtml&quot;,</span><br><span class="line">    &quot;compressCss&quot;,</span><br><span class="line">    &quot;compressJs&quot;,</span><br><span class="line">    &quot;compressImage&quot;,</span><br><span class="line">    gulp.parallel(&quot;deploy&quot;)</span><br><span class="line">  )</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">// é»˜è®¤ä»»åŠ¡</span><br><span class="line">gulp.task(</span><br><span class="line">  &quot;default&quot;,</span><br><span class="line">  gulp.series(</span><br><span class="line">    &quot;clean&quot;,</span><br><span class="line">    &quot;generate&quot;,</span><br><span class="line">    gulp.parallel(&quot;compressHtml&quot;, &quot;compressCss&quot;, &quot;compressImage&quot;, &quot;compressJs&quot;)</span><br><span class="line">  )</span><br><span class="line">);</span><br><span class="line">//Gulp4æœ€å¤§çš„ä¸€ä¸ªæ”¹å˜å°±æ˜¯gulp.taskå‡½æ•°ç°åœ¨åªæ”¯æŒä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ä»»åŠ¡åå’Œè¿è¡Œä»»åŠ¡çš„å‡½æ•°</span><br></pre></td></tr></table></figure><p>æœ€å <code>hexo clean</code> &amp;&amp; <code>hexo g</code> &amp;&amp; <code>gulp</code> &amp;&amp; <code>hexo d</code> å°±å¯ä»¥äº†ã€‚</p><p>æ³¨æ„ï¼Œå¾ˆå¯èƒ½ä¼šè¿è¡Œåˆ°ç¬¬ä¸‰æ­¥ï¼Œä¹Ÿå°±æ˜¯è¿è¡Œ<code>gulp</code>å‹ç¼©å‘½ä»¤æ—¶ä¼šæŠ¥é”™ï¼š</p><p>é‚£æ˜¯å› ä¸ºgulpå®‰è£…çš„æœ¬åœ°ç‰ˆæœ¬å’Œhexoè‡ªå¸¦çš„ç‰ˆæœ¬ä¸å¯¹åº”å¯¼è‡´ï¼Œç¬¬ä¸‰æ­¥gulpå‹ç¼©å¯ä»¥ç”¨ä¸‹é¢å‘½ä»¤å¼ºåˆ¶ä½¿ç”¨æœ¬åœ°ç‰ˆæœ¬ï¼š</p><p><code>node ./node_modules/gulp/bin/gulp.js</code></p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLç´¢å¼•è¯¦è§£</title>
      <link href="/2022/03/04/article13/"/>
      <url>/2022/03/04/article13/</url>
      
        <content type="html"><![CDATA[<p>1ã€ä»€ä¹ˆæ˜¯ç´¢å¼•ï¼Ÿ</p><p>ç´¢å¼•æ˜¯å¸®åŠ© MySQL é«˜æ•ˆè·å–æ•°æ®çš„æ•°æ®ç»“æ„ï¼ˆæœ‰åºï¼‰ã€‚</p><p>åœ¨æ•°æ®ä¹‹å¤–ï¼Œæ•°æ®åº“ç³»ç»Ÿè¿˜ç»´æŠ¤ç€æ»¡è¶³ç‰¹å®šæŸ¥æ‰¾ç®—æ³•çš„æ•°æ®ç»“æ„ï¼Œè¿™äº›æ•°æ®ç»“æ„ä»¥æŸç§æ–¹å¼å¼•ç”¨ï¼ˆæŒ‡å‘ï¼‰æ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨è¿™äº›æ•°æ®ç»“æ„ä¸Šå®ç°é«˜çº§æŸ¥æ‰¾ç®—æ³•ï¼Œè¿™ç§æ•°æ®ç»“æ„å°±æ˜¯ç´¢å¼•ã€‚</p><p>ç´¢å¼•æœ¬èº«ä¹Ÿå¾ˆå¤§ï¼Œä¸€èˆ¬ä»¥ç´¢å¼•æ–‡ä»¶çš„å½¢å¼å­˜åœ¨ç£ç›˜ä¸Šã€‚</p><p>2ã€è¯´ä¸€ä¸‹ç´¢å¼•æœ‰å“ªäº›ä¼˜åŠ¿æœ‰å“ªäº›åŠ£åŠ¿ï¼Ÿ</p><p>ä¼˜åŠ¿ï¼š</p><p>1ã€æé«˜æ•°æ®çš„æŸ¥è¯¢æ•ˆç‡ï¼Œé™ä½äº†æ•°æ®åº“çš„ IO æˆæœ¬ï¼›</p><p>2ã€é€šè¿‡ç´¢å¼•åˆ—å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œå¯ä»¥å¤§å¤§é™ä½æ’åºçš„æˆæœ¬ï¼Œå³é™ä½äº† CPU çš„æ¶ˆè€—ã€‚</p><p>åŠ£åŠ¿ï¼š</p><p>1ã€å®é™…ä¸Šç´¢å¼•ä¹Ÿæ˜¯ä¸€å¼ è¡¨ï¼Œè¯¥è¡¨ä¸­ä¿å­˜äº†ä¸»é”®å’Œç´¢å¼•å­—æ®µï¼Œå¹¶æŒ‡å‘å®ä½“è¡¨çš„è®°å½•ï¼Œæ‰€ä»¥ç´¢å¼•åˆ—ä¹Ÿæ˜¯è¦å ç”¨ç©ºé—´çš„ï¼›</p><p>2ã€è™½ç„¶ç´¢å¼•å¤§å¤§æé«˜äº†æŸ¥è¯¢æ•ˆç‡ï¼Œä½†åŒæ—¶ä¹Ÿé™ä½äº†æ›´æ–°è¡¨çš„é€Ÿåº¦ï¼Œå¦‚å¯¹è¡¨è¿›è¡Œ insertï¼Œupdateï¼Œdeleteã€‚å› ä¸ºæ›´æ–°è¡¨æ—¶ï¼ŒMySQL ä¸ä»…è¦ä¿å­˜æ•°æ®ï¼Œè¿˜è¦ä¿å­˜ä¸€ä¸‹ç´¢å¼•æ–‡ä»¶ã€‚æ¯æ¬¡æ›´æ–°æˆ–æ·»åŠ äº†ç´¢å¼•åˆ—çš„å­—æ®µï¼Œéƒ½ä¼šè°ƒæ•´å› ä¸ºæ›´æ–°æ‰€å¸¦æ¥çš„é”®å€¼å˜åŒ–åçš„ç´¢å¼•ä¿¡æ¯ã€‚</p><p>3ã€ä»‹ç»ä¸€ä¸‹ç´¢å¼•çš„æ•°æ®ç»“æ„ï¼Ÿ</p><p>ç´¢å¼•æ˜¯åœ¨ MySQL çš„å¼•æ“å±‚ä¸­å®ç°çš„ï¼Œæ‰€ä»¥æ¯ç§å­˜å‚¨å¼•æ“çš„ç´¢å¼•éƒ½ä¸ä¸€å®šå®Œå…¨ç›¸åŒï¼Œä¹Ÿä¸æ˜¯æ‰€æœ‰çš„å­˜å‚¨å¼•æ“éƒ½æ”¯æŒæ‰€æœ‰çš„ç´¢å¼•ç±»å‹ã€‚</p><p>MySQL ç›®å‰æä¾›äº†ä»¥ä¸‹å››ç§ç»“æ„çš„ç´¢å¼•ï¼š</p><p>1ã€BTREE ç´¢å¼•ï¼šæœ€å¸¸è§çš„ç´¢å¼•ç±»å‹ï¼Œå¤§éƒ¨åˆ†ç´¢å¼•éƒ½æ”¯æŒ B æ ‘ç´¢å¼•ã€‚</p><p>2ã€HASH ç´¢å¼•ï¼ˆäº†è§£ï¼‰ï¼šåªæœ‰ Memory å¼•æ“æ”¯æŒï¼Œé€‚ç”¨åœºæ™¯ç®€å•ã€‚</p><p>3ã€R-TREE ç´¢å¼•ï¼ˆäº†è§£ï¼‰ï¼šå³ç©ºé—´ç´¢å¼•ï¼Œæ˜¯ MyISAM å¼•æ“çš„ä¸€ä¸ªç‰¹æ®Šç´¢å¼•ç±»å‹ï¼Œä¸»è¦ç”¨äºåœ°ç†ç©ºé—´æ•°æ®ç±»å‹ã€‚</p><p>4ã€Full-text ç´¢å¼•ï¼ˆäº†è§£ï¼‰ï¼šå³å…¨æ–‡ç´¢å¼•ï¼Œä¹Ÿæ˜¯ MyISAM å¼•æ“çš„ä¸€ä¸ªç‰¹æ®Šç´¢å¼•ç±»å‹ï¼Œä¸»è¦ç”¨äºå…¨æ–‡æ£€ç´¢ï¼ŒInnoDB ä» MySQL5.6 å¼€å§‹æ”¯æŒå…¨æ–‡æ£€ç´¢ã€‚</p><p>æˆ‘ä»¬å¹³å¸¸æ‰€è¯´çš„ç´¢å¼•ï¼Œå¦‚æœæ²¡æœ‰ç‰¹åˆ«æŒ‡æ˜ï¼Œéƒ½æŒ‡çš„æ˜¯ B+æ ‘ç´¢å¼•ã€‚å…¶ä¸­ InnoDB å¼•æ“ï¼Œé»˜è®¤ä½¿ç”¨çš„å°±æ˜¯ B+æ ‘ç»“æ„çš„ç´¢å¼•ã€‚</p><p>4ã€BTREE ç´¢å¼•çš„æ£€ç´¢åŸç†</p><p>åˆå§‹åŒ–ç®€ä»‹ï¼š</p><p>ä¸€é¢— B+æ ‘ï¼Œæµ…è“è‰²çš„å—æˆ‘ä»¬ç§°ä¹‹ä¸ºä¸€ä¸ªç£ç›˜å—ï¼Œæ¯ä¸ªç£ç›˜å—åŒ…å«å‡ ä¸ªæ•°æ®é¡¹ï¼ˆæ·±è“è‰²ï¼‰å’ŒæŒ‡é’ˆï¼ˆé»„è‰²ï¼‰ï¼›</p><p>å¦‚ï¼šç£ç›˜å— 1 åŒ…å«æ•°æ®é¡¹ 17 å’Œ 35ï¼ŒåŒ…å«æŒ‡é’ˆ P1ï¼ŒP2ï¼ŒP3ï¼›</p><p>P1 è¡¨ç¤ºå°äº 17 çš„ç£ç›˜å—ï¼ŒP2 è¡¨ç¤ºåœ¨ 17 å’Œ 35 ä¹‹é—´çš„ç£ç›˜å—ï¼ŒP3 è¡¨ç¤ºå¤§äº 35 çš„ç£ç›˜å—ï¼›</p><p>çœŸå®çš„æ•°æ®åªå­˜åœ¨äºå¶å­èŠ‚ç‚¹ï¼Œå³ï¼š3ã€5ã€9ã€10ã€13ã€15ã€28ã€29ã€36ã€60ã€75ã€79ã€90ã€99ï¼›</p><p>éå¶å­èŠ‚ç‚¹ä¸å­˜å‚¨çœŸå®çš„æ•°æ®ï¼Œåªå­˜å‚¨æŒ‡å¼•æœç´¢æ–¹å‘çš„æ•°æ®é¡¹ï¼Œå¦‚ï¼š17ã€35 å¹¶ä¸çœŸå®å­˜åœ¨äºæ•°æ®è¡¨ä¸­ã€‚</p><p>æŸ¥æ‰¾è¿‡ç¨‹ï¼š</p><p>å¦‚æœè¦æŸ¥æ‰¾æ•°æ®é¡¹ 29ï¼Œé‚£ä¹ˆé¦–å…ˆä¼šæŠŠç£ç›˜å— 1 ç”±ç£ç›˜åŠ è½½åˆ°å†…å­˜ï¼Œæ­¤æ—¶å‘ç”Ÿä¸€æ¬¡ IOï¼Œåœ¨å†…å­˜ä¸­ç”¨äºŒåˆ†æŸ¥æ‰¾ç¡®å®š 29 åœ¨ 17 å’Œ 35 ä¹‹é—´ï¼Œé”å®šç£ç›˜å— 1 çš„ P2 æŒ‡é’ˆï¼›</p><p>é€šè¿‡ç£ç›˜å— 1 çš„ P2 æŒ‡é’ˆçš„ç£ç›˜åœ°å€æŠŠç£ç›˜å— 3 ç”±ç£ç›˜åŠ è½½åˆ°å†…å­˜ï¼Œå‘ç”Ÿç¬¬äºŒæ¬¡ IOï¼Œ29 åœ¨ 26 å’Œ 30 ä¹‹é—´ï¼Œé”å®šç£ç›˜å— 3 çš„ P2 æŒ‡é’ˆï¼›</p><p>é€šè¿‡ç£ç›˜å— 3 çš„ P2 æŒ‡é’ˆçš„ç£ç›˜åœ°å€æŠŠç£ç›˜å— 8 ç”±ç£ç›˜åŠ è½½åˆ°å†…å­˜ï¼Œå‘ç”Ÿç¬¬ä¸‰æ¬¡ IOï¼ŒåŒæ—¶å†…å­˜ä¸­åšäºŒåˆ†æŸ¥æ‰¾æ‰¾åˆ° 29ï¼Œç»“æŸæŸ¥è¯¢ï¼Œå…±è®¡ 3 æ¬¡ IOã€‚</p><p>æ€»ç»“ï¼š</p><p>çœŸå®çš„æƒ…å†µæ˜¯ï¼Œ3 å±‚çš„ B+æ ‘å¯ä»¥è¡¨ç¤ºä¸Šç™¾ä¸‡çš„æ•°æ®ï¼Œå¦‚æœä¸Šç™¾ä¸‡çš„æ•°æ®æŸ¥æ‰¾åªéœ€è¦ 3 æ¬¡ IOï¼Œæ€§èƒ½æé«˜å°†æ˜¯å·¨å¤§çš„ï¼›</p><p>å¦‚æœæ²¡æœ‰ç´¢å¼•ï¼Œæ¯ä¸ªæ•°æ®é¡¹éƒ½è¦å‘ç”Ÿä¸€æ¬¡ IOï¼Œé‚£ä¹ˆæ€»å…±éœ€è¦ç™¾ä¸‡æ¬¡çš„ IOï¼Œæˆæœ¬éå¸¸é«˜ã€‚</p><p>5ã€ç´¢å¼•åˆ†ä¸ºå“ªäº›ç±»å‹ï¼Ÿ</p><p>å•å€¼ç´¢å¼•ï¼šå³ä¸€ä¸ªç´¢å¼•åªåŒ…å«å•ä¸ªåˆ—ï¼Œä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¤šä¸ªå•åˆ—ç´¢å¼•ã€‚</p><p>å”¯ä¸€ç´¢å¼•ï¼šç´¢å¼•åˆ—çš„å€¼å¿…é¡»å”¯ä¸€ï¼Œä½†å…è®¸æœ‰ç©ºå€¼ã€‚</p><p>å¤åˆç´¢å¼•ï¼šå³ä¸€ä¸ªç´¢å¼•åŒ…å«å¤šä¸ªåˆ—ã€‚</p><p>6ã€ç´¢å¼•çš„åŸºæœ¬è¯­æ³•ï¼Ÿ</p><p>1ã€åˆ›å»ºç´¢å¼•ï¼š</p><p>æ–¹å¼ 1ï¼š</p><p>create [UNIQUE] index ç´¢å¼•å on è¡¨å(å­—æ®µåâ€¦)ï¼›</p><p>ç¤ºä¾‹ï¼šcreate [UNIQUE] index idx_city_name on city(city_name);</p><p>æ–¹å¼ 2ï¼š</p><p>alter table è¡¨å add index ç´¢å¼•å(å­—æ®µåâ€¦)</p><p>ç¤ºä¾‹ï¼šalter table city add index idx_city_name(city_name);</p><p>2ã€æŸ¥çœ‹ç´¢å¼•ï¼š</p><p>show index from è¡¨åï¼›</p><p>ç¤ºä¾‹ï¼šshow index from cityï¼›</p><p>3ã€åˆ é™¤ç´¢å¼•ï¼š</p><p>drop index ç´¢å¼•å on è¡¨åï¼›</p><p>ç¤ºä¾‹ï¼šdrop index idx_city_name on cityï¼›</p><p>7ã€å“ªäº›æƒ…å†µéœ€è¦åˆ›å»ºç´¢å¼•ï¼Ÿ</p><p>1ã€ä¸»é”®è‡ªåŠ¨å»ºç«‹å”¯ä¸€ç´¢å¼•</p><p>2ã€é¢‘ç¹ä½œä¸ºæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µåº”åˆ›å»ºç´¢å¼•</p><p>3ã€æŸ¥è¯¢ä¸­ä¸å…¶å®ƒè¡¨å…³è”çš„å­—æ®µï¼Œå¤–é”®å…³ç³»å»ºç«‹ç´¢å¼•</p><p>4ã€æŸ¥è¯¢ä¸­æ’åºçš„å­—æ®µï¼Œæ’åºå­—æ®µè‹¥é€šè¿‡ç´¢å¼•å»è®¿é—®å°†å¤§å¤§æé«˜æ’åºé€Ÿåº¦</p><p>5ã€æŸ¥è¯¢ä¸­ç»Ÿè®¡æˆ–åˆ†ç»„å­—æ®µ</p><p>8ã€å“ªäº›æƒ…å†µä¸éœ€è¦åˆ›å»ºç´¢å¼•ï¼Ÿ</p><p>1ã€æ•°æ®é‡å¤ªå°‘</p><p>2ã€ç»å¸¸åšå¢åˆ æ”¹é¢‘ç¹æ“ä½œçš„çš„å­—æ®µ</p><p>3ã€æ•°æ®é‡å¤ä¸”åˆ†å¸ƒå¹³å‡çš„è¡¨å­—æ®µ</p><p>è§£é‡Šï¼šå‡å¦‚ä¸€ä¸ªè¡¨æœ‰ 10 ä¸‡è®°å½•ï¼Œæœ‰ä¸€ä¸ªå­—æ®µåªæœ‰ true å’Œ false ä¸¤ç§å€¼ï¼Œä¸”æ¯ä¸ªå€¼çš„åˆ†å¸ƒæ¦‚ç‡å¤§çº¦ä¸º 50%ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è¯¥å­—æ®µå»ºç´¢å¼•ä¸ä¼šæé«˜æŸ¥è¯¢æ•ˆç‡ï¼›</p><p>ç´¢å¼•çš„é€‰æ‹©æ€§ï¼šç´¢å¼•åˆ—ä¸­ä¸åŒçš„å€¼çš„æ•°ç›®/è¡¨è®°å½•æ•°</p><p>å¦‚æœä¸€ä¸ªè¡¨ä¸­æœ‰ 2000 æ¡æ•°æ®ï¼Œç´¢å¼•åˆ—æœ‰ 1980 ä¸ªä¸åŒçš„å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªç´¢å¼•çš„é€‰æ‹©æ€§å°±æ˜¯ 1980/2000=0.99ï¼Œé€‰æ‹©æ€§è¶Šæ¥è¿‘ 1ï¼Œç´¢å¼•çš„æ•ˆç‡è¶Šé«˜ã€‚</p><p>4ã€where æ¡ä»¶é‡Œç”¨ä¸åˆ°çš„å­—æ®µ</p>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ªäººåšå®¢æ­å»ºï¼ˆäºŒï¼‰</title>
      <link href="/2022/03/03/hexo2/"/>
      <url>/2022/03/03/hexo2/</url>
      
        <content type="html"><![CDATA[<h2 id="å®šåˆ¶"><a href="#å®šåˆ¶" class="headerlink" title="å®šåˆ¶"></a>å®šåˆ¶</h2><p>æˆ‘ä»¬è¦å®šåˆ¶è‡ªå·±çš„åšå®¢çš„è¯ï¼Œé¦–å…ˆå°±è¦æ¥äº†è§£ä¸€ä¸‹<code>Hexo</code>åšå®¢çš„ä¸€äº›ç›®å½•å’Œæ–‡ä»¶çš„ä½œç”¨ï¼Œä»¥åŠå¦‚ä½•å¹³æ»‘æ›´æ¢æ¼‚äº®çš„ä¸»é¢˜æ¨¡æ¿å¹¶åŠ å…¥è‡ªå·±çš„å®šåˆ¶æºä»£ç å®ç°ä¸ªæ€§åŒ–å®šåˆ¶</p><h3 id="åšå®¢ç›®å½•æ„æˆä»‹ç»"><a href="#åšå®¢ç›®å½•æ„æˆä»‹ç»" class="headerlink" title="åšå®¢ç›®å½•æ„æˆä»‹ç»"></a>åšå®¢ç›®å½•æ„æˆä»‹ç»</h3><p>åšå®¢çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- node_modules</span><br><span class="line">- public</span><br><span class="line">- scaffolds</span><br><span class="line">- source</span><br><span class="line">    - _data</span><br><span class="line">    - _posts</span><br><span class="line">    - about</span><br><span class="line">    - archives</span><br><span class="line">    - categories</span><br><span class="line">    - friends</span><br><span class="line">    - tags</span><br><span class="line">- themes</span><br></pre></td></tr></table></figure><p><code>node_modules</code>æ˜¯<code>node.js</code>å„ç§åº“çš„ç›®å½•ï¼Œ<code>public</code>æ˜¯ç”Ÿæˆçš„ç½‘é¡µæ–‡ä»¶ç›®å½•ï¼Œ<code>scaffolds</code>é‡Œé¢å°±ä¸‰ä¸ªæ–‡ä»¶ï¼Œå­˜å‚¨ç€æ–°æ–‡ç« å’Œæ–°é¡µé¢çš„åˆå§‹è®¾ç½®ï¼Œ<code>source</code>æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨åˆ°çš„ä¸€ä¸ªç›®å½•ï¼Œé‡Œé¢å­˜æ”¾ç€æ–‡ç« ã€å„ç±»é¡µé¢ã€å›¾åƒç­‰æ–‡ä»¶ï¼Œ<code>themes</code>å­˜æ”¾ç€ä¸»é¢˜æ–‡ä»¶ï¼Œä¸€èˆ¬ä¹Ÿç”¨ä¸åˆ°ã€‚</p><p>å¹³æ—¶å†™æ–‡ç« åªéœ€è¦å…³æ³¨<code>source/_posts</code>è¿™ä¸ªæ–‡ä»¶å¤¹å°±è¡Œäº†ã€‚</p><h3 id="hexoåŸºæœ¬é…ç½®"><a href="#hexoåŸºæœ¬é…ç½®" class="headerlink" title="hexoåŸºæœ¬é…ç½®"></a>hexoåŸºæœ¬é…ç½®</h3><p>åœ¨æ–‡ä»¶æ ¹ç›®å½•ä¸‹çš„<code>_config.yml</code>ï¼Œå°±æ˜¯æ•´ä¸ª<code>hexo</code>æ¡†æ¶çš„é…ç½®æ–‡ä»¶äº†ã€‚å¯ä»¥åœ¨é‡Œé¢ä¿®æ”¹å¤§éƒ¨åˆ†çš„é…ç½®ã€‚è¯¦ç»†å¯å‚è€ƒå®˜æ–¹çš„<a href="https://hexo.io/zh-cn/docs/configuration">é…ç½®æè¿°</a>ã€‚</p><h4 id="ç½‘ç«™"><a href="#ç½‘ç«™" class="headerlink" title="ç½‘ç«™"></a>ç½‘ç«™</h4><p>å‚æ•°æè¿°<code>title</code>ç½‘ç«™æ ‡é¢˜<code>subtitle</code>ç½‘ç«™å‰¯æ ‡é¢˜<code>description</code>ç½‘ç«™æè¿°<code>author</code>æ‚¨çš„åå­—<code>language</code>ç½‘ç«™ä½¿ç”¨çš„è¯­è¨€<code>timezone</code>ç½‘ç«™æ—¶åŒºã€‚<code>Hexo</code> é»˜è®¤ä½¿ç”¨æ‚¨ç”µè„‘çš„æ—¶åŒºã€‚æ—¶åŒºåˆ—è¡¨ã€‚æ¯”å¦‚è¯´ï¼š<code>America/New_York, Japan</code>, å’Œ <code>UTC</code> ã€‚</p><p>å…¶ä¸­ï¼Œ<code>description</code>ä¸»è¦ç”¨äº<code>SEO</code>ï¼Œå‘Šè¯‰æœç´¢å¼•æ“ä¸€ä¸ªå…³äºæ‚¨ç«™ç‚¹çš„ç®€å•æè¿°ï¼Œé€šå¸¸å»ºè®®åœ¨å…¶ä¸­åŒ…å«æ‚¨ç½‘ç«™çš„å…³é”®è¯ã€‚<code>author</code>å‚æ•°ç”¨äºä¸»é¢˜æ˜¾ç¤ºæ–‡ç« çš„ä½œè€…ã€‚</p><h4 id="ç½‘å€"><a href="#ç½‘å€" class="headerlink" title="ç½‘å€"></a>ç½‘å€</h4><p>å‚æ•°æè¿°<code>url</code>ç½‘å€<code>root</code>ç½‘ç«™æ ¹ç›®å½• <code>permalink</code>æ–‡ç« çš„<a href="https://hexo.io/zh-cn/docs/permalinks">æ°¸ä¹…é“¾æ¥</a>æ ¼å¼<code>permalink_defaults</code>æ°¸ä¹…é“¾æ¥ä¸­å„éƒ¨åˆ†çš„é»˜è®¤å€¼</p><p>åœ¨è¿™é‡Œï¼Œä½ éœ€è¦æŠŠ<code>url</code>æ”¹æˆä½ çš„<strong>ç½‘ç«™åŸŸå</strong>ã€‚</p><p><code>permalink</code>ï¼Œä¹Ÿå°±æ˜¯ä½ ç”ŸæˆæŸä¸ªæ–‡ç« æ—¶çš„é‚£ä¸ªé“¾æ¥æ ¼å¼ã€‚</p><p>æ¯”å¦‚æˆ‘æ–°å»ºä¸€ä¸ªæ–‡ç« å«<code>temp.md</code>ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ä»–è‡ªåŠ¨ç”Ÿæˆçš„åœ°å€å°±æ˜¯<code>http://yoursite.com/2018/09/05/temp</code>ã€‚</p><p>ä»¥ä¸‹æ˜¯å®˜æ–¹ç»™å‡ºçš„ç¤ºä¾‹ï¼Œå…³äºé“¾æ¥çš„å˜é‡è¿˜æœ‰å¾ˆå¤šï¼Œéœ€è¦çš„å¯ä»¥å»å®˜ç½‘ä¸ŠæŸ¥æ‰¾ <a href="https://hexo.io/zh-cn/docs/permalinks">æ°¸ä¹…é“¾æ¥</a> ã€‚</p><p><code>å‚æ•°ç»“æœ:year/:month/:day/:title/2019/08/10/hello-world :year-:month-:day-:title.html 2019-08-10-hello-world.html :category/:titlefoo/bar/hello-world</code></p><p>å†å¾€ä¸‹ç¿»ï¼Œä¸­é—´è¿™äº›éƒ½é»˜è®¤å°±å¥½äº†ã€‚</p><p><code>theme: landscap</code></p><p><code>theme</code>å°±æ˜¯é€‰æ‹©ä»€ä¹ˆä¸»é¢˜ï¼Œä¹Ÿå°±æ˜¯åœ¨<code>themes</code>è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œåœ¨å®˜ç½‘ä¸Šæœ‰å¾ˆå¤šä¸ªä¸»é¢˜ï¼Œé»˜è®¤ç»™ä½ å®‰è£…çš„æ˜¯<code>lanscape</code>è¿™ä¸ªä¸»é¢˜ã€‚å½“ä½ éœ€è¦æ›´æ¢ä¸»é¢˜æ—¶ï¼Œåœ¨å®˜ç½‘ä¸Šä¸‹è½½ï¼ŒæŠŠä¸»é¢˜çš„æ–‡ä»¶æ”¾åœ¨<code>themes</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œå†ä¿®æ”¹è¿™ä¸ªä¸»é¢˜å‚æ•°å°±å¯ä»¥äº†ã€‚</p><h4 id="Front-matter"><a href="#Front-matter" class="headerlink" title="Front-matter"></a>Front-matter</h4><p><code>Front-matter</code> æ˜¯<code>md</code>æ–‡ä»¶æœ€ä¸Šæ–¹ä»¥ <code>---</code>åˆ†éš”çš„åŒºåŸŸï¼Œç”¨äºæŒ‡å®šä¸ªåˆ«æ–‡ä»¶çš„å˜é‡ï¼Œä¸¾ä¾‹æ¥è¯´ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">title: Hexo+Githubåšå®¢æ­å»ºè®°å½•</span><br><span class="line">date: 2019-08-10 21:44:44</span><br></pre></td></tr></table></figure><p>ä¸‹æ˜¯é¢„å…ˆå®šä¹‰çš„å‚æ•°ï¼Œæ‚¨å¯åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨è¿™äº›å‚æ•°å€¼å¹¶åŠ ä»¥åˆ©ç”¨ã€‚</p><p>å‚æ•°æè¿°<code>layout</code>å¸ƒå±€<code>title</code>æ ‡é¢˜<code>date</code>å»ºç«‹æ—¥æœŸ<code>updated</code>æ›´æ–°æ—¥æœŸ<code>comments</code>å¼€å¯æ–‡ç« çš„è¯„è®ºåŠŸèƒ½<code>tags</code>æ ‡ç­¾ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰<code>categories</code>åˆ†ç±»ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰<code>permalink</code>è¦†ç›–æ–‡ç« ç½‘å€</p><p>å…¶ä¸­ï¼Œåˆ†ç±»å’Œæ ‡ç­¾éœ€è¦åŒºåˆ«ä¸€ä¸‹ï¼Œåˆ†ç±»å…·æœ‰é¡ºåºæ€§å’Œå±‚æ¬¡æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´<code>Foo</code>ï¼Œ<code>Bar</code>ä¸ç­‰äº<code>Bar</code>ï¼Œ<code>Foo</code>ï¼›è€Œæ ‡ç­¾æ²¡æœ‰é¡ºåºå’Œå±‚æ¬¡ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: Hexoåšå®¢æ­å»º</span><br><span class="line">date: 2022-03-05 21:44:44</span><br><span class="line">author: ä¸­å…ƒ</span><br><span class="line">img: /banner/7.jpg</span><br><span class="line">coverImg: /banner/7.jpg</span><br><span class="line">top: true</span><br><span class="line">cover: true</span><br><span class="line">toc: true</span><br><span class="line">password: </span><br><span class="line">mathjax: true</span><br><span class="line">summary: è¿™æ˜¯ä½ è‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å†…å®¹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æœ‰å€¼ï¼Œæ–‡ç« å¡ç‰‡æ‘˜è¦å°±æ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œå¦åˆ™ç¨‹åºä¼šè‡ªåŠ¨æˆªå–æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ä½œä¸ºæ‘˜è¦</span><br><span class="line">tags:</span><br><span class="line">- Hexo</span><br><span class="line">- Github</span><br><span class="line">- åšå®¢</span><br><span class="line">categories:</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h4 id="layoutï¼ˆå¸ƒå±€ï¼‰"><a href="#layoutï¼ˆå¸ƒå±€ï¼‰" class="headerlink" title="layoutï¼ˆå¸ƒå±€ï¼‰"></a>layoutï¼ˆå¸ƒå±€ï¼‰</h4><p>å½“ä½ æ¯ä¸€æ¬¡ä½¿ç”¨ä»£ç </p><p><code>hexo new XXX</code></p><p>å®ƒå…¶å®é»˜è®¤ä½¿ç”¨çš„æ˜¯<code>post</code>è¿™ä¸ªå¸ƒå±€ï¼Œä¹Ÿå°±æ˜¯åœ¨<code>source</code>æ–‡ä»¶å¤¹ä¸‹çš„<code>_post</code>é‡Œé¢ã€‚</p><p><code>Hexo</code>æœ‰ä¸‰ç§é»˜è®¤å¸ƒå±€ï¼š<code>post</code>ã€<code>page</code>å’Œ<code>draft</code>ï¼Œå®ƒä»¬åˆ†åˆ«å¯¹åº”ä¸åŒçš„è·¯å¾„ï¼Œè€Œæ‚¨è‡ªå®šä¹‰çš„å…¶ä»–å¸ƒå±€å’Œ<code>post</code>ç›¸åŒï¼Œéƒ½å°†å‚¨å­˜åˆ°<code>source/_posts</code>æ–‡ä»¶å¤¹ã€‚</p><p>è€Œnewè¿™ä¸ªå‘½ä»¤å…¶å®æ˜¯ï¼š</p><p><code>hexo new [layout] &lt;title&gt;</code></p><p>åªä¸è¿‡è¿™ä¸ª<code>layout</code>é»˜è®¤æ˜¯<code>post</code>ç½¢äº†ã€‚</p><p>å¦‚æœä½ æƒ³å¦èµ·ä¸€é¡µï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨</p><p><code>hexo new page newpage</code></p><p>ç³»ç»Ÿä¼šè‡ªåŠ¨ç»™ä½ åœ¨<code>source</code>æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª<code>newpage</code>æ–‡ä»¶å¤¹ï¼Œä»¥åŠ<code>newpage</code>æ–‡ä»¶å¤¹ä¸­çš„<code>index.md</code>ï¼Œè¿™æ ·ä½ è®¿é—®çš„<code>newpage</code>å¯¹åº”çš„é“¾æ¥å°±æ˜¯<a href="http://xxx.xxx/newpage">http://xxx.xxx/newpage</a></p><p><code>draft</code>æ˜¯è‰ç¨¿çš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯ä½ å¦‚æœæƒ³å†™æ–‡ç« ï¼Œåˆä¸å¸Œæœ›è¢«çœ‹åˆ°ï¼Œé‚£ä¹ˆå¯ä»¥</p><p><code>hexo new draft newdraft</code></p><p>è¿™æ ·ä¼šåœ¨<code>source/_draft</code>ä¸­æ–°å»ºä¸€ä¸ª<code>newdraft.md</code>æ–‡ä»¶ï¼Œå¦‚æœä½ çš„è‰ç¨¿æ–‡ä»¶å†™çš„è¿‡ç¨‹ä¸­ï¼Œæƒ³è¦é¢„è§ˆä¸€ä¸‹ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨</p><p><code>hexo server --draft</code></p><p>åœ¨æœ¬åœ°ç«¯å£ä¸­å¼€å¯æœåŠ¡é¢„è§ˆã€‚</p><p>å¦‚æœä½ çš„è‰ç¨¿æ–‡ä»¶å†™å®Œäº†ï¼Œæƒ³è¦å‘è¡¨åˆ°<code>post</code>ä¸­ï¼Œ</p><p><code>hexo publish draft newdraft</code></p><p>å°±ä¼šè‡ªåŠ¨æŠŠ<code>newdraft.md</code>å‘é€åˆ°<code>post</code>ä¸­ã€‚</p><h3 id="æ›´æ¢ä¸»é¢˜"><a href="#æ›´æ¢ä¸»é¢˜" class="headerlink" title="æ›´æ¢ä¸»é¢˜"></a>æ›´æ¢ä¸»é¢˜</h3><p>æˆ‘ä»¬åœ¨äº†è§£<code>Hexo</code>åšå®¢æ–‡ä»¶åŸºç¡€ä¹‹åï¼ŒçŸ¥é“ä¸»é¢˜æ–‡ä»¶å°±æ”¾åœ¨<code>themes</code>æ–‡ä»¶ä¸‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å»Hexoå®˜ç½‘ä¸‹è½½å–œæ¬¢çš„ä¸»é¢˜ï¼Œå¤åˆ¶è¿›å»ç„¶åä¿®æ”¹å‚æ•°å³å¯ã€‚<br>ç½‘ä¸Šå¤§å¤šæ•°ä¸»é¢˜éƒ½æ˜¯githubæ’åç¬¬ä¸€çš„<code>Next</code>ä¸»é¢˜ï¼Œä½†æ˜¯æˆ‘ä¸ªäººä¸æ˜¯å¾ˆå–œæ¬¢ï¼Œæˆ‘åœ¨ç½‘ä¸Šçœ‹åˆ°ä¸€ä¸ªä¸»é¢˜æ„Ÿè§‰è¿˜ä¸é”™ï¼š<a href="https://github.com/blinkfox/hexo-theme-matery">hexo-theme-matery</a>ï¼Œåœ°å€åœ¨<a href="https://github.com/blinkfox/hexo-theme-matery">ä¼ é€é—¨</a>ã€‚è¿™ä¸ªä¸»é¢˜çœ‹ç€æ¯”è¾ƒæ¼‚äº®ï¼Œå¹¶ä¸”å“åº”å¼æ¯”è¾ƒå‹å¥½ï¼Œç‚¹èµ·æ¥å¾ˆèˆ’æœï¼ŒåŠŸèƒ½ä¹Ÿæ¯”è¾ƒå¾ˆå¤šã€‚</p><p>å½“ç„¶ï¼Œäººå„æœ‰å¼‚ï¼Œè¿™ä¸ªä¸»é¢˜é£æ ¼ä¹Ÿä¸ä¸€å®šæ˜¯ä½ å–œæ¬¢ï¼Œé‚£ä¹ˆä½ ä¹Ÿå¯ä»¥è·Ÿç€è¿™æ•™ç¨‹ç±»ä¼¼çš„æ–¹æ³•æ›¿æ¢æˆä½ å–œæ¬¢çš„å°±è¡Œäº†ã€‚</p><ul><li>ç®€å•æ¼‚äº®ï¼Œæ–‡ç« å†…å®¹ç¾è§‚æ˜“è¯»</li><li><a href="https://material.io/">Material Design</a> è®¾è®¡</li><li>å“åº”å¼è®¾è®¡ï¼Œåšå®¢åœ¨æ¡Œé¢ç«¯ã€å¹³æ¿ã€æ‰‹æœºç­‰è®¾å¤‡ä¸Šå‡èƒ½å¾ˆå¥½çš„å±•ç°</li><li>é¦–é¡µè½®æ’­æ–‡ç« åŠæ¯å¤©åŠ¨æ€åˆ‡æ¢ <code>Banner</code> å›¾ç‰‡</li><li>ç€‘å¸ƒæµå¼çš„åšå®¢æ–‡ç« åˆ—è¡¨ï¼ˆæ–‡ç« æ— ç‰¹è‰²å›¾ç‰‡æ—¶ä¼šæœ‰ <code>24</code> å¼ æ¼‚äº®çš„å›¾ç‰‡ä»£æ›¿ï¼‰</li><li>ç€‘å¸ƒæµå¼çš„åšå®¢æ–‡ç« åˆ—è¡¨ï¼ˆæ–‡ç« æ— ç‰¹è‰²å›¾ç‰‡æ—¶ä¼šæœ‰ <code>24</code> å¼ æ¼‚äº®çš„å›¾ç‰‡ä»£æ›¿ï¼‰</li><li><strong>è¯äº‘</strong>çš„æ ‡ç­¾é¡µå’Œ<strong>é›·è¾¾å›¾</strong>çš„åˆ†ç±»é¡µ</li><li>ä¸°å¯Œçš„å…³äºæˆ‘é¡µé¢ï¼ˆåŒ…æ‹¬å…³äºæˆ‘ã€æ–‡ç« ç»Ÿè®¡å›¾ã€æˆ‘çš„é¡¹ç›®ã€æˆ‘çš„æŠ€èƒ½ã€ç›¸å†Œç­‰ï¼‰</li><li>å¯è‡ªå®šä¹‰çš„æ•°æ®çš„å‹æƒ…é“¾æ¥é¡µé¢</li><li>æ”¯æŒ <code>MathJax</code></li><li><code>TOC</code> ç›®å½•</li><li>å¯è®¾ç½®å¤åˆ¶æ–‡ç« å†…å®¹æ—¶è¿½åŠ ç‰ˆæƒä¿¡æ¯</li><li>å¯è®¾ç½®é˜…è¯»æ–‡ç« æ—¶åšå¯†ç éªŒè¯</li><li>é›†æˆäº†<a href="http://busuanzi.ibruce.info/">ä¸è’œå­ç»Ÿè®¡</a>ã€è°·æ­Œåˆ†æï¼ˆ<code>Google Analytics</code>ï¼‰å’Œæ–‡ç« å­—æ•°ç»Ÿè®¡ç­‰åŠŸèƒ½</li><li>æ”¯æŒåœ¨é¦–é¡µçš„éŸ³ä¹æ’­æ”¾å’Œè§†é¢‘æ’­æ”¾åŠŸèƒ½</li></ul><p>ä»–çš„ä»‹ç»æ–‡æ¡£å†™å¾—éå¸¸çš„è¯¦ç»†ï¼Œè¿˜æœ‰ä¸­è‹±æ–‡ä¸¤ä¸ªç‰ˆæœ¬ã€‚</p><p>é¦–å…ˆå…ˆæŒ‰ç…§æ–‡æ¡£æ•™ç¨‹å®‰è£…ä¸€éä¸»é¢˜ï¼Œç„¶åæ˜¯å¯ä»¥æ­£å¸¸æ‰“å¼€çš„ï¼Œå¦‚æœä½ æ˜¯ä¸€èˆ¬ä½¿ç”¨çš„è¯ï¼ŒåŸºæœ¬æ²¡å•¥é—®é¢˜äº†ã€‚ä¸è¿‡æœ‰äº›åœ°æ–¹æœ‰äº›åœ°æ–¹å¯ä»¥æ ¹æ®ä½ è‡ªå·±çš„ä¹ æƒ¯å’Œå–œå¥½ä¿®æ”¹ä¸€ä¸‹ï¼Œ ä¸‹é¢è®°å½•ä¸€ä¸‹æˆ‘è¿™ä¸ªåšå®¢ä¿®æ”¹äº†çš„ä¸€äº›åœ°æ–¹ã€‚</p><p>é¦–å…ˆä¸ºäº†æ–°å»ºæ–‡ç« æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸€ä¸‹æ–‡ç« æ¨¡æ¿ï¼Œå»ºè®®å°†<code>/scaffolds/post.md</code>ä¿®æ”¹ä¸ºå¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">author: </span><br><span class="line">img: </span><br><span class="line">coverImg: </span><br><span class="line">top: false</span><br><span class="line">cover: false</span><br><span class="line">toc: true</span><br><span class="line">mathjax: false</span><br><span class="line">password:</span><br><span class="line">summary:</span><br><span class="line">tags:</span><br><span class="line">categories:</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p>è¿™æ ·æ–°å»ºæ–‡ç« å ä¸€äº›<code>Front-matter</code>å‚æ•°ä¸ç”¨ä½ è‡ªå·±è¡¥å……äº†ï¼Œä¿®æ”¹å¯¹åº”ä¿¡æ¯å°±å¯ä»¥äº†ã€‚</p><p>åŸæ¥çš„ä¸»é¢˜æ²¡æœ‰<code>404</code>é¡µé¢ï¼Œæˆ‘ä»¬åŠ ä¸€ä¸ªã€‚é¦–å…ˆåœ¨<code>/source/</code>ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª<code>404.md</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">title: 404</span><br><span class="line">date: 2019-08-5 16:41:10</span><br><span class="line">type: &quot;404&quot;</span><br><span class="line">layout: &quot;404&quot;</span><br><span class="line">description: &quot;Oopsï½ï¼Œæˆ‘å´©æºƒäº†ï¼æ‰¾ä¸åˆ°ä½ æƒ³è¦çš„é¡µé¢ :(&quot;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨<code>/themes/matery/layout/</code>ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª<code>404.ejs</code>æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">    /* don&#x27;t remove. */</span><br><span class="line">    .about-cover &#123;</span><br><span class="line">        height: 75vh;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot;bg-cover pd-header about-cover&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;row&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;col s10 offset-s1 m8 offset-m2 l8 offset-l2&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;brand&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;title center-align&quot;&gt;</span><br><span class="line">                        404</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;description center-align&quot;&gt;</span><br><span class="line">                        &lt;%= page.description %&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // æ¯å¤©åˆ‡æ¢ banner å›¾.  Switch banner image every day.</span><br><span class="line">    $(&#x27;.bg-cover&#x27;).css(&#x27;background-image&#x27;, &#x27;url(/medias/banner/&#x27; + new Date().getDay() + &#x27;.jpg)&#x27;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹<code>/themes/matery/layout/_partial</code>ä¸­çš„<code>footer.ejs</code>ï¼Œåœ¨æœ€ååŠ ä¸Šï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;script language=javascript&gt;</span><br><span class="line">    function siteTime() &#123;</span><br><span class="line">        window.setTimeout(&quot;siteTime()&quot;, 1000);</span><br><span class="line">        var seconds = 1000;</span><br><span class="line">        var minutes = seconds * 60;</span><br><span class="line">        var hours = minutes * 60;</span><br><span class="line">        var days = hours * 24;</span><br><span class="line">        var years = days * 365;</span><br><span class="line">        var today = new Date();</span><br><span class="line">        var todayYear = today.getFullYear();</span><br><span class="line">        var todayMonth = today.getMonth() + 1;</span><br><span class="line">        var todayDate = today.getDate();</span><br><span class="line">        var todayHour = today.getHours();</span><br><span class="line">        var todayMinute = today.getMinutes();</span><br><span class="line">        var todaySecond = today.getSeconds();</span><br><span class="line">        /* Date.UTC() -- è¿”å›dateå¯¹è±¡è·ä¸–ç•Œæ ‡å‡†æ—¶é—´(UTC)1970å¹´1æœˆ1æ—¥åˆå¤œä¹‹é—´çš„æ¯«ç§’æ•°(æ—¶é—´æˆ³)</span><br><span class="line">        year - ä½œä¸ºdateå¯¹è±¡çš„å¹´ä»½ï¼Œä¸º4ä½å¹´ä»½å€¼</span><br><span class="line">        month - 0-11ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„æœˆä»½</span><br><span class="line">        day - 1-31ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„å¤©æ•°</span><br><span class="line">        hours - 0(åˆå¤œ24ç‚¹)-23ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„å°æ—¶æ•°</span><br><span class="line">        minutes - 0-59ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„åˆ†é’Ÿæ•°</span><br><span class="line">        seconds - 0-59ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„ç§’æ•°</span><br><span class="line">        microseconds - 0-999ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„æ¯«ç§’æ•° */</span><br><span class="line">        var t1 = Date.UTC(2017, 09, 11, 00, 00, 00); //åŒ—äº¬æ—¶é—´2018-2-13 00:00:00</span><br><span class="line">        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);</span><br><span class="line">        var diff = t2 - t1;</span><br><span class="line">        var diffYears = Math.floor(diff / years);</span><br><span class="line">        var diffDays = Math.floor((diff / days) - diffYears * 365);</span><br><span class="line">        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);</span><br><span class="line">        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) / minutes);</span><br><span class="line">        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours - diffMinutes * minutes) / seconds);</span><br><span class="line">        document.getElementById(&quot;sitetime&quot;).innerHTML = &quot;æœ¬ç«™å·²è¿è¡Œ &quot; +diffYears+&quot; å¹´ &quot;+diffDays + &quot; å¤© &quot; + diffHours + &quot; å°æ—¶ &quot; + diffMinutes + &quot; åˆ†é’Ÿ &quot; + diffSeconds + &quot; ç§’&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    siteTime();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨åˆé€‚çš„åœ°æ–¹ï¼ˆæ¯”å¦‚<code>copyright</code>å£°æ˜åé¢ï¼‰åŠ ä¸Šä¸‹é¢çš„ä»£ç å°±è¡Œäº†ï¼š</p><p><code>&lt;span id=&quot;sitetime&quot;&gt;&lt;/span&gt;</code></p><h4 id="ä¿®æ”¹ä¸è’œå­åˆå§‹åŒ–è®¡æ•°"><a href="#ä¿®æ”¹ä¸è’œå­åˆå§‹åŒ–è®¡æ•°" class="headerlink" title="ä¿®æ”¹ä¸è’œå­åˆå§‹åŒ–è®¡æ•°"></a>ä¿®æ”¹ä¸è’œå­åˆå§‹åŒ–è®¡æ•°</h4><p>å› ä¸ºä¸è’œå­è‡³ä»Šæœªå¼€æ”¾æ³¨å†Œï¼Œæ‰€ä»¥æ²¡åŠæ³•åœ¨å®˜ç½‘ä¿®æ”¹åˆå§‹åŒ–ï¼Œåªèƒ½è‡ªå·±åŠ¨æ‰‹äº†ã€‚å’Œä¸Šä¸€æ¡ä¸€æ ·ï¼Œæˆ‘ä»¬åœ¨<code>/themes/matery/layout/_partial</code>é‡Œçš„<code>footer.ejs</code>æ–‡ä»¶æœ€ååŠ ä¸Šï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    $(document).ready(function () &#123;</span><br><span class="line"></span><br><span class="line">        var int = setInterval(fixCount, 50);  // 50mså‘¨æœŸæ£€æµ‹å‡½æ•°</span><br><span class="line">        var pvcountOffset = 80000;  // åˆå§‹åŒ–é¦–æ¬¡æ•°æ®</span><br><span class="line">        var uvcountOffset = 20000;</span><br><span class="line"></span><br><span class="line">        function fixCount() &#123;</span><br><span class="line">            if (document.getElementById(&quot;busuanzi_container_site_pv&quot;).style.display != &quot;none&quot;) &#123;</span><br><span class="line">                $(&quot;#busuanzi_value_site_pv&quot;).html(parseInt($(&quot;#busuanzi_value_site_pv&quot;).html()) + pvcountOffset);</span><br><span class="line">                clearInterval(int);</span><br><span class="line">            &#125;</span><br><span class="line">            if ($(&quot;#busuanzi_container_site_pv&quot;).css(&quot;display&quot;) != &quot;none&quot;) &#123;</span><br><span class="line">                $(&quot;#busuanzi_value_site_uv&quot;).html(parseInt($(&quot;#busuanzi_value_site_uv&quot;).html()) + uvcountOffset); // åŠ ä¸Šåˆå§‹æ•°æ® </span><br><span class="line">                clearInterval(int); // åœæ­¢æ£€æµ‹</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>ç„¶åæŠŠä¸Šé¢å‡ è¡Œæœ‰æ®µä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (theme.busuanziStatistics &amp;&amp; theme.busuanziStatistics.totalTraffic) &#123; %&gt;</span><br><span class="line">    &lt;span id=&quot;busuanzi_container_site_pv&quot;&gt;</span><br><span class="line">        &lt;i class=&quot;fa fa-heart-o&quot;&gt;&lt;/i&gt;</span><br><span class="line">        æœ¬ç«™æ€»è®¿é—®é‡ &lt;span id=&quot;busuanzi_value_site_pv&quot; class=&quot;white-color&quot;&gt;&lt;/span&gt;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br><span class="line">&lt;% if (theme.busuanziStatistics &amp;&amp; theme.busuanziStatistics.totalNumberOfvisitors) &#123; %&gt;</span><br><span class="line">    &lt;span id=&quot;busuanzi_container_site_uv&quot;&gt;</span><br><span class="line">        äººæ¬¡,&amp;nbsp;è®¿å®¢æ•° &lt;span id=&quot;busuanzi_value_site_uv&quot; class=&quot;white-color&quot;&gt;&lt;/span&gt; äºº.</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (theme.busuanziStatistics &amp;&amp; theme.busuanziStatistics.totalTraffic) &#123; %&gt;</span><br><span class="line">    &lt;span id=&quot;busuanzi_container_site_pv&quot; style=&#x27;display:none&#x27;&gt;</span><br><span class="line">        &lt;i class=&quot;fa fa-heart-o&quot;&gt;&lt;/i&gt;</span><br><span class="line">        æœ¬ç«™æ€»è®¿é—®é‡ &lt;span id=&quot;busuanzi_value_site_pv&quot; class=&quot;white-color&quot;&gt;&lt;/span&gt;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br><span class="line">&lt;% if (theme.busuanziStatistics &amp;&amp; theme.busuanziStatistics.totalNumberOfvisitors) &#123; %&gt;</span><br><span class="line">    &lt;span id=&quot;busuanzi_container_site_uv&quot; style=&#x27;display:none&#x27;&gt;</span><br><span class="line">        äººæ¬¡,&amp;nbsp;è®¿å®¢æ•° &lt;span id=&quot;busuanzi_value_site_uv&quot; class=&quot;white-color&quot;&gt;&lt;/span&gt; äºº.</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>å…¶å®å°±æ˜¯å¢åŠ äº†ä¸¤ä¸ª<code>style=&#39;display:none&#39;</code>è€Œå·²ã€‚</p><h4 id="æ·»åŠ åŠ¨æ¼«äººç‰©"><a href="#æ·»åŠ åŠ¨æ¼«äººç‰©" class="headerlink" title="æ·»åŠ åŠ¨æ¼«äººç‰©"></a>æ·»åŠ åŠ¨æ¼«äººç‰©</h4><p><code>npm install --save hexo-helper-live2d</code></p><p><code>npm install live2d-widget-model-wanko</code></p><p>è¿™é‡Œçš„åŠ¨æ¼«æ¨¡å‹å¯ä»¥æ”¹ï¼Œåªéœ€è¦ä¸‹è½½å¯¹åº”æ¨¡å‹å°±è¡Œäº†ï¼Œä½ å¯ä»¥å®˜æ–¹ä»“åº“å»çœ‹æœ‰å“ªäº›æ¨¡å‹ï¼Œä¸‹è½½ä½ å–œæ¬¢çš„å°±è¡Œã€‚</p><p>åœ¨æ ¹ç›®å½•é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">live2d:</span><br><span class="line">    enable: true</span><br><span class="line">    scriptFrom: local</span><br><span class="line">    pluginRootPath: live2dw/</span><br><span class="line">    pluginJsPath: lib/</span><br><span class="line">    pluginModelPath: assets/</span><br><span class="line">    tagMode: false</span><br><span class="line">    log: false</span><br><span class="line">    model:</span><br><span class="line">        use: live2d-widget-model-shizuku</span><br><span class="line">    display:</span><br><span class="line">        position: right</span><br><span class="line">        width: 150</span><br><span class="line">        height: 300</span><br><span class="line">    mobile:</span><br><span class="line">        show: false</span><br><span class="line">    react:</span><br><span class="line">        opacity: 0.7</span><br></pre></td></tr></table></figure><p>ç„¶å<code>hexo g</code>å†<code>hexo s</code>å°±èƒ½é¢„è§ˆå‡ºæ•ˆæœäº†ï¼Œä½†æ˜¯æœ‰ä¸ªæ³¨æ„çš„åœ°æ–¹ï¼Œ<strong>è¿™ä¸ªåŠ¨æ¼«äººç‰©æœ€å¥½ä¸è¦å’Œä¸è’œå­åŒæ—¶ä½¿ç”¨</strong>ï¼Œä¸ç„¶ä¸è’œå­ä¼šæ˜¾ç¤ºä¸å‡ºæ¥ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ªäººåšå®¢æ­å»º</title>
      <link href="/2022/03/01/hexo1/"/>
      <url>/2022/03/01/hexo1/</url>
      
        <content type="html"><![CDATA[<h2 id="é˜…è¯»é¡»çŸ¥"><a href="#é˜…è¯»é¡»çŸ¥" class="headerlink" title="é˜…è¯»é¡»çŸ¥"></a>é˜…è¯»é¡»çŸ¥</h2><p>è¿™ç¯‡æ–‡ç« ç¯‡å¹…è¾ƒé•¿ï¼Œä¸»è¦é’ˆå¯¹æ–°æ‰‹ï¼Œæ¯ä¸€æ­¥å¾ˆè¯¦ç»†ï¼Œæ‰€ä»¥å¯èƒ½ä¼šæ˜¾å¾—æ¯”è¾ƒå•°å—¦ï¼Œå»ºè®®åŸºç¡€æ¯”è¾ƒå¥½å°ä¼™ä¼´æ ¹æ®å³ä¾§ç›®å½•é€‰æ‹©è‡ªå·±æ„Ÿå…´è¶£çš„éƒ¨åˆ†è·³ç€çœ‹</p><h2 id="åšå®¢å¼€æº"><a href="#åšå®¢å¼€æº" class="headerlink" title="åšå®¢å¼€æº"></a>åšå®¢å¼€æº</h2><p>æœ¬åšå®¢åŸºäº<code>Hexo</code>æ¡†æ¶æ­å»ºï¼Œç”¨åˆ°<a href="https://github.com/shw2018/hexo-theme-matery">hexo-theme-matery</a>ä¸»é¢˜,å¹¶åœ¨æ­¤åŸºç¡€ä¹‹ä¸Šåšäº†å¾ˆå¤šä¿®æ”¹ï¼Œä¿®å¤äº†ä¸€äº›bugï¼Œå¢åŠ äº†ä¸€äº›æ–°çš„ç‰¹æ€§å’ŒåŠŸèƒ½</p><h2 id="æ­å»º"><a href="#æ­å»º" class="headerlink" title="æ­å»º"></a>æ­å»º</h2><p><code>hexo</code>çš„åˆçº§æ­å»ºè¿˜æœ‰éƒ¨ç½²åˆ°<code>github page</code>ä¸Šï¼Œä»¥åŠä¸ªäººåŸŸåçš„ç»‘å®šã€‚</p><h3 id="Hexoæ­å»ºæ­¥éª¤"><a href="#Hexoæ­å»ºæ­¥éª¤" class="headerlink" title="Hexoæ­å»ºæ­¥éª¤"></a>Hexoæ­å»ºæ­¥éª¤</h3><ol><li>å®‰è£…<code>git</code></li><li>å®‰è£… <code>nodejs</code></li><li>å®‰è£…<code>hexo</code></li><li><code>github</code>åˆ›å»ºä¸ªäººä»“åº“</li><li>ç”Ÿæˆ<code>ssh</code>æ·»åŠ åˆ°<code>github</code></li><li>è®¾ç½®ä¸ªäººåŸŸå</li><li>å‘å¸ƒæ–‡ç« </li></ol><h4 id="å®‰è£…git"><a href="#å®‰è£…git" class="headerlink" title="å®‰è£…git"></a>å®‰è£…git</h4><p>ä¸ºäº†æŠŠæœ¬åœ°çš„ç½‘é¡µæ–‡ä»¶ä¸Šä¼ åˆ°<code>github</code>ä¸Šé¢å»ï¼Œéœ€è¦ç”¨åˆ°å·¥å…·â€”â€”â€”<a href="https://git-scm.com/download">Git</a><code>Git</code>æ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå¯ä»¥æœ‰æ•ˆã€é«˜é€Ÿçš„å¤„ç†ä»å¾ˆå°åˆ°éå¸¸å¤§çš„é¡¹ç›®ç‰ˆæœ¬ç®¡ç†ã€‚<code>Git</code>éå¸¸å¼ºå¤§ï¼Œå»ºè®®æ¯ä¸ªäººéƒ½å»äº†è§£ä¸€ä¸‹ã€‚å»–é›ªå³°è€å¸ˆçš„<code>Git</code>æ•™ç¨‹å†™çš„éå¸¸å¥½ï¼Œå¤§å®¶å¯ä»¥çœ‹ä¸€ä¸‹ã€‚<a href="https://www.liaoxuefeng.com/wiki/896043488029600">Gitæ•™ç¨‹</a></p><p><strong>windowsï¼š</strong>åˆ°<code>git</code>å®˜ç½‘ä¸Šä¸‹è½½<code>.exe</code>æ–‡ä»¶,<a href="https://git-scm.com/download/win">Download git</a>,å®‰è£…é€‰é¡¹è¿˜æ˜¯å…¨éƒ¨é»˜è®¤ï¼Œåªä¸è¿‡æœ€åä¸€æ­¥æ·»åŠ è·¯å¾„æ—¶é€‰æ‹©<code>Use Git from the Windows Command Prompt</code>ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åœ¨å‘½ä»¤æç¤ºç¬¦é‡Œæ‰“å¼€<code>git</code>äº†ã€‚</p><p><strong>linuxï¼š</strong>å¯¹<code>linux</code>æ¥è¯´å®åœ¨æ˜¯å¤ªç®€å•äº†ï¼Œå› ä¸ºæœ€æ—©çš„<code>git</code>å°±æ˜¯åœ¨<code>linux</code>ä¸Šç¼–å†™çš„ï¼Œåªéœ€è¦ä¸€è¡Œä»£ç </p><p><code>sudo apt-get install git</code></p><p>å®‰è£…å®Œæˆååœ¨å‘½ä»¤æç¤ºç¬¦ä¸­è¾“å…¥<code>git --version</code>æ¥æŸ¥çœ‹ä¸€ä¸‹ç‰ˆæœ¬éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸã€‚</p><h4 id="å®‰è£…nodejs"><a href="#å®‰è£…nodejs" class="headerlink" title="å®‰è£…nodejs"></a>å®‰è£…nodejs</h4><p><strong>windowsï¼š</strong>ä¸‹è½½ç¨³å®šç‰ˆæˆ–è€…æœ€æ–°ç‰ˆéƒ½å¯ä»¥<a href="http://nodejs.cn/download/">Node.js</a>ï¼Œå®‰è£…é€‰é¡¹å…¨éƒ¨é»˜è®¤ï¼Œä¸€è·¯ç‚¹å‡»<code>Next</code>ã€‚<br>æœ€åå®‰è£…å¥½ä¹‹åï¼ŒæŒ‰<code>Win+R</code>æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œè¾“å…¥<code>node -v</code>å’Œ<code>npm -v</code>ï¼Œå¦‚æœå‡ºç°ç‰ˆæœ¬å·ï¼Œé‚£ä¹ˆå°±å®‰è£…æˆåŠŸäº†ã€‚</p><p><strong>linuxï¼š</strong>å‘½ä»¤è¡Œå®‰è£…ï¼š</p><p><code>sudo apt-get install nodejs </code></p><p><code>sudo apt-get install npm</code></p><p>å®‰è£…å®Œåï¼Œæ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼Œè¾“å…¥:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…hexo"><a href="#å®‰è£…hexo" class="headerlink" title="å®‰è£…hexo"></a>å®‰è£…hexo</h4><p>è¾“å…¥<code>npm install -g hexo-cli</code>å®‰è£…<code>Hexo</code></p><p>å®‰è£…å®Œåè¾“å…¥<code>hexo -v</code>éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸã€‚</p><p>åˆå§‹åŒ–hexo</p><p><code>hexo init é¡¹ç›®åç§°</code></p><p>å®‰è£…ç›¸å…³ä¾èµ–</p><p><code>npm install</code></p><p>å¸¸ç”¨<code>hexo</code>ç›¸å…³æŒ‡ä»¤</p><table><thead><tr><th align="center">å‘½ä»¤</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">hexo init</td><td align="center">åˆå§‹åŒ–</td></tr><tr><td align="center">hexo new</td><td align="center">æ–°å»ºæ–‡ç« </td></tr><tr><td align="center">hexo publish</td><td align="center">å‘è¡¨è‰ç¨¿</td></tr><tr><td align="center">hexo generate</td><td align="center">ç”Ÿæˆé™æ€æ–‡ä»¶ã€‚å¯ç®€å†™ä¸º hexo g</td></tr><tr><td align="center">hexo server</td><td align="center">å¯åŠ¨æœåŠ¡å™¨ã€‚å¯ç®€å†™ä¸º hexo s</td></tr><tr><td align="center">hexo deploy</td><td align="center">éƒ¨ç½²ç½‘ç«™ã€‚å¯ç®€å†™ä¸º hexo d</td></tr><tr><td align="center">hexo render</td><td align="center">æ¸²æŸ“æ–‡ä»¶ã€‚</td></tr><tr><td align="center">hexo clean</td><td align="center">æ¸…é™¤ç¼“å­˜æ–‡ä»¶å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶</td></tr></tbody></table><h4 id="åˆ›å»ºgithubä¸ªäººä»“åº“"><a href="#åˆ›å»ºgithubä¸ªäººä»“åº“" class="headerlink" title="åˆ›å»ºgithubä¸ªäººä»“åº“"></a>åˆ›å»º<code>github</code>ä¸ªäººä»“åº“</h4><p>æ–°å»ºä¸€ä¸ªé¡¹ç›®ä»“åº“<code>New repository</code>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>ç„¶åå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¾“å…¥è‡ªå·±çš„é¡¹ç›®åå­—ï¼Œåé¢ä¸€å®šè¦åŠ <code>.github.io</code>åç¼€ï¼Œ<code>README</code>åˆå§‹åŒ–ä¹Ÿè¦å‹¾ä¸Šã€‚</p><p>è¦åˆ›å»ºä¸€ä¸ªå’Œä½ ç”¨æˆ·åç›¸åŒçš„ä»“åº“ï¼Œåé¢åŠ .<a href="http://github.io/">http://github.io</a>ï¼Œåªæœ‰è¿™æ ·ï¼Œå°†æ¥è¦éƒ¨ç½²åˆ°<code>GitHub page</code>çš„æ—¶å€™ï¼Œæ‰ä¼šè¢«è¯†åˆ«</p><h4 id="ç”ŸæˆSSHæ·»åŠ åˆ°GitHub"><a href="#ç”ŸæˆSSHæ·»åŠ åˆ°GitHub" class="headerlink" title="ç”ŸæˆSSHæ·»åŠ åˆ°GitHub"></a>ç”ŸæˆSSHæ·»åŠ åˆ°GitHub</h4><p>ç”Ÿæˆ<code>SSH</code>æ·»åŠ åˆ°<code>GitHub</code>ï¼Œè¿æ¥<code>Github</code>ä¸æœ¬åœ°ã€‚<br>å³é”®æ‰“å¼€<code>git bash</code>ï¼Œç„¶åè¾“å…¥ä¸‹é¢å‘½ä»¤ï¼š</p><p><code>git config --global user.name &quot;yourname&quot; </code></p><p><code>git config --global user.email &quot;youremail&quot;</code></p><p>è¿™é‡Œçš„<code>yourname</code>è¾“å…¥ä½ çš„<code>GitHub</code>ç”¨æˆ·åï¼Œ<code>youremail</code>è¾“å…¥ä½ <code>GitHub</code>çš„é‚®ç®±ã€‚è¿™æ ·<code>GitHub</code>æ‰èƒ½çŸ¥é“ä½ æ˜¯ä¸æ˜¯å¯¹åº”å®ƒçš„è´¦æˆ·ã€‚</p><p>å¯ä»¥ç”¨ä»¥ä¸‹ä¸¤æ¡ï¼Œæ£€æŸ¥ä¸€ä¸‹ä½ æœ‰æ²¡æœ‰è¾“å¯¹</p><p><code>git config user.name </code></p><p><code>git config user.email</code></p><p>ç„¶ååˆ›å»º<code>SSH</code>,ä¸€è·¯å›è½¦</p><p><code>ssh</code>ï¼Œç®€å•æ¥è®²ï¼Œå°±æ˜¯ä¸€ä¸ªç§˜é’¥ï¼Œå…¶ä¸­ï¼Œ<code>id_rsa</code>æ˜¯ä½ è¿™å°ç”µè„‘çš„ç§äººç§˜é’¥ï¼Œä¸èƒ½ç»™åˆ«äººçœ‹çš„ï¼Œ<code>id_rsa.pub</code>æ˜¯å…¬å…±ç§˜é’¥ï¼Œå¯ä»¥éšä¾¿ç»™åˆ«äººçœ‹ã€‚æŠŠè¿™ä¸ªå…¬é’¥æ”¾åœ¨<code>GitHub</code>ä¸Šï¼Œè¿™æ ·å½“ä½ é“¾æ¥<code>GitHub</code>è‡ªå·±çš„è´¦æˆ·æ—¶ï¼Œå®ƒå°±ä¼šæ ¹æ®å…¬é’¥åŒ¹é…ä½ çš„ç§é’¥ï¼Œå½“èƒ½å¤Ÿç›¸äº’åŒ¹é…æ—¶ï¼Œæ‰èƒ½å¤Ÿé¡ºåˆ©çš„é€šè¿‡<code>git</code>ä¸Šä¼ ä½ çš„æ–‡ä»¶åˆ°<code>GitHub</code>ä¸Šã€‚</p><p><code>ssh-keygen -t rsa -C &quot;youremail&quot;</code></p><p>è¿™ä¸ªæ—¶å€™å®ƒä¼šå‘Šè¯‰ä½ å·²ç»ç”Ÿæˆäº†<code>.ssh</code>çš„æ–‡ä»¶å¤¹ã€‚åœ¨ä½ çš„ç”µè„‘ä¸­æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ã€‚æˆ–è€…<code>git bash</code>ä¸­è¾“å…¥</p><p><code>cat ~/.ssh/id_rsa.pub</code></p><p>å°†è¾“å‡ºçš„å†…å®¹å¤åˆ¶åˆ°æ¡†ä¸­ï¼Œç‚¹å‡»ç¡®å®šä¿å­˜ã€‚</p><p>æ‰“å¼€<a href="http://github.com/">github</a>ï¼Œåœ¨å¤´åƒä¸‹é¢ç‚¹å‡»<code>settings</code>ï¼Œå†ç‚¹å‡»<code>SSH and GPG keys</code>ï¼Œæ–°å»ºä¸€ä¸ª<code>SSH</code>ï¼Œåå­—éšä¾¿å–ä¸€ä¸ªéƒ½å¯ä»¥ï¼ŒæŠŠä½ çš„<code>id_rsa.pub</code>é‡Œé¢çš„ä¿¡æ¯å¤åˆ¶è¿›å»ã€‚</p><p>åœ¨<code>git bash</code>è¾“å…¥<code>ssh -T git@github.com</code>ï¼Œå¦‚æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå‡ºç°ä½ çš„ç”¨æˆ·åï¼Œé‚£å°±æˆåŠŸäº†ã€‚</p><h4 id="å°†hexoéƒ¨ç½²åˆ°GitHub"><a href="#å°†hexoéƒ¨ç½²åˆ°GitHub" class="headerlink" title="å°†hexoéƒ¨ç½²åˆ°GitHub"></a>å°†hexoéƒ¨ç½²åˆ°GitHub</h4><p>è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†<code>hexo</code>å’Œ<code>GitHub</code>å…³è”èµ·æ¥ï¼Œä¹Ÿå°±æ˜¯å°†<code>hexo</code>ç”Ÿæˆçš„æ–‡ç« éƒ¨ç½²åˆ°<code>GitHub</code>ä¸Šï¼Œæ‰“å¼€åšå®¢æ ¹ç›®å½•ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ï¼Œè¿™æ˜¯åšå®¢çš„é…ç½®æ–‡ä»¶ï¼Œåœ¨è¿™é‡Œä½ å¯ä»¥ä¿®æ”¹ä¸åšå®¢é…ç½®ç›¸å…³çš„å„ç§ä¿¡æ¯ã€‚</p><p>ä¿®æ”¹æœ€åä¸€è¡Œçš„é…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository: ä½ çš„é¡¹ç›®åœ°å€</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p><code>repository</code>ä¿®æ”¹ä¸ºä½ è‡ªå·±çš„<code>github</code>é¡¹ç›®åœ°å€å³å¯ï¼Œå°±æ˜¯éƒ¨ç½²æ—¶ï¼Œå‘Šè¯‰å·¥å…·ï¼Œå°†ç”Ÿæˆç½‘é¡µé€šè¿‡<code>git</code>æ–¹å¼ä¸Šä¼ åˆ°ä½ å¯¹åº”çš„é“¾æ¥ä»“åº“ä¸­ã€‚</p><p>è¿™ä¸ªæ—¶å€™éœ€è¦å…ˆå®‰è£…<code>deploy-git</code> ï¼Œä¹Ÿå°±æ˜¯éƒ¨ç½²çš„å‘½ä»¤,è¿™æ ·ä½ æ‰èƒ½ç”¨å‘½ä»¤éƒ¨ç½²åˆ°<code>GitHub</code>ã€‚</p><p><code>npm install hexo-deployer-git --save</code></p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>htmlå®Œæ•´è¯­æ³•å­¦ä¹ </title>
      <link href="/2022/02/22/article12/"/>
      <url>/2022/02/22/article12/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€ä¸ª-html"><a href="#ä¸€ä¸ª-html" class="headerlink" title="ä¸€ä¸ª html"></a>ä¸€ä¸ª html</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;!--meta  æè¿°æ€§æ ‡ç­¾ï¼Œç”¨æ¥æè¿°ç½‘ç«™çš„ä¸€äº›ä¿¡æ¯--&gt;    &lt;!--meta æ ‡ç­¾ä¸€èˆ¬ç”¨æ¥åšSEO--&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;meta name=&quot;key&quot; content=&quot;ç¬¬ä¸€ä¸ªç½‘ç«™ï¼Œå­¦html&quot;&gt;    &lt;meta name=&quot;description&quot; content=&quot;å­¦ä¹ html&quot;&gt;    &lt;title&gt;ç¬¬ä¸€ä¸ªç½‘ç«™&lt;/title&gt;&lt;/head&gt;&lt;body&gt;Hello,World!&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="åŸºæœ¬æ ‡ç­¾"><a href="#åŸºæœ¬æ ‡ç­¾" class="headerlink" title="åŸºæœ¬æ ‡ç­¾"></a>åŸºæœ¬æ ‡ç­¾</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;åŸºæœ¬æ ‡ç­¾å­¦ä¹ &lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;!--æ ‡é¢˜æ ‡ç­¾--&gt;&lt;h1&gt;ä¸€çº§æ ‡ç­¾&lt;/h1&gt;&lt;h2&gt;äºŒçº§æ ‡ç­¾&lt;/h2&gt;&lt;h3&gt;ä¸‰çº§æ ‡ç­¾&lt;/h3&gt;&lt;h4&gt;å››çº§æ ‡ç­¾&lt;/h4&gt;&lt;h5&gt;äº”çº§æ ‡ç­¾&lt;/h5&gt;&lt;h6&gt;å…­çº§æ ‡ç­¾&lt;/h6&gt;&lt;!--æ®µè½æ ‡ç­¾  å°†æ–‡å­—åˆ†ä¸ºä¸€ä¸ªä¸ªæ®µè½--&gt;&lt;p&gt;ä¸¤åªè€è™ï¼Œä¸¤åªè€è™&lt;/p&gt;&lt;P&gt;è·‘å¾—å¿«ï¼Œè·‘å¾—å¿«&lt;/P&gt;&lt;P&gt;ä¸€åªæ²¡æœ‰çœ¼ç›&lt;/P&gt;&lt;P&gt;ä¸€åªæ²¡æœ‰å°¾å·´&lt;/P&gt;&lt;P&gt;çœŸå¥‡æ€ªï¼çœŸå¥‡æ€ªï¼&lt;/P&gt;&lt;!--æ°´å¹³çº¿æ ‡ç­¾--&gt;&lt;hr/&gt;&lt;!--æ¢è¡Œæ ‡ç­¾  åªæ˜¯æ¢äº†ä¸€è¡Œï¼Œä½†æ˜¯è¿˜æ˜¯ä¸€æ®µ--&gt;ä¸¤åªè€è™ï¼Œä¸¤åªè€è™&lt;br/&gt;è·‘å¾—å¿«ï¼Œè·‘å¾—å¿«&lt;br/&gt;ä¸€åªæ²¡æœ‰çœ¼ç›&lt;br/&gt;ä¸€åªæ²¡æœ‰å°¾å·´&lt;br/&gt;çœŸå¥‡æ€ªï¼çœŸå¥‡æ€ª&lt;br/&gt;&lt;!--ç²—ä½“ï¼Œæ–œä½“--&gt;&lt;h1&gt;å­—ä½“æ ·å¼æ ‡ç­¾&lt;/h1&gt;ç²—ä½“ï¼š&lt;strong&gt;i love you&lt;/strong&gt;  &lt;br/&gt;æ–œä½“ï¼š&lt;em&gt;i love you&lt;/em&gt;  &lt;br/&gt;ç²—ä½“ï¼š&lt;B&gt;i love you&lt;/B&gt;    &lt;br/&gt;æ–œä½“ï¼š&lt;I&gt;i love you&lt;/I&gt;    &lt;br/&gt;&lt;hr/&gt;&lt;!--ç‰¹æ®Šç¬¦å·--&gt;ç©º       æ ¼ï¼›  &lt;br/&gt;&lt;!--&amp;nbsp;ä»£è¡¨ä¸€ä¸ªç©ºæ ¼--&gt;ç©º&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;æ ¼    &lt;br/&gt;&lt;!--&amp;gt; ä»£è¡¨å¤§äºå·  &amp;lt;ä»£è¡¨å°äºå·--&gt;&amp;gt;&amp;lt;    &lt;br/&gt;&lt;!--ç‰ˆæƒç¬¦å·--&gt;&amp;copy;&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="å›¾ç‰‡æ ‡ç­¾"><a href="#å›¾ç‰‡æ ‡ç­¾" class="headerlink" title="å›¾ç‰‡æ ‡ç­¾"></a>å›¾ç‰‡æ ‡ç­¾</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;å›¾ç‰‡æ ‡ç­¾&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;!--src:å›¾ç‰‡çš„åœ°å€ç»å¯¹åœ°å€ï¼šä½¿ç”¨ç›˜ç¬¦æ‰¾åˆ°çš„æ–‡ä»¶   D:\ä»£ç \HTML\resources\image\2.pngç›¸å¯¹åœ°å€ï¼šç›¸å¯¹äºå½“å‰é¡¹ç›®çš„æ–‡ä»¶  ../resources/image/2.png../è¿”å›ä¸Šä¸€çº§ç›®å½•alt ï¼š å¦‚æœsrcè·¯å¾„ä¸‹çš„æ–‡ä»¶æœªæ‰¾åˆ°ï¼Œå°±ç”¨è¿™é‡Œåçš„å†…å®¹æ›¿ä»£title  ï¼š å°†é¼ æ ‡æ”¾ç½®åœ¨è¿™ä¸ªå›¾ç‰‡ä¸Šé¢ä¼šæ˜¾ç¤ºtitleé‡Œå–å¼„çš„å†…å®¹width  : å›¾ç‰‡æ˜¾ç¤ºçš„å®½åº¦height  ï¼š å›¾ç‰‡æ˜¾ç¤ºçš„é«˜åº¦--&gt;&lt;img src=&quot;../resources/image/2.png&quot; alt=&quot;æ¡Œé¢å£çº¸&quot; title=&quot;æ‚¬åœæ–‡å­—&quot; width=&quot;255&quot; height=&quot;255&quot;&gt;&lt;!--ä»è¿™é‡Œå¯ä»¥ç›´æ¥è·³è½¬åˆ°ä¸‹é¢è¿™ä¸ªé“¾æ¥çš„downè¿™ä¸ªé”šæ ‡è®°å¤„--&gt;&lt;a href=&quot;4.é“¾æ¥æ ‡ç­¾.html#down&quot;&gt;è·³è½¬&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="é“¾æ¥æ ‡ç­¾"><a href="#é“¾æ¥æ ‡ç­¾" class="headerlink" title="é“¾æ¥æ ‡ç­¾"></a>é“¾æ¥æ ‡ç­¾</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;é“¾æ¥æ ‡ç­¾&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;!--ä½¿ç”¨aæ ‡ç­¾é‡Œé¢çš„nameå±æ€§è®¾ç½®é”šé“¾æ¥æ ‡è®°--&gt;&lt;a name=&quot;top&quot;&gt;é¡¶éƒ¨&lt;/a&gt;&lt;br/&gt;&lt;!--aæ ‡ç­¾ï¼šhref  ï¼š å¿…å¡«ï¼Œè¡¨ç¤ºè¦è·³è½¬åˆ°å“ªé‡Œå»target  : è¡¨ç¤ºçª—å£åœ¨å“ªé‡Œæ‰“å¼€            _blank  ï¼š åœ¨æ–°æ ‡ç­¾ä¸­æ‰“å¼€            _self   : åœ¨è‡ªå·±çš„ç½‘é¡µä¸­æ‰“å¼€ï¼Œå±äºé»˜è®¤è®¾ç½®aæ ‡ç­¾ä¸­é—´å¡«å†™é“¾æ¥çš„æ–‡æœ¬æˆ–å›¾ç‰‡--&gt;&lt;a href=&quot;1.æˆ‘çš„ç¬¬ä¸€ä¸ªhtml.html&quot; target=&quot;_blank&quot;&gt;ç‚¹å‡»æˆ‘è·³è½¬åˆ°é¡µé¢ä¸€&lt;/a&gt;&lt;a href=&quot;https://www.baidu.com&quot; target=&quot;_self&quot;&gt;ç‚¹å‡»æˆ‘è·³è½¬åˆ°ç™¾åº¦&lt;/a&gt;&lt;br/&gt;&lt;a href=&quot;1.æˆ‘çš„ç¬¬ä¸€ä¸ªhtml.html&quot;&gt;    &lt;img src=&quot;../resources/image/2.png&quot; alt=&quot;æ¡Œé¢å£çº¸&quot; title=&quot;æ‚¬åœæ–‡å­—&quot; width=&quot;255&quot; height=&quot;255&quot;&gt;&lt;/a&gt;&lt;p&gt;    &lt;a href=&quot;1.æˆ‘çš„ç¬¬ä¸€ä¸ªhtml.html&quot;&gt;        &lt;img src=&quot;../resources/image/2.png&quot; alt=&quot;æ¡Œé¢å£çº¸&quot; title=&quot;æ‚¬åœæ–‡å­—&quot; width=&quot;255&quot; height=&quot;255&quot;&gt;    &lt;/a&gt;&lt;/p&gt;&lt;p&gt;    &lt;a href=&quot;1.æˆ‘çš„ç¬¬ä¸€ä¸ªhtml.html&quot;&gt;        &lt;img src=&quot;../resources/image/2.png&quot; alt=&quot;æ¡Œé¢å£çº¸&quot; title=&quot;æ‚¬åœæ–‡å­—&quot; width=&quot;255&quot; height=&quot;255&quot;&gt;    &lt;/a&gt;&lt;/p&gt;&lt;p&gt;    &lt;a href=&quot;1.æˆ‘çš„ç¬¬ä¸€ä¸ªhtml.html&quot;&gt;        &lt;img src=&quot;../resources/image/2.png&quot; alt=&quot;æ¡Œé¢å£çº¸&quot; title=&quot;æ‚¬åœæ–‡å­—&quot; width=&quot;255&quot; height=&quot;255&quot;&gt;    &lt;/a&gt;&lt;/p&gt;&lt;p&gt;    &lt;a href=&quot;1.æˆ‘çš„ç¬¬ä¸€ä¸ªhtml.html&quot;&gt;        &lt;img src=&quot;../resources/image/2.png&quot; alt=&quot;æ¡Œé¢å£çº¸&quot; title=&quot;æ‚¬åœæ–‡å­—&quot; width=&quot;255&quot; height=&quot;255&quot;&gt;    &lt;/a&gt;&lt;/p&gt;&lt;p&gt;    &lt;a href=&quot;1.æˆ‘çš„ç¬¬ä¸€ä¸ªhtml.html&quot;&gt;        &lt;img src=&quot;../resources/image/2.png&quot; alt=&quot;æ¡Œé¢å£çº¸&quot; title=&quot;æ‚¬åœæ–‡å­—&quot; width=&quot;255&quot; height=&quot;255&quot;&gt;    &lt;/a&gt;&lt;/p&gt;&lt;p&gt;    &lt;a href=&quot;1.æˆ‘çš„ç¬¬ä¸€ä¸ªhtml.html&quot;&gt;        &lt;img src=&quot;../resources/image/2.png&quot; alt=&quot;æ¡Œé¢å£çº¸&quot; title=&quot;æ‚¬åœæ–‡å­—&quot; width=&quot;255&quot; height=&quot;255&quot;&gt;    &lt;/a&gt;&lt;/p&gt;&lt;!--é”šé“¾æ¥ ï¼š    1.éœ€è¦ä¸€ä¸ªé”šæ ‡è®°    2.è·³è½¬åˆ°é”šæ ‡è®°ä½¿ç”¨æ–¹æ³•ä¸º #+é”šé“¾æ¥çš„æ ‡è®°åå¯ä»¥å®ç°é¡µé¢å†…çš„è·³è½¬ï¼Œï¼Œä¹Ÿå¯ä»ä¸€ä¸ªé¡µé¢ç›´æ¥è·³è½¬åˆ°é”šé“¾æ¥çš„æ ‡è®°ä½ç½®--&gt;&lt;a href=&quot;#top&quot;&gt;å›åˆ°é¡¶éƒ¨&lt;/a&gt;&lt;a name=&quot;down&quot;&gt;down&lt;/a&gt;&lt;!--åŠŸèƒ½æ€§é“¾æ¥ï¼š    mailto:é‚®ç®±åœ°å€ï¼ˆå¯ä»¥å°†å†…å®¹å‘é€åˆ°è¿™ä¸ªé‚®ç®±é‡Œé¢ï¼‰  QQLé“¾æ¥--&gt;&lt;a href=&quot;mailto:1713791837@qq.com&quot;&gt;ç‚¹å‡»è”ç³»æˆ‘&lt;/a&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://wpa.qq.com/msgrd?v=3&amp;uin=1713791837&amp;site=qq&amp;menu=yes&quot;&gt;    &lt;img border=&quot;0&quot; src=&quot;http://wpa.qq.com/pa?p=2:1713791837:52&quot; alt=&quot;ä½ å¥½&quot; title=&quot;ä½ å¥½&quot;/&gt;&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;åˆ—è¡¨&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;!--æœ‰åºåˆ—è¡¨ ï¼š Orderly list   æ˜¾ç¤ºå‡ºæœ‰é¡ºåºçš„ç»“æ„ï¼Œå‰è¾¹ç”¨æ•°å­—æ˜¾ç¤ºé¡ºåºåº”ç”¨èŒƒå›´ï¼šè¯•å·ï¼Œç­”é¢˜å¡...--&gt;&lt;ol&gt;    &lt;li&gt;Java&lt;/li&gt;    &lt;li&gt;Python&lt;/li&gt;    &lt;li&gt;æ±‡ç¼–&lt;/li&gt;    &lt;li&gt;å‰ç«¯&lt;/li&gt;    &lt;li&gt;ç¼–è¯‘åŸç†&lt;/li&gt;&lt;/ol&gt;&lt;!--æ— åºåˆ—è¡¨   æ˜¾ç¤ºå‡ºæ²¡æœ‰é¡ºåºçš„ç»“æ„ï¼Œå‰è¾¹ç”¨é»‘ç‚¹æ˜¾ç¤ºåº”ç”¨èŒƒå›´ï¼šå¯¼èˆªï¼Œä¾§è¾¹æ ...--&gt;&lt;ul&gt;    &lt;li&gt;Java&lt;/li&gt;    &lt;li&gt;Python&lt;/li&gt;    &lt;li&gt;æ±‡ç¼–&lt;/li&gt;    &lt;li&gt;å‰ç«¯&lt;/li&gt;    &lt;li&gt;ç¼–è¯‘åŸç†&lt;/li&gt;&lt;/ul&gt;&lt;!--è‡ªå®šä¹‰åˆ—è¡¨dl : åˆ—è¡¨æ ‡ç­¾dt : åˆ—è¡¨åç§°dd : åˆ—è¡¨å†…å®¹--&gt;&lt;dl&gt;    &lt;dt&gt;å­¦ç§‘&lt;/dt&gt;    &lt;dd&gt;java&lt;/dd&gt;    &lt;dd&gt;linux&lt;/dd&gt;    &lt;dd&gt;spring&lt;/dd&gt;    &lt;dd&gt;c&lt;/dd&gt;    &lt;dt&gt;ä½ç½®&lt;/dt&gt;    &lt;dd&gt;å®å¤&lt;/dd&gt;    &lt;dd&gt;è¥¿å®‰&lt;/dd&gt;    &lt;dd&gt;ç”˜è‚ƒ&lt;/dd&gt;&lt;/dl&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="è¡¨æ ¼"><a href="#è¡¨æ ¼" class="headerlink" title="è¡¨æ ¼"></a>è¡¨æ ¼</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;è¡¨æ ¼&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;!--è¡¨æ ¼ ï¼š tableè¡Œ ï¼š tråˆ— ï¼š tdcolspan  : åˆå¹¶å¤šå°‘åˆ—ä¸ºä¸€åˆ—rowspan  : åˆå¹¶å¤šå°‘è¡Œä¸ºä¸€è¡Œborder : è®¾ç½®è¾¹æ¡†å®½åº¦--&gt;&lt;table border=&quot;1px&quot;&gt;    &lt;tr&gt;        &lt;td colspan=&quot;3&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;å­¦ç”Ÿæˆç»©&lt;/td&gt;    &lt;/tr&gt;    &lt;tr&gt;        &lt;td rowspan=&quot;2&quot;&gt;å°ç ´å­©&lt;/td&gt;        &lt;td&gt;è¯­æ–‡&lt;/td&gt;        &lt;td&gt;100&lt;/td&gt;    &lt;/tr&gt;    &lt;tr&gt;        &lt;td&gt;æ•°å­¦&lt;/td&gt;        &lt;td&gt;100&lt;/td&gt;    &lt;/tr&gt;    &lt;tr&gt;        &lt;td rowspan=&quot;2&quot;&gt;æ†¨æ†¨&lt;/td&gt;        &lt;td&gt;è¯­æ–‡&lt;/td&gt;        &lt;td&gt;100&lt;/td&gt;    &lt;/tr&gt;    &lt;tr&gt;        &lt;td&gt;æ•°å­¦&lt;/td&gt;        &lt;td&gt;100&lt;/td&gt;    &lt;/tr&gt;&lt;/table&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="è§†é¢‘ä¸éŸ³é¢‘"><a href="#è§†é¢‘ä¸éŸ³é¢‘" class="headerlink" title="è§†é¢‘ä¸éŸ³é¢‘"></a>è§†é¢‘ä¸éŸ³é¢‘</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;åª’ä½“å…ƒç´ &lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;!--è§†é¢‘å’ŒéŸ³é¢‘controls  :  æ§åˆ¶æ¡autoplay  :  è®¾ç½®è§†é¢‘è‡ªåŠ¨æ’­æ”¾--&gt;&lt;video src=&quot;../resources/video/2.qlv&quot; controls autoplay&gt;&lt;/video&gt;&lt;br/&gt;&lt;audio src=&quot;../resources/audio/ai.mp3&quot; controls&gt;&lt;/audio&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="é¡µé¢ç»“æ„"><a href="#é¡µé¢ç»“æ„" class="headerlink" title="é¡µé¢ç»“æ„"></a>é¡µé¢ç»“æ„</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;é¡µé¢ç»“æ„&lt;/title&gt;&lt;/head&gt;&lt;body&gt;    &lt;header&gt;        &lt;h1&gt;ç½‘é¡µå¤´éƒ¨&lt;/h1&gt;    &lt;/header&gt;    &lt;section&gt;        &lt;h1&gt;ç½‘é¡µä¸»ä½“&lt;/h1&gt;    &lt;/section&gt;    &lt;footer&gt;        &lt;h1&gt;ç½‘é¡µè„šéƒ¨&lt;/h1&gt;    &lt;/footer&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><h3 id="å†…è”æ¡†æ¶"><a href="#å†…è”æ¡†æ¶" class="headerlink" title="å†…è”æ¡†æ¶"></a>å†…è”æ¡†æ¶</h3><pre><code>&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;å†…è”æ¡†æ¶&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;!--iframe : å¯ä»¥å°†srcé‡Œé¢çš„ç½‘é¡µå†…å®¹åµŒå¥—åœ¨æœ¬ç½‘é¡µå†…src  : é“¾æ¥åœ°å€w-h : å®½å’Œé«˜è¿˜å¯ä»¥ä½¿ç”¨nameå±æ€§ï¼š        å°†aæ ‡ç­¾é‡Œé¢çš„é“¾æ¥å†…å®¹æ”¾ç½®åˆ°iframeé‡Œé¢--&gt;&lt;iframe src=&quot;&quot; name=&quot;hello&quot; width=&quot;855px&quot; height=&quot;512px&quot;&gt;&lt;/iframe&gt;&lt;a href=&quot;https://www.bilibili.com/&quot; target=&quot;hello&quot;&gt;ç‚¹å‡»è·³è½¬&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;```### formè¡¨å•```html&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;title&gt;è¡¨å•&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;!--è¡¨å•formaction : æäº¤åˆ°å“ªä¸ªä½ç½®ï¼Œå¯ä»¥æ˜¯ç½‘ç«™ä¹Ÿå¯ä»¥æ˜¯è¯·æ±‚å¤„ç†åœ°å€method : æäº¤æ–¹å¼ï¼Œï¼Œæœ‰postä¸get        getæ–¹å¼æäº¤ï¼Œæ•°æ®å¯ä»¥åœ¨urlé‡Œé¢çœ‹åˆ°ï¼Œä¸å®‰å…¨ï¼Œä½†é«˜æ•ˆ        postæ–¹å¼æäº¤ï¼šæ¯”è¾ƒå®‰å…¨ï¼Œèƒ½å¤Ÿæäº¤æ•°æ®é‡è¾ƒå¤§çš„æ–‡ä»¶--&gt;&lt;h1&gt;æ³¨å†Œ&lt;/h1&gt;&lt;form action=&quot;1.æˆ‘çš„ç¬¬ä¸€ä¸ªhtml.html&quot; method=&quot;get&quot;&gt;    &lt;!--æ–‡æœ¬è¾“å…¥æ¡†  ï¼š type=&quot;text&quot;     value=&quot;ä½ å¥½å¸…&quot;   é»˜è®¤åˆå§‹å€¼     maxlength=&quot;8&quot;   æœ€å¤šèƒ½è¾“å…¥å‡ ä¸ªå­—ç¬¦     size=&quot;30&quot;       æ–‡æœ¬æ¡†çš„é•¿åº¦     readonly  åªè¯»     placeholder  æç¤ºçš„é»˜è®¤ä¿¡æ¯ åªèƒ½ç”¨åœ¨è¾“å…¥æ¡†ä¸Š     required  éç©ºåˆ¤æ–­ï¼Œè¡¨ç¤ºæ­¤å­—æ®µå¿…é¡»å¡«å†™  åªèƒ½ç”¨åœ¨è¾“å…¥æ¡†ä¸Š    --&gt;    &lt;p&gt;åå­—ï¼š&lt;input type=&quot;text&quot; name=&quot;userName&quot; placeholder=&quot;è¯·è¾“å…¥ç”¨æˆ·å&quot; required&gt; &lt;/p&gt;    &lt;!--å¯†ç æ¡† ï¼š type=&quot;password&quot;     hidden éšè—ï¼Œå°†è¿™ä¸ªæ¡†ç”¨æˆ·çœ‹ä¸åˆ°ï¼Œä½†æ˜¯å´æ˜¯å­˜åœ¨çš„ï¼Œå¯ä»¥æ”¾ç½®é»˜è®¤å€¼     --&gt;    &lt;p&gt;å¯†ç ï¼š&lt;input type=&quot;password&quot; name=&quot;pwd&quot; hidden value=&quot;123456&quot;&gt; &lt;/p&gt;    &lt;p&gt;æ€§åˆ«ï¼š        &lt;!--å•é€‰æ¡†:        type=&quot;radio&quot;        value:å•é€‰æ¡†çš„å€¼        name : è¡¨ç¤ºç»„ï¼Œnameå€¼ä¸€æ ·åˆ™è¡¨ç¤ºä¸ºä¸€ç»„æ•°æ®ï¼Œä¸èƒ½åŒæ—¶é€‰æ‹©ä¸¤ä¸ª        disabled : ç¦ç”¨ï¼Œç¦æ­¢é€‰æ‹©ç”·æ€§        --&gt;        &lt;input type=&quot;radio&quot; value=&quot;boy&quot; name=&quot;sex&quot; disabled&gt;ç”·        &lt;input type=&quot;radio&quot; value=&quot;girl&quot; name=&quot;sex&quot;&gt;å¥³    &lt;/p&gt;    &lt;p&gt;        &lt;!--å¤šé€‰æ¡†         type=&quot;checkbox&quot;         value:å¤šé€‰æ¡†çš„å€¼         name : è¡¨ç¤ºç»„ï¼Œnameå€¼ä¸€æ ·åˆ™è¡¨ç¤ºä¸ºä¸€ç»„æ•°æ®        --&gt;        &lt;input type=&quot;checkbox&quot; value=&quot;sleep&quot; name=&quot;hobby&quot;&gt;ç¡è§‰        &lt;!--checked  : é»˜è®¤é€‰ä¸­--&gt;        &lt;input type=&quot;checkbox&quot; value=&quot;code&quot; name=&quot;hobby&quot; checked&gt;æ•²ä»£ç         &lt;input type=&quot;checkbox&quot; value=&quot;chat&quot; name=&quot;hobby&quot;&gt;èŠå¤©        &lt;input type=&quot;checkbox&quot; value=&quot;game&quot; name=&quot;hobby&quot;&gt;æ¸¸æˆ    &lt;/p&gt;    &lt;p&gt;        &lt;!--æŒ‰é’®        type=&quot;button&quot;        name ï¼š æŒ‰é’®åç§°        value : æŒ‰é’®ä¸Šæ˜¾ç¤ºçš„å†…å®¹         --&gt;        &lt;input type=&quot;button&quot; name=&quot;btn1&quot; value=&quot;ç‚¹å‡»æŒ‰é’®&quot;&gt;        &lt;!--å›¾ç‰‡æŒ‰é’®  ç›¸å½“äºæäº¤æŒ‰é’®--&gt;        &lt;input type=&quot;image&quot; src=&quot;../resources/image/2.png&quot; width=&quot;50px&quot; height=&quot;50px&quot;&gt;    &lt;/p&gt;    &lt;p&gt;å›½å®¶ï¼š        &lt;!--ä¸‹æ‹‰æ¡†        ä½¿ç”¨selectæ ‡ç­¾        name ï¼šåˆ—è¡¨çš„åç§°ï¼Œåå°å¯ä»¥è·å¾—åˆ—è¡¨åç§°        value ï¼š ä¼ åˆ°åç«¯çš„å€¼        --&gt;        &lt;select name=&quot;country&quot;&gt;            &lt;option value=&quot;china&quot;&gt;ä¸­å›½&lt;/option&gt;            &lt;option value=&quot;usa&quot;&gt;ç¾å›½&lt;/option&gt;            &lt;!--selected  è¡¨ç¤ºé»˜è®¤é€‰æ‹©æ³•å›½--&gt;            &lt;option value=&quot;fa&quot; selected&gt;æ³•å›½&lt;/option&gt;            &lt;option value=&quot;ying&quot;&gt;è‹±å›½&lt;/option&gt;        &lt;/select&gt;    &lt;/p&gt;    &lt;p&gt;åé¦ˆï¼š        &lt;!--æ–‡æœ¬åŸŸ        textareaæ ‡ç­¾        cols  : é»˜è®¤æ˜¾ç¤ºå‡ åˆ—        rows  : é»˜è®¤æ˜¾ç¤ºå‡ è¡Œ        --&gt;        &lt;textarea name=&quot;textarea&quot; cols=&quot;30&quot; rows=&quot;10&quot;&gt;é»˜è®¤æ–‡æœ¬&lt;/textarea&gt;    &lt;/p&gt;    &lt;p&gt;        &lt;!--æ–‡ä»¶åŸŸ--&gt;        &lt;input type=&quot;file&quot; name=&quot;files&quot;&gt;    &lt;/p&gt;    &lt;p&gt;        &lt;!--é‚®ç®±éªŒè¯  è¾“å…¥çš„å€¼å¿…é¡»æ·»åŠ @å¹¶ä¸”å‰åéƒ½æœ‰å€¼--&gt;        é‚®ç®±ï¼š&lt;input type=&quot;email&quot; name=&quot;email&quot;&gt;    &lt;/p&gt;    &lt;p&gt;        &lt;!--urléªŒè¯  è¾“å…¥çš„å€¼å¿…é¡»æ˜¯ä¸€ä¸ªç½‘å€--&gt;        url:&lt;input type=&quot;url&quot; name=&quot;url&quot;&gt;    &lt;/p&gt;    &lt;p&gt;        &lt;!--æ•°å­—éªŒè¯  è¾“å…¥çš„å€¼å¿…é¡»å¤§äº0å°äº100å¹¶ä¸”æ˜¯10çš„å€æ•°        max  ï¼š æœ€å¤§å€¼        min  ï¼š æœ€å°å€¼        step  ï¼š æ­¥é•¿ï¼Œæ¯æ¬¡åŠ å‡         --&gt;        æ•°å­—:&lt;input type=&quot;number&quot; name=&quot;num&quot; max=&quot;100&quot; min=&quot;0&quot; step=&quot;10&quot;&gt;    &lt;/p&gt;    &lt;p&gt;        &lt;!--æ»‘å—        range æ ‡ç­¾        å¯ä»¥åœ¨å‚æ•°ä¸­è·å–å¾—åˆ°çš„å¤šå°‘æ•°å€¼        --&gt;        æ»‘å—ï¼š&lt;input type=&quot;range&quot; name=&quot;voice&quot; min=&quot;0&quot; max=&quot;100&quot; step=&quot;2&quot;&gt;    &lt;/p&gt;    &lt;p&gt;        &lt;!--æœç´¢æ¡†--&gt;        æœç´¢:&lt;input type=&quot;search&quot; name=&quot;search&quot;&gt;    &lt;/p&gt;    &lt;p&gt;        &lt;!--å¢å¼ºé¼ æ ‡å¯ç”¨æ€§        labelæ ‡ç­¾        ä¹Ÿå°±æ˜¯åœ¨ç‚¹å‡»labelè¿™ä¸ªæ ‡ç­¾é‡Œé¢çš„å†…å®¹æ—¶ï¼Œä¼šè‡ªåŠ¨å°†å…‰æ ‡é”å®šåˆ°è¾“å…¥æ¡†idä¸ºforå±æ€§é‡Œé¢çš„å†…å®¹        --&gt;        &lt;label for=&quot;work&quot;&gt;ä½ ç‚¹æˆ‘é€ä¸–ï¼š&lt;/label&gt;        &lt;input type=&quot;text&quot; id=&quot;work&quot;&gt;    &lt;/p&gt;    &lt;p&gt;        &lt;!--pattern  æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿™é‡Œè¾“å…¥çš„ä¸œè¥¿å¿…é¡»æ»¡è¶³patternçš„è§„åˆ™--&gt;        è‡ªå®šä¹‰é‚®ç®±ï¼š        &lt;input type=&quot;text&quot; name=&quot;diyEmail&quot;               pattern=&quot;^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$&quot;&gt;    &lt;/p&gt;    &lt;p&gt;        &lt;!--æäº¤æŒ‰é’® ï¼š type=&quot;submit&quot; --&gt;        &lt;input type=&quot;submit&quot;&gt;        &lt;!--é‡ç½®æŒ‰é’® ï¼š type=&quot;reset&quot;--&gt;        &lt;input type=&quot;reset&quot;&gt;    &lt;/p&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> HTML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ CSS è½»æ¾å®ç°ä¸€äº›é«˜é¢‘å‡ºç°çš„å¥‡å½¢æ€ªçŠ¶æŒ‰é’®</title>
      <link href="/2022/02/09/article11/"/>
      <url>/2022/02/09/article11/</url>
      
        <content type="html"><![CDATA[<p>å…ˆè®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™äº›ç»å¸¸ä¼šå‡ºç°çš„æŒ‰é’®å½¢çŠ¶ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6f865a6b485941fb83b85a857e8a4a08~tplv-k3u1fbpfcp-zoom-1.image"></p><h2 id="çŸ©å½¢ä¸åœ†è§’æŒ‰é’®"><a href="#çŸ©å½¢ä¸åœ†è§’æŒ‰é’®" class="headerlink" title="çŸ©å½¢ä¸åœ†è§’æŒ‰é’®"></a>çŸ©å½¢ä¸åœ†è§’æŒ‰é’®</h2><p>æ­£å¸¸è€Œè¨€ï¼Œæˆ‘ä»¬é‡åˆ°çš„æŒ‰é’®å°±è¿™ä¸¤ç§ â€“ çŸ©å½¢å’Œåœ†è§’ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/213bdbde25cd419985affcdd034ca2d0~tplv-k3u1fbpfcp-zoom-1.image"></p><p>å®ƒä»¬éå¸¸çš„ç®€å•ï¼Œå®½é«˜å’Œåœ†è§’å’ŒèƒŒæ™¯è‰²ã€‚</p><pre><code>&lt;div class=&#39;btn rect&#39;&gt;rect&lt;/div&gt;&lt;div class=&#39;btn circle&#39;&gt;circle&lt;/div&gt;.btn &#123;   margin: 8px auto;   flex-shrink: 0;   width: 160px;   height: 64px;&#125;.rect &#123;    background: #f6ed8d;&#125;.circle &#123;    border-radius: 64px;    background: #7de3c8;&#125;</code></pre><h2 id="æ¢¯å½¢ä¸å¹³è¡Œå››è¾¹å½¢"><a href="#æ¢¯å½¢ä¸å¹³è¡Œå››è¾¹å½¢" class="headerlink" title="æ¢¯å½¢ä¸å¹³è¡Œå››è¾¹å½¢"></a>æ¢¯å½¢ä¸å¹³è¡Œå››è¾¹å½¢</h2><p>æ¥ä¸‹æ¥ï¼ŒåŸºäºçŸ©å½¢çš„å˜å½¢ï¼Œç»å¸¸ä¼šå‡ºç°<strong>æ¢¯å½¢ä¸å¹³è¡Œå››è¾¹å½¢</strong>çš„æŒ‰é’®ã€‚</p><p>å®ç°å®ƒä»¬ä¸»è¦ä½¿ç”¨ <code>transform</code> å³å¯ï¼Œä½†æ˜¯è¦æ³¨æ„ä¸€ç‚¹ï¼Œä½¿ç”¨äº† <code>transform</code> ä¹‹åï¼Œæ ‡ç­¾å†…çš„æ–‡å­—ä¹Ÿä¼šåŒæ ·çš„å˜å½¢ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨å…ƒç´ çš„ä¼ªå…ƒç´ å»å®ç°é€ å‹ï¼Œè¿™æ ·å¯ä»¥åšåˆ°ä¸å½±å“æŒ‰é’®å†…çš„æ–‡å­—ã€‚</p><h3 id="å¹³è¡Œå››è¾¹å½¢"><a href="#å¹³è¡Œå››è¾¹å½¢" class="headerlink" title="å¹³è¡Œå››è¾¹å½¢"></a>å¹³è¡Œå››è¾¹å½¢</h3><p>ä½¿ç”¨ <code>transform: skewX()</code> å³å¯ï¼Œæ³¨æ„ä¸Šè¿°è¯´çš„ï¼Œåˆ©ç”¨å…ƒç´ çš„ä¼ªå…ƒç´ å®ç°å¹³è¡Œå››è¾¹å½¢ï¼Œåšåˆ°ä¸å½±å“å†…éƒ¨çš„æ–‡å­—ã€‚</p>   <div class='btn parallelogram'>Parallelogram</div>   .parallelogram {       position: relative;       width: 160px;       height: 64px;<pre><code>   &amp;::before &#123;       content: &quot;&quot;;       position: absolute;       top: 0;       left: 0;       bottom: 0;       right: 0;       background: #03f463;       transform: skewX(15deg);   &#125;</code></pre><p>}</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d02e72e6e0af4b23b5c5bbf2fbcb63c1~tplv-k3u1fbpfcp-zoom-1.image"></p><p>å¦‚æœä¸æƒ³ä½¿ç”¨ä¼ªå…ƒç´ ï¼Œé™¤äº† <code>transform: skewX()</code>ï¼Œå¹³è¡Œå››è¾¹å½¢ä½¿ç”¨æ¸å˜ä¹Ÿæ˜¯å¯ä»¥å®ç°çš„ã€‚</p><p>å¤§æ¦‚å°±æ˜¯è¿™æ ·ï¼š</p><pre><code>&#123;    background: linear-gradient(45deg, transparent 22%, #04e6fb 22%, #9006fb 78%, transparent 0);&#125;</code></pre><h3 id="æ¢¯å½¢"><a href="#æ¢¯å½¢" class="headerlink" title="æ¢¯å½¢"></a>æ¢¯å½¢</h3><p>æ¢¯å½¢æ¯”å¹³è¡Œå››è¾¹å½¢ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œå®ƒå¤šå€ŸåŠ©äº† <code>perspective</code>ï¼Œå…¶å®æ˜¯åˆ©ç”¨äº†ä¸€å®šçš„ 3D å˜æ¢ã€‚åŸç†å°±æ˜¯ä¸€ä¸ªçŸ©å½¢ï¼Œç»•ç€ X è½´æ—‹è½¬ï¼Œåƒæ˜¯è¿™æ ·ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/083a479bed964814a78600c567e005d7~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ä½¿ç”¨ <code>perspective</code> å’Œ <code>transform: rotateX()</code> å³å¯ï¼Œå½“ç„¶ï¼Œå®ƒä»¬å¯ä»¥åˆåœ¨ä¸€èµ·å†™ï¼š</p><pre><code>&lt;div class=&#39;btn trapezoid&#39;&gt;Trapezoid&lt;/div&gt;.parallelogram &#123;    position: relative;    width: 160px;    height: 64px;    &amp;::after &#123;          content:&quot;&quot;;          position: absolute;          top: 0; right: 0; bottom: 0; left: 0;          transform: perspective(40px) rotateX(10deg);          transform-origin: bottom;          background: #ff9800;    &#125;&#125;</code></pre><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b10e95e7278e464489034261e4634f75~tplv-k3u1fbpfcp-zoom-1.image"></p><h2 id="åˆ‡è§’-â€“-çº¯è‰²èƒŒæ™¯ä¸æ¸å˜è‰²èƒŒæ™¯"><a href="#åˆ‡è§’-â€“-çº¯è‰²èƒŒæ™¯ä¸æ¸å˜è‰²èƒŒæ™¯" class="headerlink" title="åˆ‡è§’ â€“ çº¯è‰²èƒŒæ™¯ä¸æ¸å˜è‰²èƒŒæ™¯"></a>åˆ‡è§’ â€“ çº¯è‰²èƒŒæ™¯ä¸æ¸å˜è‰²èƒŒæ™¯</h2><p>æ¥ä¸‹æ¥æ˜¯åˆ‡è§’å›¾å½¢ï¼Œæœ€å¸¸è§çš„æ–¹æ³•ä¸»è¦æ˜¯å€ŸåŠ©æ¸å˜ <code>linear-gradient</code> å®ç°ï¼Œæ¥çœ‹è¿™æ ·ä¸€ä¸ªå›¾å½¢</p><pre><code>&lt;div&gt;&lt;/div&gt;.notching &#123;    background: linear-gradient(135deg, transparent 10px, #ff1493 0);    background-repeat: no-repeat;&#125;</code></pre><p>ç»“æœå¦‚ä¸‹ï¼Œ</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/403085aae53a472787da5b0b8a82bab3~tplv-k3u1fbpfcp-zoom-1.image"></p><p>åŸºäºæ­¤ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ©ç”¨å¤šé‡æ¸å˜ï¼Œå®ç° 4 ä¸ªè¿™æ ·çš„å›¾å½¢å³å¯ï¼Œå¹¶ä¸”ï¼Œåˆ©ç”¨ <code>background-position</code> å®šä½åˆ°å››ä¸ªè§’ï¼š</p><pre><code>&lt;div class=&quot;notching&quot;&gt;notching&lt;/div&gt;.notching &#123;    background:        linear-gradient(135deg, transparent 10px, #ff1493 0) top left,        linear-gradient(-135deg, transparent 10px, #ff1493 0) top right,        linear-gradient(-45deg, transparent 10px, #ff1493 0) bottom right,        linear-gradient(45deg, transparent 10px, #ff1493 0) bottom left;    background-size: 50% 50%;    background-repeat: no-repeat;&#125;</code></pre><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0e185404519245bc9548693c1b514cb4~tplv-k3u1fbpfcp-zoom-1.image"></p><h3 id="åˆ©ç”¨-clip-path-å®ç°æ¸å˜èƒŒæ™¯çš„åˆ‡è§’å›¾å½¢"><a href="#åˆ©ç”¨-clip-path-å®ç°æ¸å˜èƒŒæ™¯çš„åˆ‡è§’å›¾å½¢" class="headerlink" title="åˆ©ç”¨ clip-path å®ç°æ¸å˜èƒŒæ™¯çš„åˆ‡è§’å›¾å½¢"></a>åˆ©ç”¨ clip-path å®ç°æ¸å˜èƒŒæ™¯çš„åˆ‡è§’å›¾å½¢</h3><p>å½“ç„¶ï¼Œè¿™ä¸ªæŠ€å·§æœ‰ä¸ªé—®é¢˜ï¼Œå½“è¦æ±‚åº•è‰²æ˜¯æ¸å˜è‰²çš„æ—¶å€™ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ¯”è¾ƒç¬¨æ‹™äº†ã€‚</p><p>å¥½åœ¨ï¼Œæˆ‘ä»¬è¿˜æœ‰å¦å¤–ä¸€ç§æ–¹å¼ï¼Œå€ŸåŠ© <code>clip-path</code> åˆ‡å‡ºä¸€ä¸ªåˆ‡è§’å›¾å½¢ï¼Œè¿™æ ·ï¼ŒèƒŒæ™¯è‰²å¯ä»¥æ˜¯ä»»æ„å®šåˆ¶çš„é¢œè‰²ï¼Œæ— è®ºæ˜¯æ¸å˜è¿˜æ˜¯çº¯è‰²éƒ½ä¸åœ¨è¯ä¸‹ï¼š</p><pre><code>&lt;div class=&quot;clip-notching&quot;&gt;notching&lt;/div&gt;.clip-notching &#123;    background: linear-gradient(        45deg,        #f9d9e7,        #ff1493    );    clip-path: polygon(        15px 0,        calc(100% - 15px) 0,        100% 15px,        100% calc(100% - 15px),        calc(100% - 15px) 100%,        15px 100%,        0 calc(100% - 15px),        0 15px    );&#125;</code></pre><p>ç®€å•çš„å®ç°ä¸€ä¸ªæ¸å˜èƒŒæ™¯ï¼Œæ¥ç€æ ¸å¿ƒå°±æ˜¯ï¼Œåœ¨æ¸å˜çŸ©å½¢å›¾å½¢çš„åŸºç¡€ä¸Šï¼Œåˆ©ç”¨ <code>clip-path: polygon()</code> åˆ‡å‡ºæˆ‘ä»¬æƒ³è¦çš„å½¢çŠ¶ï¼ˆä¸€ä¸ª 8 è¾¹å½¢ï¼‰ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/035df81ad9754fdcb59bc13e65c9275b~tplv-k3u1fbpfcp-zoom-1.image"></p><p>å½“ç„¶ï¼Œä¸Šè¿°ä»£ç éå¸¸å®¹æ˜“è”æƒ³åˆ°ä¸‹è¿°è¿™ç§ 6 è¾¹å½¢ï¼Œä½¿ç”¨æ¸å˜å’Œ <code>clip-path</code> éƒ½å¯ä»¥è½»æ¾å¾—åˆ°ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0185c3e6db894ea1a4e4a561124cc843~tplv-k3u1fbpfcp-zoom-1.image"></p><h2 id="ç®­å¤´æŒ‰é’®"><a href="#ç®­å¤´æŒ‰é’®" class="headerlink" title="ç®­å¤´æŒ‰é’®"></a>ç®­å¤´æŒ‰é’®</h2><p>æ¥ä¸‹æ¥æ˜¯ç®­å¤´æŒ‰é’®ï¼Œä»”ç»†è§‚å¯Ÿä¸Šé¢çš„åˆ‡è§’æŒ‰é’®ï¼Œå½“ä¸¤è¾¹çš„è§’è¢«åˆ‡æ‰çš„è¶³å¤Ÿå¤šçš„æ—¶å€™ï¼Œå°±å˜æˆäº†ä¸€ä¸ªç®­å¤´çš„å½¢çŠ¶ã€‚</p><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¸¤é‡æ¸å˜ï¼Œå®ç°ä¸€ä¸ªå•ç®­å¤´æŒ‰é’®ï¼š</p><pre><code>&lt;div class=&quot;arrow&quot;&gt;arrow&lt;/div&gt;&amp;.arrow &#123;    background: linear-gradient(                -135deg,                transparent 22px,                #04e6fb 22px,                #65ff9a 100%            )            top right,        linear-gradient(                -45deg,                transparent 22px,                #04e6fb 22px,                #65ff9a 100%            )            bottom right;    background-size: 100% 50%;    background-repeat: no-repeat;&#125;ä¸€ä¸ªç®­å¤´å°±å‡ºæ¥äº†ï¼š![img](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fc39ca54f91d47a88c429fe2b0047df6~tplv-k3u1fbpfcp-zoom-1.image)å®ƒæ˜¯ç”±ä¸Šä¸‹ä¸¤ä¸ªæ¸å˜å—ç»„åˆå¾—åˆ°çš„ï¼Œæ¢ä¸ªé¢œè‰²ç«‹é©¬å°±èƒ½æ˜ç™½ï¼š![img](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ca4903b269f64c75ab51ebffdc341e19~tplv-k3u1fbpfcp-zoom-1.image)é‚£å¦‚æœæ˜¯è¿™æ ·ä¸€ä¸ªç®­å¤´é€ å‹å‘¢ï¼Ÿ![img](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/aed4f085c4f84b41b5ac95ad6672161b~tplv-k3u1fbpfcp-zoom-1.image)ä¸€æ ·çš„ï¼Œå®ƒä¹Ÿæ˜¯ä¸¤ä¸ªæ¸å˜çš„å åŠ ï¼Œæ¸å˜çš„é¢œè‰²æ˜¯**é€æ˜ --&gt; é¢œè‰²A --&gt; é¢œè‰²B --&gt; é€æ˜**ã€‚å½“ç„¶ï¼ŒåŒæ ·åœ¨è¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨ `clip-path`ï¼šè¿™é‡Œç»™å‡º `clip-path` çš„è§£æ³•ï¼š```CSS&#123;    background: linear-gradient(45deg, #04e6fb, #65ff9a);    clip-path: polygon(        0 0,        30px 50%,        0 100%,        calc(100% - 30px) 100%,        100% 50%,        calc(100% - 30px) 0    );&#125;</code></pre><h2 id="å†…åˆ‡åœ†è§’"><a href="#å†…åˆ‡åœ†è§’" class="headerlink" title="å†…åˆ‡åœ†è§’"></a>å†…åˆ‡åœ†è§’</h2><p>ä¸‹é¢è¿™ä¸ªæŒ‰é’®å½¢çŠ¶ï¼Œå¤šå‡ºç°äºä¼˜æƒ åˆ¸ï¼Œæœ€å¸¸è§çš„è§£æ³•ï¼Œä¹Ÿæ˜¯ä½¿ç”¨æ¸å˜ï¼Œå½“ç„¶ï¼Œä¸åˆ‡è§’ä¸åŒï¼Œè¿™é‡Œä½¿ç”¨çš„å¾„å‘æ¸å˜ã€‚</p><p>é¦–å…ˆï¼Œçœ‹è¿™æ ·ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><pre><code>&lt;div&gt;&lt;/div&gt;div &#123;    background-image: radial-gradient(circle at 100% 100%, transparent 0, transparent 12px, #2179f5 12px);&#125;</code></pre><p>å¯ä»¥å¾—åˆ°è¿™æ ·ä¸€ä¸ªå›¾å½¢ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fad928ea83d8461ab604dea37f590321~tplv-k3u1fbpfcp-zoom-1.image"></p><p>æ‰€ä»¥ï¼Œåªéœ€æ§åˆ¶ä¸‹ <code>background-size</code>ï¼Œåœ¨ 4 ä¸ªè§’å®ç° 4 ä¸ªè¿™æ ·çš„å›¾å½¢å³å¯ï¼š</p><pre><code>&lt;div class=&quot;inset-circle&quot;&gt;inset-circle&lt;/div&gt;&amp;.inset-circle &#123;    background-size: 70% 70%;    background-image: radial-gradient(            circle at 100% 100%,            transparent 0,            transparent 12px,            #2179f5 13px        ),        radial-gradient(            circle at 0 0,            transparent 0,            transparent 12px,            #2179f5 13px        ),        radial-gradient(            circle at 100% 0,            transparent 0,            transparent 12px,            #2179f5 13px        ),        radial-gradient(            circle at 0 100%,            transparent 0,            transparent 12px,            #2179f5 13px        );    background-repeat: no-repeat;    background-position: right bottom, left top, right top, left bottom;&#125;</code></pre><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a950088d1edd4b05aba575854aeed0c5~tplv-k3u1fbpfcp-zoom-1.image"></p><h3 id="å€ŸåŠ©-mask-å®ç°æ¸å˜çš„å†…åˆ‡åœ†è§’æŒ‰é’®"><a href="#å€ŸåŠ©-mask-å®ç°æ¸å˜çš„å†…åˆ‡åœ†è§’æŒ‰é’®" class="headerlink" title="å€ŸåŠ© mask å®ç°æ¸å˜çš„å†…åˆ‡åœ†è§’æŒ‰é’®"></a>å€ŸåŠ© mask å®ç°æ¸å˜çš„å†…åˆ‡åœ†è§’æŒ‰é’®</h3><p>å¦‚æœèƒŒæ™¯è‰²è¦æ±‚æ¸å˜æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€å¼ çŸ©å½¢èƒŒæ™¯å›¾æ¡ˆï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨ <code>mask</code> å®ç°ä¸€å±‚é®ç½©ï¼Œåˆ©ç”¨ <code>mask</code> çš„ç‰¹æ€§ï¼ŒæŠŠ 4 ä¸ªè§’ç»™é®ä½å³å¯ã€‚</p><p><code>mask</code> çš„ä»£ç å’Œä¸Šè¿°çš„åœ†è§’åˆ‡è§’ä»£ç éå¸¸ç±»ä¼¼ï¼Œç®€å•æ”¹é€ ä¸‹å³å¯å¾—åˆ°æ¸å˜çš„å†…åˆ‡åœ†è§’æŒ‰é’®ï¼š</p><pre><code>&lt;div class=&quot;mask-inset-circle&quot;&gt;inset-circle&lt;/div&gt;.mask-inset-circle &#123;    background: linear-gradient(45deg, #2179f5, #e91e63);    mask: radial-gradient(            circle at 100% 100%,            transparent 0,            transparent 12px,            #2179f5 13px        ),        radial-gradient(            circle at 0 0,            transparent 0,            transparent 12px,            #2179f5 13px        ),        radial-gradient(            circle at 100% 0,            transparent 0,            transparent 12px,            #2179f5 13px        ),        radial-gradient(            circle at 0 100%,            transparent 0,            transparent 12px,            #2179f5 13px        );    mask-repeat: no-repeat;    mask-position: right bottom, left top, right top, left bottom;    mask-size: 70% 70%;&#125;</code></pre><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†è¿™æ ·ä¸€ä¸ªå›¾å½¢ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/aef32f16930d4091bd6d3cdef2e79dec~tplv-k3u1fbpfcp-zoom-1.image"></p><p>å½“ç„¶ï¼Œè¯»æ‡‚ä¸Šè¿°ä»£ç ï¼Œä½ éœ€è¦é¦–å…ˆå¼„æ¸…æ¥š CSS <code>mask</code> å±æ€§çš„åŸç†ï¼Œå¦‚æœä½ å¯¹å®ƒè¿˜æœ‰äº›é™Œç”Ÿï¼Œå¯ä»¥çœ‹çœ‹æˆ‘çš„è¿™ç¯‡æ–‡ç« ï¼š</p><p><a href="https://github.com/chokcoco/iCSS/issues/80">å¥‡å¦™çš„ CSS MASK</a></p><h2 id="åœ†è§’ä¸è§„åˆ™çŸ©å½¢"><a href="#åœ†è§’ä¸è§„åˆ™çŸ©å½¢" class="headerlink" title="åœ†è§’ä¸è§„åˆ™çŸ©å½¢"></a>åœ†è§’ä¸è§„åˆ™çŸ©å½¢</h2><p>ä¸‹é¢è¿™ä¸ªæŒ‰é’®å½¢çŠ¶ï¼Œä¹Ÿæ˜¯æœ€è¿‘è¢«é—®åˆ°æœ€å¤šçš„ï¼Œå…ˆæ¥çœ‹çœ‹å®ƒçš„é€ å‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3cd059aca5a84f45b756bac650452fca~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ä¸å¤ªå¥½ç»™å®ƒèµ·åï¼Œä¸€ä¾§æ˜¯è§„åˆ™çš„å¸¦åœ†è§’ç›´è§’ï¼Œå¦å¤–ä¸€ä¾§åˆ™æ˜¯å¸¦åœ†è§’çš„æ–œè¾¹ã€‚</p><p>å…¶å®ï¼Œå®ƒå°±æ˜¯ç”±<strong>åœ†è§’çŸ©å½¢</strong> + <strong>åœ†è§’å¹³è¡Œå››è¾¹å½¢ç»„æˆ</strong>ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/56619c01c9234ff1aeeb3a83a6c6c3ce~tplv-k3u1fbpfcp-zoom-1.image"></p><p>æ‰€ä»¥ï¼Œå€ŸåŠ©ä¸¤ä¸ªä¼ªå…ƒç´ ï¼Œå¯ä»¥è½»æ¾çš„å®ç°å®ƒä»¬ï¼š</p><pre><code>&lt;div class=&quot;skew&quot;&gt;Skew&lt;/div&gt;.skew &#123;    position: relative;    width: 120px;    &amp;::after &#123;        content: &quot;&quot;;        position: absolute;        top: 0;        left: 0;        right: 0;        bottom: 0;        border-radius: 10px;        background: orange;        transform: skewX(15deg);    &#125;    &amp;::before &#123;        content: &quot;&quot;;        position: absolute;        top: 0;        right: -13px;        width: 100px;        height: 64px;        border-radius: 10px;        background: orange;    &#125;&#125;</code></pre><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6d4f471820794d58a80f81f5c4c00052~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ç”±äºä¸€ä¸ªä¼ªå…ƒç´ å åŠ åœ¨å¦å¤–ä¸€ä¸ªä¹‹ä¸Šï¼Œæ‰€ä»¥å¯¹å…¶ä¸­ä¸€ä¸ªä½¿ç”¨æ¸å˜ï¼Œä¸€ä¸ªåˆ™æ˜¯çº¯è‰²ï¼Œå…¶é¢œè‰²æ˜¯å¯ä»¥å®Œç¾è¡”æ¥åœ¨ä¸€èµ·çš„ï¼Œè¿™æ ·å°±å®ç°äº†æ¸å˜è‰²çš„è¯¥å›¾å½¢ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4c4bb1de4018421a9eb142d7b7590cfa~tplv-k3u1fbpfcp-zoom-1.image"></p><h2 id="å¤–åœ†è§’æŒ‰é’®"><a href="#å¤–åœ†è§’æŒ‰é’®" class="headerlink" title="å¤–åœ†è§’æŒ‰é’®"></a>å¤–åœ†è§’æŒ‰é’®</h2><p>æ¥ä¸‹æ¥è¿™ä¸ªæŒ‰é’®å½¢çŠ¶ï¼Œå¸¸è§äº Tab é¡µä¸Šï¼Œç±»ä¼¼äº Chrome çš„åˆ†é¡µï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d516c287fa9a40738b77f91ea92fc152~tplv-k3u1fbpfcp-zoom-1.image"></p><p>æˆ‘ä»¬å¯¹è¿™ä¸ªæŒ‰é’®å½¢çŠ¶æ‹†è§£ä¸€ä¸‹ï¼Œè¿™é‡Œå…¶å®æ˜¯ 3 å—çš„å åŠ ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e1b933f02fc54a34a36a0430254b4a12~tplv-k3u1fbpfcp-zoom-1.image"></p><p>åªéœ€è¦æƒ³æ¸…æ¥šå¦‚ä½•å®ç°ä¸¤ä¾§çš„å¼§å½¢ä¸‰è§’å³å¯ã€‚è¿™é‡Œè¿˜æ˜¯å€ŸåŠ©äº†æ¸å˜ â€“ <strong>å¾„å‘æ¸å˜</strong>ï¼Œå…¶å®ä»–æ˜¯è¿™æ ·ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠé»‘è‰²éƒ¨åˆ†æ›¿æ¢ä¸ºé€æ˜å³å¯ï¼Œ ä¸¤ä¸ªä¼ª å…ƒç´ å³å¯ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/851ef119668d4670b14989db2ad105a0~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><pre><code>&lt;div class=&quot;outside-circle&quot;&gt;outside-circle&lt;/div&gt;.outside-circle &#123;    position: relative;    background: #e91e63;    border-radius: 10px 10px 0 0;    &amp;::before &#123;        content: &quot;&quot;;        position: absolute;        width: 20px;        height: 20px;        left: -20px;        bottom: 0;        background: #000;        background:radial-gradient(circle at 0 0, transparent 20px, #e91e63 21px);    &#125;    &amp;::after &#123;        content: &quot;&quot;;        position: absolute;        width: 20px;        height: 20px;        right: -20px;        bottom: 0;        background: #000;        background:radial-gradient(circle at 100% 0, transparent 20px, #e91e63 21px);    &#125;&#125;</code></pre><p>å³å¯å¾—åˆ°ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cf23b36595f14f4ca3bc77e107525226~tplv-k3u1fbpfcp-zoom-1.image"></p><p>ä¸Šè¿°çš„æ‰€æœ‰å›¾å½¢çš„å®Œæ•´ä»£ç ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°ï¼š<a href="https://codepen.io/Chokcoco/pen/QWMoBGO?editors=1100">CodePen Demo â€“ CSS Various Button Shapes | CSS å„ç§é€ å‹æŒ‰é’®</a></p><h2 id="æ€»ç»“ä¸€ä¸‹"><a href="#æ€»ç»“ä¸€ä¸‹" class="headerlink" title="æ€»ç»“ä¸€ä¸‹"></a>æ€»ç»“ä¸€ä¸‹</h2><p>åŸºäºä¸Šè¿°çš„å®ç°ï¼Œæˆ‘ä»¬ä¸éš¾å‘ç°ï¼Œä¸€äº›ç¨å¾®ç‰¹æ®Šçš„æŒ‰é’®ï¼Œæ— ééƒ½é€šè¿‡æ‹¼æ¥ã€éšœçœ¼æ³•ã€é®ç½©ç­‰æ–¹å¼å®ç°ã€‚</p><p>è€Œåœ¨å…¶ä¸­ï¼š</p><ul><li>æ¸å˜ï¼ˆçº¿æ€§æ¸å˜ <code>linear-gradient</code>ã€å¾„å‘æ¸å˜ <code>radial-gradient</code>ã€å¤šé‡æ¸å˜ï¼‰</li><li>é®ç½© <code>mask</code></li><li>è£å‰ª <code>clip-path</code></li><li>å˜å½¢ <code>transform</code></li></ul><p>å‘æŒ¥äº†é‡è¦çš„ä½œç”¨ï¼Œç†Ÿç»ƒä½¿ç”¨å®ƒä»¬ï¼Œæˆ‘ä»¬å¯¹äºè¿™äº›å›¾å½¢å°±å¯ä»¥ä¿¡æ‰‹æ‹ˆæ¥ï¼ŒåŸºäºå®ƒä»¬çš„å˜å½¢ä¹Ÿèƒ½ä»å®¹é¢å¯¹ã€‚</p><p>ä¸Šè¿°çš„å›¾å½¢ï¼Œå†é…åˆ <code>filter: drop-shadow()</code>ï¼ŒåŸºæœ¬éƒ½èƒ½å®ç°ä¸è§„åˆ™é˜´å½±ã€‚</p><p>å†è€…ï¼Œæ›´ä¸ºå¤æ‚çš„å›¾å½¢ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/22c9c459077b48b79fd91fea13ef94e4~tplv-k3u1fbpfcp-zoom-1.image"></p><p>è¿˜æ˜¯åˆ‡å›¾å§ï¼ŒCSS è™½å¥½ï¼Œå®é™…ä½¿ç”¨ä¸­ä¹Ÿéœ€è¦è€ƒè™‘æŠ•å…¥äº§å‡ºæ¯”ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>windowsæ³¨å†Œè¡¨è‡ªå¯é¡¹</title>
      <link href="/2022/02/01/article10/"/>
      <url>/2022/02/01/article10/</url>
      
        <content type="html"><![CDATA[<h2 id="Run-å’Œ-RunOnce-æ³¨å†Œè¡¨é¡¹"><a href="#Run-å’Œ-RunOnce-æ³¨å†Œè¡¨é¡¹" class="headerlink" title="Run å’Œ RunOnce æ³¨å†Œè¡¨é¡¹"></a>Run å’Œ RunOnce æ³¨å†Œè¡¨é¡¹</h2><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>Windows çš„ Run å’Œ RunOnce æ³¨å†Œè¡¨é¡¹å¯ä»¥è®©ç”¨æˆ·ç™»é™†ç³»ç»Ÿæ—¶è‡ªåŠ¨å¯åŠ¨ä¸€äº›ç¨‹åºã€‚<br>å…¶ä¸­æ¶‰åŠåˆ°çš„æ³¨å†Œè¡¨é¡¹å¦‚ä¸‹ï¼š</p><ul><li>HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Run</li><li>HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\RunOnce</li><li>HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run</li><li>HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\RunOnce<br>åœ¨è¿™å››ç§é¡¹ä¸­æ·»åŠ çš„è‡ªå¯åŠ¨ç¨‹åºçš„è§„åˆ™ä¸ä¸€æ ·ï¼š</li><li>HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Run è¡¨ç¤ºä»»ä½•è´¦æˆ·æ¯ä¸€æ¬¡ç™»é™†åˆ° Windows ç³»ç»Ÿéƒ½ä¼šè‡ªåŠ¨å¯åŠ¨åœ¨è¿™ä¸ªé¡¹ä¸‹é¢æ³¨å†Œçš„ç¨‹åº</li><li>HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\RunOnce è¡¨ç¤ºä»»ä½•è´¦æˆ·ä¸‹ä¸€æ¬¡ç™»é™†åˆ° Windows ç³»ç»Ÿä¼šè‡ªåŠ¨å¯åŠ¨åœ¨è¿™ä¸ªé¡¹ä¸‹é¢æ³¨å†Œçš„ç¨‹åºï¼Œä»¥åå°±ä¸ä¼šè‡ªå¯äº†</li><li>HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run è¡¨ç¤ºå½“å‰è´¦æˆ·æ¯ä¸€æ¬¡ç™»é™†åˆ° Windows ç³»ç»Ÿéƒ½ä¼šè‡ªåŠ¨å¯åŠ¨åœ¨è¿™ä¸ªé¡¹ä¸‹é¢æ³¨å†Œçš„ç¨‹åº</li><li>HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\RunOnce è¡¨ç¤ºå½“å‰è´¦æˆ·ä¸‹ä¸€æ¬¡ç™»é™†åˆ° Windows ç³»ç»Ÿä¼šè‡ªåŠ¨å¯åŠ¨åœ¨è¿™ä¸ªé¡¹ä¸‹é¢æ³¨å†Œçš„ç¨‹åºï¼Œä»¥åå°±ä¸ä¼šè‡ªå¯äº†<br>ä¸€èˆ¬æ¥è¯´<br>åœ¨ HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run é¡¹ä¸‹æ³¨å†Œè‡ªå¯åŠ¨é¡¹å°±è¡Œäº†ï¼Œ</li></ul><h2 id="æ³¨å†Œæ–¹æ³•"><a href="#æ³¨å†Œæ–¹æ³•" class="headerlink" title="æ³¨å†Œæ–¹æ³•"></a>æ³¨å†Œæ–¹æ³•</h2><h3 id="ä¸€-æ‰“å¼€æ³¨å†Œè¡¨ç¼–è¾‘å™¨ï¼šæŒ‰ä¸‹-Win-é”®ç›˜ï¼Œè¾“å…¥æ³¨å†Œè¡¨æˆ–è€…regeditç„¶å-Enter"><a href="#ä¸€-æ‰“å¼€æ³¨å†Œè¡¨ç¼–è¾‘å™¨ï¼šæŒ‰ä¸‹-Win-é”®ç›˜ï¼Œè¾“å…¥æ³¨å†Œè¡¨æˆ–è€…regeditç„¶å-Enter" class="headerlink" title="ä¸€.æ‰“å¼€æ³¨å†Œè¡¨ç¼–è¾‘å™¨ï¼šæŒ‰ä¸‹ Win é”®ç›˜ï¼Œè¾“å…¥æ³¨å†Œè¡¨æˆ–è€…regeditç„¶å Enter:"></a>ä¸€.æ‰“å¼€æ³¨å†Œè¡¨ç¼–è¾‘å™¨ï¼šæŒ‰ä¸‹ Win é”®ç›˜ï¼Œè¾“å…¥<code>æ³¨å†Œè¡¨</code>æˆ–è€…<code>regedit</code>ç„¶å Enter:</h3><h3 id="äºŒ-å°†ä¸Šé¢å¯¹åº”çš„æ³¨å†Œè¡¨é¡¹ç²˜è´´åˆ°å¦‚ä¸‹ä½ç½®æŒ‰-Enterï¼š"><a href="#äºŒ-å°†ä¸Šé¢å¯¹åº”çš„æ³¨å†Œè¡¨é¡¹ç²˜è´´åˆ°å¦‚ä¸‹ä½ç½®æŒ‰-Enterï¼š" class="headerlink" title="äºŒ.å°†ä¸Šé¢å¯¹åº”çš„æ³¨å†Œè¡¨é¡¹ç²˜è´´åˆ°å¦‚ä¸‹ä½ç½®æŒ‰ Enterï¼š"></a>äºŒ.å°†ä¸Šé¢å¯¹åº”çš„æ³¨å†Œè¡¨é¡¹ç²˜è´´åˆ°å¦‚ä¸‹ä½ç½®æŒ‰ Enterï¼š</h3><h3 id="ä¸‰-æ·»åŠ è‡ªåŠ¨å¯åŠ¨é¡¹ï¼š"><a href="#ä¸‰-æ·»åŠ è‡ªåŠ¨å¯åŠ¨é¡¹ï¼š" class="headerlink" title="ä¸‰.æ·»åŠ è‡ªåŠ¨å¯åŠ¨é¡¹ï¼š"></a>ä¸‰.æ·»åŠ è‡ªåŠ¨å¯åŠ¨é¡¹ï¼š</h3><p>ç©ºç™½å¤„å³å‡»ï¼Œé€‰æ‹©â€æ–°å»ºâ€-&gt;â€å­—ç¬¦ä¸²å€¼â€ï¼š<br>å–ä¸ªåå­—ï¼š<br>å¤åˆ¶ä½ çš„ç¨‹åºçš„è·¯å¾„ï¼šæŒ‰ä½ Shift é”®å³å‡»ç¨‹åºï¼Œé€‰æ‹©â€å¤åˆ¶æ–‡ä»¶åœ°å€â€ï¼š<br>å›åˆ°æ³¨å†Œè¡¨ç¼–è¾‘å™¨ï¼Œå³å‡»ä½ å–çš„ç¨‹åºçš„åå­—ï¼Œç„¶åé€‰æ‹©ä¿®æ”¹ï¼š<br>åœ¨å¦‚ä¸‹ä½ç½®æŒ‰ Ctrl+V ç²˜è´´ï¼Œç„¶åç‚¹å‡»ç¡®å®šï¼Œå°±è¡Œäº†ï¼š</p><blockquote><p>ä¹Ÿå¯ä»¥é€šè¿‡å³å‡»æ¯ä¸€é¡¹çš„åå­—ï¼ˆé”®ï¼‰ï¼Œé€‰æ‹©åˆ é™¤æŸä¸€ä¸ªç¨‹åºçš„è‡ªåŠ¨å¯é¡¹ï¼Œè®©ç¨‹åºå¼€æœºæ—¶ä¸è‡ªåŠ¨å¯åŠ¨ï¼Œå¯ä»¥æå‡å¼€æœºé€Ÿåº¦ï¼Œå‡å°‘å†…å­˜æ¶ˆè€—</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LinuxåŸºç¡€å­¦ä¹ </title>
      <link href="/2022/01/16/article9/"/>
      <url>/2022/01/16/article9/</url>
      
        <content type="html"><![CDATA[<h1 id="Linux-å‘è¡Œç‰ˆ"><a href="#Linux-å‘è¡Œç‰ˆ" class="headerlink" title="Linux å‘è¡Œç‰ˆ"></a>Linux å‘è¡Œç‰ˆ</h1><p>ä»¥è½¯ä»¶åŒ…æ ¼å¼ï¼š<br>rpmï¼š<br>Red Hat Enterprise Linux<br>CentOS<br>openSUSE<br>Fedora<br>debï¼š<br>Debian<br>Ubuntu<br>linux mint<br>å®‰å…¨æµ‹è¯•ç³»ç»Ÿï¼š<br>kali</p><h1 id="å®‰è£…-centos"><a href="#å®‰è£…-centos" class="headerlink" title="å®‰è£… centos"></a>å®‰è£… centos</h1><p>åœ¨è™šæ‹Ÿæœºé‡Œåˆ›å»º centos</p><p>é€‰æ‹©è¯­è¨€ï¼Œé»˜è®¤ä¸ºè‹±è¯­</p><p>åœ¨æ­¤ç•Œé¢è®¾ç½®ç³»ç»Ÿç›¸å…³é€‰é¡¹ï¼Œæ—¶åŒºã€è½¯ä»¶ã€ç¡¬ç›˜ã€ç½‘ç»œç­‰</p><p>è®¾ç½®æ—¶åŒº</p><p>é€‰æ‹© minimal å®‰è£…</p><p>ç¡¬ç›˜åˆ†åŒº</p><p>å¼€å§‹å®‰è£…å¹¶è®¾ç½® root å¯†ç ï¼Œåˆ›å»ºæ™®é€šç”¨æˆ·</p><p>ç™»å½•ç³»ç»Ÿ</p><h1 id="history-è®°å½•å‘½ä»¤æ‰§è¡Œæ—¶é—´"><a href="#history-è®°å½•å‘½ä»¤æ‰§è¡Œæ—¶é—´" class="headerlink" title="history è®°å½•å‘½ä»¤æ‰§è¡Œæ—¶é—´"></a>history è®°å½•å‘½ä»¤æ‰§è¡Œæ—¶é—´</h1><p>]$ export HISTTIMEFORMAT=â€™%F %T â€˜<br>æ³¨ï¼šåœ¨å½“å‰ç™»å½• shell ä¸­ç”Ÿæ•ˆ<br>ç¼–è¾‘.bashrc æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶ä¸­åŠ å…¥ä¼šæ°¸ä¹…æœ‰æ•ˆ</p><h1 id="Linux-å“²å­¦æ€æƒ³"><a href="#Linux-å“²å­¦æ€æƒ³" class="headerlink" title="Linux å“²å­¦æ€æƒ³"></a>Linux å“²å­¦æ€æƒ³</h1><p>1ï¼šä¸€åˆ‡çš†æ–‡ä»¶<br>ç¡¬ä»¶ä¹Ÿæ˜¯æ–‡ä»¶<br>2ï¼šç”±ä¼—å¤šåŠŸèƒ½å•ä¸€çš„ç¨‹åºç»„æˆï¼›ä¸€ä¸ªç¨‹åºåªåšä¸€ä»¶äº‹ï¼Œå¹¶ä¸”åšå¥½ï¼›<br>ç»„åˆå°ç¨‹åºå®Œæˆå¤æ‚ä»»åŠ¡ï¼›<br>3ï¼šå°½é‡é¿å…è·Ÿç”¨æˆ·äº¤äº’ï¼›<br>ç›®æ ‡ï¼šæ˜“äºä»¥ç¼–ç¨‹çš„æ–¹å¼å®ç°è‡ªåŠ¨åŒ–ä»»åŠ¡<br>4ï¼šä½¿ç”¨æ–‡æœ¬æ–‡ä»¶ä¿å­˜é…ç½®ä¿¡æ¯</p><h1 id="Linux-å¸¸ç”¨å‘½ä»¤ï¼š"><a href="#Linux-å¸¸ç”¨å‘½ä»¤ï¼š" class="headerlink" title="Linux å¸¸ç”¨å‘½ä»¤ï¼š"></a>Linux å¸¸ç”¨å‘½ä»¤ï¼š</h1><pre><code>catcat [OPTION]... [FILE]...datedate [OPTION]... [+FORMAT]date [-u|--utc|--universal] [MMDDhhmm[[CC]YY][.ss]]ifconfigifconfig [-v] [-a] [-s] [interface]ifconfig [-v] interface [aftype] options | address ...lsls [OPTION]... [FILE]...</code></pre><h1 id="Linux-æ–‡ä»¶ç›®å½•"><a href="#Linux-æ–‡ä»¶ç›®å½•" class="headerlink" title="Linux æ–‡ä»¶ç›®å½•"></a>Linux æ–‡ä»¶ç›®å½•</h1><pre><code>Filesystem Hierarchy Standard/bin: æ‰€æœ‰ç”¨æˆ·å¯ç”¨çš„åŸºæœ¬å‘½ä»¤ç¨‹åºæ–‡ä»¶ï¼›/sbin: ä¾›ç³»ç»Ÿç®¡ç†å·¥ä½œä½¿ç”¨çš„å·¥å…·ç¨‹åºï¼›/boot: å¼•å¯¼åŠ è½½å™¨å¿…é¡»ç”¨åˆ°çš„å„é™æ€æ–‡ä»¶ï¼škernelï¼Œinitramfs(initrd)ï¼Œgrubç­‰ï¼›/dev: å­˜å‚¨ç‰¹æ®Šæ–‡ä»¶æˆ–è®¾å¤‡æ–‡ä»¶ï¼›è®¾å¤‡æœ‰ä¸¤ç§ç±»å‹ï¼šå­—ç¬¦è®¾å¤‡(çº¿æ€§è®¾å¤‡)ï¼Œå—è®¾å¤‡(éšæœºè®¾å¤‡)ï¼›/etc: ç³»ç»Ÿç¨‹åºçš„é…ç½®æ–‡ä»¶ï¼Œåªèƒ½ä¸ºé™æ€æ–‡ä»¶ï¼›/home: æ™®é€šç”¨æˆ·çš„å®¶ç›®å½•çš„é›†ä¸­ä½ç½®ï¼›ä¸€èˆ¬æ¯ä¸ªæ™®é€šç”¨æˆ·çš„å®¶ç›®å½•é»˜è®¤æ­¤ç›®å½•ä¸‹ä¸ç”¨æˆ·åŒåçš„å­ç›®å½•ï¼Œ/home/USERNAME/lib: ä¸ºç³»ç»Ÿå¯åŠ¨æˆ–æ ¹æ–‡ä»¶ç³»ç»Ÿä¸Šçš„åº”ç”¨ç¨‹åº(/bin, /sbin)æä¾›å…±äº«åº“ï¼Œä»¥åŠä¸ºå†…æ ¸æä¾›å†…æ ¸æ¨¡å—libc.so.*: åŠ¨æ€é“¾æ¥çš„Cåº“ï¼›ld*: è¿è¡Œæ—¶é“¾æ¥å™¨/åŠ è½½å™¨ï¼›modules: ç”¨äºå­˜å‚¨å†…æ ¸æ¨¡å—çš„ç›®å½•ï¼›/lib64: 64ä½ç³»ç»Ÿç‰¹æœ‰çš„å­˜æ”¾å…±äº«åº“çš„è·¯å¾„ï¼›/media: ä¾¿æºå¼è®¾å¤‡æŒ‚è½½ç‚¹ï¼Œcdromï¼Œfloppyç­‰ï¼›/mnt: å…¶å®ƒæ–‡ä»¶ç³»ç»Ÿçš„ä¸´æ—¶æŒ‚è½½ç‚¹ï¼›/opt: é™„åŠ åº”ç”¨ç¨‹åºçš„å®‰è£…ä½ç½®ï¼›å¯é€‰è·¯å¾„ï¼›/srv: å½“å‰ä¸»æœºä¸ºæœåŠ¡æä¾›çš„æ•°æ®ï¼›/tmp: ä¸ºé‚£äº›ä¼šäº§ç”Ÿä¸´æ—¶æ–‡ä»¶çš„ç¨‹åºæä¾›çš„ç”¨äºå­˜å‚¨ä¸´æ—¶æ–‡ä»¶çš„ç›®å½•ï¼›/usr: User Hierarchyï¼Œå…¨å±€å…±äº«çš„åªè¯»æ•°æ®è·¯å¾„ï¼›binsbinliblib64include: Cç¨‹åºå¤´æ–‡ä»¶shareï¼šå‘½ä»¤æ‰‹å†Œé¡µå’Œè‡ªå¸¦æ–‡æ¡£ç­‰æ¶æ„ç‰¹æœ‰çš„æ–‡ä»¶çš„å­˜å‚¨ä½ç½®localï¼šå¦ä¸€ä¸ªå±‚çº§ç›®å½•X11R6: X-Windowç¨‹åºçš„å®‰è£…ä½ç½®srcï¼šç¨‹åºæºç æ–‡ä»¶çš„å­˜å‚¨ä½ç½®/usr/lcoal: Local Hierarchyï¼Œè®©ç³»ç»Ÿç®¡ç†å‘˜å®‰è£…æœ¬åœ°åº”ç”¨ç¨‹åºï¼›/var: å­˜å‚¨å¸¸å‘ç”Ÿå˜åŒ–çš„æ•°æ®çš„ç›®å½•ï¼›/proc: è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œç”¨äºä¸ºå†…æ ¸åŠè¿›ç¨‹å­˜å‚¨å…¶ç›¸å…³ä¿¡æ¯ï¼›å®ƒä»¬å¤šä¸ºå†…æ ¸å‚æ•°ï¼›/sys: sysfsè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿæä¾›äº†ä¸€ç§æ¯”procæ›´ä¸ºç†æƒ³çš„è®¿é—®å†…æ ¸æ•°æ®çš„é€”å¾„ï¼›</code></pre>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºVueçš„å¤©åœ°å›¾å…¥é—¨</title>
      <link href="/2022/01/07/article8/"/>
      <url>/2022/01/07/article8/</url>
      
        <content type="html"><![CDATA[<h3 id="å¤©åœ°å›¾ç»„ä»¶çš„å¼•ç”¨"><a href="#å¤©åœ°å›¾ç»„ä»¶çš„å¼•ç”¨" class="headerlink" title="å¤©åœ°å›¾ç»„ä»¶çš„å¼•ç”¨"></a>å¤©åœ°å›¾ç»„ä»¶çš„å¼•ç”¨</h3><p>é¦–å…ˆå»<a href="https://www.tianditu.gov.cn/">å¤©åœ°å›¾å®˜ç½‘</a>ï¼Œç™»å½•æˆ–è€…æ³¨å†Œã€‚<br>ä¾æ¬¡ç‚¹å‡»å¼€å‘èµ„æº-ç½‘é¡µ Api-æ–°å¼¹å‡ºé¡µé¢å³ä¸Šè§’æ§åˆ¶å°</p><p>åœ¨æ§åˆ¶å°é¡µé¢ï¼Œå•å‡»å³ä¸Šè§’åˆ›å»ºæ–°åº”ç”¨ï¼Œéšä¾¿å¡«ä¸€å¡«å·´æ‹‰å·´æ‹‰ã€‚</p><p>ç”³è¯·æˆåŠŸåè®°ä½ä½ çš„ keyã€‚</p><p>æˆ‘æ–°å»ºäº†ä¸€ä¸ª vue é¡¹ç›®ï¼Œè¿™ä¸ªé¡¹ç›®å•¥ä¹Ÿæ²¡æœ‰ï¼Œåƒä¸çœŸä¸€æ ·çº¯çœŸã€‚</p><p>æ‰¾åˆ° index.html è¿™ä¸ªæ–‡ä»¶ æŠŠä¸‹åˆ—ä»£ç å¤åˆ¶è¿›å»ï¼Œå®ç°å…¨å±€å¼•å…¥ ï¼ˆå½“ç„¶ä½ ä¹Ÿå¯ä»¥ç²˜è´´åœ¨æŸä¸ª vue é¡µé¢ä¸Šæ¥å®ç°æŒ‰éœ€å¼•å…¥ï¼‰</p><p><code>&lt;script src=&quot;http://api.tianditu.gov.cn/api?v=4.0&amp;tk=ä½ çš„å¯†é’¥&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</code></p><p>ä¿å­˜ï¼Œåˆ·æ–° Vue é¡¹ç›®ï¼Œæ‰“å¼€ F12 æ§åˆ¶å°å‘ç°è¯·æ±‚æˆåŠŸã€‚<br>æ–°å»ºä¸€ä¸ª vue æ–‡ä»¶ï¼Œåœ¨ä½ åƒè¦é˜²æ­¢åœ°å›¾çš„åœ°æ–¹æ–°å»ºä¸€ä¸ª divï¼Œå®šä¹‰ä»–çš„å¤§å°ï¼Œid è‡ªå·±å‘½åï¼Œæˆ‘å–åä¸º mapã€‚</p><div class="bodyAll"><div id="map" style="height:100%;width:100%"></div></div>åœ¨ methods ä¹¦å†™ initMap()æ–¹æ³•å¹¶åœ¨ mounted é‡Œå¼•ç”¨ã€‚åˆ«å¿˜åœ¨ data return é‡Œæ³¨å…¥ map:{}<pre><code>methods: &#123;  initMap() &#123;    let T = window.T;//å…¨å±€å¼•å…¥åTè¢«æ³¨å†Œåˆ°windowé‡Œï¼Œåœ¨ä»è¿™å„¿æ‹¿åˆ°Tã€‚TåŒ…å«äº†å¤©åœ°å›¾æä¾›çš„å„ç§æ–¹æ³•ç­‰ã€‚    this.map = new T.Map(&quot;map&quot;);    this.map.centerAndZoom(new T.LngLat(112, 36), 7);//ä¸‰ä¸ªå‚æ•°åˆ†åˆ«ä¸ºç»åº¦ï¼Œçº¬åº¦ï¼Œç¼©æ”¾ç­‰çº§ã€‚  &#125;,&#125;,mounted() &#123;  this.initMap();&#125;,</code></pre><p>èŠœæ¹–~å·²ç»èƒ½åŠ è½½å‡ºæ¥å•¦ã€‚èƒ½åŠ è½½å‡ºæ¥å°±ç®—æˆåŠŸ^^_</p><h3 id="å›¾å±‚ç»„ä»¶"><a href="#å›¾å±‚ç»„ä»¶" class="headerlink" title="å›¾å±‚ç»„ä»¶"></a>å›¾å±‚ç»„ä»¶</h3><p>å¯ä»¥ç”¨ç»§æ‰¿äº TControl çš„ MapType ç±»æ¥æ„é€ å›¾å±‚ç»„ä»¶ã€‚ç¤ºä¾‹ä»£ç çš„å‚æ•°æ˜¯ä¸ªæ•°ç»„ï¼Œå¦‚æœä»€ä¹ˆéƒ½ä¸ä¼ ä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„å›¾å±‚ç³»åˆ—ã€‚</p><p>ä»¥ä¸‹è¿™äº›å›¾å±‚éƒ½å¯ä»¥åœ¨å®˜æ–¹çš„ api é‡Œæ‰¾åˆ°</p><pre><code>//æ·»åŠ åˆ‡æ¢åœ°å›¾å›¾å±‚çš„ç»„ä»¶addCtrl() &#123;  var ctrl = new T.Control.MapType([    &#123;      title: &quot;åœ°å›¾&quot;,      //åœ°å›¾æ§ä»¶ä¸Šæ‰€è¦æ˜¾ç¤ºçš„å›¾å±‚åç§°      icon: &quot;http://api.tianditu.gov.cn/v4.0/image/map/maptype/vector.png&quot;,      //åœ°å›¾æ§ä»¶ä¸Šæ‰€è¦æ˜¾ç¤ºçš„å›¾å±‚å›¾æ ‡ï¼ˆé»˜è®¤å›¾æ ‡å¤§å°80x80ï¼‰      layer: TMAP_NORMAL_MAP, //åœ°å›¾ç±»å‹å¯¹è±¡ï¼Œå³MapTypeã€‚    &#125;,    &#123;      title: &quot;å«æ˜Ÿ&quot;,      icon: &quot;http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellite.png&quot;,      layer: TMAP_SATELLITE_MAP,    &#125;,    &#123;      title: &quot;å«æ˜Ÿæ··åˆ&quot;,      http: &quot;http://api.tianditu.gov.cn/v4.0/image/map/maptype/satellitepoi.png&quot;,      layer: TMAP_HYBRID_MAP,    &#125;,    &#123;      title: &quot;åœ°å½¢&quot;,      icon: &quot; http://api.tianditu.gov.cn/v4.0/image/map/maptype/terrain.png&quot;,      layer: TMAP_TERRAIN_MAP,    &#125;,    &#123;  title: &quot;åœ°å½¢æ··åˆ&quot;,  icon: &quot; http://api.tianditu.gov.cn/v4.0/image/map/maptype/terrainpoi.png&quot;,      layer: TMAP_TERRAIN_HYBRID_MAP,  &#125;,]);this.map.addControl(ctrl);</code></pre><h3 id="è·å–åœ°å›¾ä¸­å¿ƒåæ ‡ç‚¹"><a href="#è·å–åœ°å›¾ä¸­å¿ƒåæ ‡ç‚¹" class="headerlink" title="è·å–åœ°å›¾ä¸­å¿ƒåæ ‡ç‚¹"></a>è·å–åœ°å›¾ä¸­å¿ƒåæ ‡ç‚¹</h3><pre><code>getMapCenter() &#123;  this.$message(    &quot;åœ°å›¾ä¸­å¿ƒåæ ‡ç‚¹:&quot; +      this.map.getCenter().getLng() +      &quot;,&quot; +      this.map.getCenter().getLat()  );&#125;,</code></pre><h3 id="è·å–åœ°å›¾ç¼©æ”¾çº§åˆ«"><a href="#è·å–åœ°å›¾ç¼©æ”¾çº§åˆ«" class="headerlink" title="è·å–åœ°å›¾ç¼©æ”¾çº§åˆ«"></a>è·å–åœ°å›¾ç¼©æ”¾çº§åˆ«</h3><pre><code>getMapZoom() &#123;  this.$message(&quot;åœ°å›¾ç¼©æ”¾çº§åˆ«:&quot; + this.map.getZoom());&#125;,</code></pre><h3 id="è·å–åœ°å›¾å½“å‰å¯è§†èŒƒå›´åæ ‡"><a href="#è·å–åœ°å›¾å½“å‰å¯è§†èŒƒå›´åæ ‡" class="headerlink" title="è·å–åœ°å›¾å½“å‰å¯è§†èŒƒå›´åæ ‡"></a>è·å–åœ°å›¾å½“å‰å¯è§†èŒƒå›´åæ ‡</h3><pre><code>getMapBounds() &#123;  let bs = this.map.getBounds(); //è·å–å¯è§†åŒºåŸŸ`  let bssw = bs.getSouthWest(); //å¯è§†åŒºåŸŸå·¦ä¸‹è§’`  let bsne = bs.getNorthEast(); //å¯è§†åŒºåŸŸå³ä¸Šè§’`  this.$message(`    &quot;å½“å‰åœ°å›¾å¯è§†èŒƒå›´æ˜¯:&quot; +      bssw.getLng() +      &quot;,&quot; +      bssw.getLat() +      &quot;åˆ°&quot; +      bsne.getLng() +      &quot;,&quot; +      bsne.getLat()  );&#125;,</code></pre><p>ç›®å‰çš„è¿™äº› api éƒ½å¯ä»¥ä»å¤©åœ°å›¾å®˜ç½‘æ‰¾åˆ°ï¼Œå¦‚æœä½ éœ€è¦è¦æ›´å¤šéœ€æ±‚ï¼Œå®˜æ–¹ä¹Ÿè®¸ä¹Ÿæœ‰ç°æˆçš„ apiã€‚å»ºè®®å…ˆç†Ÿæ‚‰ä¸€ä¸‹å®˜æ–¹ api å†è¿›è¡Œå¼€å‘ã€‚</p><h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><ul><li>å¤©åœ°å›¾å®˜ç½‘ï¼š<a href="https://www.tianditu.gov.cn/">https://www.tianditu.gov.cn/</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>30ä¸ªç±»æ‰‹å†™Springæ ¸å¿ƒåŸç†ä¹‹è‡ªå®šä¹‰ORM</title>
      <link href="/2021/12/21/article7/"/>
      <url>/2021/12/21/article7/</url>
      
        <content type="html"><![CDATA[<h2 id="1-å®ç°æ€è·¯æ¦‚è¿°"><a href="#1-å®ç°æ€è·¯æ¦‚è¿°" class="headerlink" title="1 å®ç°æ€è·¯æ¦‚è¿°#"></a>1 å®ç°æ€è·¯æ¦‚è¿°<a href="https://www.cnblogs.com/gupaoedu-tom/p/15697485.html#1--%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF%E6%A6%82%E8%BF%B0">#</a></h2><h3 id="1-1-ä»-ResultSet-è¯´èµ·"><a href="#1-1-ä»-ResultSet-è¯´èµ·" class="headerlink" title="1.1 ä» ResultSet è¯´èµ·#"></a>1.1 ä» ResultSet è¯´èµ·<a href="https://www.cnblogs.com/gupaoedu-tom/p/15697485.html#11--%E4%BB%8Eresultset%E8%AF%B4%E8%B5%B7">#</a></h3><p>è¯´åˆ° ResultSetï¼Œæœ‰ Java å¼€å‘ç»éªŒçš„â€œå°ä¼™ä¼´â€è‡ªç„¶æœ€ç†Ÿæ‚‰ä¸è¿‡äº†ï¼Œä¸è¿‡æˆ‘ç›¸ä¿¡å¯¹äºå¤§å¤šæ•°äººæ¥è¯´ä¹Ÿç®—æ˜¯â€œæœ€ç†Ÿæ‚‰çš„é™Œç”Ÿäººâ€ã€‚ä» ResultSet å–å€¼æ“ä½œå¤§å®¶éƒ½ä¼šï¼Œæ¯”å¦‚ï¼š</p><pre><code>private static List&lt;Member&gt; select(String sql) &#123;    List&lt;Member&gt; result = new ArrayList&lt;&gt;();    Connection con = null;    PreparedStatement pstm = null;    ResultSet rs = null;    try &#123;        //1. åŠ è½½é©±åŠ¨ç±»        Class.forName(&quot;com.mysql.jdbc.Driver&quot;);        //2. å»ºç«‹è¿æ¥        con = DriverManager.getConnection(&quot;jdbc:mysql://127.0.0.1:3306/gp-vip-spring-db-demo&quot;, &quot;root&quot;,&quot;123456&quot;);        //3. åˆ›å»ºè¯­å¥é›†        pstm =  con.prepareStatement(sql);        //4. æ‰§è¡Œè¯­å¥é›†        rs = pstm.executeQuery();        while (rs.next())&#123;            Member instance = new Member();            instance.setId(rs.getLong(&quot;id&quot;));            instance.setName(rs.getString(&quot;name&quot;));            instance.setAge(rs.getInt(&quot;age&quot;));            instance.setAddr(rs.getString(&quot;addr&quot;));            result.add(instance);        &#125;        //5. è·å–ç»“æœé›†    &#125;catch (Exception e)&#123;        e.printStackTrace();    &#125;    //6. å…³é—­ç»“æœé›†ã€å…³é—­è¯­å¥é›†ã€å…³é—­è¿æ¥    finally &#123;        try &#123;            rs.close();            pstm.close();            con.close();        &#125;catch (Exception e)&#123;            e.printStackTrace();        &#125;    &#125;    return result;&#125;</code></pre><p>ä»¥ä¸Šæˆ‘ä»¬åœ¨æ²¡æœ‰ä½¿ç”¨æ¡†æ¶ä»¥å‰çš„å¸¸è§„æ“ä½œã€‚éšç€ä¸šåŠ¡å’Œå¼€å‘é‡çš„å¢åŠ ï¼Œåœ¨æ•°æ®æŒä¹…å±‚è¿™æ ·çš„é‡å¤ä»£ç å‡ºç°é¢‘æ¬¡éå¸¸é«˜ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°±æƒ³åˆ°å°†éåŠŸèƒ½æ€§ä»£ç å’Œä¸šåŠ¡ä»£ç è¿›è¡Œåˆ†ç¦»ã€‚æˆ‘ä»¬é¦–å…ˆæƒ³åˆ°å°† ResultSet å°è£…æ•°æ®çš„ä»£ç é€»è¾‘åˆ†ç¦»ï¼Œå¢åŠ ä¸€ä¸ª mapperRow()æ–¹æ³•ï¼Œä¸“é—¨å¤„ç†å¯¹ç»“æœçš„å°è£…ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>private static List&lt;Member&gt; select(String sql) &#123;    List&lt;Member&gt; result = new ArrayList&lt;&gt;();    Connection con = null;    PreparedStatement pstm = null;    ResultSet rs = null;    try &#123;        //1. åŠ è½½é©±åŠ¨ç±»        Class.forName(&quot;com.mysql.jdbc.Driver&quot;);        //2. å»ºç«‹è¿æ¥        con = DriverManager.getConnection(&quot;jdbc:mysql://127.0.0.1:3306/gp-vip-spring-db-demo&quot;, &quot;root&quot;,&quot;123456&quot;);        //3. åˆ›å»ºè¯­å¥é›†        pstm =  con.prepareStatement(sql);        //4. æ‰§è¡Œè¯­å¥é›†        rs = pstm.executeQuery();        while (rs.next())&#123;            Member instance = mapperRow(rs,rs.getRow());            result.add(instance);        &#125;        //5. è·å–ç»“æœé›†    &#125;catch (Exception e)&#123;        e.printStackTrace();    &#125;    //6. å…³é—­ç»“æœé›†ã€å…³é—­è¯­å¥é›†ã€å…³é—­è¿æ¥    finally &#123;        try &#123;            rs.close();            pstm.close();            con.close();        &#125;catch (Exception e)&#123;            e.printStackTrace();        &#125;    &#125;    return result;&#125;private static Member mapperRow(ResultSet rs, int i) throws Exception &#123;    Member instance = new Member();    instance.setId(rs.getLong(&quot;id&quot;));    instance.setName(rs.getString(&quot;name&quot;));    instance.setAge(rs.getInt(&quot;age&quot;));    instance.setAddr(rs.getString(&quot;addr&quot;));    return instance;&#125;</code></pre><p>ä½†åœ¨çœŸå®çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œè¿™æ ·çš„ä»£ç é€»è¾‘é‡å¤ç‡å®åœ¨å¤ªé«˜ï¼Œä¸Šé¢çš„æ”¹é€ åªèƒ½åº”ç”¨ Member ç±»ï¼Œæ¢ä¸€ä¸ªå®ä½“ç±»åˆè¦é‡æ–°å°è£…ï¼Œèªæ˜çš„ç¨‹åºå‘˜è‚¯å®šä¸ä¼šé€šè¿‡çº¯ä½“åŠ›åŠ³åŠ¨ç»™æ¯ä¸€ä¸ªå®ä½“ç±»å†™ä¸€ä¸ª mapperRow()æ–¹æ³•ï¼Œä¸€å®šä¼šæƒ³åˆ°ä»£ç å¤ç”¨æ–¹æ¡ˆã€‚æˆ‘ä»¬ä¸å¦¨æ¥åšè¿™æ ·ä¸€ä¸ªæ”¹é€ ã€‚<br>å…ˆåˆ›å»º Member ç±»ï¼š</p><pre><code>package com.gupaoedu.vip.orm.demo.entity;import lombok.Data;import javax.persistence.Entity;import javax.persistence.Id;import javax.persistence.Table;import java.io.Serializable;@Entity@Table(name=&quot;t_member&quot;)@Datapublic class Member implements Serializable &#123;    @Id private Long id;    private String name;    private String addr;    private Integer age;    @Override    public String toString() &#123;        return &quot;Member&#123;&quot; +                &quot;id=&quot; + id +                &quot;, name=&#39;&quot; + name + &#39;\&#39;&#39; +                &quot;, addr=&#39;&quot; + addr + &#39;\&#39;&#39; +                &quot;, age=&quot; + age +                &#39;&#125;&#39;;    &#125;&#125;</code></pre><p>â€‹<br> ä¼˜åŒ– JDBC æ“ä½œï¼š</p><p>â€‹<br> public static void main(String[] args) {<br>Member condition = new Member();<br>condition.setName(â€œTomâ€);<br>condition.setAge(19);<br>List&lt;?&gt; result = select(condition);<br>System.out.println(Arrays.toString(result.toArray()));<br>}</p><pre><code>private static List&lt;?&gt; select(Object condition) &#123;    List&lt;Object&gt; result = new ArrayList&lt;&gt;();    Class&lt;?&gt; entityClass = condition.getClass();    Connection con = null;    PreparedStatement pstm = null;    ResultSet rs = null;    try &#123;        //1. åŠ è½½é©±åŠ¨ç±»        Class.forName(&quot;com.mysql.jdbc.Driver&quot;);        //2. å»ºç«‹è¿æ¥        con = DriverManager.getConnection(&quot;jdbc:mysql://127.0.0.1:3306/gp-vip-spring-db-demo? characterEncoding=UTF-8&amp;    rewriteBatchedStatements=true&quot;,&quot;root&quot;,&quot;123456&quot;);        //æ ¹æ®ç±»åæ‰¾å±æ€§å        Map&lt;String,String&gt; columnMapper = new HashMap&lt;String,String&gt;();        //æ ¹æ®å±æ€§åæ‰¾å­—æ®µå        Map&lt;String,String&gt; fieldMapper = new HashMap&lt;String,String&gt;();        Field[] fields =  entityClass.getDeclaredFields();        for (Field field : fields) &#123;            field.setAccessible(true);            String fieldName = field.getName();            if(field.isAnnotationPresent(Column.class))&#123;                Column column = field.getAnnotation(Column.class);                String columnName = column.name();                columnMapper.put(columnName,fieldName);                fieldMapper.put(fieldName,columnName);            &#125;else &#123;                //é»˜è®¤å°±æ˜¯å­—æ®µåã€å±æ€§åä¸€è‡´                columnMapper.put(fieldName, fieldName);                fieldMapper.put(fieldName,fieldName);            &#125;        &#125;        //3. åˆ›å»ºè¯­å¥é›†        Table table = entityClass.getAnnotation(Table.class);        String sql = &quot;select * from &quot; + table.name();        StringBuffer where = new StringBuffer(&quot; where 1=1 &quot;);        for (Field field : fields) &#123;            Object value =field.get(condition);            if(null != value)&#123;                if(String.class == field.getType()) &#123;                    where.append(&quot; and &quot; + fieldMapper.get(field.getName()) + &quot; = &#39;&quot; + value + &quot;&#39;&quot;);                &#125;else&#123;                    where.append(&quot; and &quot; + fieldMapper.get(field.getName()) + &quot; = &quot; + value + &quot;&quot;);                &#125;                //å…¶ä»–çš„åœ¨è¿™é‡Œå°±ä¸ä¸€ä¸€åˆ—ä¸¾ï¼Œåé¢æˆ‘ä»¬æ‰‹å†™ORMæ¡†æ¶æ—¶ä¼šå®Œå–„            &#125;        &#125;        System.out.println(sql + where.toString());        pstm =  con.prepareStatement(sql + where.toString());        //4. æ‰§è¡Œè¯­å¥é›†        rs = pstm.executeQuery();        //å…ƒæ•°æ®ï¼Ÿ        //ä¿å­˜äº†å¤„ç†çœŸæ­£æ•°å€¼ä»¥å¤–çš„æ‰€æœ‰é™„åŠ ä¿¡æ¯        int columnCounts = rs.getMetaData().getColumnCount();        while (rs.next())&#123;            Object instance = entityClass.newInstance();            for (int i = 1; i &lt;= columnCounts; i++) &#123;                //å®ä½“ç±»å±æ€§åï¼Œå¯¹åº”æ•°æ®åº“è¡¨çš„å­—æ®µå                //å¯ä»¥é€šè¿‡åå°„æœºåˆ¶æ‹¿åˆ°å®ä½“ç±»çš„æ‰€æœ‰å­—æ®µ                //ä»rsä¸­å–å¾—å½“å‰è¿™ä¸ªæ¸¸æ ‡ä¸‹çš„ç±»å                String columnName = rs.getMetaData().getColumnName(i);                //æœ‰å¯èƒ½æ˜¯ç§æœ‰çš„                Field field = entityClass.getDeclaredField(columnMapper.get(columnName));                field.setAccessible(true);                field.set(instance,rs.getObject(columnName));            &#125;            result.add(instance);        &#125;        //5. è·å–ç»“æœé›†    &#125;catch (Exception e)&#123;        e.printStackTrace();    &#125;    //6. å…³é—­ç»“æœé›†ã€å…³é—­è¯­å¥é›†ã€å…³é—­è¿æ¥    finally &#123;        try &#123;            rs.close();            pstm.close();            con.close();        &#125;catch (Exception e)&#123;            e.printStackTrace();        &#125;    &#125;    return result;&#125;</code></pre><p>ä¸Šé¢å·§å¦™åœ°åˆ©ç”¨åå°„æœºåˆ¶è¯»å– Class ä¿¡æ¯å’Œ Annotation ä¿¡æ¯ï¼Œå°†æ•°æ®åº“è¡¨ä¸­çš„åˆ—å’Œç±»ä¸­çš„å­—æ®µè¿›è¡Œå…³è”æ˜ å°„å¹¶èµ‹å€¼ï¼Œä»¥å‡å°‘é‡å¤ä»£ç ã€‚</p><h3 id="1-2-ä¸ºä»€ä¹ˆéœ€è¦-ORM-æ¡†æ¶"><a href="#1-2-ä¸ºä»€ä¹ˆéœ€è¦-ORM-æ¡†æ¶" class="headerlink" title="1.2 ä¸ºä»€ä¹ˆéœ€è¦ ORM æ¡†æ¶#"></a>1.2 ä¸ºä»€ä¹ˆéœ€è¦ ORM æ¡†æ¶<a href="https://www.cnblogs.com/gupaoedu-tom/p/15697485.html#12--%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81orm%E6%A1%86%E6%9E%B6">#</a></h3><p>é€šè¿‡å‰é¢çš„è®²è§£ï¼Œæˆ‘ä»¬å·²ç»äº†è§£ ORM æ¡†æ¶çš„åŸºæœ¬å®ç°åŸç†ã€‚ORM æ˜¯æŒ‡å¯¹è±¡å…³ç³»æ˜ å°„ï¼ˆObject Relation Mappingï¼‰ï¼Œæ˜ å°„çš„ä¸åªæ˜¯å¯¹è±¡å€¼ï¼Œè¿˜æœ‰å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼Œä¾‹å¦‚ä¸€å¯¹å¤šã€å¤šå¯¹å¤šã€ä¸€å¯¹ä¸€è¿™æ ·çš„è¡¨å…³ç³»ã€‚ç°åœ¨å¸‚é¢ä¸Š ORM æ¡†æ¶ä¹Ÿéå¸¸å¤šï¼Œæœ‰å¤§å®¶æ‰€ç†ŸçŸ¥çš„ Hibernateã€Spring JDBCã€MyBatisã€JPA ç­‰ã€‚åœ¨è¿™é‡Œåšä¸€ä¸ªç®€å•çš„æ€»ç»“ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚</p><table><thead><tr><th>åç§°</th><th>ç‰¹å¾</th><th>æè¿°</th></tr></thead><tbody><tr><td>Hibernate</td><td>å…¨è‡ªåŠ¨ï¼ˆæŒ¡ï¼‰</td><td>ä¸éœ€è¦å†™ä¸€å¥ SQL</td></tr><tr><td>MyBatis</td><td>åŠè‡ªåŠ¨ï¼ˆæŒ¡ï¼‰</td><td>æ‰‹è‡ªä¸€ä½“ï¼Œæ”¯æŒç®€å•çš„æ˜ å°„ï¼Œå¤æ‚å…³ç³»éœ€è¦è‡ªå·±å†™ SQL</td></tr><tr><td>Spring JDBC</td><td>çº¯æ‰‹åŠ¨ï¼ˆæŒ¡ï¼‰</td><td>æ‰€æœ‰çš„ SQL éƒ½è¦è‡ªå·±å†™ï¼Œå®ƒå¸®æˆ‘ä»¬è®¾è®¡äº†ä¸€å¥—æ ‡å‡†æµç¨‹</td></tr></tbody></table><p>æ—¢ç„¶å¸‚é¢ä¸Šæœ‰è¿™ä¹ˆå¤šé€‰æ‹©ï¼Œæˆ‘ä¸ºä»€ä¹ˆè¿˜è¦è‡ªå·±å†™ ORM æ¡†æ¶å‘¢ï¼Ÿ<br>è¿™å¾—ä»æˆ‘çš„ä¸€æ¬¡ç©ºé™æ‹…ä»»æ¶æ„å¸ˆçš„ç»éªŒè¯´èµ·ã€‚ç©ºé™é¢ä¸´æœ€å¤§çš„éš¾é¢˜å°±æ˜¯å¦‚ä½•å–å¾—å›¢é˜Ÿâ€œå°ä¼™ä¼´ä»¬â€çš„ä¿¡ä»»ã€‚å½“æ—¶ï¼Œå›¢é˜Ÿæ€»å…±å°± 8 äººï¼Œæ¯ä¸ªäººçš„æ°´å¹³å‚å·®ä¸é½ï¼Œç”šè‡³æœ‰äº›äººè¿˜æ²¡æ¥è§¦è¿‡ MySQLï¼Œè¯¸å¦‚ Redis ç­‰ç¼“å­˜ä¸­é—´ä»¶æ›´ä¸ç”¨è¯´äº†ã€‚åŸºæœ¬åªä¼šä½¿ç”¨ Hibernate çš„ CRUDï¼Œè€Œä¸”å·²ç»å½±å“åˆ°äº†ç³»ç»Ÿæ€§èƒ½ã€‚ç”±äºå·¥æœŸç´§å¼ ï¼Œæ²¡æœ‰æ—¶é—´å’Œç²¾åŠ›ç»™å›¢é˜Ÿåšç³»ç»ŸåŸ¹è®­ï¼Œä¹Ÿä¸ºäº†å…¼é¡¾å¯æ§æ€§ï¼Œäºæ˜¯å°±äº§ç”Ÿäº†è‡ªç ” ORM æ¡†æ¶çš„æƒ³æ³•ã€‚æˆ‘åšäº†è¿™æ ·çš„é¡¶å±‚è®¾è®¡ï¼Œä»¥é™ä½å›¢é˜Ÿâ€œå°ä¼™ä¼´ä»¬â€çš„å­˜æ¯æˆæœ¬ï¼Œé¡¶å±‚æ¥å£ç»Ÿä¸€å‚æ•°ã€ç»Ÿä¸€è¿”å›å€¼ï¼Œå…·ä½“å¦‚ä¸‹ã€‚</p><p>**ï¼ˆ1ï¼‰è§„å®šæŸ¥è¯¢æ–¹æ³•çš„æ¥å£æ¨¡å‹ä¸ºï¼š **</p><pre><code>/** * è·å–åˆ—è¡¨ * @param queryRule æŸ¥è¯¢æ¡ä»¶ * @return */List&lt;T&gt; select(QueryRule queryRule) throws Exception;/** * è·å–åˆ†é¡µç»“æœ * @param queryRule æŸ¥è¯¢æ¡ä»¶ * @param pageNo é¡µç  * @param pageSize æ¯é¡µæ¡æ•° * @return */Page&lt;?&gt; select(QueryRule queryRule,int pageNo,int pageSize) throws Exception;/** * æ ¹æ®SQLè·å–åˆ—è¡¨ * @param sql SQLè¯­å¥ * @param args å‚æ•° * @return */List&lt;Map&lt;String,Object&gt;&gt; selectBySql(String sql, Object... args) throws Exception;/** * æ ¹æ®SQLè·å–åˆ†é¡µ * @param sql SQLè¯­å¥ * @param pageNo é¡µç  * @param pageSize æ¯é¡µæ¡æ•° * @return */Page&lt;Map&lt;String,Object&gt;&gt; selectBySqlToPage(String sql, Object [] param, int pageNo, int pageSize) throws Exception;</code></pre><p>â€‹<br> <strong>ï¼ˆ2ï¼‰è§„å®šåˆ é™¤æ–¹æ³•çš„æ¥å£æ¨¡å‹ä¸ºï¼š</strong></p><p>â€‹<br> /**<br>_ åˆ é™¤ä¸€æ¡è®°å½•<br>_ @param entity entity ä¸­çš„ ID ä¸èƒ½ä¸ºç©ºï¼Œå¦‚æœ ID ä¸ºç©ºï¼Œå…¶ä»–æ¡ä»¶ä¸èƒ½ä¸ºç©ºï¼Œéƒ½ä¸ºç©ºä¸äºˆæ‰§è¡Œ<br>_ @return<br>_/<br>boolean delete(T entity) throws Exception;</p><pre><code>/** * æ‰¹é‡åˆ é™¤ * @param list * @return è¿”å›å—å½±å“çš„è¡Œæ•° * @throws Exception */int deleteAll(List&lt;T&gt; list) throws Exception;</code></pre><p><strong>ï¼ˆ3ï¼‰è§„å®šæ’å…¥æ–¹æ³•çš„æ¥å£æ¨¡å‹ä¸ºï¼š</strong></p><pre><code>/** * æ’å…¥ä¸€æ¡è®°å½•å¹¶è¿”å›æ’å…¥åçš„ID * @param entity åªè¦entityä¸ç­‰äºnullï¼Œå°±æ‰§è¡Œæ’å…¥ * @return */PK insertAndReturnId(T entity) throws Exception;/** * æ’å…¥ä¸€æ¡è®°å½•è‡ªå¢ID * @param entity * @return * @throws Exception */boolean insert(T entity) throws Exception;/** * æ‰¹é‡æ’å…¥ * @param list * @return è¿”å›å—å½±å“çš„è¡Œæ•° * @throws Exception */int insertAll(List&lt;T&gt; list) throws Exception;</code></pre><p><strong>ï¼ˆ4ï¼‰è§„å®šä¿®æ”¹æ–¹æ³•çš„æ¥å£æ¨¡å‹ä¸ºï¼š</strong></p><pre><code>/** *  ä¿®æ”¹ä¸€æ¡è®°å½• * @param entity entityä¸­çš„IDä¸èƒ½ä¸ºç©ºï¼Œå¦‚æœIDä¸ºç©ºï¼Œå…¶ä»–æ¡ä»¶ä¸èƒ½ä¸ºç©ºï¼Œéƒ½ä¸ºç©ºä¸äºˆæ‰§è¡Œ * @return * @throws Exception */boolean update(T entity) throws Exception;</code></pre><p>åˆ©ç”¨è¿™å¥—åŸºç¡€çš„ APIï¼Œåé¢æˆ‘åˆåŸºäº Redisã€MongoDBã€ElasticSearchã€Hiveã€HBase å„å°è£…äº†ä¸€å¥—ï¼Œä»¥æ­¤æ¥é™ä½å›¢é˜Ÿçš„å­¦ä¹ æˆæœ¬ï¼Œä¹Ÿå¤§å¤§æå‡äº†ç¨‹åºçš„å¯æ§æ€§ï¼Œæ›´æ–¹ä¾¿ç»Ÿä¸€ç›‘æ§ã€‚</p><h2 id="2-æ­å»ºåŸºç¡€æ¶æ„"><a href="#2-æ­å»ºåŸºç¡€æ¶æ„" class="headerlink" title="2 æ­å»ºåŸºç¡€æ¶æ„#"></a>2 æ­å»ºåŸºç¡€æ¶æ„<a href="https://www.cnblogs.com/gupaoedu-tom/p/15697485.html#2--%E6%90%AD%E5%BB%BA%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84">#</a></h2><h3 id="2-1-Page"><a href="#2-1-Page" class="headerlink" title="2.1 Page#"></a>2.1 Page<a href="https://www.cnblogs.com/gupaoedu-tom/p/15697485.html#21--page">#</a></h3><p>å®šä¹‰ Page ç±»çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºåé¢çš„åˆ†é¡µæŸ¥è¯¢ç»Ÿä¸€è¿”å›ç»“æœåšé¡¶å±‚æ”¯æŒï¼Œå…¶ä¸»è¦åŠŸèƒ½åŒ…æ‹¬åˆ†é¡µé€»è¾‘çš„å°è£…ã€åˆ†é¡µæ•°æ®ã€‚</p><pre><code>package javax.core.common;import java.io.Serializable;import java.util.ArrayList;import java.util.List;/** * åˆ†é¡µå¯¹è±¡ï¼ŒåŒ…å«å½“å‰é¡µæ•°æ®åŠåˆ†é¡µä¿¡æ¯ï¼Œå¦‚æ€»è®°å½•æ•° * èƒ½å¤Ÿæ”¯æŒå’ŒJQuery EasyUIç›´æ¥å¯¹æ¥ï¼Œèƒ½å¤Ÿæ”¯æŒå’ŒBootStrap Tableç›´æ¥å¯¹æ¥ */public class Page&lt;T&gt; implements Serializable &#123;   private static final long serialVersionUID = 1L;   private static final int DEFAULT_PAGE_SIZE = 20;   private int pageSize = DEFAULT_PAGE_SIZE; //æ¯é¡µçš„è®°å½•æ•°   private long start; //å½“å‰é¡µç¬¬ä¸€æ¡æ•°æ®åœ¨Listä¸­çš„ä½ç½®ï¼Œä»0å¼€å§‹   private List&lt;T&gt; rows; //å½“å‰é¡µä¸­å­˜æ”¾çš„è®°å½•ï¼Œç±»å‹ä¸€èˆ¬ä¸ºList   private long total; //æ€»è®°å½•æ•°   /**    * æ„é€ æ–¹æ³•ï¼Œåªæ„é€ ç©ºé¡µ    */   public Page() &#123;      this(0, 0, DEFAULT_PAGE_SIZE, new ArrayList&lt;T&gt;());   &#125;   /**    * é»˜è®¤æ„é€ æ–¹æ³•    *    * @param start æœ¬é¡µæ•°æ®åœ¨æ•°æ®åº“ä¸­çš„èµ·å§‹ä½ç½®    * @param totalSize æ•°æ®åº“ä¸­æ€»è®°å½•æ¡æ•°    * @param pageSize æœ¬é¡µå®¹é‡    * @param rows æœ¬é¡µåŒ…å«çš„æ•°æ®    */   public Page(long start, long totalSize, int pageSize, List&lt;T&gt; rows) &#123;      this.pageSize = pageSize;      this.start = start;      this.total = totalSize;      this.rows = rows;   &#125;   /**    * å–æ€»è®°å½•æ•°    */   public long getTotal() &#123;      return this.total;   &#125;   public void setTotal(long total) &#123;      this.total = total;   &#125;   /**    * å–æ€»é¡µæ•°    */   public long getTotalPageCount() &#123;      if (total % pageSize == 0)&#123;         return total / pageSize;      &#125;else&#123;         return total / pageSize + 1;      &#125;   &#125;   /**    * å–æ¯é¡µæ•°æ®å®¹é‡    */   public int getPageSize() &#123;      return pageSize;   &#125;   /**    * å–å½“å‰é¡µä¸­çš„è®°å½•    */   public List&lt;T&gt; getRows() &#123;      return rows;   &#125;   public void setRows(List&lt;T&gt; rows) &#123;      this.rows = rows;   &#125;   /**    * å–è¯¥é¡µçš„å½“å‰é¡µç ï¼Œé¡µç ä»1å¼€å§‹    */   public long getPageNo() &#123;      return start / pageSize + 1;   &#125;   /**    * è¯¥é¡µæ˜¯å¦æœ‰ä¸‹ä¸€é¡µ    */   public boolean hasNextPage() &#123;      return this.getPageNo() &lt; this.getTotalPageCount() - 1;   &#125;   /**    * è¯¥é¡µæ˜¯å¦æœ‰ä¸Šä¸€é¡µ    */   public boolean hasPreviousPage() &#123;      return this.getPageNo() &gt; 1;   &#125;   /**    * è·å–ä»»æ„ä¸€é¡µç¬¬ä¸€æ¡æ•°æ®åœ¨æ•°æ®é›†ä¸­çš„ä½ç½®ï¼Œæ¯é¡µæ¡æ•°ä½¿ç”¨é»˜è®¤å€¼    *    * @see #getStartOfPage(int,int)    */   protected static int getStartOfPage(int pageNo) &#123;      return getStartOfPage(pageNo, DEFAULT_PAGE_SIZE);   &#125;   /**    * è·å–ä»»æ„ä¸€é¡µç¬¬ä¸€æ¡æ•°æ®åœ¨æ•°æ®é›†ä¸­çš„ä½ç½®    *    * @param pageNo ä»1å¼€å§‹çš„é¡µå·    * @param pageSize æ¯é¡µè®°å½•æ¡æ•°    * @return è¯¥é¡µç¬¬ä¸€æ¡æ•°æ®    */   public static int getStartOfPage(int pageNo, int pageSize) &#123;      return (pageNo - 1) * pageSize;   &#125;&#125;</code></pre><p>â€‹</p><h3 id="2-2-ResultMsg"><a href="#2-2-ResultMsg" class="headerlink" title="2.2 ResultMsg#"></a>2.2 ResultMsg<a href="https://www.cnblogs.com/gupaoedu-tom/p/15697485.html#22--resultmsg">#</a></h3><pre><code>ResultMsgç±»ä¸»è¦æ˜¯ä¸ºç»Ÿä¸€è¿”å›ç»“æœåšçš„é¡¶å±‚è®¾è®¡ï¼Œä¸»è¦åŒ…æ‹¬çŠ¶æ€ç ã€ç»“æœè¯´æ˜å†…å®¹å’Œè¿”å›æ•°æ®ã€‚</code></pre><p>â€‹<br> package javax.core.common;</p><pre><code>import java.io.Serializable;//åº•å±‚è®¾è®¡public class ResultMsg&lt;T&gt; implements Serializable &#123;   private static final long serialVersionUID = 2635002588308355785L;   private int status; //çŠ¶æ€ç ï¼Œç³»ç»Ÿçš„è¿”å›ç    private String msg;  //çŠ¶æ€ç çš„è§£é‡Š   private T data;  //æ”¾ä»»æ„ç»“æœ   public ResultMsg() &#123;&#125;   public ResultMsg(int status) &#123;      this.status = status;   &#125;   public ResultMsg(int status, String msg) &#123;      this.status = status;      this.msg = msg;   &#125;   public ResultMsg(int status, T data) &#123;      this.status = status;      this.data = data;   &#125;   public ResultMsg(int status, String msg, T data) &#123;      this.status = status;      this.msg = msg;      this.data = data;   &#125;   public int getStatus() &#123;      return status;   &#125;   public void setStatus(int status) &#123;      this.status = status;   &#125;   public String getMsg() &#123;      return msg;   &#125;   public void setMsg(String msg) &#123;      this.msg = msg;   &#125;   public T getData() &#123;      return data;   &#125;   public void setData(T data) &#123;      this.data = data;   &#125;&#125;</code></pre><h3 id="2-3-BaseDao"><a href="#2-3-BaseDao" class="headerlink" title="2.3 BaseDao#"></a>2.3 BaseDao<a href="https://www.cnblogs.com/gupaoedu-tom/p/15697485.html#23--basedao">#</a></h3><p>ä½œä¸ºæ‰€æœ‰ BaseDao æŒä¹…åŒ–æ¡†æ¶çš„é¡¶å±‚æ¥å£ï¼Œä¸»è¦å®šä¹‰å¢ã€åˆ ã€æ”¹ã€æŸ¥ç»Ÿä¸€çš„å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ã€‚</p><pre><code>package javax.core.common.jdbc;import com.gupaoedu.vip.orm.framework.QueryRule;import javax.core.common.Page;import java.util.List;import java.util.Map;public interface BaseDao&lt;T,PK&gt; &#123;    /**     * è·å–åˆ—è¡¨     * @param queryRule æŸ¥è¯¢æ¡ä»¶     * @return     */    List&lt;T&gt; select(QueryRule queryRule) throws Exception;    /**     * è·å–åˆ†é¡µç»“æœ     * @param queryRule æŸ¥è¯¢æ¡ä»¶     * @param pageNo é¡µç      * @param pageSize æ¯é¡µæ¡æ•°     * @return     */    Page&lt;?&gt; select(QueryRule queryRule,int pageNo,int pageSize) throws Exception;    /**     * æ ¹æ®SQLè·å–åˆ—è¡¨     * @param sql SQLè¯­å¥     * @param args å‚æ•°     * @return     */    List&lt;Map&lt;String,Object&gt;&gt; selectBySql(String sql, Object... args) throws Exception;    /**     * æ ¹æ®SQLè·å–åˆ†é¡µ     * @param sql SQLè¯­å¥     * @param pageNo é¡µç      * @param pageSize æ¯é¡µæ¡æ•°     * @return     */    Page&lt;Map&lt;String,Object&gt;&gt; selectBySqlToPage(String sql, Object [] param, int pageNo, int pageSize) throws Exception;    /**     * åˆ é™¤ä¸€æ¡è®°å½•     * @param entity entityä¸­çš„IDä¸èƒ½ä¸ºç©ºï¼Œå¦‚æœIDä¸ºç©ºï¼Œå…¶ä»–æ¡ä»¶ä¸èƒ½ä¸ºç©ºï¼Œéƒ½ä¸ºç©ºåˆ™ä¸äºˆæ‰§è¡Œ     * @return     */    boolean delete(T entity) throws Exception;    /**     * æ‰¹é‡åˆ é™¤     * @param list     * @return è¿”å›å—å½±å“çš„è¡Œæ•°     * @throws Exception     */    int deleteAll(List&lt;T&gt; list) throws Exception;    /**     * æ’å…¥ä¸€æ¡è®°å½•å¹¶è¿”å›æ’å…¥åçš„ID     * @param entity åªè¦entityä¸ç­‰äºnullï¼Œå°±æ‰§è¡Œæ’å…¥æ“ä½œ     * @return     */    PK insertAndReturnId(T entity) throws Exception;    /**     * æ’å…¥ä¸€æ¡è®°å½•è‡ªå¢ID     * @param entity     * @return     * @throws Exception     */    boolean insert(T entity) throws Exception;    /**     * æ‰¹é‡æ’å…¥     * @param list     * @return è¿”å›å—å½±å“çš„è¡Œæ•°     * @throws Exception     */    int insertAll(List&lt;T&gt; list) throws Exception;    /**     *  ä¿®æ”¹ä¸€æ¡è®°å½•     * @param entity entityä¸­çš„IDä¸èƒ½ä¸ºç©ºï¼Œå¦‚æœIDä¸ºç©ºï¼Œå…¶ä»–æ¡ä»¶ä¸èƒ½ä¸ºç©ºï¼Œéƒ½ä¸ºç©ºåˆ™ä¸äºˆæ‰§è¡Œ     * @return     * @throws Exception     */    boolean update(T entity) throws Exception;&#125;### 2.4 QueryRule[#](https://www.cnblogs.com/gupaoedu-tom/p/15697485.html#24--queryrule)</code></pre><p>å¦‚æœç”¨ QueryRule ç±»æ¥æ„å»ºæŸ¥è¯¢æ¡ä»¶ï¼Œç”¨æˆ·åœ¨åšæ¡ä»¶æŸ¥è¯¢æ—¶ä¸éœ€è¦æ‰‹å†™ SQLï¼Œå®ç°ä¸šåŠ¡ä»£ç ä¸ SQL è§£è€¦ã€‚</p><pre><code>package com.gupaoedu.vip.orm.framework;import java.io.Serializable;import java.util.ArrayList;import java.util.List;/** * QueryRuleï¼Œä¸»è¦åŠŸèƒ½ç”¨äºæ„é€ æŸ¥è¯¢æ¡ä»¶ */public final class QueryRule implements Serializable&#123;   private static final long serialVersionUID = 1L;   public static final int ASC_ORDER = 101;   public static final int DESC_ORDER = 102;   public static final int LIKE = 1;   public static final int IN = 2;   public static final int NOTIN = 3;   public static final int BETWEEN = 4;   public static final int EQ = 5;   public static final int NOTEQ = 6;   public static final int GT = 7;   public static final int GE = 8;   public static final int LT = 9;   public static final int LE = 10;   public static final int ISNULL = 11;   public static final int ISNOTNULL = 12;   public static final int ISEMPTY = 13;   public static final int ISNOTEMPTY = 14;   public static final int AND = 201;   public static final int OR = 202;   private List&lt;Rule&gt; ruleList = new ArrayList&lt;Rule&gt;();   private List&lt;QueryRule&gt; queryRuleList = new ArrayList&lt;QueryRule&gt;();   private String propertyName;   private QueryRule() &#123;&#125;   private QueryRule(String propertyName) &#123;      this.propertyName = propertyName;   &#125;   public static QueryRule getInstance() &#123;      return new QueryRule();   &#125;   /**    * æ·»åŠ å‡åºè§„åˆ™    * @param propertyName    * @return    */   public QueryRule addAscOrder(String propertyName) &#123;      this.ruleList.add(new Rule(ASC_ORDER, propertyName));      return this;   &#125;   /**    * æ·»åŠ é™åºè§„åˆ™    * @param propertyName    * @return    */   public QueryRule addDescOrder(String propertyName) &#123;      this.ruleList.add(new Rule(DESC_ORDER, propertyName));      return this;   &#125;   public QueryRule andIsNull(String propertyName) &#123;      this.ruleList.add(new Rule(ISNULL, propertyName).setAndOr(AND));      return this;   &#125;   public QueryRule andIsNotNull(String propertyName) &#123;      this.ruleList.add(new Rule(ISNOTNULL, propertyName).setAndOr(AND));      return this;   &#125;   public QueryRule andIsEmpty(String propertyName) &#123;      this.ruleList.add(new Rule(ISEMPTY, propertyName).setAndOr(AND));      return this;   &#125;   public QueryRule andIsNotEmpty(String propertyName) &#123;      this.ruleList.add(new Rule(ISNOTEMPTY, propertyName).setAndOr(AND));      return this;   &#125;   public QueryRule andLike(String propertyName, Object value) &#123;      this.ruleList.add(new Rule(LIKE, propertyName, new Object[] &#123; value &#125;).setAndOr(AND));      return this;   &#125;   public QueryRule andEqual(String propertyName, Object value) &#123;      this.ruleList.add(new Rule(EQ, propertyName, new Object[] &#123; value &#125;).setAndOr(AND));      return this;   &#125;   public QueryRule andBetween(String propertyName, Object... values) &#123;      this.ruleList.add(new Rule(BETWEEN, propertyName, values).setAndOr(AND));      return this;   &#125;   public QueryRule andIn(String propertyName, List&lt;Object&gt; values) &#123;      this.ruleList.add(new Rule(IN, propertyName, new Object[] &#123; values &#125;).setAndOr(AND));      return this;   &#125;   public QueryRule andIn(String propertyName, Object... values) &#123;      this.ruleList.add(new Rule(IN, propertyName, values).setAndOr(AND));      return this;   &#125;   public QueryRule andNotIn(String propertyName, List&lt;Object&gt; values) &#123;      this.ruleList.add(new Rule(NOTIN, propertyName, new Object[] &#123; values &#125;).setAndOr(AND));      return this;   &#125;   public QueryRule orNotIn(String propertyName, Object... values) &#123;      this.ruleList.add(new Rule(NOTIN, propertyName, values).setAndOr(OR));      return this;   &#125;   public QueryRule andNotEqual(String propertyName, Object value) &#123;      this.ruleList.add(new Rule(NOTEQ, propertyName, new Object[] &#123; value &#125;).setAndOr(AND));      return this;   &#125;   public QueryRule andGreaterThan(String propertyName, Object value) &#123;      this.ruleList.add(new Rule(GT, propertyName, new Object[] &#123; value &#125;).setAndOr(AND));      return this;   &#125;   public QueryRule andGreaterEqual(String propertyName, Object value) &#123;      this.ruleList.add(new Rule(GE, propertyName, new Object[] &#123; value &#125;).setAndOr(AND));      return this;   &#125;   public QueryRule andLessThan(String propertyName, Object value) &#123;      this.ruleList.add(new Rule(LT, propertyName, new Object[] &#123; value &#125;).setAndOr(AND));      return this;   &#125;   public QueryRule andLessEqual(String propertyName, Object value) &#123;      this.ruleList.add(new Rule(LE, propertyName, new Object[] &#123; value &#125;).setAndOr(AND));      return this;   &#125;</code></pre><p>â€‹<br> public QueryRule orIsNull(String propertyName) {<br>this.ruleList.add(new Rule(ISNULL, propertyName).setAndOr(OR));<br>return this;<br>}</p><pre><code>   public QueryRule orIsNotNull(String propertyName) &#123;      this.ruleList.add(new Rule(ISNOTNULL, propertyName).setAndOr(OR));      return this;   &#125;   public QueryRule orIsEmpty(String propertyName) &#123;      this.ruleList.add(new Rule(ISEMPTY, propertyName).setAndOr(OR));      return this;   &#125;   public QueryRule orIsNotEmpty(String propertyName) &#123;      this.ruleList.add(new Rule(ISNOTEMPTY, propertyName).setAndOr(OR));      return this;   &#125;   public QueryRule orLike(String propertyName, Object value) &#123;      this.ruleList.add(new Rule(LIKE, propertyName, new Object[] &#123; value &#125;).setAndOr(OR));      return this;   &#125;   public QueryRule orEqual(String propertyName, Object value) &#123;      this.ruleList.add(new Rule(EQ, propertyName, new Object[] &#123; value &#125;).setAndOr(OR));      return this;   &#125;   public QueryRule orBetween(String propertyName, Object... values) &#123;      this.ruleList.add(new Rule(BETWEEN, propertyName, values).setAndOr(OR));      return this;   &#125;   public QueryRule orIn(String propertyName, List&lt;Object&gt; values) &#123;      this.ruleList.add(new Rule(IN, propertyName, new Object[] &#123; values &#125;).setAndOr(OR));      return this;   &#125;   public QueryRule orIn(String propertyName, Object... values) &#123;      this.ruleList.add(new Rule(IN, propertyName, values).setAndOr(OR));      return this;   &#125;   public QueryRule orNotEqual(String propertyName, Object value) &#123;      this.ruleList.add(new Rule(NOTEQ, propertyName, new Object[] &#123; value &#125;).setAndOr(OR));      return this;   &#125;   public QueryRule orGreaterThan(String propertyName, Object value) &#123;      this.ruleList.add(new Rule(GT, propertyName, new Object[] &#123; value &#125;).setAndOr(OR));      return this;   &#125;   public QueryRule orGreaterEqual(String propertyName, Object value) &#123;      this.ruleList.add(new Rule(GE, propertyName, new Object[] &#123; value &#125;).setAndOr(OR));      return this;   &#125;   public QueryRule orLessThan(String propertyName, Object value) &#123;      this.ruleList.add(new Rule(LT, propertyName, new Object[] &#123; value &#125;).setAndOr(OR));      return this;   &#125;   public QueryRule orLessEqual(String propertyName, Object value) &#123;      this.ruleList.add(new Rule(LE, propertyName, new Object[] &#123; value &#125;).setAndOr(OR));      return this;   &#125;   public List&lt;Rule&gt; getRuleList() &#123;      return this.ruleList;   &#125;   public List&lt;QueryRule&gt; getQueryRuleList() &#123;      return this.queryRuleList;   &#125;   public String getPropertyName() &#123;      return this.propertyName;   &#125;   protected class Rule implements Serializable &#123;      private static final long serialVersionUID = 1L;      private int type;  //è§„åˆ™çš„ç±»å‹      private String property_name;      private Object[] values;      private int andOr = AND;      public Rule(int paramInt, String paramString) &#123;         this.property_name = paramString;         this.type = paramInt;      &#125;      public Rule(int paramInt, String paramString,            Object[] paramArrayOfObject) &#123;         this.property_name = paramString;         this.values = paramArrayOfObject;         this.type = paramInt;      &#125;      public Rule setAndOr(int andOr)&#123;         this.andOr = andOr;         return this;      &#125;      public int getAndOr()&#123;         return this.andOr;      &#125;      public Object[] getValues() &#123;         return this.values;      &#125;      public int getType() &#123;         return this.type;      &#125;      public String getPropertyName() &#123;         return this.property_name;      &#125;   &#125;&#125;</code></pre><h3 id="2-5-Order"><a href="#2-5-Order" class="headerlink" title="2.5 Order#"></a>2.5 Order<a href="https://www.cnblogs.com/gupaoedu-tom/p/15697485.html#25--order">#</a></h3><p>Order ç±»ä¸»è¦ç”¨äºå°è£…æ’åºè§„åˆ™ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>package com.gupaoedu.vip.orm.framework;/** * SQLæ’åºç»„ä»¶ */public class Order &#123;   private boolean ascending; //å‡åºè¿˜æ˜¯é™åº   private String propertyName; //å“ªä¸ªå­—æ®µå‡åºï¼Œå“ªä¸ªå­—æ®µé™åº   public String toString() &#123;      return propertyName + &#39; &#39; + (ascending ? &quot;asc&quot; : &quot;desc&quot;);   &#125;   /**    * Constructor for Order.    */   protected Order(String propertyName, boolean ascending) &#123;      this.propertyName = propertyName;      this.ascending = ascending;   &#125;   /**    * Ascending order    *    * @param propertyName    * @return Order    */   public static Order asc(String propertyName) &#123;      return new Order(propertyName, true);   &#125;   /**    * Descending order    *    * @param propertyName    * @return Order    */   public static Order desc(String propertyName) &#123;      return new Order(propertyName, false);   &#125;&#125;</code></pre><h2 id="3-åŸºäº-Spring-JDBC-å®ç°å…³é”®åŠŸèƒ½"><a href="#3-åŸºäº-Spring-JDBC-å®ç°å…³é”®åŠŸèƒ½" class="headerlink" title="3 åŸºäº Spring JDBC å®ç°å…³é”®åŠŸèƒ½#"></a>3 åŸºäº Spring JDBC å®ç°å…³é”®åŠŸèƒ½<a href="https://www.cnblogs.com/gupaoedu-tom/p/15702051.html#3--%E5%9F%BA%E4%BA%8Espring-jdbc%E5%AE%9E%E7%8E%B0%E5%85%B3%E9%94%AE%E5%8A%9F%E8%83%BD">#</a></h2><h3 id="3-1-ClassMappings"><a href="#3-1-ClassMappings" class="headerlink" title="3.1 ClassMappings#"></a>3.1 ClassMappings<a href="https://www.cnblogs.com/gupaoedu-tom/p/15702051.html#31--classmappings">#</a></h3><p>ClassMappings ä¸»è¦å®šä¹‰åŸºç¡€çš„æ˜ å°„ç±»å‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>package com.tom.orm.framework;import java.lang.reflect.Field;import java.lang.reflect.Method;import java.lang.reflect.Modifier;import java.math.BigDecimal;import java.sql.Date;import java.sql.Timestamp;import java.util.Arrays;import java.util.HashMap;import java.util.HashSet;import java.util.Map;import java.util.Set;public class ClassMappings &#123;   private ClassMappings()&#123;&#125;    static final Set&lt;Class&lt;?&gt;&gt; SUPPORTED_SQL_OBJECTS = new HashSet&lt;Class&lt;?&gt;&gt;();       static &#123;          //åªè¦è¿™é‡Œå†™äº†ï¼Œé»˜è®¤æ”¯æŒè‡ªåŠ¨ç±»å‹è½¬æ¢           Class&lt;?&gt;[] classes = &#123;                   boolean.class, Boolean.class,                   short.class, Short.class,                   int.class, Integer.class,                   long.class, Long.class,                   float.class, Float.class,                   double.class, Double.class,                   String.class,                   Date.class,                   Timestamp.class,                   BigDecimal.class           &#125;;           SUPPORTED_SQL_OBJECTS.addAll(Arrays.asList(classes));       &#125;       static boolean isSupportedSQLObject(Class&lt;?&gt; clazz) &#123;           return clazz.isEnum() || SUPPORTED_SQL_OBJECTS.contains(clazz);       &#125;       public static Map&lt;String, Method&gt; findPublicGetters(Class&lt;?&gt; clazz) &#123;           Map&lt;String, Method&gt; map = new HashMap&lt;String, Method&gt;();           Method[] methods = clazz.getMethods();           for (Method method : methods) &#123;               if (Modifier.isStatic(method.getModifiers()))                   continue;               if (method.getParameterTypes().length != 0)                   continue;               if (method.getName().equals(&quot;getClass&quot;))                   continue;               Class&lt;?&gt; returnType = method.getReturnType();               if (void.class.equals(returnType))                   continue;               if(!isSupportedSQLObject(returnType))&#123;                  continue;               &#125;               if ((returnType.equals(boolean.class)                       || returnType.equals(Boolean.class))                       &amp;&amp; method.getName().startsWith(&quot;is&quot;)                       &amp;&amp; method.getName().length() &gt; 2) &#123;                   map.put(getGetterName(method), method);                   continue;               &#125;               if ( ! method.getName().startsWith(&quot;get&quot;))                   continue;               if (method.getName().length() &lt; 4)                   continue;               map.put(getGetterName(method), method);           &#125;           return map;       &#125;       public static Field[] findFields(Class&lt;?&gt; clazz)&#123;           return clazz.getDeclaredFields();       &#125;       public static Map&lt;String, Method&gt; findPublicSetters(Class&lt;?&gt; clazz) &#123;           Map&lt;String, Method&gt; map = new HashMap&lt;String, Method&gt;();           Method[] methods = clazz.getMethods();           for (Method method : methods) &#123;               if (Modifier.isStatic(method.getModifiers()))                   continue;               if ( ! void.class.equals(method.getReturnType()))                   continue;               if (method.getParameterTypes().length != 1)                   continue;               if ( ! method.getName().startsWith(&quot;set&quot;))                   continue;               if (method.getName().length() &lt; 4)                   continue;               if(!isSupportedSQLObject(method.getParameterTypes()[0]))&#123;                  continue;               &#125;               map.put(getSetterName(method), method);           &#125;           return map;       &#125;       public static String getGetterName(Method getter) &#123;           String name = getter.getName();           if (name.startsWith(&quot;is&quot;))               name = name.substring(2);           else               name = name.substring(3);           return Character.toLowerCase(name.charAt(0)) + name.substring(1);       &#125;       private static String getSetterName(Method setter) &#123;           String name = setter.getName().substring(3);           return Character.toLowerCase(name.charAt(0)) + name.substring(1);       &#125;&#125;</code></pre><h3 id="3-2-EntityOperation"><a href="#3-2-EntityOperation" class="headerlink" title="3.2 EntityOperation#"></a>3.2 EntityOperation<a href="https://www.cnblogs.com/gupaoedu-tom/p/15702051.html#32--entityoperation">#</a></h3><p>EntityOperation ä¸»è¦å®ç°æ•°æ®åº“è¡¨ç»“æ„å’Œå¯¹è±¡ç±»ç»“æ„çš„æ˜ å°„å…³ç³»ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>package com.tom.orm.framework;import java.lang.reflect.Field;import java.lang.reflect.Method;import java.sql.ResultSet;import java.sql.ResultSetMetaData;import java.sql.SQLException;import java.util.HashMap;import java.util.Map;import java.util.TreeMap;import javax.persistence.Column;import javax.persistence.Entity;import javax.persistence.Id;import javax.persistence.Table;import javax.persistence.Transient;import org.apache.log4j.Logger;import org.springframework.jdbc.core.RowMapper;import javax.core.common.utils.StringUtils;/** * å®ä½“å¯¹è±¡çš„åå°„æ“ä½œ * * @param &lt;T&gt; */public class EntityOperation&lt;T&gt; &#123;   private Logger log = Logger.getLogger(EntityOperation.class);   public Class&lt;T&gt; entityClass = null; // æ³›å‹å®ä½“Classå¯¹è±¡   public final Map&lt;String, PropertyMapping&gt; mappings;   public final RowMapper&lt;T&gt; rowMapper;   public final String tableName;   public String allColumn = &quot;*&quot;;   public Field pkField;   public EntityOperation(Class&lt;T&gt; clazz,String pk) throws Exception&#123;      if(!clazz.isAnnotationPresent(Entity.class))&#123;         throw new Exception(&quot;åœ¨&quot; + clazz.getName() + &quot;ä¸­æ²¡æœ‰æ‰¾åˆ°Entityæ³¨è§£ï¼Œä¸èƒ½åšORMæ˜ å°„&quot;);      &#125;      this.entityClass = clazz;      Table table = entityClass.getAnnotation(Table.class);       if (table != null) &#123;             this.tableName = table.name();       &#125; else &#123;             this.tableName =  entityClass.getSimpleName();       &#125;      Map&lt;String, Method&gt; getters = ClassMappings.findPublicGetters(entityClass);       Map&lt;String, Method&gt; setters = ClassMappings.findPublicSetters(entityClass);       Field[] fields = ClassMappings.findFields(entityClass);       fillPkFieldAndAllColumn(pk,fields);       this.mappings = getPropertyMappings(getters, setters, fields);       this.allColumn = this.mappings.keySet().toString().replace(&quot;[&quot;, &quot;&quot;).replace(&quot;]&quot;,&quot;&quot;). replaceAll(&quot; &quot;,&quot;&quot;);       this.rowMapper = createRowMapper();   &#125;    Map&lt;String, PropertyMapping&gt; getPropertyMappings(Map&lt;String, Method&gt; getters, Map&lt;String, Method&gt; setters, Field[] fields) &#123;        Map&lt;String, PropertyMapping&gt; mappings = new HashMap&lt;String, PropertyMapping&gt;();        String name;        for (Field field : fields) &#123;            if (field.isAnnotationPresent(Transient.class))                continue;            name = field.getName();            if(name.startsWith(&quot;is&quot;))&#123;               name = name.substring(2);            &#125;            name = Character.toLowerCase(name.charAt(0)) + name.substring(1);            Method setter = setters.get(name);            Method getter = getters.get(name);            if (setter == null || getter == null)&#123;                continue;            &#125;            Column column = field.getAnnotation(Column.class);            if (column == null) &#123;                mappings.put(field.getName(), new PropertyMapping(getter, setter, field));            &#125; else &#123;                mappings.put(column.name(), new PropertyMapping(getter, setter, field));            &#125;        &#125;        return mappings;    &#125;   RowMapper&lt;T&gt; createRowMapper() &#123;           return new RowMapper&lt;T&gt;() &#123;               public T mapRow(ResultSet rs, int rowNum) throws SQLException &#123;                   try &#123;                       T t = entityClass.newInstance();                       ResultSetMetaData meta = rs.getMetaData();                       int columns = meta.getColumnCount();                       String columnName;                       for (int i = 1; i &lt;= columns; i++) &#123;                           Object value = rs.getObject(i);                           columnName = meta.getColumnName(i);                           fillBeanFieldValue(t,columnName,value);                       &#125;                       return t;                   &#125;catch (Exception e) &#123;                       throw new RuntimeException(e);                   &#125;               &#125;           &#125;;       &#125;   protected void fillBeanFieldValue(T t, String columnName, Object value) &#123;       if (value != null) &#123;             PropertyMapping pm = mappings.get(columnName);             if (pm != null) &#123;                 try &#123;               pm.set(t, value);            &#125; catch (Exception e) &#123;               e.printStackTrace();            &#125;             &#125;         &#125;   &#125;   private void fillPkFieldAndAllColumn(String pk, Field[] fields) &#123;      //è®¾å®šä¸»é”®       try &#123;          if(!StringUtils.isEmpty(pk))&#123;             pkField = entityClass.getDeclaredField(pk);             pkField.setAccessible(true);          &#125;       &#125; catch (Exception e) &#123;             log.debug(&quot;æ²¡æ‰¾åˆ°ä¸»é”®åˆ—ï¼Œä¸»é”®åˆ—åå¿…é¡»ä¸å±æ€§åç›¸åŒ&quot;);       &#125;      for (int i = 0 ; i &lt; fields.length ;i ++) &#123;         Field f = fields[i];         if(StringUtils.isEmpty(pk))&#123;            Id id = f.getAnnotation(Id.class);            if(id != null)&#123;               pkField = f;               break;            &#125;         &#125;      &#125;   &#125;   public T parse(ResultSet rs) &#123;      T t = null;      if (null == rs) &#123;         return null;      &#125;      Object value = null;      try &#123;         t = (T) entityClass.newInstance();         for (String columnName : mappings.keySet()) &#123;            try &#123;               value = rs.getObject(columnName);            &#125; catch (Exception e) &#123;               e.printStackTrace();            &#125;            fillBeanFieldValue(t,columnName,value);         &#125;      &#125; catch (Exception ex) &#123;         ex.printStackTrace();      &#125;      return t;   &#125;   public Map&lt;String, Object&gt; parse(T t) &#123;      Map&lt;String, Object&gt; _map = new TreeMap&lt;String, Object&gt;();      try &#123;         for (String columnName : mappings.keySet()) &#123;            Object value = mappings.get(columnName).getter.invoke(t);            if (value == null)               continue;            _map.put(columnName, value);         &#125;      &#125; catch (Exception e) &#123;         e.printStackTrace();      &#125;      return _map;   &#125;   public void println(T t) &#123;      try &#123;         for (String columnName : mappings.keySet()) &#123;            Object value = mappings.get(columnName).getter.invoke(t);            if (value == null)               continue;            System.out.println(columnName + &quot; = &quot; + value);         &#125;      &#125; catch (Exception e) &#123;         e.printStackTrace();      &#125;   &#125;&#125;class PropertyMapping &#123;    final boolean insertable;    final boolean updatable;    final String columnName;    final boolean id;    final Method getter;    final Method setter;    final Class enumClass;    final String fieldName;    public PropertyMapping(Method getter, Method setter, Field field) &#123;        this.getter = getter;        this.setter = setter;        this.enumClass = getter.getReturnType().isEnum() ? getter.getReturnType() : null;        Column column = field.getAnnotation(Column.class);        this.insertable = column == null || column.insertable();        this.updatable = column == null || column.updatable();        this.columnName = column == null ? ClassMappings.getGetterName(getter) : (&quot;&quot;.equals(column.name()) ? ClassMappings.getGetterName    (getter) : column.name());        this.id = field.isAnnotationPresent(Id.class);        this.fieldName = field.getName();    &#125;    @SuppressWarnings(&quot;unchecked&quot;)    Object get(Object target) throws Exception &#123;        Object r = getter.invoke(target);        return enumClass == null ? r : Enum.valueOf(enumClass, (String) r);    &#125;    @SuppressWarnings(&quot;unchecked&quot;)    void set(Object target, Object value) throws Exception &#123;        if (enumClass != null &amp;&amp; value != null) &#123;            value = Enum.valueOf(enumClass, (String) value);        &#125;        //BeanUtils.setProperty(target, fieldName, value);        try &#123;            if(value != null)&#123;                setter.invoke(target, setter.getParameterTypes()[0].cast(value));             &#125;      &#125; catch (Exception e) &#123;         e.printStackTrace();         /**          * å‡ºé”™åŸå› å¦‚æœæ˜¯booleanå­—æ®µã€mysqlå­—æ®µç±»å‹ï¼Œè®¾ç½®tinyint(1)          */         System.err.println(fieldName + &quot;--&quot; + value);      &#125;    &#125;&#125;</code></pre><h3 id="3-3-QueryRuleSqlBuilder"><a href="#3-3-QueryRuleSqlBuilder" class="headerlink" title="3.3 QueryRuleSqlBuilder#"></a>3.3 QueryRuleSqlBuilder<a href="https://www.cnblogs.com/gupaoedu-tom/p/15702051.html#33--queryrulesqlbuilder">#</a></h3><p>QueryRuleSqlBuilder æ ¹æ®ç”¨æˆ·æ„å»ºå¥½çš„ QueryRule æ¥è‡ªåŠ¨ç”Ÿæˆ SQL è¯­å¥ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>package com.tom.orm.framework;import java.util.ArrayList;import java.util.HashMap;import java.util.List;import java.util.Map;import java.util.regex.Matcher;import java.util.regex.Pattern;import org.apache.commons.lang.ArrayUtils;import com.tom.orm.framework.QueryRule.Rule;import javax.core.common.utils.StringUtils;</code></pre><p>â€‹<br> /**<br>_ æ ¹æ® QueryRule è‡ªåŠ¨æ„å»º SQL è¯­å¥<br>_/<br>public class QueryRuleSqlBuilder {</p><pre><code>   private int CURR_INDEX = 0; //è®°å½•å‚æ•°æ‰€åœ¨çš„ä½ç½®   private List&lt;String&gt; properties; //ä¿å­˜åˆ—ååˆ—è¡¨   private List&lt;Object&gt; values; //ä¿å­˜å‚æ•°å€¼åˆ—è¡¨   private List&lt;Order&gt; orders; //ä¿å­˜æ’åºè§„åˆ™åˆ—è¡¨   private String whereSql = &quot;&quot;;   private String orderSql = &quot;&quot;;   private Object [] valueArr = new Object[]&#123;&#125;;   private Map&lt;Object,Object&gt; valueMap = new HashMap&lt;Object,Object&gt;();   /**    * è·å¾—æŸ¥è¯¢æ¡ä»¶    * @return    */   public String getWhereSql()&#123;      return this.whereSql;   &#125;   /**    * è·å¾—æ’åºæ¡ä»¶    * @return    */   public String getOrderSql()&#123;      return this.orderSql;   &#125;   /**    * è·å¾—å‚æ•°å€¼åˆ—è¡¨    * @return    */   public Object [] getValues()&#123;      return this.valueArr;   &#125;   /**    * è·å–å‚æ•°åˆ—è¡¨    * @return    */   public Map&lt;Object,Object&gt; getValueMap()&#123;      return this.valueMap;   &#125;   /**    * åˆ›å»ºSQLæ„é€ å™¨    * @param queryRule    */   public  QueryRuleSqlBuilder(QueryRule queryRule) &#123;      CURR_INDEX = 0;      properties = new ArrayList&lt;String&gt;();      values = new ArrayList&lt;Object&gt;();      orders = new ArrayList&lt;Order&gt;();      for (QueryRule.Rule rule : queryRule.getRuleList()) &#123;         switch (rule.getType()) &#123;         case QueryRule.BETWEEN:            processBetween(rule);            break;         case QueryRule.EQ:            processEqual(rule);            break;         case QueryRule.LIKE:            processLike(rule);            break;         case QueryRule.NOTEQ:            processNotEqual(rule);            break;         case QueryRule.GT:            processGreaterThen(rule);            break;         case QueryRule.GE:            processGreaterEqual(rule);            break;         case QueryRule.LT:            processLessThen(rule);            break;         case QueryRule.LE:            processLessEqual(rule);            break;         case QueryRule.IN:            processIN(rule);            break;         case QueryRule.NOTIN:            processNotIN(rule);            break;         case QueryRule.ISNULL:            processIsNull(rule);            break;         case QueryRule.ISNOTNULL:            processIsNotNull(rule);            break;         case QueryRule.ISEMPTY:            processIsEmpty(rule);            break;         case QueryRule.ISNOTEMPTY:            processIsNotEmpty(rule);            break;         case QueryRule.ASC_ORDER:            processOrder(rule);            break;         case QueryRule.DESC_ORDER:            processOrder(rule);            break;         default:            throw new IllegalArgumentException(&quot;type &quot; + rule.getType() + &quot; not supported.&quot;);         &#125;      &#125;      //æ‹¼è£…whereè¯­å¥      appendWhereSql();      //æ‹¼è£…æ’åºè¯­å¥      appendOrderSql();      //æ‹¼è£…å‚æ•°å€¼      appendValues();   &#125;   /**    * å»æ‰order    *    * @param sql    * @return    */   protected String removeOrders(String sql) &#123;      Pattern p = Pattern.compile(&quot;order\\s*by[\\w|\\W|\\s|\\S]*&quot;, Pattern.CASE_INSENSITIVE);      Matcher m = p.matcher(sql);      StringBuffer sb = new StringBuffer();      while (m.find()) &#123;         m.appendReplacement(sb, &quot;&quot;);      &#125;      m.appendTail(sb);      return sb.toString();   &#125;   /**    * å»æ‰select    *    * @param sql    * @return    */   protected String removeSelect(String sql) &#123;      if(sql.toLowerCase().matches(&quot;from\\s+&quot;))&#123;         int beginPos = sql.toLowerCase().indexOf(&quot;from&quot;);         return sql.substring(beginPos);      &#125;else&#123;         return sql;      &#125;   &#125;   /**    * å¤„ç†like    * @param rule    */   private  void processLike(QueryRule.Rule rule) &#123;      if (ArrayUtils.isEmpty(rule.getValues())) &#123;         return;      &#125;      Object obj = rule.getValues()[0];      if (obj != null) &#123;         String value = obj.toString();         if (!StringUtils.isEmpty(value)) &#123;            value = value.replace(&#39;*&#39;, &#39;%&#39;);            obj = value;         &#125;      &#125;      add(rule.getAndOr(),rule.getPropertyName(),&quot;like&quot;,&quot;%&quot;+rule.getValues()[0]+&quot;%&quot;);   &#125;   /**    * å¤„ç†between    * @param rule    */   private  void processBetween(QueryRule.Rule rule) &#123;      if ((ArrayUtils.isEmpty(rule.getValues()))            || (rule.getValues().length &lt; 2)) &#123;         return;      &#125;      add(rule.getAndOr(),rule.getPropertyName(),&quot;&quot;,&quot;between&quot;,rule.getValues()[0],&quot;and&quot;);      add(0,&quot;&quot;,&quot;&quot;,&quot;&quot;,rule.getValues()[1],&quot;&quot;);   &#125;   /**    * å¤„ç† =    * @param rule    */   private  void processEqual(QueryRule.Rule rule) &#123;      if (ArrayUtils.isEmpty(rule.getValues())) &#123;         return;      &#125;      add(rule.getAndOr(),rule.getPropertyName(),&quot;=&quot;,rule.getValues()[0]);   &#125;   /**    * å¤„ç† &lt;&gt;    * @param rule    */   private  void processNotEqual(QueryRule.Rule rule) &#123;      if (ArrayUtils.isEmpty(rule.getValues())) &#123;         return;      &#125;      add(rule.getAndOr(),rule.getPropertyName(),&quot;&lt;&gt;&quot;,rule.getValues()[0]);   &#125;   /**    * å¤„ç† &gt;    * @param rule    */   private  void processGreaterThen(         QueryRule.Rule rule) &#123;      if (ArrayUtils.isEmpty(rule.getValues())) &#123;         return;      &#125;      add(rule.getAndOr(),rule.getPropertyName(),&quot;&gt;&quot;,rule.getValues()[0]);   &#125;   /**    * å¤„ç†&gt;=    * @param rule    */   private  void processGreaterEqual(         QueryRule.Rule rule) &#123;      if (ArrayUtils.isEmpty(rule.getValues())) &#123;         return;      &#125;      add(rule.getAndOr(),rule.getPropertyName(),&quot;&gt;=&quot;,rule.getValues()[0]);   &#125;   /**    * å¤„ç†&lt;    * @param rule    */   private  void processLessThen(QueryRule.Rule rule) &#123;      if (ArrayUtils.isEmpty(rule.getValues())) &#123;         return;      &#125;      add(rule.getAndOr(),rule.getPropertyName(),&quot;&lt;&quot;,rule.getValues()[0]);   &#125;   /**    * å¤„ç†&lt;=    * @param rule    */   private  void processLessEqual(         QueryRule.Rule rule) &#123;      if (ArrayUtils.isEmpty(rule.getValues())) &#123;         return;      &#125;      add(rule.getAndOr(),rule.getPropertyName(),&quot;&lt;=&quot;,rule.getValues()[0]);   &#125;   /**    * å¤„ç†  is null    * @param rule    */   private  void processIsNull(QueryRule.Rule rule) &#123;      add(rule.getAndOr(),rule.getPropertyName(),&quot;is null&quot;,null);   &#125;   /**    * å¤„ç† is not null    * @param rule    */   private  void processIsNotNull(QueryRule.Rule rule) &#123;      add(rule.getAndOr(),rule.getPropertyName(),&quot;is not null&quot;,null);   &#125;   /**    * å¤„ç†  &lt;&gt;&#39;&#39;    * @param rule    */   private  void processIsNotEmpty(QueryRule.Rule rule) &#123;      add(rule.getAndOr(),rule.getPropertyName(),&quot;&lt;&gt;&quot;,&quot;&#39;&#39;&quot;);   &#125;   /**    * å¤„ç† =&#39;&#39;    * @param rule    */   private  void processIsEmpty(QueryRule.Rule rule) &#123;      add(rule.getAndOr(),rule.getPropertyName(),&quot;=&quot;,&quot;&#39;&#39;&quot;);   &#125;</code></pre><p>â€‹<br> /**<br>_ å¤„ç† in å’Œ not in<br>_ @param rule<br>_ @param name<br>_/<br>private void inAndNotIn(QueryRule.Rule rule,String name){<br>if (ArrayUtils.isEmpty(rule.getValues())) {<br>return;<br>}<br>if ((rule.getValues().length == 1) &amp;&amp; (rule.getValues()[0] != null)<br>&amp;&amp; (rule.getValues()[0] instanceof List)) {<br>List<Object> list = (List) rule.getValues()[0];</p><pre><code>         if ((list != null) &amp;&amp; (list.size() &gt; 0))&#123;            for (int i = 0; i &lt; list.size(); i++) &#123;               if(i == 0 &amp;&amp; i == list.size() - 1)&#123;                  add(rule.getAndOr(),rule.getPropertyName(),&quot;&quot;,name + &quot; (&quot;,list.get(i),&quot;)&quot;);               &#125;else if(i == 0 &amp;&amp; i &lt; list.size() - 1)&#123;                  add(rule.getAndOr(),rule.getPropertyName(),&quot;&quot;,name + &quot; (&quot;,list.get(i),&quot;&quot;);               &#125;               if(i &gt; 0 &amp;&amp; i &lt; list.size() - 1)&#123;                  add(0,&quot;&quot;,&quot;,&quot;,&quot;&quot;,list.get(i),&quot;&quot;);               &#125;               if(i == list.size() - 1 &amp;&amp; i != 0)&#123;                  add(0,&quot;&quot;,&quot;,&quot;,&quot;&quot;,list.get(i),&quot;)&quot;);               &#125;            &#125;         &#125;      &#125; else &#123;         Object[] list =  rule.getValues();         for (int i = 0; i &lt; list.length; i++) &#123;            if(i == 0 &amp;&amp; i == list.length - 1)&#123;               add(rule.getAndOr(),rule.getPropertyName(),&quot;&quot;,name + &quot; (&quot;,list[i],&quot;)&quot;);            &#125;else if(i == 0 &amp;&amp; i &lt; list.length - 1)&#123;               add(rule.getAndOr(),rule.getPropertyName(),&quot;&quot;,name + &quot; (&quot;,list[i],&quot;&quot;);            &#125;            if(i &gt; 0 &amp;&amp; i &lt; list.length - 1)&#123;               add(0,&quot;&quot;,&quot;,&quot;,&quot;&quot;,list[i],&quot;&quot;);            &#125;            if(i == list.length - 1 &amp;&amp; i != 0)&#123;               add(0,&quot;&quot;,&quot;,&quot;,&quot;&quot;,list[i],&quot;)&quot;);            &#125;         &#125;      &#125;   &#125;   /**    * å¤„ç† not in    * @param rule    */   private void processNotIN(QueryRule.Rule rule)&#123;      inAndNotIn(rule,&quot;not in&quot;);   &#125;   /**    * å¤„ç† in    * @param rule    */   private  void processIN(QueryRule.Rule rule) &#123;      inAndNotIn(rule,&quot;in&quot;);   &#125;   /**    * å¤„ç† order by    * @param rule æŸ¥è¯¢è§„åˆ™    */   private void processOrder(Rule rule) &#123;      switch (rule.getType()) &#123;      case QueryRule.ASC_ORDER:         //propertyNameéç©º         if (!StringUtils.isEmpty(rule.getPropertyName())) &#123;            orders.add(Order.asc(rule.getPropertyName()));         &#125;         break;      case QueryRule.DESC_ORDER:         //propertyNameéç©º         if (!StringUtils.isEmpty(rule.getPropertyName())) &#123;            orders.add(Order.desc(rule.getPropertyName()));         &#125;         break;      default:         break;      &#125;   &#125;</code></pre><p>â€‹<br> /**<br>_ åŠ å…¥ SQL æŸ¥è¯¢è§„åˆ™é˜Ÿåˆ—<br>_ @param andOr and æˆ–è€… or<br>_ @param key åˆ—å<br>_ @param split åˆ—åä¸å€¼ä¹‹é—´çš„é—´éš”<br>_ @param value å€¼<br>_/<br>private void add(int andOr,String key,String split ,Object value){<br>add(andOr,key,split,â€â€,value,â€â€);<br>}</p><pre><code>   /**    * åŠ å…¥SQLæŸ¥è¯¢è§„åˆ™é˜Ÿåˆ—    * @param andOr and æˆ–åˆ™ or    * @param key åˆ—å    * @param split åˆ—åä¸å€¼ä¹‹é—´çš„é—´éš”    * @param prefix å€¼å‰ç¼€    * @param value å€¼    * @param suffix å€¼åç¼€    */   private void add(int andOr,String key,String split,String prefix,Object value,String suffix)&#123;      String andOrStr = (0 == andOr ? &quot;&quot; :(QueryRule.AND == andOr ? &quot; and &quot; : &quot; or &quot;));      properties.add(CURR_INDEX, andOrStr + key + &quot; &quot; + split + prefix + (null != value ? &quot; ? &quot; : &quot; &quot;) + suffix);      if(null != value)&#123;         values.add(CURR_INDEX,value);         CURR_INDEX ++;      &#125;   &#125;</code></pre><p>â€‹<br> /**<br>_ æ‹¼è£… where è¯­å¥<br>_/<br>private void appendWhereSql(){<br>StringBuffer whereSql = new StringBuffer();<br>for (String p : properties) {<br>whereSql.append(p);<br>}<br>this.whereSql = removeSelect(removeOrders(whereSql.toString()));<br>}</p><pre><code>   /**    * æ‹¼è£…æ’åºè¯­å¥    */   private void appendOrderSql()&#123;      StringBuffer orderSql = new StringBuffer();      for (int i = 0 ; i &lt; orders.size(); i ++) &#123;         if(i &gt; 0 &amp;&amp; i &lt; orders.size())&#123;            orderSql.append(&quot;,&quot;);         &#125;         orderSql.append(orders.get(i).toString());      &#125;      this.orderSql = removeSelect(removeOrders(orderSql.toString()));   &#125;   /**    * æ‹¼è£…å‚æ•°å€¼    */   private void appendValues()&#123;      Object [] val = new Object[values.size()];      for (int i = 0; i &lt; values.size(); i ++) &#123;         val[i] = values.get(i);         valueMap.put(i, values.get(i));      &#125;      this.valueArr = val;   &#125;&#125;</code></pre><h3 id="3-4-BaseDaoSupport"><a href="#3-4-BaseDaoSupport" class="headerlink" title="3.4 BaseDaoSupport#"></a>3.4 BaseDaoSupport<a href="https://www.cnblogs.com/gupaoedu-tom/p/15702051.html#34--basedaosupport">#</a></h3><p>BaseDaoSupport ä¸»è¦æ˜¯å¯¹ JdbcTemplate çš„åŒ…è£…ï¼Œä¸‹é¢è®²ä¸€ä¸‹å…¶é‡è¦ä»£ç ï¼Œè¯·â€œå°ä¼™ä¼´ä»¬â€ å…³ æ³¨ å…¬ ä¼— å· ã€ Tom å¼¹æ¶æ„ ã€ï¼Œå›å¤ â€œ Spring â€œ å¯ä¸‹è½½å…¨éƒ¨æºä»£ç ã€‚å…ˆçœ‹å…¨å±€å®šä¹‰ï¼š</p><pre><code>package com.tom.orm.framework;.../** * BaseDao æ‰©å±•ç±»ï¼Œä¸»è¦åŠŸèƒ½æ˜¯æ”¯æŒè‡ªåŠ¨æ‹¼è£…SQLè¯­å¥ï¼Œå¿…é¡»ç»§æ‰¿æ–¹å¯ä½¿ç”¨ * @author Tom */public abstract class BaseDaoSupport&lt;T extends Serializable, PK extends Serializable&gt; implements BaseDao&lt;T,PK&gt; &#123;   private Logger log = Logger.getLogger(BaseDaoSupport.class);   private String tableName = &quot;&quot;;   private JdbcTemplate jdbcTemplateWrite;   private JdbcTemplate jdbcTemplateReadOnly;   private DataSource dataSourceReadOnly;   private DataSource dataSourceWrite;   private EntityOperation&lt;T&gt; op;   @SuppressWarnings(&quot;unchecked&quot;)   protected BaseDaoSupport()&#123;      try&#123;         Class&lt;T&gt; entityClass = GenericsUtils.getSuperClassGenricType(getClass(), 0);         op = new EntityOperation&lt;T&gt;(entityClass,this.getPKColumn());         this.setTableName(op.tableName);      &#125;catch(Exception e)&#123;         e.printStackTrace();      &#125;   &#125;   protected String getTableName() &#123; return tableName; &#125;   protected DataSource getDataSourceReadOnly() &#123; return dataSourceReadOnly;  &#125;   protected DataSource getDataSourceWrite() &#123; return dataSourceWrite;  &#125;   /**    * åŠ¨æ€åˆ‡æ¢è¡¨å    */   protected void setTableName(String tableName) &#123;      if(StringUtils.isEmpty(tableName))&#123;         this.tableName = op.tableName;      &#125;else&#123;         this.tableName = tableName;      &#125;   &#125;   protected void setDataSourceWrite(DataSource dataSourceWrite) &#123;      this.dataSourceWrite = dataSourceWrite;      jdbcTemplateWrite = new JdbcTemplate(dataSourceWrite);   &#125;   protected void setDataSourceReadOnly(DataSource dataSourceReadOnly) &#123;      this.dataSourceReadOnly = dataSourceReadOnly;      jdbcTemplateReadOnly = new JdbcTemplate(dataSourceReadOnly);   &#125;   private JdbcTemplate jdbcTemplateReadOnly() &#123;      return this.jdbcTemplateReadOnly;   &#125;   private JdbcTemplate jdbcTemplateWrite() &#123;      return this.jdbcTemplateWrite;   &#125;   /**    * è¿˜åŸé»˜è®¤è¡¨å    */   protected void restoreTableName()&#123; this.setTableName(op.tableName);  &#125;   /**    * è·å–ä¸»é”®åˆ—åç§°ï¼Œå»ºè®®å­ç±»é‡å†™    * @return    */   protected abstract String getPKColumn();   protected abstract void setDataSource(DataSource dataSource);//æ­¤å¤„æœ‰çœç•¥&#125;</code></pre><p>â€‹<br> ä¸ºäº†ç…§é¡¾ç¨‹åºå‘˜çš„ä¸€èˆ¬ä½¿ç”¨ä¹ æƒ¯ï¼ŒæŸ¥è¯¢æ–¹æ³•çš„å‰ç¼€å‘½åä¸»è¦æœ‰ selectã€getã€loadï¼Œå…¼é¡¾ Hibernate å’Œ MyBatis çš„å‘½åé£æ ¼ã€‚</p><p>â€‹<br> /**<br>_ æŸ¥è¯¢å‡½æ•°ï¼Œä½¿ç”¨æŸ¥è¯¢è§„åˆ™<br>_ ä¾‹å¦‚ä»¥ä¸‹ä»£ç æŸ¥è¯¢æ¡ä»¶ä¸ºåŒ¹é…çš„æ•°æ® *<br>_ @param queryRule æŸ¥è¯¢è§„åˆ™<br>_ @return æŸ¥è¯¢çš„ç»“æœ List<br>*/<br>public List<T> select(QueryRule queryRule) throws Exception{<br>QueryRuleSqlBuilder bulider = new QueryRuleSqlBuilder(queryRule);<br>String ws = removeFirstAnd(bulider.getWhereSql());<br>String whereSql = (â€œâ€.equals(ws) ? ws : (â€œ where â€œ + ws));<br>String sql = â€œselect â€œ + op.allColumn + â€œ from â€œ + getTableName() + whereSql;<br>Object [] values = bulider.getValues();<br>String orderSql = bulider.getOrderSql();<br>orderSql = (StringUtils.isEmpty(orderSql) ? â€œ â€œ : (â€œ order by â€œ + orderSql));<br>sql += orderSql;<br>log.debug(sql);<br>return (List<T>) this.jdbcTemplateReadOnly().query(sql, this.op.rowMapper, values);<br>}</p><pre><code>...   /**    * æ ¹æ®SQLè¯­å¥æ‰§è¡ŒæŸ¥è¯¢ï¼Œå‚æ•°ä¸ºObjectæ•°ç»„å¯¹è±¡    * @param sql æŸ¥è¯¢è¯­å¥    * @param args ä¸ºObjectæ•°ç»„    * @return ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰å¯¹è±¡    */   public List&lt;Map&lt;String,Object&gt;&gt; selectBySql(String sql,Object... args) throws Exception&#123;      return this.jdbcTemplateReadOnly().queryForList(sql,args);   &#125;...   /**    * åˆ†é¡µæŸ¥è¯¢å‡½æ•°ï¼Œä½¿ç”¨æŸ¥è¯¢è§„åˆ™&lt;br&gt;    * ä¾‹å¦‚ä»¥ä¸‹ä»£ç æŸ¥è¯¢æ¡ä»¶ä¸ºåŒ¹é…çš„æ•°æ®    *    * @param queryRule æŸ¥è¯¢è§„åˆ™    * @param pageNo é¡µå·ï¼Œä»1å¼€å§‹    * @param pageSize æ¯é¡µçš„è®°å½•æ¡æ•°    * @return æŸ¥è¯¢çš„ç»“æœPage    */   public Page&lt;T&gt; select(QueryRule queryRule,final int pageNo, final int pageSize) throws Exception&#123;      QueryRuleSqlBuilder bulider = new QueryRuleSqlBuilder(queryRule);      Object [] values = bulider.getValues();      String ws = removeFirstAnd(bulider.getWhereSql());      String whereSql = (&quot;&quot;.equals(ws) ? ws : (&quot; where &quot; + ws));      String countSql = &quot;select count(1) from &quot; + getTableName() + whereSql;      long count = (Long) this.jdbcTemplateReadOnly().queryForMap(countSql, values).get (&quot;count(1)&quot;);      if (count == 0) &#123;         return new Page&lt;T&gt;();      &#125;      long start = (pageNo - 1) * pageSize;      //åœ¨æœ‰æ•°æ®çš„æƒ…å†µä¸‹ï¼Œç»§ç»­æŸ¥è¯¢      String orderSql = bulider.getOrderSql();      orderSql = (StringUtils.isEmpty(orderSql) ? &quot; &quot; : (&quot; order by &quot; + orderSql));      String sql = &quot;select &quot; + op.allColumn +&quot; from &quot; + getTableName() + whereSql + orderSql + &quot; limit &quot; + start + &quot;,&quot; + pageSize;      List&lt;T&gt; list = (List&lt;T&gt;) this.jdbcTemplateReadOnly().query(sql, this.op.rowMapper, values);      log.debug(sql);      return new Page&lt;T&gt;(start, count, pageSize, list);   &#125;...   /**    * åˆ†é¡µæŸ¥è¯¢ç‰¹æ®ŠSQLè¯­å¥    * @param sql è¯­å¥    * @param param  æŸ¥è¯¢æ¡ä»¶    * @param pageNo   é¡µç     * @param pageSize æ¯é¡µå†…å®¹    * @return    */   public Page&lt;Map&lt;String,Object&gt;&gt; selectBySqlToPage(String sql, Object [] param, final int pageNo, final int pageSize) throws Exception &#123;      String countSql = &quot;select count(1) from (&quot; + sql + &quot;) a&quot;;      long count = (Long) this.jdbcTemplateReadOnly().queryForMap(countSql,param).get(&quot;count(1)&quot;);      if (count == 0) &#123;         return new Page&lt;Map&lt;String,Object&gt;&gt;();      &#125;      long start = (pageNo - 1) * pageSize;      sql = sql + &quot; limit &quot; + start + &quot;,&quot; + pageSize;      List&lt;Map&lt;String,Object&gt;&gt; list = (List&lt;Map&lt;String,Object&gt;&gt;) this.jdbcTemplateReadOnly(). queryForList(sql, param);      log.debug(sql);      return new Page&lt;Map&lt;String,Object&gt;&gt;(start, count, pageSize, list);   &#125;/**    * è·å–é»˜è®¤çš„å®ä¾‹å¯¹è±¡    * @param &lt;T&gt;    * @param pkValue    * @param rowMapper    * @return    */   private &lt;T&gt; T doLoad(Object pkValue, RowMapper&lt;T&gt; rowMapper)&#123;      Object obj = this.doLoad(getTableName(), getPKColumn(), pkValue, rowMapper);      if(obj != null)&#123;         return (T)obj;      &#125;      return null;   &#125;</code></pre><p>â€‹<br>â€‹<br> æ’å…¥æ–¹æ³•ï¼Œå‡ä»¥ insert å¼€å¤´ï¼š</p><p>â€‹<br> /**<br>_ æ’å…¥å¹¶è¿”å› ID<br>_ @param entity<br>_ @return<br>_/<br>public PK insertAndReturnId(T entity) throws Exception{<br>return (PK)this.doInsertRuturnKey(parse(entity));<br>}</p><pre><code>   /**    * æ’å…¥ä¸€æ¡è®°å½•    * @param entity    * @return    */   public boolean insert(T entity) throws Exception&#123;      return this.doInsert(parse(entity));   &#125;/**    * æ‰¹é‡ä¿å­˜å¯¹è±¡.&lt;br&gt;    *    * @param list å¾…ä¿å­˜çš„å¯¹è±¡List    * @throws InvocationTargetException    * @throws IllegalArgumentException    * @throws IllegalAccessException    */   public int insertAll(List&lt;T&gt; list) throws Exception &#123;      int count = 0 ,len = list.size(),step = 50000;      Map&lt;String, PropertyMapping&gt; pm = op.mappings;      int maxPage = (len % step == 0) ? (len / step) : (len / step + 1);      for (int i = 1; i &lt;= maxPage; i ++) &#123;         Page&lt;T&gt; page = pagination(list, i, step);         String sql = &quot;insert into &quot; + getTableName() + &quot;(&quot; + op.allColumn + &quot;) values &quot;;// (&quot; + valstr.toString() + &quot;)&quot;;         StringBuffer valstr = new StringBuffer();         Object[] values = new Object[pm.size() * page.getRows().size()];         for (int j = 0; j &lt; page.getRows().size(); j ++) &#123;            if(j &gt; 0 &amp;&amp; j &lt; page.getRows().size())&#123; valstr.append(&quot;,&quot;); &#125;            valstr.append(&quot;(&quot;);            int k = 0;            for (PropertyMapping p : pm.values()) &#123;               values[(j * pm.size()) + k] = p.getter.invoke(page.getRows().get(j));               if(k &gt; 0 &amp;&amp; k &lt; pm.size())&#123; valstr.append(&quot;,&quot;); &#125;               valstr.append(&quot;?&quot;);               k ++;            &#125;            valstr.append(&quot;)&quot;);         &#125;         int result = jdbcTemplateWrite().update(sql + valstr.toString(), values);         count += result;      &#125;      return count;   &#125;private Serializable doInsertRuturnKey(Map&lt;String,Object&gt; params)&#123;      final List&lt;Object&gt; values = new ArrayList&lt;Object&gt;();      final String sql = makeSimpleInsertSql(getTableName(),params,values);      KeyHolder keyHolder = new GeneratedKeyHolder();      final JdbcTemplate jdbcTemplate = new JdbcTemplate(getDataSourceWrite());        try &#123;             jdbcTemplate.update(new PreparedStatementCreator() &#123;            public PreparedStatement createPreparedStatement(                  Connection con) throws SQLException &#123;               PreparedStatement ps = con.prepareStatement(sql,Statement.RETURN_GENERATED_KEYS);               for (int i = 0; i &lt; values.size(); i++) &#123;                  ps.setObject(i+1, values.get(i)==null?null:values.get(i));               &#125;               return ps;             &#125;         &#125;, keyHolder);        &#125; catch (DataAccessException e) &#123;           log.error(&quot;error&quot;,e);        &#125;</code></pre><p>â€‹<br>â€‹<br> if (keyHolder == null) { return â€œâ€; }</p><p>â€‹<br> Map&lt;String, Object&gt; keys = keyHolder.getKeys();<br>if (keys == null || keys.size() == 0 || keys.values().size() == 0) {<br>return â€œâ€;<br>}<br>Object key = keys.values().toArray()[0];<br>if (key == null || !(key instanceof Serializable)) {<br>return â€œâ€;<br>}<br>if (key instanceof Number) {<br>//Long k = (Long) key;<br>Class clazz = key.getClass();<br>// return clazz.cast(key);<br>return (clazz == int.class || clazz == Integer.class) ? ((Number) key).intValue() : ((Number)key).longValue();</p><p>â€‹<br> } else if (key instanceof String) {<br>return (String) key;<br>} else {<br>return (Serializable) key;<br>}</p><p>â€‹<br> }</p><pre><code>/**    * æ’å…¥    * @param params    * @return    */   private boolean doInsert(Map&lt;String, Object&gt; params) &#123;      String sql = this.makeSimpleInsertSql(this.getTableName(), params);      int ret = this.jdbcTemplateWrite().update(sql, params.values().toArray());      return ret &gt; 0;   &#125;åˆ é™¤æ–¹æ³•ï¼Œå‡ä»¥deleteå¼€å¤´ï¼š</code></pre><p>â€‹<br> /**<br>_ åˆ é™¤å¯¹è±¡.<br><br>_<br>_ @param entity å¾…åˆ é™¤çš„å®ä½“å¯¹è±¡<br>_/<br>public boolean delete(T entity) throws Exception {<br>return this.doDelete(op.pkField.get(entity)) &gt; 0;<br>}</p><pre><code>   /**    * åˆ é™¤å¯¹è±¡.&lt;br&gt;    *    * @param list å¾…åˆ é™¤çš„å®ä½“å¯¹è±¡åˆ—è¡¨    * @throws InvocationTargetException    * @throws IllegalArgumentException    * @throws IllegalAccessException    */   public int deleteAll(List&lt;T&gt; list) throws Exception &#123;      String pkName = op.pkField.getName();      int count = 0 ,len = list.size(),step = 1000;      Map&lt;String, PropertyMapping&gt; pm = op.mappings;      int maxPage = (len % step == 0) ? (len / step) : (len / step + 1);      for (int i = 1; i &lt;= maxPage; i ++) &#123;         StringBuffer valstr = new StringBuffer();         Page&lt;T&gt; page = pagination(list, i, step);         Object[] values = new Object[page.getRows().size()];         for (int j = 0; j &lt; page.getRows().size(); j ++) &#123;            if(j &gt; 0 &amp;&amp; j &lt; page.getRows().size())&#123; valstr.append(&quot;,&quot;); &#125;            values[j] = pm.get(pkName).getter.invoke(page.getRows().get(j));            valstr.append(&quot;?&quot;);         &#125;         String sql = &quot;delete from &quot; + getTableName() + &quot; where &quot; + pkName + &quot; in (&quot; + valstr.toString() + &quot;)&quot;;         int result = jdbcTemplateWrite().update(sql, values);         count += result;      &#125;      return count;   &#125;   /**    * æ ¹æ®idåˆ é™¤å¯¹è±¡ã€‚å¦‚æœæœ‰è®°å½•åˆ™åˆ ä¹‹ï¼Œæ²¡æœ‰è®°å½•ä¹Ÿä¸æŠ¥å¼‚å¸¸&lt;br&gt;    * ä¾‹å¦‚ï¼šåˆ é™¤ä¸»é”®å”¯ä¸€çš„è®°å½•    *    * @param id åºåˆ—åŒ–id    */   protected void deleteByPK(PK id)  throws Exception &#123;      this.doDelete(id);   &#125;/**    * åˆ é™¤å®ä¾‹å¯¹è±¡ï¼Œè¿”å›åˆ é™¤è®°å½•æ•°    * @param tableName    * @param pkName    * @param pkValue    * @return    */   private int doDelete(String tableName, String pkName, Object pkValue) &#123;      StringBuffer sb = new StringBuffer();      sb.append(&quot;delete from &quot;).append(tableName).append(&quot; where &quot;).append(pkName).append(&quot; = ?&quot;);      int ret = this.jdbcTemplateWrite().update(sb.toString(), pkValue);      return ret;   &#125;</code></pre><p>â€‹<br> ä¿®æ”¹æ–¹æ³•ï¼Œå‡ä»¥ update å¼€å¤´ï¼š</p><p>â€‹<br> /**<br>_ æ›´æ–°å¯¹è±¡.<br><br>_<br>_ @param entity å¾…æ›´æ–°å¯¹è±¡<br>_ @throws IllegalAccessException<br>_ @throws IllegalArgumentException<br>_/<br>public boolean update(T entity) throws Exception {<br>return this.doUpdate(op.pkField.get(entity), parse(entity)) &gt; 0;<br>}</p><pre><code>/**    * æ›´æ–°å®ä¾‹å¯¹è±¡ï¼Œè¿”å›åˆ é™¤è®°å½•æ•°    * @param pkValue    * @param params    * @return    */   private int doUpdate(Object pkValue, Map&lt;String, Object&gt; params)&#123;      String sql = this.makeDefaultSimpleUpdateSql(pkValue, params);      params.put(this.getPKColumn(), pkValue);      int ret = this.jdbcTemplateWrite().update(sql, params.values().toArray());      return ret;   &#125;</code></pre><p>è‡³æ­¤ä¸€ä¸ªå®Œæ•´çš„ ORM æ¡†æ¶å°±æ¨ªç©ºå‡ºä¸–ã€‚å½“ç„¶ï¼Œè¿˜æœ‰å¾ˆå¤šä¼˜åŒ–çš„åœ°æ–¹ï¼Œè¯·å°ä¼™ä¼´å¯ä»¥ç»§ç»­å®Œå–„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Reactæ¡†æ¶-æ€»ç»“</title>
      <link href="/2021/12/07/article6/"/>
      <url>/2021/12/07/article6/</url>
      
        <content type="html"><![CDATA[<p><strong>åˆ›å»ºé¡¹ç›®</strong></p><p>1.é™æ€é¡µé¢åˆ›å»º</p><p>é¡µé¢ç›´æ¥å¼•å…¥ Reactï¼ŒReactDOM çš„ js æ–‡ä»¶ï¼šreact.jsï¼Œreact-dom.jsï¼Œ</p><p>é¡µé¢ CDN å¼•å…¥ï¼š</p><p>Reactï¼š<a href="https://cdn.bootcdn.net/ajax/libs/react/16.14.0/umd/react.development.js">https://cdn.bootcdn.net/ajax/libs/react/16.14.0/umd/react.development.js</a></p><p>ReactDOMï¼š<a href="https://cdn.bootcdn.net/ajax/libs/react-dom/16.14.0/cjs/react-dom.development.js">https://cdn.bootcdn.net/ajax/libs/react-dom/16.14.0/cjs/react-dom.development.js</a></p><p>2.é€šè¿‡è„šæ‰‹æ¶åˆ›å»º</p><p>å…¨å±€å®‰è£…ï¼š<code>npm install -g create-react-app</code></p><p>åˆ›å»ºé¡¹ç›®ï¼š<code>create-react-app react-demo</code></p><p>æœ‰äº† vue çš„åŸºç¡€ï¼Œæˆ‘ä»¬ç›´æ¥é€šè¿‡è„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®ï¼Œå¼€å§‹æˆ‘ä»¬ React çš„å­¦ä¹ æ—…ç¨‹ã€‚</p><p><strong>ç›®å½•ç»“æ„</strong></p><pre><code>react-demo--node_modules   // é¡¹ç›®ä¾èµ–åŒ…--public   // å…¬å…±èµ„æºæ–‡ä»¶ï¼Œå¦‚ï¼šå›¾ç‰‡ï¼Œjsonæ–‡ä»¶ç­‰--src        // é¡¹ç›®é¡µé¢ç»„ä»¶ï¼Œæ ·å¼ï¼Œè„šæœ¬æ–‡ä»¶ï¼Œè·¯ç”±ç­‰--package.json  // é¡¹ç›®webpacké…ç½®å’ŒåŒ…ç®¡ç†æ–‡ä»¶--README.md  // é¡¹ç›®è¯´æ˜æ–‡ä»¶</code></pre><p>è¿è¡Œï¼š<code>npm run start</code></p><p>é¡¹ç›®æ¨¡æ¿çš„åˆå§‹é¡µé¢å°±å¯ä»¥è®¿é—®äº†ï¼š<a href="http://localhost:3000/">http://localhost:3000/</a></p><p><strong>æ¸²æŸ“ç»„ä»¶</strong></p><p>æ–‡ä»¶ src/index.js</p><p>å¯ä»¥çœ‹åˆ° ReactDOM.render() ï¼Œæ¸²æŸ“ç»„ä»¶ï¼ˆAppï¼‰ï¼ŒæŠŠæ¨¡æ¿è½¬æ¢æˆ html è¯­è¨€å¹¶æ’å…¥åˆ°æŒ‡å®šçš„èŠ‚ç‚¹ã€‚</p><p>å¯¼å…¥ reactï¼ˆimport React from â€˜reactâ€™ï¼‰ï¼Œreact-domï¼ˆimport ReactDOM from â€˜react-domâ€™ï¼‰</p><p>æ–‡ä»¶ src/App.js</p><p>è¿™é‡Œä½¿ç”¨äº† JSX è¯­æ³•å†™ html é¡µé¢ï¼Œé‡åˆ° html æ ‡ç­¾ï¼ˆä¾‹å¦‚ï¼š&lt;&gt;ï¼‰å°±ç”¨ html è§£æï¼Œé‡åˆ°ä»£ç å—ï¼ˆä¾‹å¦‚ï¼š{ }ï¼‰å°±ç”¨ javascript è§„åˆ™è§£æã€‚</p><p>å¯ä»¥å°è¯•ä¿®æ”¹é‡Œé¢çš„å†…å®¹ï¼Œé¢„è§ˆæ•ˆæœã€‚</p><p><strong>æ•°æ®ç»‘å®š</strong></p><p>React é‡Œé¢æ²¡æœ‰åƒ Vue é‡Œé¢é‚£ä¹ˆç®€å•çš„æ•°æ®ç»‘å®šåŠŸèƒ½ï¼Œè¿™é‡Œéœ€è¦æˆ‘ä»¬è‡ªå·±å»å®Œæˆè¡¨å•æ§ä»¶çš„æ•°æ®ç»‘å®šçš„åŠŸèƒ½ã€‚</p><p>ä½¿ç”¨çŠ¶æ€ state å­˜å‚¨è¾“å…¥æ§ä»¶çš„å€¼ï¼Œä½¿ç”¨ onChange çš„å›è°ƒå‡½æ•°ï¼Œé€šè¿‡ this.setState ä¿®æ”¹ state é‡Œé¢çš„å€¼ï¼Œæ¯æ¬¡ä¿®æ”¹å®Œä¼šè‡ªåŠ¨è°ƒç”¨ <strong>this.render</strong> æ–¹æ³•ï¼Œå†æ¬¡æ¸²æŸ“ç»„ä»¶ã€‚è¿™æ ·å°±å¯ä»¥å®ç°è¾“å…¥æ¡†çš„æ•°æ®ç»‘å®šã€‚</p><pre><code>import React, &#123; Component &#125; from &#39;react&#39;export default class AddUser extends Component &#123;    // å®šä¹‰çŠ¶æ€    state = &#123;        userName: &quot;&quot;,        userAge: &quot;&quot;    &#125;    // å®šä¹‰è¡¨å•æ§ä»¶è¾“å…¥æ¡†äº‹ä»¶    handleChange = (event)=&gt;&#123;        // è·å–æ§ä»¶åç§° name        const name = event.target.name;        this.setState(&#123;            [name]: event.target.value   // è·å–æ§ä»¶çš„å€¼        &#125;);    &#125;    // å®šä¹‰æŒ‰é’®äº‹ä»¶    handleAddUser = () =&gt; &#123;        console.log(&quot;ç”¨æˆ·åå’Œå¹´é¾„ï¼š&quot;, this.state)    &#125;    render() &#123;        return (            &lt;div&gt;                &lt;div&gt;&lt;input name=&quot;userName&quot; value=&#123;this.state.userName&#125; onChange=&#123;this.handleChange&#125; placeholder=&quot;è¯·è¾“å…¥ç”¨æˆ·å&quot; /&gt;&lt;/div&gt;                &lt;div&gt;&lt;input name=&quot;userAge&quot; value=&#123;this.state.userAge&#125; onChange=&#123;this.handleChange&#125; placeholder=&quot;è¯·è¾“å…¥å¹´é¾„&quot; /&gt;&lt;/div&gt;                &lt;div&gt;&lt;input onClick=&#123;this.handleAddUser&#125; value=&quot;æ·»åŠ &quot;/&gt;&lt;/div&gt;            &lt;/div&gt;        )    &#125;&#125;</code></pre><p><strong>ç”Ÿå‘½å‘¨æœŸ</strong></p><p>React ä¸­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºä¸‰ä¸ªçŠ¶æ€ï¼Œ<strong>Mounting</strong>æ˜¯å·²ç»æ’å…¥çœŸå® DOMï¼Œ<strong>Updating</strong>æ˜¯æ­£åœ¨è¢«é‡æ–°æ¸²æŸ“ï¼Œ<strong>Unmounting</strong>æ˜¯å·²ç§»å‡ºçœŸå® DOMã€‚æ¯ä¸ªçŠ¶æ€éƒ½æœ‰ä¸¤ç§å¤„ç†å‡½æ•°ï¼Œ<strong>will</strong>å‡½æ•°æ˜¯è¿›å…¥çŠ¶æ€ä¹‹å‰ï¼Œ<strong>did</strong>å‡½æ•°æ˜¯è¿›å…¥çŠ¶æ€ä¹‹åï¼Œå…±æœ‰äº”ä¸ªå‡½æ•°å¦‚ä¸‹ï¼š</p><p><code>componentWillMount()</code><br><code>componentDidMount()ï¼Œä¸€èˆ¬ä¼šåœ¨è¿™ä¸ªé‡Œé¢è¯·æ±‚æ•°æ®</code><br><code>componentWillUpdate(object nextProps,object nextState)</code><br><code>componentWillUpdate(object prevState, object prevState)</code><br><code>componentWillUnMount()ï¼Œè¿™é‡Œé¢ä¸€èˆ¬ä¼šæ¸…é™¤å®šæ—¶å™¨ï¼Œæ¸…ç©ºå¯¹è±¡</code></p><p><strong>å”¯ä¸€ ID ç”Ÿæˆå™¨</strong></p><p>nanoid æ˜¯ä¸€ä¸ªéå¸¸å°å·§ï¼Œå®‰å…¨å‹å¥½çš„ JavaScript å”¯ä¸€ ID ç”Ÿæˆå™¨ï¼Œæ¯” uuid æ›´å¯é å’Œæ˜“ç”¨ï¼Œæºç åœ°å€ï¼š<a href="https://github.com/ai/nanoid">https://github.com/ai/nanoid</a></p><p>åœ¨æ¨¡æ‹Ÿæ·»åŠ æ•°æ®çš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½ä¼šéœ€è¦ä¸€ä¸ªå”¯ä¸€ ID å€¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä½¿ç”¨ nanoid æ¥ç”Ÿæˆè¿™ä¸ª ID å€¼ã€‚</p><p>å®‰è£…ï¼š<code>npm install nanoid --save</code></p><p>å¯¼å…¥ï¼š<code>import &#123; nanoid &#125; from &#39;nanoid&#39;</code></p><p>ä½¿ç”¨ï¼š<code>const id = nanoid();</code></p><p>å…¶å®ƒä½¿ç”¨æ–¹æ³•å‚è€ƒæ–‡æ¡£ï¼š<a href="https://www.npmjs.com/package/nanoid">https://www.npmjs.com/package/nanoid</a></p><p><strong>Props</strong></p><p>Props æ˜¯åªè¯»çš„ï¼Œä¸èƒ½ä¿®æ”¹è‡ªèº«çš„ propsï¼Œçˆ¶å­ç»„ä»¶ä¼ å€¼å°±è¦é€šè¿‡ props æ¥å®Œæˆã€‚</p><p>Props éªŒè¯ä½¿ç”¨ propTypesï¼Œå®ƒå¯ä»¥ä¿è¯æˆ‘ä»¬çš„åº”ç”¨ç»„ä»¶è¢«æ­£ç¡®ä½¿ç”¨ã€‚å‚è€ƒï¼š<a href="https://www.npmjs.com/package/prop-types">https://www.npmjs.com/package/prop-types</a></p><p>å®‰è£…ï¼š<code>npm install prop-types --save</code></p><p><strong>å‘å¸ƒè®¢é˜…ï¼ˆpubsub-jsï¼‰</strong></p><p>React çš„çˆ¶å­ç»„ä»¶ä¹‹é—´å¯ä»¥é€šè¿‡ props ä¼ é€’å€¼ï¼Œå¦‚æœç»„ä»¶å’Œç»„ä»¶ä¹‹é—´éœ€è¦ä¼ å€¼çš„è¯è¦å€ŸåŠ©å®ƒä»¬çš„çˆ¶ç»„ä»¶è¿›è¡Œä¼ å€¼ï¼Œè¿™æ ·çˆ¶ç»„ä»¶éœ€è¦å®šä¹‰ state å’Œå†™å¥½å¤šå›è°ƒå‡½æ•°ã€‚å¦‚æœæƒ³åœ¨ä»»æ„ç»„ä»¶ä¼ é€’æ•°æ®å¯ä»¥ä½¿ç”¨ pubsub-js æ¥å®Œæˆã€‚</p><p>å®‰è£…ï¼š<code>npm install pubsub-js --save</code></p><p>å¯¼å…¥ï¼š<code>import PubSub from &#39;pubsub-js&#39;</code></p><p>ä½¿ç”¨ï¼š</p><pre><code>PubSub.publish(&#39;name&#39;, param)  // å‘å¸ƒè®¢é˜…ï¼Œname: å‘å¸ƒçš„æ¶ˆæ¯åï¼Œparamï¼šæä¾›ç»™è®¢é˜…è€…çš„å‚æ•°PubSub.subscribe(&#39;name&#39;, func) // è®¢é˜…æ¶ˆæ¯ï¼Œname: å‘å¸ƒçš„æ¶ˆæ¯åï¼Œfuncï¼šäº‹ä»¶çš„ç›‘å¬å‡½æ•°var func = function(msg, data) &#123;  console.log(msg,data);&#125;PubSub.unsubscribe(&#39;name&#39;) // å–æ¶ˆè®¢é˜…</code></pre><p>æœ‰å…³ pubsub-js çš„å…¶å®ƒç”¨æ³•ï¼Œå¯ä»¥å‚è€ƒæ–‡æ¡£ï¼š<a href="https://www.npmjs.com/package/pubsub-js">https://www.npmjs.com/package/pubsub-js</a></p><p><strong>è°ƒè¯•å·¥å…·</strong></p><p>è°·æ­Œæµè§ˆå™¨å®‰è£…æ’ä»¶ï¼šreact developer toolsï¼Œæ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œè°ƒè¯•çª—å£å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://bbs-img.huaweicloud.com/blogs/img/20210917/1631858840239098687.png"></p><p><strong>æ¸©é¦¨æç¤º</strong></p><p>æ–‡ç« å†…å®¹å¦‚æœå†™çš„å­˜åœ¨é—®é¢˜æ¬¢è¿ç•™è¨€æŒ‡å‡ºï¼Œè®©æˆ‘ä»¬å…±åŒäº¤æµï¼Œå…±åŒæ¢è®¨ï¼Œå…±åŒè¿›æ­¥~~~</p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¬²ç½¢ä¸èƒ½çš„node.js</title>
      <link href="/2021/10/23/article4/"/>
      <url>/2021/10/23/article4/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯-node-js"><a href="#ä»€ä¹ˆæ˜¯-node-js" class="headerlink" title="ä»€ä¹ˆæ˜¯ node.js"></a>ä»€ä¹ˆæ˜¯ node.js</h3><p>åˆ°åº•ä»€ä¹ˆæ˜¯ node.js å‘¢ï¼Ÿçœ‹çœ‹<a href="http://www.nodejs.org/">å®˜ç½‘</a>å¯¹ nodejs çš„æè¿°ï¼š</p><p>Node.js is a platform built on Chromeâ€™s JavaScript runtime for easily building fast, scalable network applications. Node.js uses an event-driven, non-blocking I/O model that makes it lightweight and efficient, perfect for data-intensive real-time applications that run across distributed devices.</p><p>æˆ‘ä»¬å¯ä»¥å¯¹æ­¤æ€»ç»“å‡ºå‡ ç‚¹</p><ol><li>node.js æ˜¯ä¸€ä¸ªæ„å»ºåœ¨ Chrome JavaScript è¿è¡Œç¯å¢ƒçš„å¹³å°ï¼Œè¿™æ˜¯å¾ˆé‡è¦çš„ä¸€ç‚¹ï¼Œ<strong>node.js å¹¶ä¸æ˜¯ä¸€é—¨è¯­è¨€ï¼Œè€Œæ˜¯ä¸€ä¸ªå¹³å°</strong></li><li>node.js è‡´åŠ›äºä½¿æ„å»ºé€Ÿåº¦å¿«ã€ç¨³å®šçš„ç½‘ç»œç¨‹åºæ›´ç®€å•</li><li>node.js å…·æœ‰äº‹ä»¶é©±åŠ¨å’Œéé˜»å¡ I/O çš„ç‰¹è‰²ï¼Œä½¿ä¹‹è½»é‡çº§å¹¶ä¸”é«˜æ•ˆç‡</li><li>node.js éå¸¸é€‚åˆåœ¨åˆ†å¸ƒå¼è®¾å¤‡è¿è¡Œæ•°æ®å¯†é›†å‹å®æ—¶åº”ç”¨ç¨‹åº</li></ol><h3 id="æœåŠ¡å™¨ç«¯è¿è¡Œçš„-JavaScriptï¼Ÿ"><a href="#æœåŠ¡å™¨ç«¯è¿è¡Œçš„-JavaScriptï¼Ÿ" class="headerlink" title="æœåŠ¡å™¨ç«¯è¿è¡Œçš„ JavaScriptï¼Ÿ"></a><strong>æœåŠ¡å™¨ç«¯è¿è¡Œçš„ JavaScriptï¼Ÿ</strong></h3><p>Chrome JavaScript runtime ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ Chrome çš„ V8 JavaScript Engineï¼Œä¹Ÿå°±æ˜¯ Goole å¼€å‘çš„ä¸€ä¸ªç”¨äº Chrome æµè§ˆå™¨çš„åº•å±‚ JavaScript å¼•æ“ï¼Œç”¨äºè§£æ JavaScript è¯­å¥åˆ›å»ºå…¶è¿è¡Œç¯å¢ƒï¼Œä¿è¯æˆ‘ä»¬å†™çš„è¯­å¥åœ¨æµè§ˆå™¨ä¸Šçš„è¡¨ç°å’Œæˆ‘ä»¬é¢„æœŸçš„ä¸€è‡´ã€‚</p><p>é‚£ä¹ˆä¸ºä»€ä¹ˆè¯´ node.js æ˜¯æœåŠ¡å™¨ç«¯è¿è¡Œçš„ JavaScriptï¼Ÿå¥½å¥½åœ° nodejs å¹²å˜›è¦å’Œ V8 æ‰¯ä¸Šå…³ç³»ï¼Ÿé™¤äº† Google æçš„ V8 è§£é‡Š JavaScript ååˆ†çš„å¿«ï¼Œååˆ†é‡è¦çš„ä¸€ä¸ªåŸå› æ˜¯ V8 JavaScript å¼•æ“å¹¶ä¸ä»…é™äºåœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œå¯ä»¥åµŒå…¥ä»»ä½•åº”ç”¨ç¨‹åºä¸­è¿è¡Œã€‚Node.js å’Œ.net framework ç±»ä¼¼æ˜¯ä¸€ä¸ªå¹³å°ï¼ˆè¿™é‡Œæœ‰äº›æä¸æ˜ç™½ï¼Œæœ›å¤§ç¥ä»¬æŒ‡ç‚¹ä¸€äºŒï¼‰ï¼Œä½†å®ƒæ²¡æœ‰åƒ.net ä¸€æ ·åˆ›é€ äº†ä¸€é—¨è¯­è¨€â€”â€”C#åœ¨è¿™ä¸ªå¹³å°ä¸Šè¿è¡Œï¼Œè€Œæ˜¯å¾ˆå·§å¦™çš„å€Ÿç”¨äº† web å¼€å‘äººå‘˜å·²ç»éå¸¸ç†Ÿæ‚‰çš„ JavaScript è¯­æ³•ï¼Œä½¿ç”¨ V8 å¼•æ“æ¥è§£æè¯­å¥ï¼Œå¹¶å°†å…¶é‡å»ºå¯åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨ã€‚æ‰€ä»¥ä¸¥æ ¼ä¸Šè¯´ node.js å¹¶ä¸æ˜¯æœåŠ¡å™¨ç«¯è¿è¡Œçš„ Javascriptï¼Œè€Œæ˜¯å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript è¯­æ³•çš„å¹³å°ã€‚</p><h3 id="ä¸ºä»€ä¹ˆè¦ç”¨-node-js"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨-node-js" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨ node.js"></a>ä¸ºä»€ä¹ˆè¦ç”¨ node.js</h3><p>æäº†åŠå¤©å°±æ˜¯ä¸€ä¸ªæ–°ç“¶è£…æ—§é…’çš„ä¸œè¥¿ï¼Œçœ‹èµ·æ¥é™¤äº†ä¸€ä¸ªæ–°é²œçš„å¯ä»¥ä½¿ç”¨ JavaScript è¯­æ³•ï¼Œnode.js æ²¡ä»€ä¹ˆé•¿å¤„ï¼Œä¸ºä»€ä¹ˆè¦ç”¨å®ƒè€Œä¸æ˜¯åŒæ ·å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œçš„ Java æˆ– C#å‘¢ï¼Ÿè¿™è¦ä» node.js äº‹ä»¶é©±åŠ¨å’Œéé˜»å¡ I/O çš„ç‰¹è‰²è°ˆèµ·ã€‚å…³äºäº‹ä»¶é©±åŠ¨ç†Ÿæ‚‰ JavaScript çš„åŒå­¦åº”è¯¥å¾ˆç†Ÿæ‚‰äº†ï¼Œnode.js é‡‡ç”¨ä¸€ç³»åˆ—â€œéé˜»å¡â€åº“æ¥æ”¯æŒäº‹ä»¶å¾ªç¯çš„æ–¹å¼ã€‚æœ¬è´¨ä¸Šå°±æ˜¯ä¸ºæ–‡ä»¶ç³»ç»Ÿã€æ•°æ®åº“ä¹‹ç±»çš„èµ„æºæä¾›æ¥å£ï¼Œæ¯”å¦‚ä¸€ä¸ªæ•°æ®åº“è®¿é—®ï¼Œé‡‡ç”¨äº‹ä»¶æœºåˆ¶,å‘èµ·è¯·æ±‚ä¹‹å,ç«‹å³å°†è¿›ç¨‹äº¤å‡º,å½“æ•°æ®è¿”å›åè§¦å‘äº‹ä»¶,å†ç»§ç»­å¤„ç†æ•°æ®ã€‚</p><p>åœ¨ä¼ ç»Ÿçš„é˜»å¡ I/O ä¸­å…¶è¿è¡Œè¿‡ç¨‹æ˜¯è¿™æ ·çš„</p><pre><code>int num=query(&#39;select * from ......&#39;);print(num);...................//æ— å…³è¯­å¥</code></pre><p>print æ–¹æ³•å¿…é¡»ç­‰å¾… query æ–¹æ³•è¿”å›ç»“æœï¼Œå¦‚æœæ•°æ®åº“å‡ºç°ç½‘ç»œè¿æ¥æ•…éšœï¼Œé‚£ä¹ˆ print æ–¹æ³•å°±è¦ç­‰åˆ°è¶…æ—¶æ‰èƒ½æ‰§è¡Œï¼Œç„¶ååé¢ä¸€äº›æ— å…³è¯­å¥æ‰èƒ½ä¸€æ¬¡æ‰§è¡Œï¼Œè€Œåœ¨éé˜»å¡ I/O ä¸­æ˜¯è¿™æ ·çš„</p><pre><code>query(&#39;select * from...&#39;,callback(data)&#123;  .............//ç›¸å…³è¯­å¥  print();&#125;);..............//æ— å…³è¯­å¥</code></pre><p>è·Ÿæˆ‘ä»¬ä½¿ç”¨ ajaxï¼Œåœ¨å›è°ƒå‡½æ•°ä¸­å¤„ç†ç»“æœï¼Œä½†æ˜¯ä¸å½±å“ä¸‹é¢è¯­å¥æ‰§è¡Œã€‚ æ€ªä¸å¾— node.js è¦å€Ÿç”¨ JavaScript æ¥åšæ­¤äº‹ï¼ŒJavaScript çš„å‡ ä¸ªç‰¹æ€§ä½¿å®ƒå¾ˆèƒœä»»è¿™é¡¹å·¥ä½œ</p><ol><li>äº‹ä»¶æœºåˆ¶</li><li>å‡½æ•°å¼ç¼–ç¨‹ï¼Œæ”¯æŒåŒ¿åå‡½æ•°ï¼Œå‡½æ•°å‚æ•°</li></ol><p>Node.js ä¸­ä»£ç æ˜¯å•è¿›ç¨‹ã€å•çº¿ç¨‹æ‰§è¡Œçš„ï¼ˆæˆ‘ä»¬å†™çš„ä»£ç æ˜¯ï¼Œä½† node.js æœ¬èº«ä¸æ˜¯æœ‰å…´è¶£åŒå­¦å¯ä»¥çœ‹çœ‹<a href="http://rickgaribay.net/archive/2012/01/28/node-is-not-single-threaded.aspx">è¿™ä¸ª</a>è¿›ä¸€æ­¥äº†è§£ï¼‰ï¼Œä½¿ç”¨äº‹ä»¶è½®è¯¢æœºåˆ¶å’Œéé˜»å¡ I/Oï¼Œåœ¨ä¸æ–°å¢é¢å¤–çº¿ç¨‹çš„æƒ…å†µä¸‹å¯¹ä»»åŠ¡è¿›è¡Œå¹¶è¡Œå¤„ç† ã€‚node.js è§£å†³äº†é˜»å¡å¼ç¼–ç¨‹æµªè´¹å¤§é‡è¿›ç¨‹èµ„æºåªæ˜¯åœ¨ç­‰å¾…,å¯¼è‡´çš„å¤§é‡å†…å­˜å’Œ cpu çš„æµªè´¹é—®é¢˜ï¼Œæ‰€ä»¥æ‰æ•¢å®£ç§°è‡ªå·± perfect for æ•°æ®å¯†é›†å‹çš„å®æ—¶ web åº”ç”¨ç¨‹åºã€‚</p><h3 id="å¦‚ä½•å®‰è£…"><a href="#å¦‚ä½•å®‰è£…" class="headerlink" title="å¦‚ä½•å®‰è£…"></a>å¦‚ä½•å®‰è£…</h3><p>nodejs çš„å®‰è£…è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œå°¤å…¶æ˜¯ç°åœ¨å®‰è£…åŒ…éƒ½æŠŠ npm é›†æˆäº†è¿›å»ï¼Œä¸ç”¨å•ç‹¬å®‰è£…äº†ï¼Œä¸‹è½½ä¸‹å®‰è£…åŒ…è¿è¡Œå°±å¯ä»¥äº†ï¼Œå¦å¤–æƒ³å®Œæ•´ä½¿ç”¨ nodejs çš„è¯éœ€è¦æœ‰ C è¯­è¨€çš„ç¼–è¯‘ç¯å¢ƒã€git å’Œ pythonï¼Œä½¿ç”¨ window çš„åŒå­¦å¾ˆèƒ½ä¼šç¨å¾®éº»çƒ¦ä¸€äº›ï¼Œéœ€è¦æå®šè¿™äº›ã€‚å¯¹å‘½ä»¤è¡Œæƒ…æœ‰ç‹¬é’Ÿçš„åŒå­¦å¯ä»¥çœ‹çœ‹<a href="http://howtonode.org/how-to-install-nodejs">How to Install Node.js</a></p><p><strong>npm æ˜¯ä»€ä¹ˆ</strong></p><p>npm æ˜¯ node packaged modules çš„ç¼©å†™ï¼Œå…¶å®æ˜¯ä¸€ä¸ª nodejs çš„ module çš„ç®¡ç†å·¥å…·</p><p><strong>ä»€ä¹ˆæ˜¯ module</strong></p><p>æ‰€è°“ module å’Œ java ä¸­çš„åŒ…çš„æ¦‚å¿µå¾ˆç±»ä¼¼ï¼Œä¸€äº›è§£å†³æ–¹æ¡ˆçš„é›†åˆï¼Œå®˜æ–¹ä¼šæä¾›æ ¸å¿ƒçš„å‡ ä¸ªï¼Œç¬¬ä¸‰æ–¹çš„å¾ˆå¤š</p><p><strong>å¦‚ä½•å®‰è£…ç¬¬ä¸‰æ–¹ module</strong></p><p>å› ä¸º nodejs çš„ç¤¾åŒºå¾ˆæ´»è·ƒï¼Œæœ‰å¾ˆå¤šå¥½ç”¨çš„ç¬¬ä¸‰æ–¹çš„åŒ…ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ npm çš„å‘½ä»¤å®‰è£…</p><ul><li><em>npm install [-g] <name>:ä½¿ç”¨ install æŒ‡ä»¤å¯ä»¥æŠŠ nodule ä¸‹è½½å®‰è£…çš„ nodejs çš„å…¨å±€çš„ path å¤„ï¼Œä¸åŠ çš„è¯ä¼šå®‰è£…åˆ°å½“å‰è·¯å¾„</em></li><li><em>npm remove <name>:ç§»é™¤ module</em></li><li><em>npm update <name>:æ›´æ–° module</em></li></ul><p>è¿˜æœ‰ä¸€äº›å¸¸ç”¨å‘½ä»¤å¯ä»¥çœ‹çœ‹<a href="http://blog.csdn.net/haidaochen/article/details/8546796">npm å¸¸ç”¨å‘½ä»¤</a></p><h3 id="ç¬¬ä¸€ä¸ª-demo"><a href="#ç¬¬ä¸€ä¸ª-demo" class="headerlink" title="ç¬¬ä¸€ä¸ª demo"></a>ç¬¬ä¸€ä¸ª demo</h3><p>è¿™äº›éƒ½æå®šåæˆ‘ä»¬å°±å¯ä»¥å†™ä¼ è¯´ä¸­çš„ hello world äº†ã€‚åœ¨ä»»æ„ç›®å½•å»ºä¸€ä¸ª test.js æ–‡ä»¶</p><p>console.log(â€˜Hello, World!â€™);</p><p>ç®€å•çš„ä¸€å¥è¯å°±å¯ä»¥ï¼Œç„¶åä½¿ç”¨ node å‘½ä»¤è¿è¡Œ</p><p><img src="https://images0.cnblogs.com/blog/349217/201312/14180746-9e477b3401c84b5f9aa964344aa6a15f.png"></p><p>è¿™è¿™è¿™ã€‚ã€‚ã€‚å¤ªæ²¡æŠ€æœ¯å«é‡äº†ï¼Œçœ‹çœ‹å®˜æ–¹ç»™çš„ demoï¼Œä½¿ç”¨ nodejs åˆ›å»ºä¸€ä¸ª web server æœ‰å¤šç®€å•</p><pre><code>var http=require(&#39;http&#39;);//å¼•å…¥http modulehttp.createServer(function(request,response)&#123;//åˆ›å»ºä¸€ä¸ªweb server    //å›è°ƒå‡½æ•°ï¼Œè¿™æ ·åˆ›å»ºserveræ–¹æ³•å°±ä¸ä¼šé˜»å¡äº†    response.writeHead(200,&#123;&#39;contentType&#39;:&#39;text/plain&#39;&#125;);    response.end(&#39;Hello World!\n&#39;);&#125;).listen(8124);console.log(&#39;Server running at http://127.0.0.1:8124/&#39;);</code></pre><p>å…ˆè¿è¡Œä¸€ä¸‹æœåŠ¡å™¨ï¼ŒæŒ‰ä¸¤æ¬¡ Ctrl+C é€€å‡º</p><p><img src="https://images0.cnblogs.com/blog/349217/201312/14181624-c88df45c5236483aa49cf4af3f140868.png" alt="img"></p><p>ä½¿ç”¨æµè§ˆå™¨è®¿é—®ä¸€ä¸‹</p><p><img src="https://images0.cnblogs.com/blog/349217/201312/14181637-8fc77389050a4fa0818a3672bf528ed1.png" alt="img"></p><p>å°±è¿™ä¹ˆç®€å•</p><h3 id="å¦‚ä½•å­¦ä¹ "><a href="#å¦‚ä½•å­¦ä¹ " class="headerlink" title="å¦‚ä½•å­¦ä¹ "></a>å¦‚ä½•å­¦ä¹ </h3><p>çœ‹åˆ°ä¸Šé¢çš„ demo æ˜¯ä¸æ˜¯ä¹Ÿå¯¹ nodejs äº§ç”Ÿå…´è¶£äº†å‘¢ï¼Œå¯æ˜¯åƒæˆ‘è¿™æ ·çš„æ‡’äººæ¥è§¦ä¸€é—¨æ–°è¯­è¨€çš„æ—¶å€™ä¸çŸ¥é“è¯¥å¦‚ä½•ä¸‹æ‰‹ï¼Œéš¾é“åˆè¦å»åšä¸ªæ— èŠçš„è´­ç‰©è½¦ç¥é©¬çš„å˜›ï¼Œå­¦ä¹  nodejs ä¸ç”¨ï¼Œnodejs ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå°æ¸¸æˆä¸€æ ·çš„æ•™ç¨‹ï¼Œå°±åƒä¸ªå¯»å®è¿‡ç¨‹ä»é›¶å¼€å§‹ï¼Œæ²¡æ­¥éƒ½æœ‰ä¸€ä¸ªä»»åŠ¡å’Œä¸€ä¸‹æç¤ºè®©ä½ èµ°çš„æ›´è¿œï¼Œä¸Š<a href="http://nodeschool.io/">nodeschool</a>ä¸‹è½½ç„¶åå¼€å§‹å¯»å®å§ï¼Œæˆ‘å°±æ˜¯è¢«è¿™å°æ¸¸æˆè¿·ä½äº†ï¼Œé¡ºä¾¿ç§€ä¸€ä¸‹æˆ‘ä¸€å¤©çš„æˆ˜ç»©ï¼Œæ¯ä¸ªä»»åŠ¡éƒ½å®Œæˆäº†</p><p><img src="https://images0.cnblogs.com/blog/349217/201312/14182240-ea57a8c1ac1c4c50b1d927071f5f6e21.png" alt="img"></p><p>çœ‹çœ‹è§£é‡Šå°±çŸ¥é“æ€ä¹ˆåšäº†ï¼Œä¸è¿‡å»ºè®®æœ€å¼€å§‹ run å’Œ verify ç»“åˆä½¿ç”¨ï¼Œverify å‘Šè¯‰ä½ æ‰§è¡Œç»“æœå’Œé¢„æœŸç»“æœï¼Œrun ä¼šå‘Šè¯‰ä½ æœ‰å“ªäº›é”™è¯¯</p><p>å½“ç„¶é™¤äº†è¿™äº›å°æ¸¸æˆå¸®æˆ‘ä»¬ç†Ÿæ‚‰ nodejs è¯­æ³•åŠä½¿ç”¨ï¼Œä¸€äº›ä¼˜ç§€çš„ç¤¾åŒºä¹Ÿå¯ä»¥å¸®æˆ‘ä»¬å¾ˆå¤š</p><p><a href="http://cnodejs.org/">CNode</a></p><p><a href="http://www.oschina.net/p/nodejs/">å¼€æºä¸­å›½</a></p>]]></content>
      
      
      <categories>
          
          <category> Node </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>go è‡ªå®šä¹‰http.Client</title>
      <link href="/2021/10/04/article3/"/>
      <url>/2021/10/04/article3/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h1><p>go ä¸­å¯ä»¥ä½¿ç”¨ http.DefaultClient è¿›è¡Œ http è¯·æ±‚ï¼Œä¹Ÿå¯ä»¥è‡ªå·±åˆ›å»º http.Clientï¼Œä¼ å…¥è‡ªå®šä¹‰ Transport å¯ä»¥å®ç°å¯¹ request çš„å¤„ç†ã€‚</p><p>http.Client</p><pre><code>// A Client is an HTTP client. Its zero value (DefaultClient) is a// usable client that uses DefaultTransport.//// The Client&#39;s Transport typically has internal state (cached TCP// connections), so Clients should be reused instead of created as// needed. Clients are safe for concurrent use by multiple goroutines.//// A Client is higher-level than a RoundTripper (such as Transport)// and additionally handles HTTP details such as cookies and// redirects.//// When following redirects, the Client will forward all headers set on the// initial Request except://// when forwarding sensitive headers like &quot;Authorization&quot;,// &quot;WWW-Authenticate&quot;, and &quot;Cookie&quot; to untrusted targets.// These headers will be ignored when following a redirect to a domain// that is not a subdomain match or exact match of the initial domain.// For example, a redirect from &quot;foo.com&quot; to either &quot;foo.com&quot; or &quot;sub.foo.com&quot;// will forward the sensitive headers, but a redirect to &quot;bar.com&quot; will not.//// â€¢ when forwarding the &quot;Cookie&quot; header with a non-nil cookie Jar.// Since each redirect may mutate the state of the cookie jar,// a redirect may possibly alter a cookie set in the initial request.// When forwarding the &quot;Cookie&quot; header, any mutated cookies will be omitted,// with the expectation that the Jar will insert those mutated cookies// with the updated values (assuming the origin matches).// If Jar is nil, the initial cookies are forwarded without change.</code></pre><p>type Client struct</p><pre><code>// Transport specifies the mechanism by which individual// HTTP requests are made.// If nil, DefaultTransport is used.Transport RoundTripper // CheckRedirect specifies the policy for handling redirects. // If CheckRedirect is not nil, the client calls it before // following an HTTP redirect. The arguments req and via are // the upcoming request and the requests made already, oldest // first. If CheckRedirect returns an error, the Client&#39;s Get // method returns both the previous Response (with its Body // closed) and CheckRedirect&#39;s error (wrapped in a url.Error) // instead of issuing the Request req. // As a special case, if CheckRedirect returns ErrUseLastResponse, // then the most recent response is returned with its body // unclosed, along with a nil error. // // If CheckRedirect is nil, the Client uses its default policy, // which is to stop after 10 consecutive requests.CheckRedirect func(req *Request, via []*Request) error // Jar specifies the cookie jar. // // The Jar is used to insert relevant cookies into every // outbound Request and is updated with the cookie values // of every inbound Response. The Jar is consulted for every // redirect that the Client follows.`` // // If Jar is nil, cookies are only sent if they are explicitly // set on the Request.Jar CookieJar// Timeout specifies a time limit for requests made by this// Client. The timeout includes connection time, any// redirects, and reading the response body. The timer remains// running after Get, Head, Post, or Do return and will// interrupt reading of the Response.Body.//// A Timeout of zero means no timeout.//// The Client cancels requests to the underlying Transport// as if the Request&#39;s Context ended.//// For compatibility, the Client will also use the deprecated// CancelRequest method on Transport if found. New// RoundTripper implementations should use the Request&#39;s Context// for cancellation instead of implementing CancelRequest.Timeout time.Duration&#125;</code></pre><p>http.RoundTripper</p><pre><code>// RoundTripper is an interface representing the ability to execute a// single HTTP transaction, obtaining the Response for a given Request.//// A RoundTripper must be safe for concurrent use by multiple// goroutines.type RoundTripper interface&#123;// RoundTrip executes a single HTTP transaction, returning// a Response for the provided Request.//// RoundTrip should not attempt to interpret the response. In// particular, RoundTrip must return err == nil if it obtained// a response, regardless of the response&#39;s HTTP status code.// A non-nil err should be reserved for failure to obtain a// response. Similarly, RoundTrip should not attempt to// handle higher-level protocol details such as redirects,// authentication, or cookies.//// RoundTrip should not modify the request, except for// consuming and closing the Request&#39;s Body. RoundTrip may// read fields of the request in a separate goroutine. Callers// should not mutate or reuse the request until the Response&#39;s// Body has been closed.//// RoundTrip must always close the body, including on errors,// but depending on the implementation may do so in a separate// goroutine even after RoundTrip returns. This means that// callers wanting to reuse the body for subsequent requests// must arrange to wait for the Close call before doing so.//// The Request&#39;s URL and Header fields must be initialized.RoundTrip(*Request) (*Response, error)&#125;</code></pre><h1 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h1><p>å…ˆå†™ä¸€ä¸ª serverï¼Œæ‰“å°å‡ºè®¿é—®çš„ payload ä¿¡æ¯ã€‚</p><pre><code>package mainimport(&quot;fmt&quot; &quot;io/ioutil&quot; &quot;net/http&quot;) func main() &#123;    mux := http.NewServeMux()    mux.HandleFunc(&quot;/&quot;, func(rw http.ResponseWriter, r *http.Request) &#123;        req, err := ioutil.ReadAll(r.Body)        if err != nil &#123;            rw.WriteHeader(500)            rw.Write([]byte(err.Error()))            return        &#125;        fmt.Println(string(req))    &#125;)    if err := http.ListenAndServe(&quot;:8000&quot;, mux);    err != nil &#123;        panic(err)    &#125;&#125;å¦‚æœä½¿ç”¨é»˜è®¤çš„DefaultClientï¼Œåªä¼šæ‰“å°å‡ºæˆ‘ä»¬ä¼ å…¥çš„payloadã€‚package mainimport(&quot;fmt&quot; &quot;io/ioutil&quot; &quot;net/http&quot; &quot;strings&quot; &quot;github.com/google/uuid&quot;)func main() &#123;    id := uuid.NewString()    req, _ := http.NewRequest(&quot;GET&quot;, &quot;http://localhost:8000&quot;, strings.NewReader(fmt.Sprintf(&#123;&quot;id&quot;:&quot;%s&quot;&#125;, id)))    req.Header.Add(&quot;Authorization&quot;, fmt.Sprintf(&quot;Bearer token%s&quot;, id))    resp, err := http.DefaultClient.Do(req)    if err != nil &#123;        panic(err)    &#125;    fmt.Println(resp)&#125;()</code></pre><p>ç»“æœï¼š</p><pre><code>&#123;&quot;id&quot;:&quot;912733ce-4e17-4209-ad9e-71159fd37845&quot;&#125;&amp;&#123;200 OK 200 HTTP/1.1 1 1 map[Content-Length:[0] Date:[Sun, 28 Nov 2021 06:48:50 GMT]] &#123;&#125; 0 [] false false map[] 0xc000194000 &lt;nil&gt;&#125;</code></pre><p>ä½¿ç”¨è‡ªå®šä¹‰ Transport</p><pre><code>package mainimport( &quot;bytes&quot;  &quot;encoding/json&quot; &quot;io/ioutil&quot; &quot;net/http&quot; &quot;strings&quot;)type customTransport struct &#123;&#125;func (t *customTransport) RoundTrip(req *http.Request) (*http.Response, error) &#123;  token := req.Header.Get(&quot;Authorization&quot;)  if len(token) != 0 &amp;&amp;  strings .HasPrefix(token,  &quot;Bearer &quot; ) &#123;    token = token[7:]    var bodyBytes []byte    if req.Body != nil &#123;      bodyBytes, _ = ioutil.ReadAll(req.Body)      &#125;      var payload map[string]interface&#123;&#125;      if err := json.Unmarshal(bodyBytes, &amp;payload); err != nil &#123;        return nil, err          &#125;else&#123;            payload[``&quot;token&quot;``] = token            if bodyBytes, err := json.Marshal(payload); err != nil &#123;            return nil, err          &#125;else&#123;          req.ContentLength = int64(len(bodyBytes))          req.Body = ioutil.NopCloser(bytes.NewBuffer(bodyBytes))      &#125;    &#125;  &#125;  resp, err := http.DefaultTransport.RoundTrip(req)  if err != nil &#123;    return nil, err  &#125;  return resp, nil&#125;</code></pre><p>ä½¿ç”¨è‡ªå®šä¹‰ Client</p><pre><code>package mainimport(  &quot;fmt&quot;  &quot;io/ioutil&quot;  &quot;net/http&quot;  &quot;strings&quot;   &quot;github.com/google/uuid&quot;) func main() &#123;    id := uuid.NewString()  req, _ := http.NewRequest(&quot;GET&quot;, &quot;http://localhost:8000&quot;, strings.NewReader(fmt.Sprintf(&#123;        &quot;id&quot;:&quot;%s&quot;    &#125;, id)))    req.Header.Add(&quot;Authorization&quot;, fmt.Sprintf(&quot;Bearer token%s&quot;, id))    client := &amp;http.Client&#123;        Transport: &amp;customTransport&#123;&#125;,    &#125;    resp, err := client.Do(req)    if err != nil &#123;    panic(err)  &#125;fmt.Println(resp)&#125;()</code></pre><p>æœ€ç»ˆç»“æœï¼š</p><pre><code>&#123;&quot;id&quot;:&quot;ebcceb4b-1979-457b-bf49-9255ceb77322&quot;,&quot;token&quot;:&quot;tokenebcceb4b-1979-457b-bf49-9255ceb77322&quot;&#125;&amp;&#123;200 OK 200 HTTP/1.1 1 1 map[Content-Length:[0] Date:[Sun, 28 Nov 2021 06:49:25 GMT]] &#123;&#125; 0 [] false false map[] 0xc000140000 &lt;nil&gt;&#125;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Golang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Golang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSè®¾è®¡æ¨¡å¼ä¹‹å»ºé€ è€…æ¨¡å¼</title>
      <link href="/2021/09/27/article2/"/>
      <url>/2021/09/27/article2/</url>
      
        <content type="html"><![CDATA[<h2 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h2><p>æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œæ¯”å¦‚ç»„è£…ç”µè„‘ï¼Œç”Ÿäº§æ±½è½¦ï¼Œéƒ½æ˜¯æœ‰å¤šä¸ªæ­¥éª¤æ¥ä¸€æ­¥ä¸€æ­¥æ„å»ºçš„ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨å»ºé€ è€…æ¨¡å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä¸‹é¢ä»¥ç»„è£…ç”µè„‘ä¸ºä¾‹å­ï¼Œæ¯”å¦‚ç»„è£…æ¸¸æˆç”µè„‘ï¼Œç»„è£…åŠå…¬ç”µè„‘ã€‚æ­¥éª¤éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæœ€ç»ˆéƒ½ä¼šå‡ºä¸€ä¸ªæˆå“å‡ºæ¥ã€‚</p><pre><code>function gameComputerBuilder() &#123;  this.buildMainboard = function() &#123;    console.log(&#39;æ¸¸æˆä¸»æ¿&#39;);  &#125;;  this.buildCPU = function() &#123;    console.log(&#39;æ¸¸æˆCPU&#39;);  &#125;;  this.buildHardDisk = function() &#123;    console.log(&#39;æ¸¸æˆç¡¬ç›˜&#39;);  &#125;;  this.getComputer = function() &#123;    return &#39;æ¸¸æˆç”µè„‘&#39;;  &#125;;&#125;function officeComputerBuilder() &#123;  this.buildMainboard = function() &#123;    console.log(&#39;åŠå…¬ä¸»æ¿&#39;);  &#125;;  this.buildCPU = function() &#123;    console.log(&#39;åŠå…¬CPU&#39;);  &#125;;  this.buildHardDisk = function() &#123;    console.log(&#39;åŠå…¬ç¡¬ç›˜&#39;);  &#125;;  this.getComputer = function() &#123;    return &#39;åŠå…¬ç”µè„‘&#39;;  &#125;;&#125;function Operator() &#123;  this.startBuild = function(builder) &#123;    builder.buildMainboard();    builder.buildCPU();    builder.buildHardDisk();    return builder.getComputer();  &#125;;&#125;const op = new Operator();const gameComputer = new gameComputerBuilder();const officeComputer = new officeComputerBuilder();const gc = op.startBuild(gameComputer);console.log(gc)const oc = op.startBuild(officeComputer);&#123;&#125;console.log(oc)</code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jsæ•°ç»„è¯¦ç»†æ“ä½œ</title>
      <link href="/2021/09/01/article1/"/>
      <url>/2021/09/01/article1/</url>
      
        <content type="html"><![CDATA[<p>åˆ›å»ºä¸€ä¸ªæ•°ç»„:</p><pre><code>// å­—é¢é‡æ–¹å¼:// è¿™ä¸ªæ–¹æ³•ä¹Ÿæ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„ï¼Œåœ¨åˆå§‹åŒ–æ•°ç»„çš„æ—¶å€™ ç›¸å½“æ–¹ä¾¿var a = [3, 11, 8]; // [3,11,8];// æ„é€ å™¨:// å®é™…ä¸Š new Array === Array,åŠ ä¸åŠ new ä¸€ç‚¹å½±å“éƒ½æ²¡æœ‰ã€‚var a = Array(); // []var a = Array(3); // [undefined,undefined,undefined]var a = Array(3,11,8); // [ 3,11,8 ]</code></pre><p><strong>ES6 Array.of() è¿”å›ç”±æ‰€æœ‰å‚æ•°å€¼ç»„æˆçš„æ•°ç»„</strong></p><p>å®šä¹‰ï¼šè¿”å›ç”±æ‰€æœ‰å‚æ•°å€¼ç»„æˆçš„æ•°ç»„ï¼Œå¦‚æœæ²¡æœ‰å‚æ•°ï¼Œå°±è¿”å›ä¸€ä¸ªç©ºæ•°ç»„ã€‚</p><p>ç›®çš„ï¼šArray.of() å‡ºç°çš„ç›®çš„æ˜¯ä¸ºäº†è§£å†³ä¸Šè¿°æ„é€ å™¨å› å‚æ•°ä¸ªæ•°ä¸åŒï¼Œå¯¼è‡´çš„è¡Œä¸ºæœ‰å·®å¼‚çš„é—®é¢˜ã€‚</p><pre><code>let a = Array.of(3, 11, 8); // [3,11,8]let a = Array.of(3); // [3]</code></pre><p><strong>ES6 Arrar.from() å°†ä¸¤ç±»å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„</strong></p><p>å®šä¹‰ï¼šç”¨äºå°†ä¸¤ç±»å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼ˆä¸æ”¹å˜åŸå¯¹è±¡ï¼Œè¿”å›æ–°çš„æ•°ç»„ï¼‰ã€‚</p><p>å‚æ•°ï¼š</p><p>ç¬¬ä¸€ä¸ªå‚æ•°(å¿…éœ€):è¦è½¬åŒ–ä¸ºçœŸæ­£æ•°ç»„çš„å¯¹è±¡ã€‚</p><p>ç¬¬äºŒä¸ªå‚æ•°(å¯é€‰): ç±»ä¼¼æ•°ç»„çš„mapæ–¹æ³•ï¼Œå¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†ï¼Œå°†å¤„ç†åçš„å€¼æ”¾å…¥è¿”å›çš„æ•°ç»„ã€‚</p><p>ç¬¬ä¸‰ä¸ªå‚æ•°(å¯é€‰): ç”¨æ¥ç»‘å®šthisã€‚</p><pre><code>// 1. å¯¹è±¡æ‹¥æœ‰lengthå±æ€§let obj = &#123;0: &#39;a&#39;, 1: &#39;b&#39;, 2:&#39;c&#39;, length: 3&#125;;let arr = Array.from(obj); // [&#39;a&#39;,&#39;b&#39;,&#39;c&#39;];// 2. éƒ¨ç½²äº† Iteratoræ¥å£çš„æ•°æ®ç»“æ„ æ¯”å¦‚:å­—ç¬¦ä¸²ã€Setã€NodeListå¯¹è±¡let arr = Array.from(&#39;hello&#39;); // [&#39;h&#39;,&#39;e&#39;,&#39;l&#39;,&#39;l&#39;]let arr = Array.from(new Set([&#39;a&#39;,&#39;b&#39;])); // [&#39;a&#39;,&#39;b&#39;]</code></pre><p>æ–¹æ³•:</p><p>æ•°ç»„åŸå‹æä¾›äº†éå¸¸å¤šçš„æ–¹æ³•ï¼Œè¿™é‡Œåˆ†ä¸ºä¸‰ç±»æ¥è®²ï¼Œä¸€ç±»ä¼šæ”¹å˜åŸæ•°ç»„çš„å€¼ï¼Œä¸€ç±»æ˜¯ä¸ä¼šæ”¹å˜åŸæ•°ç»„ï¼Œä»¥åŠæ•°ç»„çš„éå†æ–¹æ³•ã€‚</p><p><strong>æ”¹å˜åŸæ•°ç»„çš„æ–¹æ³•(9ä¸ª):</strong></p><pre><code>let a = [1,2,3];ES5:a.pop()/ a.shift()/ a.push()/ a.unshift()/ a.reverse()/ a.splice()/ a.sort()ES6:a.copyWithin() / a.fill</code></pre><p>å¯¹äºè¿™äº›èƒ½å¤Ÿæ”¹å˜åŸæ•°ç»„çš„æ–¹æ³•ï¼Œè¦æ³¨æ„é¿å…åœ¨å¾ªç¯éå†ä¸­æ”¹å˜åŸæ•°ç»„çš„é€‰é¡¹ï¼Œæ¯”å¦‚: æ”¹å˜æ•°ç»„çš„é•¿åº¦ï¼Œå¯¼è‡´éå†çš„é•¿åº¦å‡ºç°é—®é¢˜ã€‚</p><p><strong>pop() åˆ é™¤ä¸€ä¸ªæ•°ç»„ä¸­çš„æœ€åçš„ä¸€ä¸ªå…ƒç´ </strong></p><p>å®šä¹‰: <code>pop() </code>æ–¹æ³•åˆ é™¤ä¸€ä¸ªæ•°ç»„ä¸­çš„æœ€åçš„ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”è¿”å›è¿™ä¸ªå…ƒç´ ã€‚</p><p>å‚æ•°: æ— ã€‚</p><pre><code>let a = [1,2,3];let item = a.pop(); // 3console.log(a); // [1,2]</code></pre><p><strong>shift() åˆ é™¤æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ </strong></p><p>å®šä¹‰: <code>shift()</code>æ–¹æ³•åˆ é™¤æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¿™ä¸ªå…ƒç´ ã€‚</p><p>å‚æ•°: æ— ã€‚</p><pre><code>let a = [1,2,3];let item = a.shift(); // 1console.log(a); // [2,3]</code></pre><p><strong>push() å‘æ•°ç»„çš„æœ«å°¾æ·»åŠ å…ƒç´ </strong></p><p>å®šä¹‰ï¼š<code>push() </code>æ–¹æ³•å¯å‘æ•°ç»„çš„æœ«å°¾æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›æ–°çš„é•¿åº¦ã€‚</p><p>å‚æ•°: item1, item2, â€¦, itemX ,è¦æ·»åŠ åˆ°æ•°ç»„æœ«å°¾çš„å…ƒç´ </p><pre><code>let a = [1,2,3];let item = a.push(&#39;æœ«å°¾&#39;); // 4console.log(a); // [1,2,3,&#39;æœ«å°¾&#39;]</code></pre><p><strong>unshift()</strong></p><p>å®šä¹‰ï¼šunshift() æ–¹æ³•å¯å‘æ•°ç»„çš„å¼€å¤´æ·»åŠ ä¸€ä¸ªæˆ–æ›´å¤šå…ƒç´ ï¼Œå¹¶è¿”å›æ–°çš„é•¿åº¦ã€‚</p><p>å‚æ•°: item1, item2, â€¦, itemX ,è¦æ·»åŠ åˆ°æ•°ç»„å¼€å¤´çš„å…ƒç´ </p><pre><code>let a = [1,2,3];let item = a.unshift(&#39;å¼€å¤´&#39;); // 4console.log(a); // [&#39;å¼€å¤´&#39;,1,2,3]</code></pre><p><strong>revese() é¢ å€’æ•°ç»„ä¸­å…ƒç´ çš„é¡ºåº</strong></p><p>å®šä¹‰: <code>reverse() </code>æ–¹æ³•ç”¨äºé¢ å€’æ•°ç»„ä¸­å…ƒç´ çš„é¡ºåºã€‚</p><p>å‚æ•°: æ— </p><pre><code>let a = [1,2,3];a.reverse();console.log(a); // [3,2,1]</code></pre><p><strong>splice() æ·»åŠ /åˆ é™¤æ•°ç»„å…ƒç´ </strong></p><p>å®šä¹‰ï¼š <code>splice() </code>æ–¹æ³•å‘/ä»æ•°ç»„ä¸­æ·»åŠ /åˆ é™¤é¡¹ç›®ï¼Œç„¶åè¿”å›è¢«åˆ é™¤çš„é¡¹ç›®</p><p><strong>è¯­æ³•ï¼š array.splice(index,howmany,item1,â€¦..,itemX)</strong></p><p>å‚æ•°:</p><ol><li>indexï¼šå¿…éœ€ã€‚æ•´æ•°ï¼Œè§„å®šæ·»åŠ /åˆ é™¤é¡¹ç›®çš„ä½ç½®ï¼Œä½¿ç”¨è´Ÿæ•°å¯ä»æ•°ç»„ç»“å°¾å¤„è§„å®šä½ç½®ã€‚</li><li>howmanyï¼šå¿…éœ€ã€‚è¦åˆ é™¤çš„é¡¹ç›®æ•°é‡ã€‚å¦‚æœè®¾ç½®ä¸º 0ï¼Œåˆ™ä¸ä¼šåˆ é™¤é¡¹ç›®ã€‚</li><li>item1, â€¦, itemXï¼š å¯é€‰ã€‚å‘æ•°ç»„æ·»åŠ çš„æ–°é¡¹ç›®ã€‚</li></ol><p>è¿”å›å€¼: å¦‚æœæœ‰å…ƒç´ è¢«åˆ é™¤,è¿”å›åŒ…å«è¢«åˆ é™¤é¡¹ç›®çš„æ–°æ•°ç»„ã€‚</p><p>eg1:åˆ é™¤å…ƒç´ </p><pre><code>let a = [1, 2, 3, 4, 5, 6, 7];let item = a.splice(0, 3); // [1,2,3]console.log(a); // [4,5,6,7]// ä»æ•°ç»„ä¸‹æ ‡0å¼€å§‹ï¼Œåˆ é™¤3ä¸ªå…ƒç´ let item = a.splice(-1, 3); // [7]// ä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹åˆ é™¤3ä¸ªå…ƒç´ ï¼Œå› ä¸ºæœ€åä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥åªåˆ é™¤äº†7</code></pre><p>eg2: åˆ é™¤å¹¶æ·»åŠ </p><pre><code>let a = [1, 2, 3, 4, 5, 6, 7];let item = a.splice(0,3,&#39;æ·»åŠ &#39;); // [1,2,3]console.log(a); // [&#39;æ·»åŠ &#39;,4,5,6,7]// ä»æ•°ç»„ä¸‹æ ‡0å¼€å§‹ï¼Œåˆ é™¤3ä¸ªå…ƒç´ ï¼Œå¹¶æ·»åŠ å…ƒç´ &#39;æ·»åŠ &#39; let b = [1, 2, 3, 4, 5, 6, 7];let item = b.splice(-2,3,&#39;æ·»åŠ 1&#39;,&#39;æ·»åŠ 2&#39;); // [6,7]console.log(b); // [1,2,3,4,5,&#39;æ·»åŠ 1&#39;,&#39;æ·»åŠ 2&#39;]// ä»æ•°ç»„æœ€åç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹ï¼Œåˆ é™¤3ä¸ªå…ƒç´ ï¼Œå¹¶æ·»åŠ ä¸¤ä¸ªå…ƒç´ &#39;æ·»åŠ 1&#39;ã€&#39;æ·»åŠ 2&#39;</code></pre><p>eg3: ä¸åˆ é™¤åªæ·»åŠ :</p><pre><code>let a = [1, 2, 3, 4, 5, 6, 7];let item = a.splice(0,0,&#39;æ·»åŠ 1&#39;,&#39;æ·»åŠ 2&#39;); // [] æ²¡æœ‰åˆ é™¤å…ƒç´ ï¼Œè¿”å›ç©ºæ•°ç»„console.log(a); // [&#39;æ·»åŠ 1&#39;,&#39;æ·»åŠ 2&#39;,1,2,3,4,5,6,7]let b = [1, 2, 3, 4, 5, 6, 7];let item = b.splice(-1,0,&#39;æ·»åŠ 1&#39;,&#39;æ·»åŠ 2&#39;); // [] æ²¡æœ‰åˆ é™¤å…ƒç´ ï¼Œè¿”å›ç©ºæ•°ç»„console.log(b); // [1,2,3,4,5,6,&#39;æ·»åŠ 1&#39;,&#39;æ·»åŠ 2&#39;,7] åœ¨æœ€åä¸€ä¸ªå…ƒç´ çš„å‰é¢æ·»åŠ ä¸¤ä¸ªå…ƒç´ </code></pre><p>ä»ä¸Šè¿°ä¸‰ä¸ªæ —å­å¯ä»¥å¾—å‡º:</p><ol><li>æ•°ç»„å¦‚æœå…ƒç´ ä¸å¤Ÿï¼Œä¼šåˆ é™¤åˆ°æœ€åä¸€ä¸ªå…ƒç´ ä¸ºæ­¢</li><li>æ“ä½œçš„å…ƒç´ ï¼ŒåŒ…æ‹¬å¼€å§‹çš„é‚£ä¸ªå…ƒç´ </li><li>å¯ä»¥æ·»åŠ å¾ˆå¤šä¸ªå…ƒç´ </li><li>æ·»åŠ æ˜¯åœ¨å¼€å§‹çš„å…ƒç´ å‰é¢æ·»åŠ çš„</li></ol><p><strong>sort() æ•°ç»„æ’åº</strong></p><p>å®šä¹‰: <code>sort()</code>æ–¹æ³•å¯¹æ•°ç»„å…ƒç´ è¿›è¡Œæ’åºï¼Œå¹¶è¿”å›è¿™ä¸ªæ•°ç»„ã€‚</p><p>å‚æ•°å¯é€‰: è§„å®šæ’åºé¡ºåºçš„æ¯”è¾ƒå‡½æ•°ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹<code>sort()</code>æ–¹æ³•æ²¡æœ‰ä¼ æ¯”è¾ƒå‡½æ•°çš„è¯ï¼Œé»˜è®¤æŒ‰å­—æ¯å‡åºï¼Œå¦‚æœä¸æ˜¯å…ƒç´ ä¸æ˜¯å­—ç¬¦ä¸²çš„è¯ï¼Œä¼šè°ƒç”¨toString()æ–¹æ³•å°†å…ƒç´ è½¬åŒ–ä¸ºå­—ç¬¦ä¸²çš„Unicode(ä¸‡å›½ç )ä½ç‚¹ï¼Œç„¶åå†æ¯”è¾ƒå­—ç¬¦ã€‚</p><pre><code>// å­—ç¬¦ä¸²æ’åˆ— çœ‹èµ·æ¥å¾ˆæ­£å¸¸var a = [&quot;Banana&quot;, &quot;Orange&quot;, &quot;Apple&quot;, &quot;Mango&quot;];a.sort(); // [&quot;Apple&quot;,&quot;Banana&quot;,&quot;Mango&quot;,&quot;Orange&quot;]// æ•°å­—æ’åºçš„æ—¶å€™ å› ä¸ºè½¬æ¢æˆUnicodeå­—ç¬¦ä¸²ä¹‹åï¼Œæœ‰äº›æ•°å­—ä¼šæ¯”è¾ƒå¤§ä¼šæ’åœ¨åé¢ è¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„var a = [10, 1, 3, 20,25,8];console.log(a.sort()) // [1,10,20,25,3,8];</code></pre><p><strong>æ¯”è¾ƒå‡½æ•°çš„ä¸¤ä¸ªå‚æ•°ï¼š</strong></p><p>sortçš„æ¯”è¾ƒå‡½æ•°æœ‰ä¸¤ä¸ªé»˜è®¤å‚æ•°ï¼Œè¦åœ¨å‡½æ•°ä¸­æ¥æ”¶è¿™ä¸¤ä¸ªå‚æ•°ï¼Œè¿™ä¸¤ä¸ªå‚æ•°æ˜¯æ•°ç»„ä¸­ä¸¤ä¸ªè¦æ¯”è¾ƒçš„å…ƒç´ ï¼Œé€šå¸¸æˆ‘ä»¬ç”¨ a å’Œ b æ¥æ”¶ä¸¤ä¸ªå°†è¦æ¯”è¾ƒçš„å…ƒç´ ï¼š</p><ul><li>è‹¥æ¯”è¾ƒå‡½æ•°è¿”å›å€¼&lt;0ï¼Œé‚£ä¹ˆaå°†æ’åˆ°bçš„å‰é¢;</li><li>è‹¥æ¯”è¾ƒå‡½æ•°è¿”å›å€¼=0ï¼Œé‚£ä¹ˆa å’Œ b ç›¸å¯¹ä½ç½®ä¸å˜ï¼›</li><li>è‹¥æ¯”è¾ƒå‡½æ•°è¿”å›å€¼&gt;0ï¼Œé‚£ä¹ˆb æ’åœ¨a å°†çš„å‰é¢ï¼›</li></ul><p><strong>sortæ’åºå¸¸è§ç”¨æ³•ï¼š</strong></p><p>1ã€æ•°ç»„å…ƒç´ ä¸ºæ•°å­—çš„å‡åºã€é™åº:</p><pre><code>var array = [10, 1, 3, 4,20,4,25,8];// å‡åº a-b &lt; 0 aå°†æ’åˆ°bçš„å‰é¢ï¼ŒæŒ‰ç…§açš„å¤§å°æ¥æ’åºçš„// æ¯”å¦‚è¢«å‡æ•°aæ˜¯10ï¼Œå‡æ•°æ˜¯20 10-20 &lt; 0 è¢«å‡æ•°a(10)åœ¨å‡æ•°b(20)å‰é¢array.sort(function(a,b)&#123; return a-b;&#125;);console.log(array); // [1,3,4,4,8,10,20,25];// é™åº è¢«å‡æ•°å’Œå‡æ•°è°ƒæ¢äº† 20-10&gt;0 è¢«å‡æ•°b(20)åœ¨å‡æ•°a(10)çš„å‰é¢array.sort(function(a,b)&#123; return b-a;&#125;);console.log(array); // [25,20,10,8,4,4,3,1];</code></pre><p>2ã€æ•°ç»„å¤šæ¡ä»¶æ’åº</p><pre><code>var array = [&#123;id:10,age:2&#125;,&#123;id:5,age:4&#125;,&#123;id:6,age:10&#125;,&#123;id:9,age:6&#125;,&#123;id:2,age:8&#125;,&#123;id:10,age:9&#125;]; array.sort(function(a,b)&#123;  if(a.id === b.id)&#123;// å¦‚æœidçš„å€¼ç›¸ç­‰ï¼ŒæŒ‰ç…§ageçš„å€¼é™åº   return b.age - a.age  &#125;else&#123; // å¦‚æœidçš„å€¼ä¸ç›¸ç­‰ï¼ŒæŒ‰ç…§idçš„å€¼å‡åº   return a.id - b.id  &#125; &#125;) // [&#123;&quot;id&quot;:2,&quot;age&quot;:8&#125;,&#123;&quot;id&quot;:5,&quot;age&quot;:4&#125;,&#123;&quot;id&quot;:6,&quot;age&quot;:10&#125;,&#123;&quot;id&quot;:9,&quot;age&quot;:6&#125;,&#123;&quot;id&quot;:10,&quot;age&quot;:9&#125;,&#123;&quot;id&quot;:10,&quot;age&quot;:2&#125;]</code></pre><p>3ã€è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°ï¼Œå¤©ç©ºæ‰æ˜¯ä½ çš„æé™</p><p>ç±»ä¼¼çš„ï¼šè¿ç”¨å¥½è¿”å›å€¼ï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºä»»æ„ç¬¦åˆè‡ªå·±éœ€æ±‚çš„æ¯”è¾ƒå‡½æ•°</p><pre><code>var array = [&#123;name:&#39;Koro1&#39;&#125;,&#123;name:&#39;Koro1&#39;&#125;,&#123;name:&#39;OB&#39;&#125;,&#123;name:&#39;Koro1&#39;&#125;,&#123;name:&#39;OB&#39;&#125;,&#123;name:&#39;OB&#39;&#125;];array.sort(function(a,b)&#123; if(a.name === &#39;Koro1&#39;)&#123;// å¦‚æœnameæ˜¯&#39;Koro1&#39; è¿”å›-1 ï¼Œ-1&lt;0 aæ’åœ¨bçš„å‰é¢  return -1 &#125;else&#123; // å¦‚æœä¸æ˜¯çš„è¯ï¼Œaæ’åœ¨bçš„åé¢  return 1 &#125;&#125;)// [&#123;&quot;name&quot;:&quot;Koro1&quot;&#125;,&#123;&quot;name&quot;:&quot;Koro1&quot;&#125;,&#123;&quot;name&quot;:&quot;Koro1&quot;&#125;,&#123;&quot;name&quot;:&quot;OB&quot;&#125;,&#123;&quot;name&quot;:&quot;OB&quot;&#125;,&#123;&quot;name&quot;:&quot;OB&quot;&#125;]</code></pre><p><strong>ES6: copyWithin() æŒ‡å®šä½ç½®çš„æˆå‘˜å¤åˆ¶åˆ°å…¶ä»–ä½ç½®</strong></p><p>å®šä¹‰: åœ¨å½“å‰æ•°ç»„å†…éƒ¨ï¼Œå°†æŒ‡å®šä½ç½®çš„æˆå‘˜å¤åˆ¶åˆ°å…¶ä»–ä½ç½®,å¹¶è¿”å›è¿™ä¸ªæ•°ç»„ã€‚</p><p>è¯­æ³•:</p><p><strong>array.copyWithin(target, start = 0, end = this.length)</strong><br>å‚æ•°:</p><p>ä¸‰ä¸ªå‚æ•°éƒ½æ˜¯æ•°å€¼ï¼Œå¦‚æœä¸æ˜¯ï¼Œä¼šè‡ªåŠ¨è½¬ä¸ºæ•°å€¼.</p><ol><li>targetï¼ˆå¿…éœ€ï¼‰ï¼šä»è¯¥ä½ç½®å¼€å§‹æ›¿æ¢æ•°æ®ã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºå€’æ•°ã€‚</li><li>startï¼ˆå¯é€‰ï¼‰ï¼šä»è¯¥ä½ç½®å¼€å§‹è¯»å–æ•°æ®ï¼Œé»˜è®¤ä¸º 0ã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºå€’æ•°ã€‚</li><li>endï¼ˆå¯é€‰ï¼‰ï¼šåˆ°è¯¥ä½ç½®å‰åœæ­¢è¯»å–æ•°æ®ï¼Œé»˜è®¤ç­‰äºæ•°ç»„é•¿åº¦ã€‚ä½¿ç”¨è´Ÿæ•°å¯ä»æ•°ç»„ç»“å°¾å¤„è§„å®šä½ç½®ã€‚</li></ol><p>æµè§ˆå™¨å…¼å®¹(MDN): chrome 45,Edge 12,Firefox32,Opera 32,Safari 9, IE ä¸æ”¯æŒ</p><p>eg:</p><pre><code>// -2ç›¸å½“äº3å·ä½ï¼Œ-1ç›¸å½“äº4å·ä½[1, 2, 3, 4, 5].copyWithin(0, -2, -1)// [4, 2, 3, 4, 5]var a=[&#39;OB1&#39;,&#39;Koro1&#39;,&#39;OB2&#39;,&#39;Koro2&#39;,&#39;OB3&#39;,&#39;Koro3&#39;,&#39;OB4&#39;,&#39;Koro4&#39;,&#39;OB5&#39;,&#39;Koro5&#39;]// 2ä½ç½®å¼€å§‹è¢«æ›¿æ¢,3ä½ç½®å¼€å§‹è¯»å–è¦æ›¿æ¢çš„ 5ä½ç½®å‰é¢åœæ­¢æ›¿æ¢a.copyWithin(2,3,5)// [&quot;OB1&quot;,&quot;Koro1&quot;,&quot;Koro2&quot;,&quot;OB3&quot;,&quot;OB3&quot;,&quot;Koro3&quot;,&quot;OB4&quot;,&quot;Koro4&quot;,&quot;OB5&quot;,&quot;Koro5&quot;]</code></pre><p>ä»ä¸Šè¿°æ —å­:</p><ol><li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¼€å§‹è¢«æ›¿æ¢çš„å…ƒç´ ä½ç½®</li><li>è¦æ›¿æ¢æ•°æ®çš„ä½ç½®èŒƒå›´:ä»ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¼€å§‹è¯»å–çš„å…ƒç´ ï¼Œåœ¨ç¬¬ä¸‰ä¸ªå‚æ•°å‰é¢ä¸€ä¸ªå…ƒç´ åœæ­¢è¯»å–</li><li>æ•°ç»„çš„é•¿åº¦ä¸ä¼šæ”¹å˜</li><li>è¯»äº†å‡ ä¸ªå…ƒç´ å°±ä»å¼€å§‹è¢«æ›¿æ¢çš„åœ°æ–¹æ›¿æ¢å‡ ä¸ªå…ƒç´ </li></ol><p><strong>ES6: fill() å¡«å……æ•°ç»„</strong></p><p>å®šä¹‰: ä½¿ç”¨ç»™å®šå€¼ï¼Œå¡«å……ä¸€ä¸ªæ•°ç»„ã€‚</p><p>å‚æ•°:</p><p>ç¬¬ä¸€ä¸ªå…ƒç´ (å¿…é¡»): è¦å¡«å……æ•°ç»„çš„å€¼</p><p>ç¬¬äºŒä¸ªå…ƒç´ (å¯é€‰): å¡«å……çš„å¼€å§‹ä½ç½®,é»˜è®¤å€¼ä¸º0</p><p>ç¬¬ä¸‰ä¸ªå…ƒç´ (å¯é€‰)ï¼šå¡«å……çš„ç»“æŸä½ç½®ï¼Œé»˜è®¤æ˜¯ä¸ºthis.length</p><p><strong>MDNæµè§ˆå™¨å…¼å®¹</strong></p><pre><code>[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;].fill(7)// [7, 7, 7][&#39;a&#39;, &#39;b&#39;, &#39;c&#39;].fill(7, 1, 2)// [&#39;a&#39;, 7, &#39;c&#39;]</code></pre><p><strong>ä¸æ”¹å˜åŸæ•°ç»„çš„æ–¹æ³•(8ä¸ª):</strong></p><pre><code>ES5ï¼šjoinã€toLocateStringã€toStriginã€sliceã€cancatã€indexOfã€lastIndexOfã€ES7ï¼šincludes</code></pre><p><strong>join() æ•°ç»„è½¬å­—ç¬¦ä¸²</strong></p><p>å®šä¹‰: <code>join() </code>æ–¹æ³•ç”¨äºæŠŠæ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ é€šè¿‡æŒ‡å®šçš„åˆ†éš”ç¬¦è¿›è¡Œåˆ†éš”æ”¾å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿”å›ç”Ÿæˆçš„å­—ç¬¦ä¸²ã€‚</p><p>è¯­æ³•:</p><p><strong>array.join(str)</strong><br>å‚æ•°:</p><p>str(å¯é€‰): æŒ‡å®šè¦ä½¿ç”¨çš„åˆ†éš”ç¬¦ï¼Œé»˜è®¤ä½¿ç”¨é€—å·ä½œä¸ºåˆ†éš”ç¬¦ã€‚</p><pre><code>let a= [&#39;hello&#39;,&#39;world&#39;];let str=a.join(); // &#39;hello,world&#39;let str2=a.join(&#39;+&#39;); // &#39;hello+world&#39;</code></pre><p>ä½¿ç”¨joinæ–¹æ³•æˆ–è€…ä¸‹æ–‡è¯´åˆ°çš„toStringæ–¹æ³•æ—¶ï¼Œå½“æ•°ç»„ä¸­çš„å…ƒç´ ä¹Ÿæ˜¯æ•°ç»„æˆ–è€…æ˜¯å¯¹è±¡æ—¶ä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µï¼Ÿ</p><pre><code>let a= [[&#39;OBKoro1&#39;,&#39;23&#39;],&#39;test&#39;];let str1=a.join(); // OBKoro1,23,testlet b= [&#123;name:&#39;OBKoro1&#39;,age:&#39;23&#39;&#125;,&#39;test&#39;];let str2 = b.join(); // [object Object],test// å¯¹è±¡è½¬å­—ç¬¦ä¸²æ¨èJSON.stringify(obj);</code></pre><p>æ‰€ä»¥ï¼Œ<code>join()</code>/<code>toString()</code>æ–¹æ³•åœ¨æ•°ç»„å…ƒç´ æ˜¯æ•°ç»„çš„æ—¶å€™ï¼Œä¼šå°†é‡Œé¢çš„æ•°ç»„ä¹Ÿè°ƒç”¨join()/toString(),å¦‚æœæ˜¯å¯¹è±¡çš„è¯ï¼Œå¯¹è±¡ä¼šè¢«è½¬ä¸º[object Object]å­—ç¬¦ä¸²ã€‚</p><p><strong>toLocaleString() æ•°ç»„è½¬å­—ç¬¦ä¸²</strong></p><p>å®šä¹‰: è¿”å›ä¸€ä¸ªè¡¨ç¤ºæ•°ç»„å…ƒç´ çš„å­—ç¬¦ä¸²ã€‚è¯¥å­—ç¬¦ä¸²ç”±æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ çš„ <code>toLocaleString() </code>è¿”å›å€¼ç»è°ƒç”¨ join() æ–¹æ³•è¿æ¥ï¼ˆç”±é€—å·éš”å¼€ï¼‰ç»„æˆã€‚</p><p>è¯­æ³•:</p><p><strong>array.toLocaleString()</strong><br>å‚æ•°ï¼šæ— ã€‚</p><pre><code>let a=[&#123;name:&#39;OBKoro1&#39;&#125;,23,&#39;abcd&#39;,new Date()];let str=a.toLocaleString(); // [object Object],23,abcd,2021/12/3 ä¸‹åˆ1:52:20</code></pre><p>å¦‚ä¸Šè¿°æ —å­ï¼šè°ƒç”¨æ•°ç»„çš„<code>toLocaleString</code>æ–¹æ³•ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½ä¼šè°ƒç”¨è‡ªèº«çš„toLocaleStringæ–¹æ³•ï¼Œå¯¹è±¡è°ƒç”¨å¯¹è±¡çš„toLocaleString,Dateè°ƒç”¨Dateçš„toLocaleStringã€‚</p><p><strong>toString() æ•°ç»„è½¬å­—ç¬¦ä¸² ä¸æ¨è</strong></p><p>å®šä¹‰: <code>toString() </code>æ–¹æ³•å¯æŠŠæ•°ç»„è½¬æ¢ä¸ºç”±é€—å·é“¾æ¥èµ·æ¥çš„å­—ç¬¦ä¸²ã€‚</p><p>è¯­æ³•:</p><p><strong>array.toString()</strong><br>å‚æ•°: æ— ã€‚</p><p>è¯¥æ–¹æ³•çš„æ•ˆæœå’Œjoinæ–¹æ³•ä¸€æ ·ï¼Œéƒ½æ˜¯ç”¨äºæ•°ç»„è½¬å­—ç¬¦ä¸²çš„ï¼Œä½†æ˜¯ä¸joinæ–¹æ³•ç›¸æ¯”æ²¡æœ‰ä¼˜åŠ¿ï¼Œä¹Ÿä¸èƒ½è‡ªå®šä¹‰å­—ç¬¦ä¸²çš„åˆ†éš”ç¬¦ï¼Œå› æ­¤ä¸æ¨èä½¿ç”¨ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼šå½“æ•°ç»„å’Œå­—ç¬¦ä¸²æ“ä½œçš„æ—¶å€™ï¼Œjs ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•å°†æ•°ç»„è‡ªåŠ¨è½¬æ¢æˆå­—ç¬¦ä¸²</p><pre><code>let b= [ &#39;toString&#39;,&#39;æ¼”ç¤º&#39;].toString(); // toString,æ¼”ç¤ºlet a= [&#39;è°ƒç”¨toString&#39;,&#39;è¿æ¥åœ¨æˆ‘åé¢&#39;]+&#39;å•¦å•¦å•¦&#39;; // è°ƒç”¨toString,è¿æ¥åœ¨æˆ‘åé¢å•¦å•¦å•¦</code></pre><p><strong>slice() æµ…æ‹·è´æ•°ç»„çš„å…ƒç´ </strong></p><p>å®šä¹‰ï¼š æ–¹æ³•è¿”å›ä¸€ä¸ªä»å¼€å§‹åˆ°ç»“æŸï¼ˆä¸åŒ…æ‹¬ç»“æŸï¼‰é€‰æ‹©çš„æ•°ç»„çš„ä¸€éƒ¨åˆ†æµ…æ‹·è´åˆ°ä¸€ä¸ªæ–°æ•°ç»„å¯¹è±¡ï¼Œä¸”åŸæ•°ç»„ä¸ä¼šè¢«ä¿®æ”¹ã€‚</p><p>æ³¨æ„ï¼šå­—ç¬¦ä¸²ä¹Ÿæœ‰ä¸€ä¸ª<code>slice() </code>æ–¹æ³•æ˜¯ç”¨æ¥æå–å­—ç¬¦ä¸²çš„ï¼Œä¸è¦å¼„æ··äº†ã€‚</p><p>è¯­æ³•:</p><p><strong>array.slice(begin, end);</strong><br>å‚æ•°:</p><p>begin(å¯é€‰): ç´¢å¼•æ•°å€¼,æ¥å—è´Ÿå€¼ï¼Œä»è¯¥ç´¢å¼•å¤„å¼€å§‹æå–åŸæ•°ç»„ä¸­çš„å…ƒç´ ,é»˜è®¤å€¼ä¸º0ã€‚</p><p>end(å¯é€‰):ç´¢å¼•æ•°å€¼(ä¸åŒ…æ‹¬),æ¥å—è´Ÿå€¼ï¼Œåœ¨è¯¥ç´¢å¼•å¤„å‰ç»“æŸæå–åŸæ•°ç»„å…ƒç´ ï¼Œé»˜è®¤å€¼ä¸ºæ•°ç»„æœ«å°¾(åŒ…æ‹¬æœ€åä¸€ä¸ªå…ƒç´ )ã€‚</p><pre><code>let a= [&#39;hello&#39;,&#39;world&#39;];let b=a.slice(0,1); // [&#39;hello&#39;]a[0]=&#39;æ”¹å˜åŸæ•°ç»„&#39;;console.log(a,b); // [&#39;æ”¹å˜åŸæ•°ç»„&#39;,&#39;world&#39;] [&#39;hello&#39;]b[0]=&#39;æ”¹å˜æ‹·è´çš„æ•°ç»„&#39;;console.log(a,b); // [&#39;æ”¹å˜åŸæ•°ç»„&#39;,&#39;world&#39;] [&#39;æ”¹å˜æ‹·è´çš„æ•°ç»„&#39;]</code></pre><p>å¦‚ä¸Šï¼šæ–°æ•°ç»„æ˜¯æµ…æ‹·è´çš„ï¼Œå…ƒç´ æ˜¯ç®€å•æ•°æ®ç±»å‹ï¼Œæ”¹å˜ä¹‹åä¸ä¼šäº’ç›¸å¹²æ‰°ã€‚</p><p>å¦‚æœæ˜¯å¤æ‚æ•°æ®ç±»å‹(å¯¹è±¡,æ•°ç»„)çš„è¯ï¼Œæ”¹å˜å…¶ä¸­ä¸€ä¸ªï¼Œå¦å¤–ä¸€ä¸ªä¹Ÿä¼šæ”¹å˜ã€‚</p><pre><code>let a= [&#123;name:&#39;OBKoro1&#39;&#125;];let b=a.slice();console.log(b,a); // [&#123;&quot;name&quot;:&quot;OBKoro1&quot;&#125;] [&#123;&quot;name&quot;:&quot;OBKoro1&quot;&#125;]// a[0].name=&#39;æ”¹å˜åŸæ•°ç»„&#39;;// console.log(b,a); // [&#123;&quot;name&quot;:&quot;æ”¹å˜åŸæ•°ç»„&quot;&#125;] [&#123;&quot;name&quot;:&quot;æ”¹å˜åŸæ•°ç»„&quot;&#125;]// b[0].name=&#39;æ”¹å˜æ‹·è´æ•°ç»„&#39;,b[0].koro=&#39;æ”¹å˜æ‹·è´æ•°ç»„&#39;;// [&#123;&quot;name&quot;:&quot;æ”¹å˜æ‹·è´æ•°ç»„&quot;,&quot;koro&quot;:&quot;æ”¹å˜æ‹·è´æ•°ç»„&quot;&#125;] [&#123;&quot;name&quot;:&quot;æ”¹å˜æ‹·è´æ•°ç»„&quot;,&quot;koro&quot;:&quot;æ”¹å˜æ‹·è´æ•°ç»„&quot;&#125;]</code></pre><p>åŸå› åœ¨å®šä¹‰ä¸Šé¢è¯´è¿‡äº†çš„ï¼šslice()æ˜¯æµ…æ‹·è´ï¼Œå¯¹äºå¤æ‚çš„æ•°æ®ç±»å‹æµ…æ‹·è´ï¼Œæ‹·è´çš„åªæ˜¯æŒ‡å‘åŸæ•°ç»„çš„æŒ‡é’ˆï¼Œæ‰€ä»¥æ— è®ºæ”¹å˜åŸæ•°ç»„ï¼Œè¿˜æ˜¯æµ…æ‹·è´çš„æ•°ç»„ï¼Œéƒ½æ˜¯æ”¹å˜åŸæ•°ç»„çš„æ•°æ®ã€‚</p><p><strong>cancat</strong></p><p>å®šä¹‰ï¼š æ–¹æ³•ç”¨äºåˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°ç»„ï¼Œè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚</p><p>è¯­æ³•ï¼š</p><p><strong>var newArr =oldArray.concat(arrayX,arrayX,â€¦â€¦,arrayX)</strong><br>å‚æ•°ï¼š</p><p>arrayXï¼ˆå¿…é¡»ï¼‰ï¼šè¯¥å‚æ•°å¯ä»¥æ˜¯å…·ä½“çš„å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯æ•°ç»„å¯¹è±¡ã€‚å¯ä»¥æ˜¯ä»»æ„å¤šä¸ªã€‚</p><p>eg1:</p><pre><code>let a = [1, 2, 3]; let b = [4, 5, 6]; //è¿æ¥ä¸¤ä¸ªæ•°ç»„ let newVal=a.concat(b); // [1,2,3,4,5,6] // è¿æ¥ä¸‰ä¸ªæ•°ç»„ let c = [7, 8, 9] let newVal2 = a.concat(b, c); // [1,2,3,4,5,6,7,8,9] // æ·»åŠ å…ƒç´  let newVal3 = a.concat(&#39;æ·»åŠ å…ƒç´ &#39;,b, c,&#39;å†åŠ ä¸€ä¸ª&#39;); // [1,2,3,&quot;æ·»åŠ å…ƒç´ &quot;,4,5,6,7,8,9,&quot;å†åŠ ä¸€ä¸ª&quot;]// åˆå¹¶åµŒå¥—æ•°ç»„ ä¼šæµ…æ‹·è´åµŒå¥—æ•°ç»„let d = [1,2 ];let f = [3,[4]];let newVal4 = d.concat(f); // [1,2,3,[4]]</code></pre><p>ES6æ‰©å±•è¿ç®—ç¬¦â€¦åˆå¹¶æ•°ç»„ï¼š</p><p>å› ä¸ºES6çš„è¯­æ³•æ›´ç®€æ´æ˜“æ‡‚ï¼Œæ‰€ä»¥ç°åœ¨åˆå¹¶æ•°ç»„æˆ‘å¤§éƒ¨åˆ†é‡‡ç”¨â€¦æ¥å¤„ç†ï¼Œâ€¦è¿ç®—ç¬¦å¯ä»¥å®ç°cancatçš„æ¯ä¸ªæ —å­ï¼Œä¸”æ›´ç®€æ´å’Œå…·æœ‰é«˜åº¦è‡ªå®šä¹‰æ•°ç»„å…ƒç´ ä½ç½®çš„æ•ˆæœã€‚</p><pre><code>let a = [2, 3, 4, 5]let b = [ 4,...a, 4, 4]console.log(a,b); // [2, 3, 4, 5] [4,2,3,4,5,4,4]</code></pre><p>æ›´å¤šå…³äºæ‰©å±•ç¬¦çš„è¯¦ç»†å†…å®¹ç§»æ­¥é˜®ä¸€å³°å¤§ç¥çš„<a href="http://es6.ruanyifeng.com/#docs/array#%E6%89%A9%E5%B1%95%E8%BF%90%E7%AE%97%E7%AC%A6">ECMAScript 6 å…¥é—¨</a></p><p><strong>indexOf() æŸ¥æ‰¾æ•°ç»„æ˜¯å¦å­˜åœ¨æŸä¸ªå…ƒç´ ï¼Œè¿”å›ä¸‹æ ‡</strong></p><p>å®šä¹‰: è¿”å›åœ¨æ•°ç»„ä¸­å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªç»™å®šå…ƒç´ çš„ç¬¬ä¸€ä¸ªç´¢å¼•ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›-1ã€‚</p><p>è¯­æ³•:</p><p><strong>array.indexOf(searchElement,fromIndex)</strong><br>å‚æ•°:</p><p>searchElement(å¿…é¡»):è¢«æŸ¥æ‰¾çš„å…ƒç´ </p><p>fromIndex(å¯é€‰):å¼€å§‹æŸ¥æ‰¾çš„ä½ç½®(ä¸èƒ½å¤§äºç­‰äºæ•°ç»„çš„é•¿åº¦ï¼Œè¿”å›-1)ï¼Œæ¥å—è´Ÿå€¼ï¼Œé»˜è®¤å€¼ä¸º0ã€‚</p><p>ä¸¥æ ¼ç›¸ç­‰çš„æœç´¢:</p><p>æ•°ç»„çš„indexOfæœç´¢è·Ÿå­—ç¬¦ä¸²çš„indexOfä¸ä¸€æ ·,æ•°ç»„çš„indexOfä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰===æœç´¢å…ƒç´ ï¼Œå³æ•°ç»„å…ƒç´ è¦å®Œå…¨åŒ¹é…æ‰èƒ½æœç´¢æˆåŠŸã€‚</p><p>æ³¨æ„ï¼šindexOf()ä¸èƒ½è¯†åˆ«NaN</p><p>eg:</p><pre><code>let a=[&#39;å•¦å•¦&#39;,2,4,24,NaN]console.log(a.indexOf(&#39;å•¦&#39;)); // -1console.log(a.indexOf(&#39;NaN&#39;)); // -1console.log(a.indexOf(&#39;å•¦å•¦&#39;)); // 0</code></pre><p>ä½¿ç”¨åœºæ™¯ï¼š</p><ol><li><strong>æ•°ç»„å»é‡</strong></li><li>æ ¹æ®è·å–çš„æ•°ç»„ä¸‹æ ‡æ‰§è¡Œæ“ä½œï¼Œæ”¹å˜æ•°ç»„ä¸­çš„å€¼ç­‰ã€‚</li><li>åˆ¤æ–­æ˜¯å¦å­˜åœ¨ï¼Œæ‰§è¡Œæ“ä½œã€‚</li></ol><p><strong>lastIndexOf() æŸ¥æ‰¾æŒ‡å®šå…ƒç´ åœ¨æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªä½ç½®</strong></p><p>å®šä¹‰: æ–¹æ³•è¿”å›æŒ‡å®šå…ƒç´ ,åœ¨æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªçš„ç´¢å¼•ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å› -1ã€‚ï¼ˆä»æ•°ç»„åé¢å¾€å‰æŸ¥æ‰¾ï¼‰</p><p>è¯­æ³•:</p><p><strong>arr.lastIndexOf(searchElement,fromIndex)</strong><br>å‚æ•°:</p><p>searchElement(å¿…é¡»): è¢«æŸ¥æ‰¾çš„å…ƒç´ </p><p>fromIndex(å¯é€‰): é€†å‘æŸ¥æ‰¾å¼€å§‹ä½ç½®ï¼Œé»˜è®¤å€¼æ•°ç»„çš„é•¿åº¦-1ï¼Œå³æŸ¥æ‰¾æ•´ä¸ªæ•°ç»„ã€‚</p><p>å…³äºfromIndexæœ‰ä¸‰ä¸ªè§„åˆ™:</p><ol><li>æ­£å€¼ã€‚å¦‚æœè¯¥å€¼å¤§äºæˆ–ç­‰äºæ•°ç»„çš„é•¿åº¦ï¼Œåˆ™æ•´ä¸ªæ•°ç»„ä¼šè¢«æŸ¥æ‰¾ã€‚</li><li>è´Ÿå€¼ã€‚å°†å…¶è§†ä¸ºä»æ•°ç»„æœ«å°¾å‘å‰çš„åç§»ã€‚(æ¯”å¦‚-2ï¼Œä»æ•°ç»„æœ€åç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹å¾€å‰æŸ¥æ‰¾)</li><li>è´Ÿå€¼ã€‚å…¶ç»å¯¹å€¼å¤§äºæ•°ç»„é•¿åº¦ï¼Œåˆ™æ–¹æ³•è¿”å› -1ï¼Œå³æ•°ç»„ä¸ä¼šè¢«æŸ¥æ‰¾ã€‚</li></ol><pre><code>let a=[&#39;OB&#39;,4,&#39;Koro1&#39;,1,2,&#39;Koro1&#39;,3,4,5,&#39;Koro1&#39;]; // æ•°ç»„é•¿åº¦ä¸º10// let b=a.lastIndexOf(&#39;Koro1&#39;,4); // ä»ä¸‹æ ‡4å¼€å§‹å¾€å‰æ‰¾ è¿”å›ä¸‹æ ‡2// let b=a.lastIndexOf(&#39;Koro1&#39;,100); // å¤§äºæˆ–æ•°ç»„çš„é•¿åº¦ æŸ¥æ‰¾æ•´ä¸ªæ•°ç»„ è¿”å›9// let b=a.lastIndexOf(&#39;Koro1&#39;,-11); // -1 æ•°ç»„ä¸ä¼šè¢«æŸ¥æ‰¾let b=a.lastIndexOf(&#39;Koro1&#39;,-9); // ä»ç¬¬äºŒä¸ªå…ƒç´ 4å¾€å‰æŸ¥æ‰¾ï¼Œæ²¡æœ‰æ‰¾åˆ° è¿”å›-1</code></pre><p><strong>ES7 includes() æŸ¥æ‰¾æ•°ç»„æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´  è¿”å›å¸ƒå°”</strong></p><p>å®šä¹‰ï¼š è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ç»™å®šçš„å€¼</p><p>è¯­æ³•ï¼š</p><p><strong>array.includes(searchElement,fromIndex=0)</strong><br>å‚æ•°ï¼š</p><p>searchElement(å¿…é¡»):è¢«æŸ¥æ‰¾çš„å…ƒç´ </p><p>fromIndex(å¯é€‰):é»˜è®¤å€¼ä¸º0ï¼Œå‚æ•°è¡¨ç¤ºæœç´¢çš„èµ·å§‹ä½ç½®ï¼Œæ¥å—è´Ÿå€¼ã€‚æ­£å€¼è¶…è¿‡æ•°ç»„é•¿åº¦ï¼Œæ•°ç»„ä¸ä¼šè¢«æœç´¢ï¼Œè¿”å›falseã€‚è´Ÿå€¼ç»å¯¹å€¼è¶…è¿‡é•¿æ•°ç»„åº¦ï¼Œé‡ç½®ä»0å¼€å§‹æœç´¢ã€‚</p><p>includesæ–¹æ³•æ˜¯ä¸ºäº†å¼¥è¡¥indexOfæ–¹æ³•çš„ç¼ºé™·è€Œå‡ºç°çš„:</p><ol><li>indexOfæ–¹æ³•ä¸èƒ½è¯†åˆ«NaN</li><li>indexOfæ–¹æ³•æ£€æŸ¥æ˜¯å¦åŒ…å«æŸä¸ªå€¼ä¸å¤Ÿè¯­ä¹‰åŒ–ï¼Œéœ€è¦åˆ¤æ–­æ˜¯å¦ä¸ç­‰äº-1ï¼Œè¡¨è¾¾ä¸å¤Ÿç›´è§‚</li></ol><p>eg:</p><pre><code>let a=[&#39;OB&#39;,&#39;Koro1&#39;,1,NaN];// let b=a.includes(NaN); // true è¯†åˆ«NaN// let b=a.includes(&#39;Koro1&#39;,100); // false è¶…è¿‡æ•°ç»„é•¿åº¦ ä¸æœç´¢// let b=a.includes(&#39;Koro1&#39;,-3); // true ä»å€’æ•°ç¬¬ä¸‰ä¸ªå…ƒç´ å¼€å§‹æœç´¢// let b=a.includes(&#39;Koro1&#39;,-100); // true è´Ÿå€¼ç»å¯¹å€¼è¶…è¿‡æ•°ç»„é•¿åº¦ï¼Œæœç´¢æ•´ä¸ªæ•°ç»„</code></pre><p>å…¼å®¹æ€§(MDN): chrome47, Firefox 43,Edge 14,Opera 34, Safari 9,IE æœªå®ç°ã€‚</p><p><strong>éå†æ–¹æ³•(12ä¸ª):</strong></p><p>jsä¸­éå†æ•°ç»„å¹¶ä¸ä¼šæ”¹å˜åŸå§‹æ•°ç»„çš„æ–¹æ³•æ€»å…±æœ‰12ä¸ª:</p><pre><code>ES5ï¼šforEachã€every ã€someã€ fliterã€mapã€reduceã€reduceRightã€ES6ï¼šfindã€findIndexã€keysã€valuesã€entries</code></pre><p><strong>å…³äºéå†ï¼š</strong></p><ul><li>å°½é‡ä¸è¦åœ¨éå†çš„æ—¶å€™ï¼Œä¿®æ”¹åé¢è¦éå†çš„å€¼</li><li>å°½é‡ä¸è¦åœ¨éå†çš„æ—¶å€™ä¿®æ”¹æ•°ç»„çš„é•¿åº¦ï¼ˆåˆ é™¤/æ·»åŠ ï¼‰</li></ul><p>forEach<br>å®šä¹‰: æŒ‰å‡åºä¸ºæ•°ç»„ä¸­å«æœ‰æ•ˆå€¼çš„æ¯ä¸€é¡¹æ‰§è¡Œä¸€æ¬¡å›è°ƒå‡½æ•°ã€‚</p><p>è¯­æ³•ï¼š</p><p><strong>array.forEach(function(currentValue, index, arr), thisValue)</strong><br>å‚æ•°:</p><p>function(å¿…é¡»): æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ éœ€è¦è°ƒç”¨çš„å‡½æ•°ã€‚</p><blockquote><p>// å›è°ƒå‡½æ•°çš„å‚æ•°<br>\1. currentValue(å¿…é¡»),æ•°ç»„å½“å‰å…ƒç´ çš„å€¼<br>\2. index(å¯é€‰), å½“å‰å…ƒç´ çš„ç´¢å¼•å€¼<br>\3. arr(å¯é€‰),æ•°ç»„å¯¹è±¡æœ¬èº«</p></blockquote><p>hisValue(å¯é€‰): å½“æ‰§è¡Œå›è°ƒå‡½æ•°æ—¶thisç»‘å®šå¯¹è±¡çš„å€¼ï¼Œé»˜è®¤å€¼ä¸ºundefined</p><p><strong>å…³äºforEach()ä½ è¦çŸ¥é“ï¼š</strong></p><ul><li>æ— æ³•ä¸­é€”é€€å‡ºå¾ªç¯ï¼Œåªèƒ½ç”¨returné€€å‡ºæœ¬æ¬¡å›è°ƒï¼Œè¿›è¡Œä¸‹ä¸€æ¬¡å›è°ƒã€‚</li><li>å®ƒæ€»æ˜¯è¿”å› undefinedå€¼,å³ä½¿ä½ returnäº†ä¸€ä¸ªå€¼ã€‚</li></ul><p><strong>ä¸‹é¢ç±»ä¼¼è¯­æ³•åŒæ ·é€‚ç”¨è¿™äº›è§„åˆ™</strong></p><blockquote><p>\1. å¯¹äºç©ºæ•°ç»„æ˜¯ä¸ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°çš„<br>\2. å¯¹äºå·²åœ¨è¿­ä»£è¿‡ç¨‹ä¸­åˆ é™¤çš„å…ƒç´ ï¼Œæˆ–è€…ç©ºå…ƒç´ ä¼šè·³è¿‡å›è°ƒå‡½æ•°<br>\3. éå†æ¬¡æ•°å†ç¬¬ä¸€æ¬¡å¾ªç¯å‰å°±ä¼šç¡®å®šï¼Œå†æ·»åŠ åˆ°æ•°ç»„ä¸­çš„å…ƒç´ ä¸ä¼šè¢«éå†ã€‚<br>\4. å¦‚æœå·²ç»å­˜åœ¨çš„å€¼è¢«æ”¹å˜ï¼Œåˆ™ä¼ é€’ç»™ callback çš„å€¼æ˜¯éå†åˆ°ä»–ä»¬é‚£ä¸€åˆ»çš„å€¼ã€‚</p></blockquote><p>eg:</p><pre><code>let a = [1, 2, ,3]; // æœ€åç¬¬äºŒä¸ªå…ƒç´ æ˜¯ç©ºçš„ï¼Œä¸ä¼šéå†(undefinedã€nullä¼šéå†)let obj = &#123; name: &#39;OBKoro1&#39; &#125;;let result = a.forEach(function (value, index, array) &#123; a[3] = &#39;æ”¹å˜å…ƒç´ &#39;; a.push(&#39;æ·»åŠ åˆ°å°¾ç«¯ï¼Œä¸ä¼šè¢«éå†&#39;) console.log(value, &#39;forEachä¼ é€’çš„ç¬¬ä¸€ä¸ªå‚æ•°&#39;); // åˆ†åˆ«æ‰“å° 1 ,2 ,æ”¹å˜å…ƒç´  console.log(this.name); // OBKoro1 æ‰“å°ä¸‰æ¬¡ thisç»‘å®šåœ¨objå¯¹è±¡ä¸Š // break; // breakä¼šæŠ¥é”™ return value; // returnåªèƒ½ç»“æŸæœ¬æ¬¡å›è°ƒ ä¼šæ‰§è¡Œä¸‹æ¬¡å›è°ƒ console.log(&#39;ä¸ä¼šæ‰§è¡Œï¼Œå› ä¸ºreturn ä¼šæ‰§è¡Œä¸‹ä¸€æ¬¡å¾ªç¯å›è°ƒ&#39;)&#125;, obj);console.log(result); // å³ä½¿returnäº†ä¸€ä¸ªå€¼,ä¹Ÿè¿˜æ˜¯è¿”å›undefined// å›è°ƒå‡½æ•°ä¹Ÿæ¥å—æ¥å¤´å‡½æ•°å†™æ³•</code></pre><p><strong>every æ£€æµ‹æ•°ç»„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½ç¬¦åˆåˆ¤æ–­æ¡ä»¶</strong></p><p>å®šä¹‰: æ–¹æ³•ç”¨äºæ£€æµ‹æ•°ç»„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½ç¬¦åˆå‡½æ•°å®šä¹‰çš„æ¡ä»¶</p><p>è¯­æ³•ï¼š</p><p><strong>array.every(function(currentValue, index, arr), thisValue)</strong><br>å‚æ•°:(è¿™å‡ ä¸ªæ–¹æ³•çš„å‚æ•°ï¼Œè¯­æ³•éƒ½ç±»ä¼¼)</p><p>function(å¿…é¡»): æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ éœ€è¦è°ƒç”¨çš„å‡½æ•°ã€‚</p><blockquote><p>// å›è°ƒå‡½æ•°çš„å‚æ•°<br>\1. currentValue(å¿…é¡»),æ•°ç»„å½“å‰å…ƒç´ çš„å€¼<br>\2. index(å¯é€‰), å½“å‰å…ƒç´ çš„ç´¢å¼•å€¼<br>\3. arr(å¯é€‰),æ•°ç»„å¯¹è±¡æœ¬èº«</p></blockquote><p>thisValue(å¯é€‰): å½“æ‰§è¡Œå›è°ƒå‡½æ•°æ—¶thisç»‘å®šå¯¹è±¡çš„å€¼ï¼Œé»˜è®¤å€¼ä¸ºundefined</p><p>æ–¹æ³•è¿”å›å€¼è§„åˆ™:</p><ol><li>å¦‚æœæ•°ç»„ä¸­æ£€æµ‹åˆ°æœ‰ä¸€ä¸ªå…ƒç´ ä¸æ»¡è¶³ï¼Œåˆ™æ•´ä¸ªè¡¨è¾¾å¼è¿”å› falseï¼Œä¸”å‰©ä½™çš„å…ƒç´ ä¸ä¼šå†è¿›è¡Œæ£€æµ‹ã€‚</li><li>å¦‚æœæ‰€æœ‰å…ƒç´ éƒ½æ»¡è¶³æ¡ä»¶ï¼Œåˆ™è¿”å› trueã€‚=</li></ol><p>eg:</p><pre><code>function isBigEnough(element, index, array) &#123; return element &gt;= 10; // åˆ¤æ–­æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½å¤§äº10&#125;let result = [12, 5, 8, 130, 44].every(isBigEnough); // falselet result = [12, 54, 18, 130, 44].every(isBigEnough); // true// æ¥å—ç®­å¤´å‡½æ•°å†™æ³•[12, 5, 8, 130, 44].every(x =&gt; x &gt;= 10); // false[12, 54, 18, 130, 44].every(x =&gt; x &gt;= 10); // true</code></pre><p><strong>some æ•°ç»„ä¸­çš„æ˜¯å¦æœ‰æ»¡è¶³åˆ¤æ–­æ¡ä»¶çš„å…ƒç´ </strong></p><p>å®šä¹‰ï¼šæ•°ç»„ä¸­çš„æ˜¯å¦æœ‰æ»¡è¶³åˆ¤æ–­æ¡ä»¶çš„å…ƒç´ </p><p>è¯­æ³•ï¼š</p><p><strong>array.some(function(currentValue, index, arr), thisValue)</strong><br>å‚æ•°:(è¿™å‡ ä¸ªæ–¹æ³•çš„å‚æ•°ï¼Œè¯­æ³•éƒ½ç±»ä¼¼)</p><p>function(å¿…é¡»): æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ éœ€è¦è°ƒç”¨çš„å‡½æ•°ã€‚</p><blockquote><p>// å›è°ƒå‡½æ•°çš„å‚æ•°<br>\1. currentValue(å¿…é¡»),æ•°ç»„å½“å‰å…ƒç´ çš„å€¼<br>\2. index(å¯é€‰), å½“å‰å…ƒç´ çš„ç´¢å¼•å€¼<br>\3. arr(å¯é€‰),æ•°ç»„å¯¹è±¡æœ¬èº«</p></blockquote><p>thisValue(å¯é€‰): å½“æ‰§è¡Œå›è°ƒå‡½æ•°æ—¶thisç»‘å®šå¯¹è±¡çš„å€¼ï¼Œé»˜è®¤å€¼ä¸ºundefined</p><p>æ–¹æ³•è¿”å›å€¼è§„åˆ™ï¼š</p><ol><li><p>å¦‚æœæœ‰ä¸€ä¸ªå…ƒç´ æ»¡è¶³æ¡ä»¶ï¼Œåˆ™è¡¨è¾¾å¼è¿”å›true, å‰©ä½™çš„å…ƒç´ ä¸ä¼šå†æ‰§è¡Œæ£€æµ‹ã€‚</p></li><li><p>å¦‚æœæ²¡æœ‰æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ï¼Œåˆ™è¿”å›falseã€‚</p><p> function isBigEnough(element, index, array) {<br>  return (element &gt;= 10); //æ•°ç»„ä¸­æ˜¯å¦æœ‰ä¸€ä¸ªå…ƒç´ å¤§äº 10<br> }<br> let result = [2, 5, 8, 1, 4].some(isBigEnough); // false<br> let result = [12, 5, 8, 1, 4].some(isBigEnough); // true</p></li></ol><p><strong>filter è¿‡æ»¤åŸå§‹æ•°ç»„ï¼Œè¿”å›æ–°æ•°ç»„</strong></p><p>å®šä¹‰: è¿”å›ä¸€ä¸ªæ–°æ•°ç»„, å…¶åŒ…å«é€šè¿‡æ‰€æä¾›å‡½æ•°å®ç°çš„æµ‹è¯•çš„æ‰€æœ‰å…ƒç´ ã€‚</p><p>è¯­æ³•ï¼š</p><p><strong>let new_array = arr.filter(function(currentValue, index, arr), thisArg)</strong><br>å‚æ•°:(è¿™å‡ ä¸ªæ–¹æ³•çš„å‚æ•°ï¼Œè¯­æ³•éƒ½ç±»ä¼¼)</p><p>function(å¿…é¡»): æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ éœ€è¦è°ƒç”¨çš„å‡½æ•°ã€‚</p><blockquote><p>// å›è°ƒå‡½æ•°çš„å‚æ•°<br>\1. currentValue(å¿…é¡»),æ•°ç»„å½“å‰å…ƒç´ çš„å€¼<br>\2. index(å¯é€‰), å½“å‰å…ƒç´ çš„ç´¢å¼•å€¼<br>\3. arr(å¯é€‰),æ•°ç»„å¯¹è±¡æœ¬èº«</p></blockquote><p>thisValue(å¯é€‰): å½“æ‰§è¡Œå›è°ƒå‡½æ•°æ—¶thisç»‘å®šå¯¹è±¡çš„å€¼ï¼Œé»˜è®¤å€¼ä¸ºundefined</p><p>eg:</p><pre><code>let a = [32, 33, 16, 40];let result = a.filter(function (value, index, array) &#123; return value &gt;= 18; // è¿”å›aæ•°ç»„ä¸­æ‰€æœ‰å¤§äº18çš„å…ƒç´ &#125;);console.log(result,a);// [32,33,40] [32,33,16,40]</code></pre><p><strong>map å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†ï¼Œè¿”å›æ–°çš„æ•°ç»„</strong></p><p>å®šä¹‰ï¼šåˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶ç»“æœæ˜¯è¯¥æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½è°ƒç”¨ä¸€ä¸ªæä¾›çš„å‡½æ•°åè¿”å›çš„ç»“æœã€‚</p><p>è¯­æ³•ï¼š</p><p><strong>let new_array = arr.map(function(currentValue, index, arr), thisArg)</strong><br>å‚æ•°:(è¿™å‡ ä¸ªæ–¹æ³•çš„å‚æ•°ï¼Œè¯­æ³•éƒ½ç±»ä¼¼)</p><p>function(å¿…é¡»): æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ éœ€è¦è°ƒç”¨çš„å‡½æ•°ã€‚</p><blockquote><p>// å›è°ƒå‡½æ•°çš„å‚æ•°<br>\1. currentValue(å¿…é¡»),æ•°ç»„å½“å‰å…ƒç´ çš„å€¼<br>\2. index(å¯é€‰), å½“å‰å…ƒç´ çš„ç´¢å¼•å€¼<br>\3. arr(å¯é€‰),æ•°ç»„å¯¹è±¡æœ¬èº«</p></blockquote><p>thisValue(å¯é€‰): å½“æ‰§è¡Œå›è°ƒå‡½æ•°æ—¶thisç»‘å®šå¯¹è±¡çš„å€¼ï¼Œé»˜è®¤å€¼ä¸ºundefined</p><p>eg:</p><pre><code>let a = [&#39;1&#39;,&#39;2&#39;,&#39;3&#39;,&#39;4&#39;];let result = a.map(function (value, index, array) &#123; return value + &#39;æ–°æ•°ç»„çš„æ–°å…ƒç´ &#39;&#125;);console.log(result, a);// [&quot;1æ–°æ•°ç»„çš„æ–°å…ƒç´ &quot;,&quot;2æ–°æ•°ç»„çš„æ–°å…ƒç´ &quot;,&quot;3æ–°æ•°ç»„çš„æ–°å…ƒç´ &quot;,&quot;4æ–°æ•°ç»„çš„æ–°å…ƒç´ &quot;] [&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;]</code></pre><p><strong>reduce ä¸ºæ•°ç»„æä¾›ç´¯åŠ å™¨ï¼Œåˆå¹¶ä¸ºä¸€ä¸ªå€¼</strong></p><p>å®šä¹‰ï¼šreduce() æ–¹æ³•å¯¹ç´¯åŠ å™¨å’Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼ˆä»å·¦åˆ°å³ï¼‰åº”ç”¨ä¸€ä¸ªå‡½æ•°ï¼Œæœ€ç»ˆåˆå¹¶ä¸ºä¸€ä¸ªå€¼ã€‚</p><p>è¯­æ³•ï¼š</p><p><strong>array.reduce(function(total, currentValue, currentIndex, arr), initialValue)</strong><br>å‚æ•°ï¼š</p><p>function(å¿…é¡»): æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ éœ€è¦è°ƒç”¨çš„å‡½æ•°ã€‚</p><blockquote><p>// å›è°ƒå‡½æ•°çš„å‚æ•°<br>\1. total(å¿…é¡»)ï¼Œåˆå§‹å€¼, æˆ–è€…ä¸Šä¸€æ¬¡è°ƒç”¨å›è°ƒè¿”å›çš„å€¼<br>\2. currentValue(å¿…é¡»),æ•°ç»„å½“å‰å…ƒç´ çš„å€¼<br>\3. index(å¯é€‰), å½“å‰å…ƒç´ çš„ç´¢å¼•å€¼<br>\4. arr(å¯é€‰),æ•°ç»„å¯¹è±¡æœ¬èº«</p></blockquote><p>initialValue(å¯é€‰): æŒ‡å®šç¬¬ä¸€æ¬¡å›è°ƒ çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚</p><p>å›è°ƒç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶:</p><ul><li>å¦‚æœ initialValue åœ¨è°ƒç”¨ reduce æ—¶è¢«æä¾›ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ª total å°†ç­‰äº initialValueï¼Œæ­¤æ—¶ currentValue ç­‰äºæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå€¼ï¼›</li><li>å¦‚æœ initialValue æœªè¢«æä¾›ï¼Œé‚£ä¹ˆ total ç­‰äºæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå€¼ï¼ŒcurrentValue ç­‰äºæ•°ç»„ä¸­çš„ç¬¬äºŒä¸ªå€¼ã€‚æ­¤æ—¶å¦‚æœæ•°ç»„ä¸ºç©ºï¼Œé‚£ä¹ˆå°†æŠ›å‡º TypeErrorã€‚</li><li>å¦‚æœæ•°ç»„ä»…æœ‰ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”æ²¡æœ‰æä¾› initialValueï¼Œæˆ–æä¾›äº† initialValue ä½†æ•°ç»„ä¸ºç©ºï¼Œé‚£ä¹ˆå›è°ƒä¸ä¼šè¢«æ‰§è¡Œï¼Œæ•°ç»„çš„å”¯ä¸€å€¼å°†è¢«è¿”å›ã€‚</li></ul><p>eg:</p><pre><code>// æ•°ç»„æ±‚å’Œlet sum = [0, 1, 2, 3].reduce(function (a, b) &#123; return a + b;&#125;, 0);// 6// å°†äºŒç»´æ•°ç»„è½¬åŒ–ä¸ºä¸€ç»´ å°†æ•°ç»„å…ƒç´ å±•å¼€let flattened = [[0, 1], [2, 3], [4, 5]].reduce( (a, b) =&gt; a.concat(b), []); // [0, 1, 2, 3, 4, 5]</code></pre><p><strong>reduceRight ä»å³è‡³å·¦ç´¯åŠ </strong></p><p>è¿™ä¸ªæ–¹æ³•é™¤äº†ä¸reduceæ‰§è¡Œæ–¹å‘ç›¸åå¤–ï¼Œå…¶ä»–å®Œå…¨ä¸å…¶ä¸€è‡´ï¼Œè¯·å‚è€ƒä¸Šè¿° reduce æ–¹æ³•ä»‹ç»ã€‚</p><p><strong>ES6ï¼šfind()&amp; findIndex() æ ¹æ®æ¡ä»¶æ‰¾åˆ°æ•°ç»„æˆå‘˜</strong></p><p>find()å®šä¹‰ï¼šç”¨äºæ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜ï¼Œå¹¶è¿”å›è¯¥æˆå‘˜ï¼Œå¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„æˆå‘˜ï¼Œåˆ™è¿”å›undefinedã€‚</p><p>findIndex()å®šä¹‰ï¼šè¿”å›ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜çš„ä½ç½®ï¼Œå¦‚æœæ‰€æœ‰æˆå‘˜éƒ½ä¸ç¬¦åˆæ¡ä»¶ï¼Œåˆ™è¿”å›-1ã€‚</p><p>è¿™ä¸¤ä¸ªæ–¹æ³•</p><p>è¯­æ³•ï¼š</p><pre><code>let new_array = arr.find(function(currentValue, index, arr), thisArg)let new_array = arr.findIndex(function(currentValue, index, arr), thisArg)</code></pre><p>å‚æ•°:(è¿™ä¸ªæ–¹æ³•çš„å‚æ•°ï¼Œè¯­æ³•éƒ½ç±»ä¼¼)</p><p>function(å¿…é¡»): æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ éœ€è¦è°ƒç”¨çš„å‡½æ•°ã€‚</p><blockquote><p>// å›è°ƒå‡½æ•°çš„å‚æ•°<br>\1. currentValue(å¿…é¡»),æ•°ç»„å½“å‰å…ƒç´ çš„å€¼<br>\2. index(å¯é€‰), å½“å‰å…ƒç´ çš„ç´¢å¼•å€¼<br>\3. arr(å¯é€‰),æ•°ç»„å¯¹è±¡æœ¬èº«</p></blockquote><p>thisValue(å¯é€‰): å½“æ‰§è¡Œå›è°ƒå‡½æ•°æ—¶thisç»‘å®šå¯¹è±¡çš„å€¼ï¼Œé»˜è®¤å€¼ä¸ºundefined</p><p>è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥è¯†åˆ«NaN,å¼¥è¡¥äº†indexOfçš„ä¸è¶³.</p><p>eg:</p><pre><code>// findlet a = [1, 4, -5, 10].find((n) =&gt; n &lt; 0); // è¿”å›å…ƒç´ -5let b = [1, 4, -5, 10,NaN].find((n) =&gt; Object.is(NaN, n)); // è¿”å›å…ƒç´ NaN// findIndexlet a = [1, 4, -5, 10].findIndex((n) =&gt; n &lt; 0); // è¿”å›ç´¢å¼•2let b = [1, 4, -5, 10,NaN].findIndex((n) =&gt; Object.is(NaN, n)); // è¿”å›ç´¢å¼•4</code></pre><p>æµè§ˆå™¨å…¼å®¹(MDN):Chrome 45,Firefox 25,Opera 32, Safari 8, Edge yes,</p><p><strong>ES6 keys()&amp;values()&amp;entries() éå†é”®åã€éå†é”®å€¼ã€éå†é”®å+é”®å€¼</strong></p><p>å®šä¹‰ï¼šä¸‰ä¸ªæ–¹æ³•éƒ½è¿”å›ä¸€ä¸ªæ–°çš„ Array Iterator å¯¹è±¡ï¼Œå¯¹è±¡æ ¹æ®æ–¹æ³•ä¸åŒåŒ…å«ä¸åŒçš„å€¼ã€‚</p><p>è¯­æ³•ï¼š</p><pre><code>array.keys()array.values()array.entries()</code></pre><p>å‚æ•°ï¼šæ— ã€‚</p><p>éå†æ —å­(æ‘˜è‡ª<a href="http://es6.ruanyifeng.com/#docs/array#%E6%95%B0%E7%BB%84%E5%AE%9E%E4%BE%8B%E7%9A%84-entries%EF%BC%8Ckeys-%E5%92%8C-values">ECMAScript 6 å…¥é—¨</a>)ï¼š</p><pre><code>for (let index of [&#39;a&#39;, &#39;b&#39;].keys()) &#123; console.log(index);&#125;// 0// 1</code></pre><p>â€‹<br>â€‹    for (let elem of [â€˜aâ€™, â€˜bâ€™].values()) {<br>â€‹     console.log(elem);<br>â€‹    }<br>â€‹    // â€˜aâ€™<br>â€‹    // â€˜bâ€™</p><p>â€‹<br>â€‹    for (let [index, elem] of [â€˜aâ€™, â€˜bâ€™].entries()) {<br>â€‹     console.log(index, elem);<br>â€‹    }<br>â€‹    // 0 â€œaâ€<br>â€‹    // 1 â€œbâ€</p><p>åœ¨for..ofä¸­å¦‚æœéå†ä¸­é€”è¦é€€å‡ºï¼Œå¯ä»¥ä½¿ç”¨breaké€€å‡ºå¾ªç¯ã€‚</p><p>å¦‚æœä¸ä½¿ç”¨forâ€¦ofå¾ªç¯ï¼Œå¯ä»¥æ‰‹åŠ¨è°ƒç”¨éå†å™¨å¯¹è±¡çš„nextæ–¹æ³•ï¼Œè¿›è¡Œéå†:</p><pre><code>let letter = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;];let entries = letter.entries();console.log(entries.next().value); // [0, &#39;a&#39;]console.log(entries.next().value); // [1, &#39;b&#39;]console.log(entries.next().value); // [2, &#39;c&#39;]</code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é˜…è¯»é¡»çŸ¥</title>
      <link href="/2021/08/18/readingInstructions/"/>
      <url>/2021/08/18/readingInstructions/</url>
      
        <content type="html"><![CDATA[<p>å†…éƒ¨å¼•å…¥éŸ³ä¹ç»„ä»¶(æ’­æ”¾å™¨åœ¨å·¦ä¸‹è§’,é»˜è®¤ä¸æ’­æ”¾)</p><p>å¯å®ŒæˆåŸºæœ¬æ’­æ”¾å™¨åŠŸèƒ½(æ’­æ”¾é¡ºåºä¸ºéšæœºæ’­æ”¾)</p><p>æ’­æ”¾å™¨éŸ³é‡é»˜è®¤ä¸º0.7(ä¿®æ”¹åé»˜è®¤è®°å¿†æ¨¡å¼,æ•°æ®æ¸…é™¤åæ¢å¤é»˜è®¤éŸ³é‡)</p><p>æœ¬ç«™ç•™è¨€å’Œè¯„è®ºåŠŸèƒ½æš‚æ—¶å…³é—­</p><p>å¦‚æœ‰ç–‘é—®å¯è”ç³»æœ¬ç«™å†…ç½®è”ç³»æ–¹å¼</p><p>ç”±äºéƒ¨åˆ†åŸå› ,åŸåŸŸåå·²åºŸå¼ƒ,æœ¬ç«™ç°é‡æ–°éƒ¨ç½²,åŸŸåå¤‡æ¡ˆå°šæœªå®Œæˆ,ç›®å‰ä½¿ç”¨ä¸´æ—¶åŸŸåã€‚å›¾åºŠåŠŸèƒ½å·²æŸå,æ­£åœ¨ä¿®å¤ä¸­â€”â€”2023å¹´02æœˆ17æ—¥</p>]]></content>
      
      
      <categories>
          
          <category> å…¶ä»– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å…¶ä»– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°ç»„æ‰å¹³åŒ–</title>
      <link href="/2021/08/18/article0/"/>
      <url>/2021/08/18/article0/</url>
      
        <content type="html"><![CDATA[<p>ä¾‹ï¼šå°†ä¸‹é¢æ•°ç»„æ‰å¹³åŒ–å¤„ç†ã€‚</p><p><code>const arr = [1, [2, 3, [4, 5]]] // ---&gt; [ 1, 2, 3, 4, 5 ]</code></p><h3 id="1-ä½¿ç”¨-flat"><a href="#1-ä½¿ç”¨-flat" class="headerlink" title="1.ä½¿ç”¨ flat()"></a>1.ä½¿ç”¨ flat()</h3><blockquote><p><code>flat()</code> æ–¹æ³•æ˜¯ ES10 æå‡ºçš„ï¼Œå®ƒä¼šæŒ‰ç…§ä¸€ä¸ªå¯æŒ‡å®šçš„æ·±åº¦é€’å½’éå†æ•°ç»„ï¼Œå¹¶å°†æ‰€æœ‰å…ƒç´ ä¸éå†åˆ°çš„å­æ•°ç»„ä¸­çš„å…ƒç´ åˆå¹¶ä¸ºä¸€ä¸ªæ–°æ•°ç»„è¿”å›ã€‚ï¼ˆflat æ„ä¸ºâ€œæ°´å¹³çš„ï¼›å¹³å¦çš„â€ï¼‰</p></blockquote><pre><code>const result1 = arr.flat(Infinity) // æŒ‡å®šæ·±åº¦ä¸ºæ— é™console.log(result1) // [ 1, 2, 3, 4, 5 ]const result2 = arr.flat(1) // æŒ‡å®šæ·±åº¦ä¸º1console.log(result2) // [ 1, 2, 3, [ 4, 5 ] ]const result3 = arr.flat(2) // æŒ‡å®šæ·±åº¦ä¸º2console.log(result3) // [ 1, 2, 3, 4, 5 ]</code></pre><h3 id="2-ä½¿ç”¨æ­£åˆ™"><a href="#2-ä½¿ç”¨æ­£åˆ™" class="headerlink" title="2.ä½¿ç”¨æ­£åˆ™"></a>2.ä½¿ç”¨æ­£åˆ™</h3><ul><li><p>ä»¥ä¸‹åšæ³•å¾—åˆ°çš„æ•°ç»„å…ƒç´ éƒ½ä¼šå˜æˆå­—ç¬¦ä¸²ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼›</p><p>const result1 = JSON.stringify(arr).replace(/[|]/g, â€˜â€™).split(â€˜,â€™)<br>console.log(result1) // [ â€˜1â€™, â€˜2â€™, â€˜3â€™, â€˜4â€™, â€˜5â€™ ] æ•°ç»„å…ƒç´ éƒ½å˜æˆäº†å­—ç¬¦ä¸²</p></li><li><p>å¯¹ä»¥ä¸Šæ–¹æ³•è¿›è¡Œä¼˜åŒ–å¤„ç†ï¼›</p><p>const result2 = JSON.parse(â€˜[â€˜ + JSON.stringify(arr).replace(/[|]/g, â€˜â€™) + â€˜]â€™)<br>console.log(result2) // [ 1, 2, 3, 4, 5 ]</p></li></ul><h3 id="3-ä½¿ç”¨-reduce-concat"><a href="#3-ä½¿ç”¨-reduce-concat" class="headerlink" title="3.ä½¿ç”¨ reduce()+concat()"></a>3.ä½¿ç”¨ reduce()+concat()</h3><blockquote><p>ä½¿ç”¨ reduce æ‹¿åˆ°æ•°ç»„çš„å½“å‰å€¼å’Œå‰ä¸€é¡¹å€¼ï¼Œåˆ¤æ–­å½“å‰å€¼æ˜¯å¦ä¸ºæ•°ç»„ï¼Œåˆå§‹å€¼è®¾ç½®ä¸º<code>[]</code>ï¼Œç„¶åä½¿ç”¨ concat è¿›è¡Œæ•°ç»„åˆå¹¶ã€‚</p></blockquote><ul><li><p>reduce()æ–¹æ³•ï¼šå¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€ä¸ªç”±æ‚¨æä¾›çš„ reducer å‡½æ•°(å‡åºæ‰§è¡Œ)ï¼Œå°†å…¶ç»“æœæ±‡æ€»ä¸ºå•ä¸ªè¿”å›å€¼ã€‚</p></li><li><p>concat()æ–¹æ³•ï¼šç”¨äºåˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°ç»„ã€‚æ­¤æ–¹æ³•ä¸ä¼šæ›´æ”¹ç°æœ‰æ•°ç»„ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚</p><p>function flatten(arr) {<br>return arr.reduce((pre, current) =&gt; {<br>return pre.concat(Array.isArray(current) ? flatten(current) : current)<br>}, [])<br>}</p><p>const result = flatten(arr)<br>console.log(result) // [ 1, 2, 3, 4, 5 ]</p></li></ul><h3 id="4-ä½¿ç”¨å‡½æ•°é€’å½’"><a href="#4-ä½¿ç”¨å‡½æ•°é€’å½’" class="headerlink" title="4.ä½¿ç”¨å‡½æ•°é€’å½’"></a>4.ä½¿ç”¨å‡½æ•°é€’å½’</h3><blockquote><p>å¾ªç¯éå†æ•°ç»„ï¼Œå‘ç°å«æœ‰æ•°ç»„å…ƒç´ å°±è¿›è¡Œé€’å½’å¤„ç†ï¼Œæœ€ç»ˆå°†æ•°ç»„è½¬ä¸ºä¸€ç»´æ•°ç»„ã€‚</p></blockquote><pre><code>const result = []function exec(arr) &#123;  arr.forEach(item =&gt; &#123;    if (Array.isArray(item)) &#123;      exec(item)    &#125; else &#123;      result.push(item)    &#125;  &#125;)&#125;exec(arr)console.log(result) // [ 1, 2, 3, 4, 5 ]</code></pre><h3 id="5-ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦-concat"><a href="#5-ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦-concat" class="headerlink" title="5.ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦+concat()"></a>5.ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦+concat()</h3><blockquote><p>ES6 æ–°æ¨å‡ºçš„æ‰©å±•è¿ç®—ç¬¦èƒ½å¯¹æ•°ç»„è¿›è¡Œé™ç»´å¤„ç†ï¼ˆä¸€æ¬¡é™ä¸€ç»´ï¼‰ï¼Œå¾ªç¯åˆ¤æ–­æ˜¯å¦å«æœ‰æ•°ç»„ï¼Œè¿›è¡Œ concat åˆå¹¶ã€‚</p></blockquote><ul><li><p>some()æ–¹æ³•ï¼šæµ‹è¯•æ•°ç»„ä¸­æ˜¯ä¸æ˜¯è‡³å°‘æœ‰ 1 ä¸ªå…ƒç´ é€šè¿‡äº†è¢«æä¾›çš„å‡½æ•°æµ‹è¯•ï¼ˆå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ª Boolean ç±»å‹çš„å€¼ï¼‰ã€‚</p><p>function flatten(arr) {<br>while (arr.some(item =&gt; Array.isArray(item))) {<br>arr = [].concat(â€¦arr)<br>}</p><p>return arr<br>}</p><p>const result = flatten(arr)<br>console.log(result) // [ 1, 2, 3, 4, 5 ]</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML5æ—¶é’Ÿ</title>
      <link href="/2020/11/19/article5/"/>
      <url>/2020/11/19/article5/</url>
      
        <content type="html"><![CDATA[<p>Canvasï¼š<a href="https://developer.mozilla.org/en/Canvas_tutorial%E3%80%81http://www.w3.org/TR/2dcontext/">https://developer.mozilla.org/en/Canvas_tutorialã€http://www.w3.org/TR/2dcontext/</a><br>ä¸‰è§’å‡½æ•°ï¼š<a href="http://zh.wikipedia.org/zh/%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0">http://zh.wikipedia.org/zh/%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0</a><br>JavaScriptï¼š<a href="https://developer.mozilla.org/en/JavaScript%E3%80%81http://www.w3school.com.cn/js/index.asp">https://developer.mozilla.org/en/JavaScriptã€http://www.w3school.com.cn/js/index.asp</a></p><h1 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h1><pre><code>&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;/&gt;&lt;title&gt;è¶…é…·HTML5æ—¶é’Ÿ(ä½œè€…ï¼šhttp://www.cnblogs.com/jscode/)&lt;/title&gt;&lt;style type=&quot;text/css&quot;&gt;    .time &#123;        text-align: center;        width:400px;        font-family: &quot;Book Antiqua&quot;,Palatino,serif;        font-size: 40px;        font-weight: bold;        text-shadow: 1px 1px 3px #333;        position:absolute;    &#125;    .time em &#123;        background: white;        position: absolute;        top: 5px;        left: 130px;        height: 18px;        width: 140px;        opacity: 0.4;    &#125;&lt;/style&gt;&lt;script type=&quot;text/javascript&quot;&gt;    var canvas, context;    function DrawClock() &#123;        canvas = document.getElementById(&quot;canvas&quot;);        context = canvas.getContext(&quot;2d&quot;);        setInterval(&quot;drawbackground()&quot;, 1000);    &#125;    function drawbackground() &#123;        var radius = Math.min(canvas.width / 2, canvas.height / 2) - 15;        var centerx = canvas.width / 2;        var centery = canvas.height / 2;        context.clearRect(0, 0, canvas.width, canvas.height);        context.save();        context.lineWidth = 15;        context.fillStyle = &quot;#EFEFEF&quot;;        context.strokeStyle = &quot;#000&quot;;        context.beginPath();        context.arc(centerx, centery, radius, 0, Math.PI * 2, 0);        context.fill();        context.stroke();        context.closePath();        context.restore();        for (var i = 0; i &lt; 60; i++) &#123;            context.save();            context.fillStyle = &quot;#EFEFEF&quot;;            context.strokeStyle = &quot;#000&quot;;            if (i % 5 == 0) &#123;                context.lineWidth = 3;            &#125;            context.beginPath();            context.moveTo(centerx, centery);            context.lineTo(centerx + (radius-6) * Math.cos(i * 6 * Math.PI / 180), centery - (radius-5) * Math.sin(i * 6 * Math.PI / 180));            context.fill();            context.stroke();            context.closePath();            context.restore();        &#125;        context.moveTo(centerx, centery);        context.save();        context.fillStyle = &quot;#EFEFEF&quot;;        context.strokeStyle = &quot;#EFEFEF&quot;;        context.beginPath();        context.arc(centerx, centery, radius-15, 0, Math.PI * 2, 0);        context.fill();        context.stroke();        context.closePath();        context.restore();        var r = radius - 25;        context.font = &quot;bold 20px å®‹ä½“&quot;;        Drawtext(&quot;1&quot;, centerx + (Math.cos(60 * Math.PI / 180) * r), centery - (Math.sin(60 * Math.PI / 180) * r));        Drawtext(&quot;2&quot;, centerx + (Math.cos(30 * Math.PI / 180) * r), centery - (Math.sin(30 * Math.PI / 180) * r));        Drawtext(&quot;3&quot;, centerx + (Math.cos(0 * Math.PI / 180) * r), centery - (Math.sin(0 * Math.PI / 180) * r));        Drawtext(&quot;4&quot;, centerx + (Math.cos(330 * Math.PI / 180) * r), centery - (Math.sin(330 * Math.PI / 180) * r));        Drawtext(&quot;5&quot;, centerx + (Math.cos(300 * Math.PI / 180) * r), centery - (Math.sin(300 * Math.PI / 180) * r));        Drawtext(&quot;6&quot;, centerx + (Math.cos(270 * Math.PI / 180) * r), centery - (Math.sin(270 * Math.PI / 180) * r));        Drawtext(&quot;7&quot;, centerx + (Math.cos(240 * Math.PI / 180) * r), centery - (Math.sin(240 * Math.PI / 180) * r));        Drawtext(&quot;8&quot;, centerx + (Math.cos(210 * Math.PI / 180) * r), centery - (Math.sin(210 * Math.PI / 180) * r));        Drawtext(&quot;9&quot;, centerx + (Math.cos(180 * Math.PI / 180) * r), centery - (Math.sin(180 * Math.PI / 180) * r));        Drawtext(&quot;10&quot;, centerx + (Math.cos(150 * Math.PI / 180) * r), centery - (Math.sin(150 * Math.PI / 180) * r));        Drawtext(&quot;11&quot;, centerx + (Math.cos(120 * Math.PI / 180) * r), centery - (Math.sin(120 * Math.PI / 180) * r));        Drawtext(&quot;12&quot;, centerx + (Math.cos(90 * Math.PI / 180) * r), centery - (Math.sin(90 * Math.PI / 180) * r));        context.save();        context.fillStyle=&quot;black&quot;;        context.beginPath();        context.arc(centerx,centery,10,0,Math.PI*2,0);        context.fill();        context.stroke();        context.closePath();        context.restore();        drawpoint(centerx, centery, radius);    &#125;    function drawpoint(centerx, centery, radius) &#123;        var date = new Date();        var h = date.getHours();        h = h &lt; 13 ? h : h - 12;        var m = date.getMinutes();        var s = date.getSeconds();        var th = date.getHours() &lt; 10 ? &quot;0&quot; + date.getHours() : date.getHours();        var tm = m &lt; 10 ? &quot;0&quot; + m : m;        var ts = s &lt; 10 ? &quot;0&quot; + s : s;        document.getElementById(&quot;currtime&quot;).innerHTML = th + &quot;:&quot; + tm + &quot;:&quot; + ts;        var hr = h * 30 * Math.PI / 180 + (m / 60) * 30 * Math.PI / 180 + 90 * Math.PI / 180;        var mr = m * 6 * Math.PI / 180 + s / 60 * 6 * Math.PI / 180 + 90 * Math.PI / 180;        var sr = s * 6 * Math.PI / 180 + 90 * Math.PI / 180;        context.save();        context.lineWidth = 5;        context.fillStyle = &quot;darkgray&quot;;        context.strokeStyle = &quot;black&quot;;        context.beginPath();        context.moveTo(centerx + 20 * Math.cos(hr), centery + 20 * Math.sin(hr));        context.lineTo(centerx - (radius - 120) * Math.cos(hr), centery - (radius - 120) * Math.sin(hr));        context.moveTo(centerx + 20 * Math.cos(mr), centery + 20 * Math.sin(mr));        context.lineTo(centerx - (radius - 80) * Math.cos(mr), centery - (radius - 80) * Math.sin(mr));        context.moveTo(centerx + 20 * Math.cos(sr), centery + 20 * Math.sin(sr));        context.lineTo(centerx - (radius - 50) * Math.cos(sr), centery - (radius - 50) * Math.sin(sr));        context.closePath();        context.fill();        context.stroke();        context.restore();    &#125;    function Drawtext(text, x, y) &#123;        context.save();        x -= (context.measureText(text).width / 2);        y += 9;        context.beginPath();        context.translate(x, y);        context.fillText(text, 0, 0);        context.restore();    &#125;    window.onload = DrawClock;&lt;/script&gt;&lt;/head&gt;&lt;body&gt;    &lt;h1&gt;è¶…é…·HTML5æ—¶é’Ÿ(ä½œè€…ï¼šhttp://www.cnblogs.com/jscode/)&lt;/h1&gt;    &lt;canvas id=&quot;canvas&quot; width=&quot;400px&quot; height=&quot;400px&quot;&gt;&lt;/canvas&gt;    &lt;div class=&quot;time&quot;&gt;&lt;span id=&quot;currtime&quot;&gt;00:00:00&lt;/span&gt;&lt;em&gt;&lt;/em&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><p>æ–¹æ³•ä½œç”¨è§£é‡Šï¼š</p><p>DrawClock æ–¹æ³•å–å¾— Canvas ä¸Šä¸‹æ–‡</p><p>drawbackground æ–¹æ³•ä¸»è¦æ˜¯ç”»æ—¶é’Ÿçš„èƒŒæ™¯éƒ¨åˆ†ï¼šè¾¹æ¡†ã€æ–‡å­—ã€åˆ»åº¦çº¿</p><p>drawpoint æ–¹æ³•ç”¨æ¥ç”»æ—¶ã€åˆ†ã€ç§’çº¿</p><p>Drawtext æ–¹æ³•æ˜¯æ·»åŠ æ–‡å­—çš„</p>]]></content>
      
      
      <categories>
          
          <category> HTML5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML5 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
